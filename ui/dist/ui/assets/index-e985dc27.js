var jj=Object.defineProperty;var Cj=(e,t,n)=>t in e?jj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ca=(e,t,n)=>(Cj(e,typeof t!="symbol"?t+"":t,n),n);import{aK as Ch,aL as ql,aM as Nr,aN as HO,aO as ad,aP as Yv,aQ as Qc,aR as dp,aS as RA,aT as ml,aU as El,ah as ri,aV as Dj,aW as Vs,aX as u1,aY as Ij,aZ as qv,a_ as gl,a$ as Kv,b0 as Lj,b1 as Gh,b2 as qm,aF as Ol,b3 as Fj,b4 as pp,b5 as jA,b6 as hp,b7 as ud,z as l1,b8 as Xr,b9 as Km,ba as Zv,bb as Kl,bc as xo,bd as Jc,be as Ws,bf as Vh,bg as Jv,bh as Ql,bi as pa,bj as Wr,bk as Zm,bl as $j,bm as CA,bn as ef,bo as DA,bp as IA,bq as M0,br as $i,ai as _l,bs as Bj,bt as Uj,bu as Jm,bv as LA,bw as vp,bx as FA,ac as s1,by as Wh,A as zh,bz as $v,bA as Qv,af as $A,bB as BA,bC as Gj,bD as Dh,bE as Vj,bF as UA,bG as GA,bH as Wj,bI as VA,bJ as zj,bK as Hj,bL as Xj,bM as Yj,bN as qj,bO as Om,bP as Kj,bQ as Zj,bR as Jj,bS as WA,bT as zA,bU as HA,bV as XA,bW as c1,bX as Qj,bY as ey,bZ as YA,b_ as eC,b$ as qA,c0 as KA,c1 as tC,c2 as nC,c3 as rC,c4 as up,ae as oC,c5 as iC,c6 as aC,aH as uC,c7 as lC,ag as sC,c8 as cC,c9 as fC,ca as dC,cb as pC,ab as hC,aj as vC,cc as yC,aG as mC,cd as gC,ce as _C,cf as bC,cg as wC,ch as EC,ci as OC,aa as xC,cj as SC,ck as AC,ak as TC,cl as MC,p as PC,cm as kC,cn as NC,co as RC,cp as Dr,cq as St,cr as Oo,cs as jC,ct as $o,cu as ue,cv as hu,cw as Ih,cx as rt,cy as Dn,cz as F,cA as U,cB as ge,cC as ni,cD as Bi,cE as xn,cF as Yt,cG as Oh,cH as Hr,cI as xh,cJ as Ve,cK as It,cL as um,cM as XO,cN as fr,cO as YO,cP as vm,cQ as ha,cR as ty,cS as xl,cT as at,cU as Lh,cV as rd,cW as CC,cX as ZA,cY as da,cZ as nn,c_ as f1,c$ as ti,d0 as d1,d1 as nf,d2 as yp,T as DC,d3 as p1,d4 as Fh,d5 as IC,d6 as LC,d7 as JA,d8 as FC,d9 as QA,da as $C,db as BC,dc as UC,dd as GC,de as VC,df as WC,dg as P0,dh as lp,di as zC,dj as jv,dk as eT,dl as HC,dm as qO,dn as lm,dp as XC,dq as YC,dr as qC,Q as Nv,ds as KC,dt as tT,du as k0,dv as ZC,dw as a0,dx as JC,dy as QC}from"./index-1a322249.js";import{_ as Qm,a as eD,b as nT,c as tD,d as nD}from"./ReasoningParamSettingDialog.vue_vue_type_script_setup_true_lang-2680ab56.js";import{b as rT,c as mp,v as Hh,d as rD,e as oD,g as oT,f as KO,a as iD,r as aD,h as uD}from"./reduce-5e7685bc.js";import{h as lD,i as iT,j as sD,k as cD,l as fD,n as dD,o as pD,p as hD,q as vD,z as yD,f as mD,s as gD,a as _D,m as bD,b as wD,d as ED,e as OD,g as xD,c as SD,r as AD,u as TD}from"./zipObject-00eb8117.js";import{S as h1,_ as MD,a as PD}from"./sortable.esm-e19ded47.js";var kD=0/0;function ZO(e){return typeof e=="number"?e:Ch(e)?kD:+e}function eg(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=ql(n),a=ql(a)):(n=ZO(n),a=ZO(a)),r=e(n,a)}return r}}var ND=eg(function(e,t){return e+t},0);const RD=ND;var jD="Expected a function";function CD(e,t){if(typeof t!="function")throw new TypeError(jD);return e=Nr(e),function(){if(--e<1)return t.apply(this,arguments)}}var DD=HO&&new HO;const xm=DD;var ID=xm?function(e,t){return xm.set(e,t),e}:ad;const aT=ID;function Bv(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Yv(e.prototype),a=e.apply(n,t);return Qc(a)?a:n}}var LD=1;function FD(e,t,n){var a=t&LD,r=Bv(e);function s(){var c=this&&this!==dp&&this instanceof s?r:e;return c.apply(a?n:this,arguments)}return s}var $D=Math.max;function uT(e,t,n,a){for(var r=-1,s=e.length,c=n.length,v=-1,h=t.length,g=$D(s-c,0),_=Array(h+g),E=!a;++v<h;)_[v]=t[v];for(;++r<c;)(E||r<s)&&(_[n[r]]=e[r]);for(;g--;)_[v++]=e[r++];return _}var BD=Math.max;function lT(e,t,n,a){for(var r=-1,s=e.length,c=-1,v=n.length,h=-1,g=t.length,_=BD(s-v,0),E=Array(_+g),O=!a;++r<_;)E[r]=e[r];for(var S=r;++h<g;)E[S+h]=t[h];for(;++c<v;)(O||r<s)&&(E[S+n[c]]=e[r++]);return E}function UD(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function tg(){}var GD=4294967295;function Vr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=GD,this.__views__=[]}Vr.prototype=Yv(tg.prototype);Vr.prototype.constructor=Vr;var VD=xm?function(e){return xm.get(e)}:RA;const v1=VD;var WD={};const Th=WD;var zD=Object.prototype,HD=zD.hasOwnProperty;function ym(e){for(var t=e.name+"",n=Th[t],a=HD.call(Th,t)?n.length:0;a--;){var r=n[a],s=r.func;if(s==null||s==e)return r.name}return t}function bl(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}bl.prototype=Yv(tg.prototype);bl.prototype.constructor=bl;function sT(e){if(e instanceof Vr)return e.clone();var t=new bl(e.__wrapped__,e.__chain__);return t.__actions__=ml(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var XD=Object.prototype,YD=XD.hasOwnProperty;function ie(e){if(El(e)&&!ri(e)&&!(e instanceof Vr)){if(e instanceof bl)return e;if(YD.call(e,"__wrapped__"))return sT(e)}return new bl(e)}ie.prototype=tg.prototype;ie.prototype.constructor=ie;function N0(e){var t=ym(e),n=ie[t];if(typeof n!="function"||!(t in Vr.prototype))return!1;if(e===n)return!0;var a=v1(n);return!!a&&e===a[0]}var qD=Dj(aT);const cT=qD;var KD=/\{\n\/\* \[wrapped with (.+)\] \*/,ZD=/,? & /;function JD(e){var t=e.match(KD);return t?t[1].split(ZD):[]}var QD=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function eI(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(QD,`{
/* [wrapped with `+t+`] */
`)}var tI=1,nI=2,rI=8,oI=16,iI=32,aI=64,uI=128,lI=256,sI=512,cI=[["ary",uI],["bind",tI],["bindKey",nI],["curry",rI],["curryRight",oI],["flip",sI],["partial",iI],["partialRight",aI],["rearg",lI]];function fI(e,t){return Vs(cI,function(n){var a="_."+n[0];t&n[1]&&!u1(e,a)&&e.push(a)}),e.sort()}function fT(e,t,n){var a=t+"";return Ij(e,eI(a,fI(JD(a),n)))}var dI=1,pI=2,hI=4,vI=8,JO=32,QO=64;function dT(e,t,n,a,r,s,c,v,h,g){var _=t&vI,E=_?c:void 0,O=_?void 0:c,S=_?s:void 0,k=_?void 0:s;t|=_?JO:QO,t&=~(_?QO:JO),t&hI||(t&=~(dI|pI));var M=[e,t,r,S,E,k,O,v,h,g],j=n.apply(void 0,M);return N0(e)&&cT(j,M),j.placeholder=a,fT(j,e,t)}function Xh(e){var t=e;return t.placeholder}var yI=Math.min;function mI(e,t){for(var n=e.length,a=yI(t.length,n),r=ml(e);a--;){var s=t[a];e[a]=qv(s,n)?r[s]:void 0}return e}var ex="__lodash_placeholder__";function od(e,t){for(var n=-1,a=e.length,r=0,s=[];++n<a;){var c=e[n];(c===t||c===ex)&&(e[n]=ex,s[r++]=n)}return s}var gI=1,_I=2,bI=8,wI=16,EI=128,OI=512;function ng(e,t,n,a,r,s,c,v,h,g){var _=t&EI,E=t&gI,O=t&_I,S=t&(bI|wI),k=t&OI,M=O?void 0:Bv(e);function j(){for(var I=arguments.length,N=Array(I),B=I;B--;)N[B]=arguments[B];if(S)var q=Xh(j),ee=UD(N,q);if(a&&(N=uT(N,a,r,S)),s&&(N=lT(N,s,c,S)),I-=ee,S&&I<g){var Y=od(N,q);return dT(e,t,ng,j.placeholder,n,N,Y,v,h,g-I)}var Q=E?n:this,z=O?Q[e]:e;return I=N.length,v?N=mI(N,v):k&&I>1&&N.reverse(),_&&h<I&&(N.length=h),this&&this!==dp&&this instanceof j&&(z=M||Bv(z)),z.apply(Q,N)}return j}function xI(e,t,n){var a=Bv(e);function r(){for(var s=arguments.length,c=Array(s),v=s,h=Xh(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==h&&c[s-1]!==h?[]:od(c,h);if(s-=g.length,s<n)return dT(e,t,ng,r.placeholder,void 0,c,g,void 0,void 0,n-s);var _=this&&this!==dp&&this instanceof r?a:e;return gl(_,this,c)}return r}var SI=1;function AI(e,t,n,a){var r=t&SI,s=Bv(e);function c(){for(var v=-1,h=arguments.length,g=-1,_=a.length,E=Array(_+h),O=this&&this!==dp&&this instanceof c?s:e;++g<_;)E[g]=a[g];for(;h--;)E[g++]=arguments[++v];return gl(O,r?n:this,E)}return c}var tx="__lodash_placeholder__",u0=1,TI=2,MI=4,nx=8,Av=128,rx=256,PI=Math.min;function kI(e,t){var n=e[1],a=t[1],r=n|a,s=r<(u0|TI|Av),c=a==Av&&n==nx||a==Av&&n==rx&&e[7].length<=t[8]||a==(Av|rx)&&t[7].length<=t[8]&&n==nx;if(!(s||c))return e;a&u0&&(e[2]=t[2],r|=n&u0?0:MI);var v=t[3];if(v){var h=e[3];e[3]=h?uT(h,v,t[4]):v,e[4]=h?od(e[3],tx):t[4]}return v=t[5],v&&(h=e[5],e[5]=h?lT(h,v,t[6]):v,e[6]=h?od(e[5],tx):t[6]),v=t[7],v&&(e[7]=v),a&Av&&(e[8]=e[8]==null?t[8]:PI(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var NI="Expected a function",ox=1,RI=2,l0=8,s0=16,c0=32,ix=64,ax=Math.max;function rf(e,t,n,a,r,s,c,v){var h=t&RI;if(!h&&typeof e!="function")throw new TypeError(NI);var g=a?a.length:0;if(g||(t&=~(c0|ix),a=r=void 0),c=c===void 0?c:ax(Nr(c),0),v=v===void 0?v:Nr(v),g-=r?r.length:0,t&ix){var _=a,E=r;a=r=void 0}var O=h?void 0:v1(e),S=[e,t,n,a,r,_,E,s,c,v];if(O&&kI(S,O),e=S[0],t=S[1],n=S[2],a=S[3],r=S[4],v=S[9]=S[9]===void 0?h?0:e.length:ax(S[9]-g,0),!v&&t&(l0|s0)&&(t&=~(l0|s0)),!t||t==ox)var k=FD(e,t,n);else t==l0||t==s0?k=xI(e,t,v):(t==c0||t==(ox|c0))&&!r.length?k=AI(e,t,n,a):k=ng.apply(void 0,S);var M=O?aT:cT;return fT(M(k,S),e,t)}var jI=128;function pT(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,rf(e,jI,void 0,void 0,void 0,void 0,t)}var CI=Object.prototype,DI=CI.hasOwnProperty,II=Kv(function(e,t){if(Lj(t)||Gh(t)){qm(t,Ol(t),e);return}for(var n in t)DI.call(t,n)&&Fj(e,n,t[n])});const LI=II;var FI=Kv(function(e,t){qm(t,pp(t),e)});const ux=FI;var $I=Kv(function(e,t,n,a){qm(t,pp(t),e,a)});const Sm=$I;var BI=Kv(function(e,t,n,a){qm(t,Ol(t),e,a)});const UI=BI;function y1(e,t){for(var n=-1,a=t.length,r=Array(a),s=e==null;++n<a;)r[n]=s?void 0:jA(e,t[n]);return r}var GI=hp(y1);const VI=GI;var WI="[object DOMException]",zI="[object Error]";function m1(e){if(!El(e))return!1;var t=ud(e);return t==zI||t==WI||typeof e.message=="string"&&typeof e.name=="string"&&!l1(e)}var HI=Xr(function(e,t){try{return gl(e,void 0,t)}catch(n){return m1(n)?n:new Error(n)}});const hT=HI;var XI="Expected a function";function vT(e,t){var n;if(typeof t!="function")throw new TypeError(XI);return e=Nr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var YI=1,qI=32,g1=Xr(function(e,t,n){var a=YI;if(n.length){var r=od(n,Xh(g1));a|=qI}return rf(e,a,t,n,r)});g1.placeholder={};const yT=g1;var KI=hp(function(e,t){return Vs(t,function(n){n=Km(n),Zv(e,n,yT(e[n],e))}),e});const ZI=KI;var JI=1,QI=2,eL=32,_1=Xr(function(e,t,n){var a=JI|QI;if(n.length){var r=od(n,Xh(_1));a|=eL}return rf(t,a,e,n,r)});_1.placeholder={};const tL=_1;function ld(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:Kl(e,t,n)}var nL="\\ud800-\\udfff",rL="\\u0300-\\u036f",oL="\\ufe20-\\ufe2f",iL="\\u20d0-\\u20ff",aL=rL+oL+iL,uL="\\ufe0e\\ufe0f",lL="\\u200d",sL=RegExp("["+lL+nL+aL+uL+"]");function Yh(e){return sL.test(e)}function cL(e){return e.split("")}var mT="\\ud800-\\udfff",fL="\\u0300-\\u036f",dL="\\ufe20-\\ufe2f",pL="\\u20d0-\\u20ff",hL=fL+dL+pL,vL="\\ufe0e\\ufe0f",yL="["+mT+"]",R0="["+hL+"]",j0="\\ud83c[\\udffb-\\udfff]",mL="(?:"+R0+"|"+j0+")",gT="[^"+mT+"]",_T="(?:\\ud83c[\\udde6-\\uddff]){2}",bT="[\\ud800-\\udbff][\\udc00-\\udfff]",gL="\\u200d",wT=mL+"?",ET="["+vL+"]?",_L="(?:"+gL+"(?:"+[gT,_T,bT].join("|")+")"+ET+wT+")*",bL=ET+wT+_L,wL="(?:"+[gT+R0+"?",R0,_T,bT,yL].join("|")+")",EL=RegExp(j0+"(?="+j0+")|"+wL+bL,"g");function OL(e){return e.match(EL)||[]}function Zl(e){return Yh(e)?OL(e):cL(e)}function OT(e){return function(t){t=xo(t);var n=Yh(t)?Zl(t):void 0,a=n?n[0]:t.charAt(0),r=n?ld(n,1).join(""):t.slice(1);return a[e]()+r}}var xL=OT("toUpperCase");const b1=xL;function xT(e){return b1(xo(e).toLowerCase())}function w1(e){return function(t){return e==null?void 0:e[t]}}var SL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},AL=w1(SL);const TL=AL;var ML=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,PL="\\u0300-\\u036f",kL="\\ufe20-\\ufe2f",NL="\\u20d0-\\u20ff",RL=PL+kL+NL,jL="["+RL+"]",CL=RegExp(jL,"g");function ST(e){return e=xo(e),e&&e.replace(ML,TL).replace(CL,"")}var DL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function IL(e){return e.match(DL)||[]}var LL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function FL(e){return LL.test(e)}var AT="\\ud800-\\udfff",$L="\\u0300-\\u036f",BL="\\ufe20-\\ufe2f",UL="\\u20d0-\\u20ff",GL=$L+BL+UL,TT="\\u2700-\\u27bf",MT="a-z\\xdf-\\xf6\\xf8-\\xff",VL="\\xac\\xb1\\xd7\\xf7",WL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zL="\\u2000-\\u206f",HL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",PT="A-Z\\xc0-\\xd6\\xd8-\\xde",XL="\\ufe0e\\ufe0f",kT=VL+WL+zL+HL,NT="['’]",lx="["+kT+"]",YL="["+GL+"]",RT="\\d+",qL="["+TT+"]",jT="["+MT+"]",CT="[^"+AT+kT+RT+TT+MT+PT+"]",KL="\\ud83c[\\udffb-\\udfff]",ZL="(?:"+YL+"|"+KL+")",JL="[^"+AT+"]",DT="(?:\\ud83c[\\udde6-\\uddff]){2}",IT="[\\ud800-\\udbff][\\udc00-\\udfff]",gh="["+PT+"]",QL="\\u200d",sx="(?:"+jT+"|"+CT+")",e3="(?:"+gh+"|"+CT+")",cx="(?:"+NT+"(?:d|ll|m|re|s|t|ve))?",fx="(?:"+NT+"(?:D|LL|M|RE|S|T|VE))?",LT=ZL+"?",FT="["+XL+"]?",t3="(?:"+QL+"(?:"+[JL,DT,IT].join("|")+")"+FT+LT+")*",n3="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",r3="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",o3=FT+LT+t3,i3="(?:"+[qL,DT,IT].join("|")+")"+o3,a3=RegExp([gh+"?"+jT+"+"+cx+"(?="+[lx,gh,"$"].join("|")+")",e3+"+"+fx+"(?="+[lx,gh+sx,"$"].join("|")+")",gh+"?"+sx+"+"+cx,gh+"+"+fx,r3,n3,RT,i3].join("|"),"g");function u3(e){return e.match(a3)||[]}function $T(e,t,n){return e=xo(e),t=n?void 0:t,t===void 0?FL(e)?u3(e):IL(e):e.match(t)||[]}var l3="['’]",s3=RegExp(l3,"g");function qh(e){return function(t){return rT($T(ST(t).replace(s3,"")),e,"")}}var c3=qh(function(e,t,n){return t=t.toLowerCase(),e+(n?xT(t):t)});const f3=c3;var d3=dp.isFinite,p3=Math.min;function E1(e){var t=Math[e];return function(n,a){if(n=Jc(n),a=a==null?0:p3(Nr(a),292),a&&d3(n)){var r=(xo(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+a));return r=(xo(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var h3=E1("ceil");const v3=h3;function BT(e){var t=ie(e);return t.__chain__=!0,t}var y3=Math.ceil,m3=Math.max;function g3(e,t,n){(n?Ws(e,t,n):t===void 0)?t=1:t=m3(Nr(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,s=0,c=Array(y3(a/t));r<a;)c[s++]=Kl(e,r,r+=t);return c}function gp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function _3(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Jc(n),n=n===n?n:0),t!==void 0&&(t=Jc(t),t=t===t?t:0),gp(Jc(e),t,n)}var b3=1,w3=4;function E3(e,t){return t=typeof t=="function"?t:void 0,Vh(e,b3|w3,t)}var O3=4;function x3(e,t){return t=typeof t=="function"?t:void 0,Vh(e,O3,t)}function S3(){return new bl(this.value(),this.__chain__)}function A3(e){for(var t=-1,n=e==null?0:e.length,a=0,r=[];++t<n;){var s=e[t];s&&(r[a++]=s)}return r}function T3(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Jv(ri(n)?ml(n):[n],Ql(t,1))}var M3="Expected a function";function P3(e){var t=e==null?0:e.length,n=Wr;return e=t?pa(e,function(a){if(typeof a[1]!="function")throw new TypeError(M3);return[n(a[0]),a[1]]}):[],Xr(function(a){for(var r=-1;++r<t;){var s=e[r];if(gl(s[0],this,a))return gl(s[1],this,a)}})}function UT(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function k3(e){var t=Ol(e);return function(n){return UT(n,e,t)}}var N3=1;function R3(e){return k3(Vh(e,N3))}function j3(e,t){return t==null||UT(e,t,Ol(t))}function C3(e,t,n,a){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(a,c,n(c),e)}return a}function D3(e,t,n,a){return Zm(e,function(r,s,c){t(a,r,n(r),c)}),a}function rg(e,t){return function(n,a){var r=ri(n)?C3:D3,s=t?t():{};return r(n,e,Wr(a),s)}}var I3=Object.prototype,L3=I3.hasOwnProperty,F3=rg(function(e,t,n){L3.call(e,n)?++e[n]:Zv(e,n,1)});const $3=F3;function B3(e,t){var n=Yv(e);return t==null?n:$j(n,t)}var U3=8;function O1(e,t,n){t=n?void 0:t;var a=rf(e,U3,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=O1.placeholder,a}O1.placeholder={};var G3=16;function x1(e,t,n){t=n?void 0:t;var a=rf(e,G3,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=x1.placeholder,a}x1.placeholder={};function V3(e,t){return e==null||e!==e?t:e}function GT(e,t,n,a,r,s){return Qc(e)&&Qc(t)&&(s.set(t,e),CA(e,t,void 0,GT,s),s.delete(t)),e}var W3=Kv(function(e,t,n,a){CA(e,t,n,a)});const VT=W3;var z3=Xr(function(e){return e.push(void 0,GT),gl(VT,void 0,e)});const H3=z3;var X3="Expected a function";function WT(e,t,n){if(typeof e!="function")throw new TypeError(X3);return setTimeout(function(){e.apply(void 0,n)},t)}var Y3=Xr(function(e,t){return WT(e,1,t)});const q3=Y3;var K3=Xr(function(e,t,n){return WT(e,Jc(t)||0,n)});const Z3=K3;var J3=200;function ny(e,t,n,a){var r=-1,s=u1,c=!0,v=e.length,h=[],g=t.length;if(!v)return h;n&&(t=pa(t,ef(n))),a?(s=IA,c=!1):t.length>=J3&&(s=M0,c=!1,t=new DA(t));e:for(;++r<v;){var _=e[r],E=n==null?_:n(_);if(_=a||_!==0?_:0,c&&E===E){for(var O=g;O--;)if(t[O]===E)continue e;h.push(_)}else s(t,E,a)||h.push(_)}return h}var Q3=Xr(function(e,t){return $i(e)?ny(e,Ql(t,1,$i,!0)):[]});const e8=Q3;var t8=Xr(function(e,t){var n=_l(t);return $i(n)&&(n=void 0),$i(e)?ny(e,Ql(t,1,$i,!0),Wr(n)):[]});const n8=t8;var r8=Xr(function(e,t){var n=_l(t);return $i(n)&&(n=void 0),$i(e)?ny(e,Ql(t,1,$i,!0),void 0,n):[]});const o8=r8;var i8=eg(function(e,t){return e/t},1);const a8=i8;function u8(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Nr(t),Kl(e,t<0?0:t,a)):[]}function l8(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Nr(t),t=a-t,Kl(e,0,t<0?0:t)):[]}function og(e,t,n,a){for(var r=e.length,s=a?r:-1;(a?s--:++s<r)&&t(e[s],s,e););return n?Kl(e,a?0:s,a?s+1:r):Kl(e,a?s+1:0,a?r:s)}function s8(e,t){return e&&e.length?og(e,Wr(t),!0,!0):[]}function c8(e,t){return e&&e.length?og(e,Wr(t),!0):[]}function f8(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var d8=Bj(!0);const zT=d8;function S1(e,t){return e&&zT(e,t,Ol)}var p8=Uj(S1,!0);const HT=p8;function dx(e,t){var n=ri(e)?f8:HT;return n(e,mp(t))}function h8(e,t,n){e=xo(e),t=ql(t);var a=e.length;n=n===void 0?a:gp(Nr(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function v8(e,t){return pa(t,function(n){return[n,e[n]]})}function y8(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var m8="[object Map]",g8="[object Set]";function XT(e){return function(t){var n=Jm(t);return n==m8?LA(t):n==g8?y8(t):v8(t,e(t))}}var _8=XT(Ol);const px=_8;var b8=XT(pp);const hx=b8;var w8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},E8=w1(w8);const O8=E8;var YT=/[&<>"']/g,x8=RegExp(YT.source);function qT(e){return e=xo(e),e&&x8.test(e)?e.replace(YT,O8):e}var KT=/[\\^$.*+?()[\]{}|]/g,S8=RegExp(KT.source);function A8(e){return e=xo(e),e&&S8.test(e)?e.replace(KT,"\\$&"):e}function ZT(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function T8(e,t){var n=!0;return Zm(e,function(a,r,s){return n=!!t(a,r,s),n}),n}function M8(e,t,n){var a=ri(e)?ZT:T8;return n&&Ws(e,t,n)&&(t=void 0),a(e,Wr(t))}var P8=4294967295;function JT(e){return e?gp(Nr(e),0,P8):0}function k8(e,t,n,a){var r=e.length;for(n=Nr(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:Nr(a),a<0&&(a+=r),a=n>a?0:JT(a);n<a;)e[n++]=t;return e}function N8(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Ws(e,t,n)&&(n=0,a=r),k8(e,t,n,a)):[]}function QT(e,t,n){var a;return n(e,function(r,s,c){if(t(r,s,c))return a=s,!1}),a}function R8(e,t){return QT(e,Wr(t),vp)}var j8=lD(FA);const C8=j8;function D8(e,t){return QT(e,Wr(t),S1)}function vx(e){return e&&e.length?e[0]:void 0}var I8=1/0;function L8(e,t){return Ql(s1(e,t),I8)}function F8(e,t,n){return n=n===void 0?1:Nr(n),Ql(s1(e,t),n)}function $8(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Nr(t),Ql(e,t)):[]}var B8=512;function U8(e){return rf(e,B8)}var G8=E1("floor");const V8=G8;var W8="Expected a function",z8=8,H8=32,X8=128,Y8=256;function eM(e){return hp(function(t){var n=t.length,a=n,r=bl.prototype.thru;for(e&&t.reverse();a--;){var s=t[a];if(typeof s!="function")throw new TypeError(W8);if(r&&!c&&ym(s)=="wrapper")var c=new bl([],!0)}for(a=c?a:n;++a<n;){s=t[a];var v=ym(s),h=v=="wrapper"?v1(s):void 0;h&&N0(h[0])&&h[1]==(X8|z8|H8|Y8)&&!h[4].length&&h[9]==1?c=c[ym(h[0])].apply(c,h[3]):c=s.length==1&&N0(s)?c[v]():c.thru(s)}return function(){var g=arguments,_=g[0];if(c&&g.length==1&&ri(_))return c.plant(_).value();for(var E=0,O=n?t[E].apply(this,g):_;++E<n;)O=t[E].call(this,O);return O}})}var q8=eM();const K8=q8;var Z8=eM(!0);const J8=Z8;function Q8(e,t){return e==null?e:zT(e,mp(t),pp)}function eF(e,t){return e&&S1(e,mp(t))}function ig(e,t){return Wh(t,function(n){return zh(e[n])})}function tF(e){return e==null?[]:ig(e,Ol(e))}function nF(e){return e==null?[]:ig(e,pp(e))}var rF=Object.prototype,oF=rF.hasOwnProperty,iF=rg(function(e,t,n){oF.call(e,n)?e[n].push(t):Zv(e,n,[t])});const aF=iF;function ag(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Jc(t),n=Jc(n)),e(t,n)}}var uF=ag(iT);const lF=uF;var sF=ag(function(e,t){return e>=t});const cF=sF;var fF=Math.max,dF=Math.min;function pF(e,t,n){return e>=dF(t,n)&&e<fF(t,n)}function hF(e,t,n){return t=$v(t),n===void 0?(n=t,t=0):n=$v(n),e=Jc(e),pF(e,t,n)}var vF="[object String]";function ug(e){return typeof e=="string"||!ri(e)&&El(e)&&ud(e)==vF}var yF=Math.max;function mF(e,t,n,a){e=Gh(e)?e:Hh(e),n=n&&!a?Nr(n):0;var r=e.length;return n<0&&(n=yF(r+n,0)),ug(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Qv(e,t,n)>-1}var gF=Math.max;function _F(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Nr(n);return r<0&&(r=gF(a+r,0)),Qv(e,t,r)}function bF(e){var t=e==null?0:e.length;return t?Kl(e,0,-1):[]}var wF=Math.min;function A1(e,t,n){for(var a=n?IA:u1,r=e[0].length,s=e.length,c=s,v=Array(s),h=1/0,g=[];c--;){var _=e[c];c&&t&&(_=pa(_,ef(t))),h=wF(_.length,h),v[c]=!n&&(t||r>=120&&_.length>=120)?new DA(c&&_):void 0}_=e[0];var E=-1,O=v[0];e:for(;++E<r&&g.length<h;){var S=_[E],k=t?t(S):S;if(S=n||S!==0?S:0,!(O?M0(O,k):a(g,k,n))){for(c=s;--c;){var M=v[c];if(!(M?M0(M,k):a(e[c],k,n)))continue e}O&&O.push(k),g.push(S)}}return g}function T1(e){return $i(e)?e:[]}var EF=Xr(function(e){var t=pa(e,T1);return t.length&&t[0]===e[0]?A1(t):[]});const OF=EF;var xF=Xr(function(e){var t=_l(e),n=pa(e,T1);return t===_l(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?A1(n,Wr(t)):[]});const SF=xF;var AF=Xr(function(e){var t=_l(e),n=pa(e,T1);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?A1(n,void 0,t):[]});const TF=AF;function MF(e,t,n,a){return vp(e,function(r,s,c){t(a,n(r),s,c)}),a}function tM(e,t){return function(n,a){return MF(n,e,t(a),{})}}var PF=Object.prototype,kF=PF.toString,NF=tM(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=kF.call(t)),e[t]=n},$A(ad));const RF=NF;var nM=Object.prototype,jF=nM.hasOwnProperty,CF=nM.toString,DF=tM(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=CF.call(t)),jF.call(e,t)?e[t].push(n):e[t]=[n]},Wr);const IF=DF;function ry(e,t,n){t=BA(t,e),e=Gj(e,t);var a=e==null?e:e[Km(_l(t))];return a==null?void 0:gl(a,e,n)}var LF=Xr(ry);const FF=LF;var $F=Xr(function(e,t,n){var a=-1,r=typeof t=="function",s=Gh(e)?Array(e.length):[];return Zm(e,function(c){s[++a]=r?gl(t,c,n):ry(c,t,n)}),s});const BF=$F;var UF="[object ArrayBuffer]";function GF(e){return El(e)&&ud(e)==UF}var yx=Dh&&Dh.isArrayBuffer,VF=yx?ef(yx):GF;const WF=VF;var zF="[object Boolean]";function HF(e){return e===!0||e===!1||El(e)&&ud(e)==zF}var XF="[object Date]";function YF(e){return El(e)&&ud(e)==XF}var mx=Dh&&Dh.isDate,qF=mx?ef(mx):YF;const KF=qF;function ZF(e){return El(e)&&e.nodeType===1&&!l1(e)}function JF(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?Vj(e,t,void 0,n):!!a}var QF=dp.isFinite;function e4(e){return typeof e=="number"&&QF(e)}function rM(e){return typeof e=="number"&&e==Nr(e)}function t4(e,t){return e===t||UA(e,t,GA(t))}function n4(e,t,n){return n=typeof n=="function"?n:void 0,UA(e,t,GA(t),n)}var r4="[object Number]";function oM(e){return typeof e=="number"||El(e)&&ud(e)==r4}function o4(e){return oM(e)&&e!=+e}var i4=Wj?zh:VA;const a4=i4;var u4="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function l4(e){if(a4(e))throw new Error(u4);return zj(e)}var s4="[object RegExp]";function c4(e){return El(e)&&ud(e)==s4}var gx=Dh&&Dh.isRegExp,f4=gx?ef(gx):c4;const M1=f4;var _x=9007199254740991;function d4(e){return rM(e)&&e>=-_x&&e<=_x}var p4="[object WeakMap]";function h4(e){return El(e)&&Jm(e)==p4}var v4="[object WeakSet]";function y4(e){return El(e)&&ud(e)==v4}var m4=1;function g4(e){return Wr(typeof e=="function"?e:Vh(e,m4))}var _4=Array.prototype,b4=_4.join;function w4(e,t){return e==null?"":b4.call(e,t)}var E4=qh(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const O4=E4;var x4=rg(function(e,t,n){Zv(e,n,t)});const S4=x4;function A4(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var T4=Math.max,M4=Math.min;function P4(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=Nr(n),r=r<0?T4(a+r,0):M4(r,a-1)),t===t?A4(e,t,r):Hj(e,Xj,r,!0)}var k4=qh(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const N4=k4;var R4=OT("toLowerCase");const j4=R4;var C4=ag(sD);const D4=C4;var I4=ag(function(e,t){return e<=t});const L4=I4;function F4(e,t){var n={};return t=Wr(t),vp(e,function(a,r,s){Zv(n,t(a,r,s),a)}),n}var $4=1;function B4(e){return Yj(Vh(e,$4))}var U4=1;function G4(e,t){return qj(e,Vh(t,U4))}function V4(e,t){return e&&e.length?cD(e,Wr(t),iT):void 0}function P1(e,t){for(var n,a=-1,r=e.length;++a<r;){var s=t(e[a]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var W4=0/0;function iM(e,t){var n=e==null?0:e.length;return n?P1(e,t)/n:W4}function z4(e){return iM(e,ad)}function H4(e,t){return iM(e,Wr(t))}var X4=Xr(function(e,t){return function(n){return ry(n,e,t)}});const Y4=X4;var q4=Xr(function(e,t){return function(n){return ry(e,n,t)}});const K4=q4;function aM(e,t,n){var a=Ol(t),r=ig(t,a),s=!(Qc(n)&&"chain"in n)||!!n.chain,c=zh(e);return Vs(r,function(v){var h=t[v];e[v]=h,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var _=e(this.__wrapped__),E=_.__actions__=ml(this.__actions__);return E.push({func:h,args:arguments,thisArg:e}),_.__chain__=g,_}return h.apply(e,Jv([this.value()],arguments))})}),e}var Z4=eg(function(e,t){return e*t},1);const J4=Z4;var Q4="Expected a function";function oy(e){if(typeof e!="function")throw new TypeError(Q4);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function e$(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var t$="[object Map]",n$="[object Set]",f0=Om?Om.iterator:void 0;function uM(e){if(!e)return[];if(Gh(e))return ug(e)?Zl(e):ml(e);if(f0&&e[f0])return e$(e[f0]());var t=Jm(e),n=t==t$?LA:t==n$?Kj:Hh;return n(e)}function r$(){this.__values__===void 0&&(this.__values__=uM(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function lM(e,t){var n=e.length;if(n)return t+=t<0?n:0,qv(t,n)?e[t]:void 0}function o$(e,t){return e&&e.length?lM(e,Nr(t)):void 0}function i$(e){return e=Nr(e),Xr(function(t){return lM(t,e)})}function sM(e,t){if(e==null)return{};var n=pa(Zj(e),function(a){return[a]});return t=Wr(t),Jj(e,n,function(a,r){return t(a,r[0])})}function a$(e,t){return sM(e,oy(Wr(t)))}function u$(e){return vT(2,e)}function l$(e,t,n,a){return e==null?[]:(ri(t)||(t=t==null?[]:[t]),n=a?void 0:n,ri(n)||(n=n==null?[]:[n]),fD(e,t,n))}function k1(e){return hp(function(t){return t=pa(t,ef(Wr)),Xr(function(n){var a=this;return e(t,function(r){return gl(r,a,n)})})})}var s$=k1(pa);const c$=s$;var f$=Xr;const d$=f$;var p$=Math.min,h$=d$(function(e,t){t=t.length==1&&ri(t[0])?pa(t[0],ef(Wr)):pa(Ql(t,1),ef(Wr));var n=t.length;return Xr(function(a){for(var r=-1,s=p$(a.length,n);++r<s;)a[r]=t[r].call(this,a[r]);return gl(e,this,a)})});const v$=h$;var y$=k1(ZT);const m$=y$;var g$=k1(WA);const _$=g$;var b$=9007199254740991,w$=Math.floor;function C0(e,t){var n="";if(!e||t<1||t>b$)return n;do t%2&&(n+=e),t=w$(t/2),t&&(e+=e);while(t);return n}var E$=zA("length");const O$=E$;var cM="\\ud800-\\udfff",x$="\\u0300-\\u036f",S$="\\ufe20-\\ufe2f",A$="\\u20d0-\\u20ff",T$=x$+S$+A$,M$="\\ufe0e\\ufe0f",P$="["+cM+"]",D0="["+T$+"]",I0="\\ud83c[\\udffb-\\udfff]",k$="(?:"+D0+"|"+I0+")",fM="[^"+cM+"]",dM="(?:\\ud83c[\\udde6-\\uddff]){2}",pM="[\\ud800-\\udbff][\\udc00-\\udfff]",N$="\\u200d",hM=k$+"?",vM="["+M$+"]?",R$="(?:"+N$+"(?:"+[fM,dM,pM].join("|")+")"+vM+hM+")*",j$=vM+hM+R$,C$="(?:"+[fM+D0+"?",D0,dM,pM,P$].join("|")+")",bx=RegExp(I0+"(?="+I0+")|"+C$+j$,"g");function D$(e){for(var t=bx.lastIndex=0;bx.test(e);)++t;return t}function Kh(e){return Yh(e)?D$(e):O$(e)}var I$=Math.ceil;function Am(e,t){t=t===void 0?" ":ql(t);var n=t.length;if(n<2)return n?C0(t,e):t;var a=C0(t,I$(e/Kh(t)));return Yh(t)?ld(Zl(a),0,e).join(""):a.slice(0,e)}var L$=Math.ceil,F$=Math.floor;function $$(e,t,n){e=xo(e),t=Nr(t);var a=t?Kh(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return Am(F$(r),n)+e+Am(L$(r),n)}function B$(e,t,n){e=xo(e),t=Nr(t);var a=t?Kh(e):0;return t&&a<t?e+Am(t-a,n):e}function U$(e,t,n){e=xo(e),t=Nr(t);var a=t?Kh(e):0;return t&&a<t?Am(t-a,n)+e:e}var G$=/^\s+/,V$=dp.parseInt;function W$(e,t,n){return n||t==null?t=0:t&&(t=+t),V$(xo(e).replace(G$,""),t||0)}var z$=32,N1=Xr(function(e,t){var n=od(t,Xh(N1));return rf(e,z$,void 0,t,n)});N1.placeholder={};const yM=N1;var H$=64,R1=Xr(function(e,t){var n=od(t,Xh(R1));return rf(e,H$,void 0,t,n)});R1.placeholder={};const X$=R1;var Y$=rg(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const q$=Y$;function K$(e){for(var t,n=this;n instanceof tg;){var a=sT(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function Z$(e){return function(t){return e==null?void 0:HA(e,t)}}function J$(e,t,n,a){for(var r=n-1,s=e.length;++r<s;)if(a(e[r],t))return r;return-1}var Q$=Array.prototype,wx=Q$.splice;function j1(e,t,n,a){var r=a?J$:Qv,s=-1,c=t.length,v=e;for(e===t&&(t=ml(t)),n&&(v=pa(e,ef(n)));++s<c;)for(var h=0,g=t[s],_=n?n(g):g;(h=r(v,_,h,a))>-1;)v!==e&&wx.call(v,h,1),wx.call(e,h,1);return e}function mM(e,t){return e&&e.length&&t&&t.length?j1(e,t):e}var e5=Xr(mM);const t5=e5;function n5(e,t,n){return e&&e.length&&t&&t.length?j1(e,t,Wr(n)):e}function r5(e,t,n){return e&&e.length&&t&&t.length?j1(e,t,void 0,n):e}var o5=Array.prototype,i5=o5.splice;function gM(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==s){var s=r;qv(r)?i5.call(e,r,1):XA(e,r)}}return e}var a5=hp(function(e,t){var n=e==null?0:e.length,a=y1(e,t);return gM(e,pa(t,function(r){return qv(r,n)?+r:r}).sort(dD)),a});const u5=a5;var l5=Math.floor,s5=Math.random;function C1(e,t){return e+l5(s5()*(t-e+1))}var c5=parseFloat,f5=Math.min,d5=Math.random;function p5(e,t,n){if(n&&typeof n!="boolean"&&Ws(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=$v(e),t===void 0?(t=e,e=0):t=$v(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=d5();return f5(e+r*(t-e+c5("1e-"+((r+"").length-1))),t)}return C1(e,t)}var h5=pD(!0);const v5=h5;var y5=256,m5=hp(function(e,t){return rf(e,y5,void 0,void 0,void 0,t)});const g5=m5;function _5(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function b5(e,t,n){var a=ri(e)?_5:rD,r=arguments.length<3;return a(e,Wr(t),n,r,HT)}function w5(e,t){var n=ri(e)?Wh:oD;return n(e,oy(Wr(t)))}function E5(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],s=e.length;for(t=Wr(t);++a<s;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return gM(e,r),n}function O5(e,t,n){return(n?Ws(e,t,n):t===void 0)?t=1:t=Nr(t),C0(xo(e),t)}function x5(){var e=arguments,t=xo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var S5="Expected a function";function A5(e,t){if(typeof e!="function")throw new TypeError(S5);return t=t===void 0?t:Nr(t),Xr(e,t)}function T5(e,t,n){t=BA(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var s=e==null?void 0:e[Km(t[a])];s===void 0&&(a=r,s=n),e=zh(s)?s.call(e):s}return e}var M5=Array.prototype,P5=M5.reverse;function L0(e){return e==null?e:P5.call(e)}var k5=E1("round");const N5=k5;function _M(e){var t=e.length;return t?e[C1(0,t-1)]:void 0}function R5(e){return _M(Hh(e))}function j5(e){var t=ri(e)?_M:R5;return t(e)}function lg(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var s=C1(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function C5(e,t){return lg(ml(e),gp(t,0,e.length))}function D5(e,t){var n=Hh(e);return lg(n,gp(t,0,n.length))}function I5(e,t,n){(n?Ws(e,t,n):t===void 0)?t=1:t=Nr(t);var a=ri(e)?C5:D5;return a(e,t)}function L5(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:c1(e,t,n,a)}function F5(e){return lg(ml(e))}function $5(e){return lg(Hh(e))}function B5(e){var t=ri(e)?F5:$5;return t(e)}var U5="[object Map]",G5="[object Set]";function V5(e){if(e==null)return 0;if(Gh(e))return ug(e)?Kh(e):e.length;var t=Jm(e);return t==U5||t==G5?e.size:Qj(e).length}function W5(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&Ws(e,t,n)?(t=0,n=a):(t=t==null?0:Nr(t),n=n===void 0?a:Nr(n)),Kl(e,t,n)):[]}var z5=qh(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const H5=z5;function X5(e,t){var n;return Zm(e,function(a,r,s){return n=t(a,r,s),!n}),!!n}function Y5(e,t,n){var a=ri(e)?WA:X5;return n&&Ws(e,t,n)&&(t=void 0),a(e,Wr(t))}var q5=4294967295,K5=q5-1,Z5=Math.floor,J5=Math.min;function D1(e,t,n,a){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,h=Ch(t),g=t===void 0;r<s;){var _=Z5((r+s)/2),E=n(e[_]),O=E!==void 0,S=E===null,k=E===E,M=Ch(E);if(c)var j=a||k;else g?j=k&&(a||O):v?j=k&&O&&(a||!S):h?j=k&&O&&!S&&(a||!M):S||M?j=!1:j=a?E<=t:E<t;j?r=_+1:s=_}return J5(s,K5)}var Q5=4294967295,e6=Q5>>>1;function sg(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=e6){for(;a<r;){var s=a+r>>>1,c=e[s];c!==null&&!Ch(c)&&(n?c<=t:c<t)?a=s+1:r=s}return r}return D1(e,t,ad,n)}function t6(e,t){return sg(e,t)}function n6(e,t,n){return D1(e,t,Wr(n))}function r6(e,t){var n=e==null?0:e.length;if(n){var a=sg(e,t);if(a<n&&ey(e[a],t))return a}return-1}function o6(e,t){return sg(e,t,!0)}function i6(e,t,n){return D1(e,t,Wr(n),!0)}function a6(e,t){var n=e==null?0:e.length;if(n){var a=sg(e,t,!0)-1;if(ey(e[a],t))return a}return-1}function bM(e,t){for(var n=-1,a=e.length,r=0,s=[];++n<a;){var c=e[n],v=t?t(c):c;if(!n||!ey(v,h)){var h=v;s[r++]=c===0?0:c}}return s}function u6(e){return e&&e.length?bM(e):[]}function l6(e,t){return e&&e.length?bM(e,Wr(t)):[]}var s6=4294967295;function c6(e,t,n){return n&&typeof n!="number"&&Ws(e,t,n)&&(t=n=void 0),n=n===void 0?s6:n>>>0,n?(e=xo(e),e&&(typeof t=="string"||t!=null&&!M1(t))&&(t=ql(t),!t&&Yh(e))?ld(Zl(e),0,n):e.split(t,n)):[]}var f6="Expected a function",d6=Math.max;function p6(e,t){if(typeof e!="function")throw new TypeError(f6);return t=t==null?0:d6(Nr(t),0),Xr(function(n){var a=n[t],r=ld(n,0,t);return a&&Jv(r,a),gl(e,this,r)})}var h6=qh(function(e,t,n){return e+(n?" ":"")+b1(t)});const v6=h6;function y6(e,t,n){return e=xo(e),n=n==null?0:gp(Nr(n),0,e.length),t=ql(t),e.slice(n,n+t.length)==t}function m6(){return{}}function g6(){return""}function _6(){return!0}var b6=eg(function(e,t){return e-t},0);const w6=b6;function E6(e){return e&&e.length?P1(e,ad):0}function O6(e,t){return e&&e.length?P1(e,Wr(t)):0}function x6(e){var t=e==null?0:e.length;return t?Kl(e,1,t):[]}function S6(e,t,n){return e&&e.length?(t=n||t===void 0?1:Nr(t),Kl(e,0,t<0?0:t)):[]}function A6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Nr(t),t=a-t,Kl(e,t<0?0:t,a)):[]}function T6(e,t){return e&&e.length?og(e,Wr(t),!1,!0):[]}function M6(e,t){return e&&e.length?og(e,Wr(t)):[]}function P6(e,t){return t(e),e}var wM=Object.prototype,k6=wM.hasOwnProperty;function Ex(e,t,n,a){return e===void 0||ey(e,wM[n])&&!k6.call(a,n)?t:e}var N6={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function R6(e){return"\\"+N6[e]}var j6=/<%=([\s\S]+?)%>/g;const EM=j6;var C6=/<%-([\s\S]+?)%>/g;const D6=C6;var I6=/<%([\s\S]+?)%>/g;const L6=I6;var F6={escape:D6,evaluate:L6,interpolate:EM,variable:"",imports:{_:{escape:qT}}};const F0=F6;var $6="Invalid `variable` option passed into `_.template`",B6=/\b__p \+= '';/g,U6=/\b(__p \+=) '' \+/g,G6=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V6=/[()=,{}\[\]\/\s]/,W6=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sm=/($^)/,z6=/['\n\r\u2028\u2029\\]/g,H6=Object.prototype,Ox=H6.hasOwnProperty;function X6(e,t,n){var a=F0.imports._.templateSettings||F0;n&&Ws(e,t,n)&&(t=void 0),e=xo(e),t=Sm({},t,a,Ex);var r=Sm({},t.imports,a.imports,Ex),s=Ol(r),c=oT(r,s),v,h,g=0,_=t.interpolate||sm,E="__p += '",O=RegExp((t.escape||sm).source+"|"+_.source+"|"+(_===EM?W6:sm).source+"|"+(t.evaluate||sm).source+"|$","g"),S=Ox.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(j,I,N,B,q,ee){return N||(N=B),E+=e.slice(g,ee).replace(z6,R6),I&&(v=!0,E+=`' +
__e(`+I+`) +
'`),q&&(h=!0,E+=`';
`+q+`;
__p += '`),N&&(E+=`' +
((__t = (`+N+`)) == null ? '' : __t) +
'`),g=ee+j.length,j}),E+=`';
`;var k=Ox.call(t,"variable")&&t.variable;if(!k)E=`with (obj) {
`+E+`
}
`;else if(V6.test(k))throw new Error($6);E=(h?E.replace(B6,""):E).replace(U6,"$1").replace(G6,"$1;"),E="function("+(k||"obj")+`) {
`+(k?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+E+`return __p
}`;var M=hT(function(){return Function(s,S+"return "+E).apply(void 0,c)});if(M.source=E,m1(M))throw M;return M}function iy(e,t){return t(e)}var Y6=9007199254740991,d0=4294967295,q6=Math.min;function K6(e,t){if(e=Nr(e),e<1||e>Y6)return[];var n=d0,a=q6(e,d0);t=mp(t),e-=d0;for(var r=YA(a,t);++n<e;)t(n);return r}function Z6(){return this}function OM(e,t){var n=e;return n instanceof Vr&&(n=n.value()),rT(t,function(a,r){return r.func.apply(r.thisArg,Jv([a],r.args))},n)}function p0(){return OM(this.__wrapped__,this.__actions__)}function J6(e){return xo(e).toLowerCase()}function Q6(e){return ri(e)?pa(e,Km):Ch(e)?[e]:ml(eC(xo(e)))}var xx=9007199254740991;function eB(e){return e?gp(Nr(e),-xx,xx):e===0?e:0}function tB(e){return xo(e).toUpperCase()}function nB(e,t,n){var a=ri(e),r=a||qA(e)||KA(e);if(t=Wr(t),n==null){var s=e&&e.constructor;r?n=a?new s:[]:Qc(e)?n=zh(s)?Yv(tC(e)):{}:n={}}return(r?Vs:vp)(e,function(c,v,h){return t(n,c,v,h)}),n}function xM(e,t){for(var n=e.length;n--&&Qv(t,e[n],0)>-1;);return n}function SM(e,t){for(var n=-1,a=e.length;++n<a&&Qv(t,e[n],0)>-1;);return n}function rB(e,t,n){if(e=xo(e),e&&(n||t===void 0))return nC(e);if(!e||!(t=ql(t)))return e;var a=Zl(e),r=Zl(t),s=SM(a,r),c=xM(a,r)+1;return ld(a,s,c).join("")}function oB(e,t,n){if(e=xo(e),e&&(n||t===void 0))return e.slice(0,rC(e)+1);if(!e||!(t=ql(t)))return e;var a=Zl(e),r=xM(a,Zl(t))+1;return ld(a,0,r).join("")}var iB=/^\s+/;function aB(e,t,n){if(e=xo(e),e&&(n||t===void 0))return e.replace(iB,"");if(!e||!(t=ql(t)))return e;var a=Zl(e),r=SM(a,Zl(t));return ld(a,r).join("")}var uB=30,lB="...",sB=/\w*$/;function cB(e,t){var n=uB,a=lB;if(Qc(t)){var r="separator"in t?t.separator:r;n="length"in t?Nr(t.length):n,a="omission"in t?ql(t.omission):a}e=xo(e);var s=e.length;if(Yh(e)){var c=Zl(e);s=c.length}if(n>=s)return e;var v=n-Kh(a);if(v<1)return a;var h=c?ld(c,0,v).join(""):e.slice(0,v);if(r===void 0)return h+a;if(c&&(v+=h.length-v),M1(r)){if(e.slice(v).search(r)){var g,_=h;for(r.global||(r=RegExp(r.source,xo(sB.exec(r))+"g")),r.lastIndex=0;g=r.exec(_);)var E=g.index;h=h.slice(0,E===void 0?v:E)}}else if(e.indexOf(ql(r),v)!=v){var O=h.lastIndexOf(r);O>-1&&(h=h.slice(0,O))}return h+a}function fB(e){return pT(e,1)}var dB={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pB=w1(dB);const hB=pB;var AM=/&(?:amp|lt|gt|quot|#39);/g,vB=RegExp(AM.source);function yB(e){return e=xo(e),e&&vB.test(e)?e.replace(AM,hB):e}var mB=Xr(function(e){var t=_l(e);return $i(t)&&(t=void 0),up(Ql(e,1,$i,!0),Wr(t))});const gB=mB;var _B=Xr(function(e){var t=_l(e);return t=typeof t=="function"?t:void 0,up(Ql(e,1,$i,!0),void 0,t)});const bB=_B;function wB(e){return e&&e.length?up(e):[]}function EB(e,t){return e&&e.length?up(e,Wr(t)):[]}function OB(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?up(e,void 0,t):[]}function xB(e,t){return e==null?!0:XA(e,t)}var SB=Math.max;function I1(e){if(!(e&&e.length))return[];var t=0;return e=Wh(e,function(n){if($i(n))return t=SB(n.length,t),!0}),YA(t,function(n){return pa(e,zA(n))})}function TM(e,t){if(!(e&&e.length))return[];var n=I1(e);return t==null?n:pa(n,function(a){return gl(t,void 0,a)})}function MM(e,t,n,a){return c1(e,t,n(HA(e,t)),a)}function AB(e,t,n){return e==null?e:MM(e,t,mp(n))}function TB(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:MM(e,t,mp(n),a)}var MB=qh(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const PB=MB;function kB(e){return e==null?[]:oT(e,pp(e))}var NB=Xr(function(e,t){return $i(e)?ny(e,t):[]});const RB=NB;function jB(e,t){return yM(mp(t),e)}var CB=hp(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(s){return y1(s,e)};return t>1||this.__actions__.length||!(a instanceof Vr)||!qv(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:iy,args:[r],thisArg:void 0}),new bl(a,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const DB=CB;function IB(){return BT(this)}function LB(){var e=this.__wrapped__;if(e instanceof Vr){var t=e;return this.__actions__.length&&(t=new Vr(this)),t=t.reverse(),t.__actions__.push({func:iy,args:[L0],thisArg:void 0}),new bl(t,this.__chain__)}return this.thru(L0)}function L1(e,t,n){var a=e.length;if(a<2)return a?up(e[0]):[];for(var r=-1,s=Array(a);++r<a;)for(var c=e[r],v=-1;++v<a;)v!=r&&(s[r]=ny(s[r]||c,e[v],t,n));return up(Ql(s,1),t,n)}var FB=Xr(function(e){return L1(Wh(e,$i))});const $B=FB;var BB=Xr(function(e){var t=_l(e);return $i(t)&&(t=void 0),L1(Wh(e,$i),Wr(t))});const UB=BB;var GB=Xr(function(e){var t=_l(e);return t=typeof t=="function"?t:void 0,L1(Wh(e,$i),void 0,t)});const VB=GB;var WB=Xr(I1);const zB=WB;function HB(e,t){return hD(e||[],t||[],c1)}var XB=Xr(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,TM(e,n)});const YB=XB,In={chunk:g3,compact:A3,concat:T3,difference:e8,differenceBy:n8,differenceWith:o8,drop:u8,dropRight:l8,dropRightWhile:s8,dropWhile:c8,fill:N8,findIndex:vD,findLastIndex:FA,first:vx,flatten:oC,flattenDeep:iC,flattenDepth:$8,fromPairs:aC,head:vx,indexOf:_F,initial:bF,intersection:OF,intersectionBy:SF,intersectionWith:TF,join:w4,last:_l,lastIndexOf:P4,nth:o$,pull:t5,pullAll:mM,pullAllBy:n5,pullAllWith:r5,pullAt:u5,remove:E5,reverse:L0,slice:W5,sortedIndex:t6,sortedIndexBy:n6,sortedIndexOf:r6,sortedLastIndex:o6,sortedLastIndexBy:i6,sortedLastIndexOf:a6,sortedUniq:u6,sortedUniqBy:l6,tail:x6,take:S6,takeRight:A6,takeRightWhile:T6,takeWhile:M6,union:uC,unionBy:gB,unionWith:bB,uniq:wB,uniqBy:EB,uniqWith:OB,unzip:I1,unzipWith:TM,without:RB,xor:$B,xorBy:UB,xorWith:VB,zip:zB,zipObject:yD,zipObjectDeep:HB,zipWith:YB},So={countBy:$3,each:KO,eachRight:dx,every:M8,filter:iD,find:mD,findLast:C8,flatMap:lC,flatMapDeep:L8,flatMapDepth:F8,forEach:KO,forEachRight:dx,groupBy:aF,includes:mF,invokeMap:BF,keyBy:S4,map:s1,orderBy:l$,partition:q$,reduce:aD,reduceRight:b5,reject:w5,sample:j5,sampleSize:I5,shuffle:B5,size:V5,some:Y5,sortBy:gD},qB={now:sC},yi={after:CD,ary:pT,before:vT,bind:yT,bindKey:tL,curry:O1,curryRight:x1,debounce:cC,defer:q3,delay:Z3,flip:U8,memoize:fC,negate:oy,once:u$,overArgs:v$,partial:yM,partialRight:X$,rearg:g5,rest:A5,spread:p6,throttle:dC,unary:fB,wrap:jB},ir={castArray:pC,clone:hC,cloneDeep:vC,cloneDeepWith:E3,cloneWith:x3,conformsTo:j3,eq:ey,gt:lF,gte:cF,isArguments:yC,isArray:ri,isArrayBuffer:WF,isArrayLike:Gh,isArrayLikeObject:$i,isBoolean:HF,isBuffer:qA,isDate:KF,isElement:ZF,isEmpty:mC,isEqual:gC,isEqualWith:JF,isError:m1,isFinite:e4,isFunction:zh,isInteger:rM,isLength:_C,isMap:bC,isMatch:t4,isMatchWith:n4,isNaN:o4,isNative:l4,isNil:wC,isNull:EC,isNumber:oM,isObject:Qc,isObjectLike:El,isPlainObject:l1,isRegExp:M1,isSafeInteger:d4,isSet:OC,isString:ug,isSymbol:Ch,isTypedArray:KA,isUndefined:xC,isWeakMap:h4,isWeakSet:y4,lt:D4,lte:L4,toArray:uM,toFinite:$v,toInteger:Nr,toLength:JT,toNumber:Jc,toPlainObject:SC,toSafeInteger:eB,toString:xo},Xa={add:RD,ceil:v3,divide:a8,floor:V8,max:_D,maxBy:V4,mean:z4,meanBy:H4,min:bD,minBy:wD,multiply:J4,round:N5,subtract:w6,sum:E6,sumBy:O6},F1={clamp:_3,inRange:hF,random:p5},gr={assign:LI,assignIn:ux,assignInWith:Sm,assignWith:UI,at:VI,create:B3,defaults:ED,defaultsDeep:H3,entries:px,entriesIn:hx,extend:ux,extendWith:Sm,findKey:R8,findLastKey:D8,forIn:OD,forInRight:Q8,forOwn:xD,forOwnRight:eF,functions:tF,functionsIn:nF,get:jA,has:uD,hasIn:AC,invert:RF,invertBy:IF,invoke:FF,keys:Ol,keysIn:pp,mapKeys:F4,mapValues:SD,merge:TC,mergeWith:VT,omit:MC,omitBy:a$,pick:PC,pickBy:sM,result:T5,set:kC,setWith:L5,toPairs:px,toPairsIn:hx,transform:nB,unset:xB,update:AB,updateWith:TB,values:Hh,valuesIn:kB},zs={at:DB,chain:BT,commit:S3,lodash:ie,next:r$,plant:K$,reverse:LB,tap:P6,thru:iy,toIterator:Z6,toJSON:p0,value:p0,valueOf:p0,wrapperChain:IB},ao={camelCase:f3,capitalize:xT,deburr:ST,endsWith:h8,escape:qT,escapeRegExp:A8,kebabCase:O4,lowerCase:N4,lowerFirst:j4,pad:$$,padEnd:B$,padStart:U$,parseInt:W$,repeat:O5,replace:x5,snakeCase:H5,split:c6,startCase:v6,startsWith:y6,template:X6,templateSettings:F0,toLower:J6,toUpper:tB,trim:rB,trimEnd:oB,trimStart:aB,truncate:cB,unescape:yB,upperCase:PB,upperFirst:b1,words:$T},co={attempt:hT,bindAll:ZI,cond:P3,conforms:R3,constant:$A,defaultTo:V3,flow:K8,flowRight:J8,identity:ad,iteratee:g4,matches:B4,matchesProperty:G4,method:Y4,methodOf:K4,mixin:aM,noop:RA,nthArg:i$,over:c$,overEvery:m$,overSome:_$,property:NC,propertyOf:Z$,range:AD,rangeRight:v5,stubArray:RC,stubFalse:VA,stubObject:m6,stubString:g6,stubTrue:_6,times:K6,toPath:Q6,uniqueId:TD};function KB(){var e=new Vr(this.__wrapped__);return e.__actions__=ml(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ml(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ml(this.__views__),e}function ZB(){if(this.__filtered__){var e=new Vr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var JB=Math.max,QB=Math.min;function eU(e,t,n){for(var a=-1,r=n.length;++a<r;){var s=n[a],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=QB(t,e+c);break;case"takeRight":e=JB(e,t-c);break}}return{start:e,end:t}}var tU=1,nU=2,rU=Math.min;function oU(){var e=this.__wrapped__.value(),t=this.__dir__,n=ri(e),a=t<0,r=n?e.length:0,s=eU(0,r,this.__views__),c=s.start,v=s.end,h=v-c,g=a?v:c-1,_=this.__iteratees__,E=_.length,O=0,S=rU(h,this.__takeCount__);if(!n||!a&&r==h&&S==h)return OM(e,this.__actions__);var k=[];e:for(;h--&&O<S;){g+=t;for(var M=-1,j=e[g];++M<E;){var I=_[M],N=I.iteratee,B=I.type,q=N(j);if(B==nU)j=q;else if(!q){if(B==tU)continue e;break e}}k[O++]=j}return k}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var iU="4.17.21",aU=2,uU=1,lU=3,PM=4294967295,sU=Array.prototype,cU=Object.prototype,kM=cU.hasOwnProperty,Sx=Om?Om.iterator:void 0,fU=Math.max,Ax=Math.min,$1=function(e){return function(t,n,a){if(a==null){var r=Qc(n),s=r&&Ol(n),c=s&&s.length&&ig(n,s);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(aM);ie.after=yi.after;ie.ary=yi.ary;ie.assign=gr.assign;ie.assignIn=gr.assignIn;ie.assignInWith=gr.assignInWith;ie.assignWith=gr.assignWith;ie.at=gr.at;ie.before=yi.before;ie.bind=yi.bind;ie.bindAll=co.bindAll;ie.bindKey=yi.bindKey;ie.castArray=ir.castArray;ie.chain=zs.chain;ie.chunk=In.chunk;ie.compact=In.compact;ie.concat=In.concat;ie.cond=co.cond;ie.conforms=co.conforms;ie.constant=co.constant;ie.countBy=So.countBy;ie.create=gr.create;ie.curry=yi.curry;ie.curryRight=yi.curryRight;ie.debounce=yi.debounce;ie.defaults=gr.defaults;ie.defaultsDeep=gr.defaultsDeep;ie.defer=yi.defer;ie.delay=yi.delay;ie.difference=In.difference;ie.differenceBy=In.differenceBy;ie.differenceWith=In.differenceWith;ie.drop=In.drop;ie.dropRight=In.dropRight;ie.dropRightWhile=In.dropRightWhile;ie.dropWhile=In.dropWhile;ie.fill=In.fill;ie.filter=So.filter;ie.flatMap=So.flatMap;ie.flatMapDeep=So.flatMapDeep;ie.flatMapDepth=So.flatMapDepth;ie.flatten=In.flatten;ie.flattenDeep=In.flattenDeep;ie.flattenDepth=In.flattenDepth;ie.flip=yi.flip;ie.flow=co.flow;ie.flowRight=co.flowRight;ie.fromPairs=In.fromPairs;ie.functions=gr.functions;ie.functionsIn=gr.functionsIn;ie.groupBy=So.groupBy;ie.initial=In.initial;ie.intersection=In.intersection;ie.intersectionBy=In.intersectionBy;ie.intersectionWith=In.intersectionWith;ie.invert=gr.invert;ie.invertBy=gr.invertBy;ie.invokeMap=So.invokeMap;ie.iteratee=co.iteratee;ie.keyBy=So.keyBy;ie.keys=Ol;ie.keysIn=gr.keysIn;ie.map=So.map;ie.mapKeys=gr.mapKeys;ie.mapValues=gr.mapValues;ie.matches=co.matches;ie.matchesProperty=co.matchesProperty;ie.memoize=yi.memoize;ie.merge=gr.merge;ie.mergeWith=gr.mergeWith;ie.method=co.method;ie.methodOf=co.methodOf;ie.mixin=$1;ie.negate=oy;ie.nthArg=co.nthArg;ie.omit=gr.omit;ie.omitBy=gr.omitBy;ie.once=yi.once;ie.orderBy=So.orderBy;ie.over=co.over;ie.overArgs=yi.overArgs;ie.overEvery=co.overEvery;ie.overSome=co.overSome;ie.partial=yi.partial;ie.partialRight=yi.partialRight;ie.partition=So.partition;ie.pick=gr.pick;ie.pickBy=gr.pickBy;ie.property=co.property;ie.propertyOf=co.propertyOf;ie.pull=In.pull;ie.pullAll=In.pullAll;ie.pullAllBy=In.pullAllBy;ie.pullAllWith=In.pullAllWith;ie.pullAt=In.pullAt;ie.range=co.range;ie.rangeRight=co.rangeRight;ie.rearg=yi.rearg;ie.reject=So.reject;ie.remove=In.remove;ie.rest=yi.rest;ie.reverse=In.reverse;ie.sampleSize=So.sampleSize;ie.set=gr.set;ie.setWith=gr.setWith;ie.shuffle=So.shuffle;ie.slice=In.slice;ie.sortBy=So.sortBy;ie.sortedUniq=In.sortedUniq;ie.sortedUniqBy=In.sortedUniqBy;ie.split=ao.split;ie.spread=yi.spread;ie.tail=In.tail;ie.take=In.take;ie.takeRight=In.takeRight;ie.takeRightWhile=In.takeRightWhile;ie.takeWhile=In.takeWhile;ie.tap=zs.tap;ie.throttle=yi.throttle;ie.thru=iy;ie.toArray=ir.toArray;ie.toPairs=gr.toPairs;ie.toPairsIn=gr.toPairsIn;ie.toPath=co.toPath;ie.toPlainObject=ir.toPlainObject;ie.transform=gr.transform;ie.unary=yi.unary;ie.union=In.union;ie.unionBy=In.unionBy;ie.unionWith=In.unionWith;ie.uniq=In.uniq;ie.uniqBy=In.uniqBy;ie.uniqWith=In.uniqWith;ie.unset=gr.unset;ie.unzip=In.unzip;ie.unzipWith=In.unzipWith;ie.update=gr.update;ie.updateWith=gr.updateWith;ie.values=gr.values;ie.valuesIn=gr.valuesIn;ie.without=In.without;ie.words=ao.words;ie.wrap=yi.wrap;ie.xor=In.xor;ie.xorBy=In.xorBy;ie.xorWith=In.xorWith;ie.zip=In.zip;ie.zipObject=In.zipObject;ie.zipObjectDeep=In.zipObjectDeep;ie.zipWith=In.zipWith;ie.entries=gr.toPairs;ie.entriesIn=gr.toPairsIn;ie.extend=gr.assignIn;ie.extendWith=gr.assignInWith;$1(ie,ie);ie.add=Xa.add;ie.attempt=co.attempt;ie.camelCase=ao.camelCase;ie.capitalize=ao.capitalize;ie.ceil=Xa.ceil;ie.clamp=F1.clamp;ie.clone=ir.clone;ie.cloneDeep=ir.cloneDeep;ie.cloneDeepWith=ir.cloneDeepWith;ie.cloneWith=ir.cloneWith;ie.conformsTo=ir.conformsTo;ie.deburr=ao.deburr;ie.defaultTo=co.defaultTo;ie.divide=Xa.divide;ie.endsWith=ao.endsWith;ie.eq=ir.eq;ie.escape=ao.escape;ie.escapeRegExp=ao.escapeRegExp;ie.every=So.every;ie.find=So.find;ie.findIndex=In.findIndex;ie.findKey=gr.findKey;ie.findLast=So.findLast;ie.findLastIndex=In.findLastIndex;ie.findLastKey=gr.findLastKey;ie.floor=Xa.floor;ie.forEach=So.forEach;ie.forEachRight=So.forEachRight;ie.forIn=gr.forIn;ie.forInRight=gr.forInRight;ie.forOwn=gr.forOwn;ie.forOwnRight=gr.forOwnRight;ie.get=gr.get;ie.gt=ir.gt;ie.gte=ir.gte;ie.has=gr.has;ie.hasIn=gr.hasIn;ie.head=In.head;ie.identity=ad;ie.includes=So.includes;ie.indexOf=In.indexOf;ie.inRange=F1.inRange;ie.invoke=gr.invoke;ie.isArguments=ir.isArguments;ie.isArray=ri;ie.isArrayBuffer=ir.isArrayBuffer;ie.isArrayLike=ir.isArrayLike;ie.isArrayLikeObject=ir.isArrayLikeObject;ie.isBoolean=ir.isBoolean;ie.isBuffer=ir.isBuffer;ie.isDate=ir.isDate;ie.isElement=ir.isElement;ie.isEmpty=ir.isEmpty;ie.isEqual=ir.isEqual;ie.isEqualWith=ir.isEqualWith;ie.isError=ir.isError;ie.isFinite=ir.isFinite;ie.isFunction=ir.isFunction;ie.isInteger=ir.isInteger;ie.isLength=ir.isLength;ie.isMap=ir.isMap;ie.isMatch=ir.isMatch;ie.isMatchWith=ir.isMatchWith;ie.isNaN=ir.isNaN;ie.isNative=ir.isNative;ie.isNil=ir.isNil;ie.isNull=ir.isNull;ie.isNumber=ir.isNumber;ie.isObject=Qc;ie.isObjectLike=ir.isObjectLike;ie.isPlainObject=ir.isPlainObject;ie.isRegExp=ir.isRegExp;ie.isSafeInteger=ir.isSafeInteger;ie.isSet=ir.isSet;ie.isString=ir.isString;ie.isSymbol=ir.isSymbol;ie.isTypedArray=ir.isTypedArray;ie.isUndefined=ir.isUndefined;ie.isWeakMap=ir.isWeakMap;ie.isWeakSet=ir.isWeakSet;ie.join=In.join;ie.kebabCase=ao.kebabCase;ie.last=_l;ie.lastIndexOf=In.lastIndexOf;ie.lowerCase=ao.lowerCase;ie.lowerFirst=ao.lowerFirst;ie.lt=ir.lt;ie.lte=ir.lte;ie.max=Xa.max;ie.maxBy=Xa.maxBy;ie.mean=Xa.mean;ie.meanBy=Xa.meanBy;ie.min=Xa.min;ie.minBy=Xa.minBy;ie.stubArray=co.stubArray;ie.stubFalse=co.stubFalse;ie.stubObject=co.stubObject;ie.stubString=co.stubString;ie.stubTrue=co.stubTrue;ie.multiply=Xa.multiply;ie.nth=In.nth;ie.noop=co.noop;ie.now=qB.now;ie.pad=ao.pad;ie.padEnd=ao.padEnd;ie.padStart=ao.padStart;ie.parseInt=ao.parseInt;ie.random=F1.random;ie.reduce=So.reduce;ie.reduceRight=So.reduceRight;ie.repeat=ao.repeat;ie.replace=ao.replace;ie.result=gr.result;ie.round=Xa.round;ie.sample=So.sample;ie.size=So.size;ie.snakeCase=ao.snakeCase;ie.some=So.some;ie.sortedIndex=In.sortedIndex;ie.sortedIndexBy=In.sortedIndexBy;ie.sortedIndexOf=In.sortedIndexOf;ie.sortedLastIndex=In.sortedLastIndex;ie.sortedLastIndexBy=In.sortedLastIndexBy;ie.sortedLastIndexOf=In.sortedLastIndexOf;ie.startCase=ao.startCase;ie.startsWith=ao.startsWith;ie.subtract=Xa.subtract;ie.sum=Xa.sum;ie.sumBy=Xa.sumBy;ie.template=ao.template;ie.times=co.times;ie.toFinite=ir.toFinite;ie.toInteger=Nr;ie.toLength=ir.toLength;ie.toLower=ao.toLower;ie.toNumber=ir.toNumber;ie.toSafeInteger=ir.toSafeInteger;ie.toString=ir.toString;ie.toUpper=ao.toUpper;ie.trim=ao.trim;ie.trimEnd=ao.trimEnd;ie.trimStart=ao.trimStart;ie.truncate=ao.truncate;ie.unescape=ao.unescape;ie.uniqueId=co.uniqueId;ie.upperCase=ao.upperCase;ie.upperFirst=ao.upperFirst;ie.each=So.forEach;ie.eachRight=So.forEachRight;ie.first=In.head;$1(ie,function(){var e={};return vp(ie,function(t,n){kM.call(ie.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ie.VERSION=iU;(ie.templateSettings=ao.templateSettings).imports._=ie;Vs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ie[e].placeholder=ie});Vs(["drop","take"],function(e,t){Vr.prototype[e]=function(n){n=n===void 0?1:fU(Nr(n),0);var a=this.__filtered__&&!t?new Vr(this):this.clone();return a.__filtered__?a.__takeCount__=Ax(n,a.__takeCount__):a.__views__.push({size:Ax(n,PM),type:e+(a.__dir__<0?"Right":"")}),a},Vr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});Vs(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==uU||n==lU;Vr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:Wr(r),type:n}),s.__filtered__=s.__filtered__||a,s}});Vs(["head","last"],function(e,t){var n="take"+(t?"Right":"");Vr.prototype[e]=function(){return this[n](1).value()[0]}});Vs(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Vr.prototype[e]=function(){return this.__filtered__?new Vr(this):this[n](1)}});Vr.prototype.compact=function(){return this.filter(ad)};Vr.prototype.find=function(e){return this.filter(e).head()};Vr.prototype.findLast=function(e){return this.reverse().find(e)};Vr.prototype.invokeMap=Xr(function(e,t){return typeof e=="function"?new Vr(this):this.map(function(n){return ry(n,e,t)})});Vr.prototype.reject=function(e){return this.filter(oy(Wr(e)))};Vr.prototype.slice=function(e,t){e=Nr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Vr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Nr(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Vr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Vr.prototype.toArray=function(){return this.take(PM)};vp(Vr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=ie[a?"take"+(t=="last"?"Right":""):t],s=a||/^find/.test(t);r&&(ie.prototype[t]=function(){var c=this.__wrapped__,v=a?[1]:arguments,h=c instanceof Vr,g=v[0],_=h||ri(c),E=function(I){var N=r.apply(ie,Jv([I],v));return a&&O?N[0]:N};_&&n&&typeof g=="function"&&g.length!=1&&(h=_=!1);var O=this.__chain__,S=!!this.__actions__.length,k=s&&!O,M=h&&!S;if(!s&&_){c=M?c:new Vr(this);var j=e.apply(c,v);return j.__actions__.push({func:iy,args:[E],thisArg:void 0}),new bl(j,O)}return k&&M?e.apply(this,v):(j=this.thru(E),k?a?j.value()[0]:j.value():j)})});Vs(["pop","push","shift","sort","splice","unshift"],function(e){var t=sU[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);ie.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var s=this.value();return t.apply(ri(s)?s:[],r)}return this[n](function(c){return t.apply(ri(c)?c:[],r)})}});vp(Vr.prototype,function(e,t){var n=ie[t];if(n){var a=n.name+"";kM.call(Th,a)||(Th[a]=[]),Th[a].push({name:t,func:n})}});Th[ng(void 0,aU).name]=[{name:"wrapper",func:void 0}];Vr.prototype.clone=KB;Vr.prototype.reverse=ZB;Vr.prototype.value=oU;ie.prototype.at=zs.at;ie.prototype.chain=zs.wrapperChain;ie.prototype.commit=zs.commit;ie.prototype.next=zs.next;ie.prototype.plant=zs.plant;ie.prototype.reverse=zs.reverse;ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=zs.value;ie.prototype.first=ie.prototype.head;Sx&&(ie.prototype[Sx]=zs.toIterator);const dU="/ui/assets/icon_or-51e130f2.svg",pU="/ui/assets/icon_and-7100a354.svg",hU={class:"workflow-dropdown-menu border border-r-4"},vU={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},yU={key:0},mU=["onClick","onMousedown"],gU={class:"pre-wrap"},_U={class:"lighter"},bU={key:1,class:"ml-16 mt-8"},wU={class:"pre-wrap"},EU={class:"lighter"},OU=["onClick","onMousedown"],xU={class:"pre-wrap"},SU=["title"],AU={key:0},TU=["onClick","onMousedown"],MU={class:"pre-wrap",style:{width:"60%"}},PU=["title"],kU={class:"status-tag",style:{"margin-left":"auto"}},NU={key:1,class:"ml-16 mt-8"},RU=Dr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=St(""),a=e,r=t,s=St(!1),c=St("base"),v=St([]),h=Oo(()=>v.value.filter(M=>M.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=St([]),_=Oo(()=>g.value.filter(M=>M.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),E=Oo(()=>jC.filter(M=>M.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function O(M,j,I){var N;if(j&&(M.properties.stepName=j.name,I=="function"&&(M.properties.node_data={...j,function_lib_id:j.id,input_field_list:j.input_field_list.map(B=>({...B,value:B.source=="reference"?[]:""}))}),I=="application"))if(vm(j.type)){const q=j.work_flow.nodes[0].properties.node_data.file_upload_setting;M.properties.node_data={name:j.name,icon:j.icon,application_id:j.id,api_input_field_list:j.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:j.work_flow.nodes[0].properties.user_input_field_list,...q?{...q.document?{document_list:[]}:{},...q.image?{image_list:[]}:{},...q.audio?{audio_list:[]}:{}}:{}}}else M.properties.node_data={name:j.name,icon:j.icon,application_id:j.id};(N=a.workflowRef)==null||N.addNode(M),r("clickNodes",M)}function S(M,j,I){var N;if(j&&(M.properties.stepName=j.name,I=="function"&&(M.properties.node_data={...j,function_lib_id:j.id,input_field_list:j.input_field_list.map(B=>({...B,value:B.source=="reference"?[]:""}))}),I=="application"))if(vm(j.type)){const q=j.work_flow.nodes[0].properties.node_data.file_upload_setting;M.properties.node_data={name:j.name,icon:j.icon,application_id:j.id,api_input_field_list:j.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:j.work_flow.nodes[0].properties.user_input_field_list,...q?{...q.document?{document_list:[]}:{},...q.image?{image_list:[]}:{},...q.audio?{audio_list:[]}:{}}:{}}}else M.properties.node_data={name:j.name,icon:j.icon,application_id:j.id};(N=a.workflowRef)==null||N.onmousedown(M),r("onmousedown",M)}function k(){ha.listFunctionLib(a.id,s).then(M=>{v.value=M.data}),ha.getApplicationList(a.id,s).then(M=>{g.value=M.data})}return $o(()=>{k()}),(M,j)=>{const I=ue("search"),N=ue("el-icon"),B=ue("el-input"),q=ue("el-text"),ee=ue("el-scrollbar"),Y=ue("el-tab-pane"),Q=ue("el-tag"),z=ue("el-tabs");return hu((rt(),Dn("div",hU,[F(z,{modelValue:c.value,"onUpdate:modelValue":j[3]||(j[3]=D=>c.value=D),class:"workflow-dropdown-tabs"},{default:U(()=>[ge("div",vU,[F(B,{modelValue:n.value,"onUpdate:modelValue":j[0]||(j[0]=D=>n.value=D),style:{width:"240px"},placeholder:M.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:U(()=>[F(N,{class:"el-input__icon"},{default:U(()=>[F(I)]),_:1})]),_:1},8,["modelValue","placeholder"])]),F(Y,{label:M.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:U(()=>[F(ee,{height:"400"},{default:U(()=>[E.value.length>0?(rt(),Dn("div",yU,[(rt(!0),Dn(ni,null,Bi(E.value,(D,V)=>(rt(),Dn("div",{key:V,class:"workflow-dropdown-item cursor flex p-8-12",onClick:xn(X=>O(D),["stop"]),onMousedown:xn(X=>S(D),["stop"])},[(rt(),Yt(Oh(Hr(xh)(`${D.type}-icon`)),{class:"mr-8 mt-4",size:32})),ge("div",gU,[ge("div",_U,Ve(D.label),1),F(q,{type:"info",size:"small"},{default:U(()=>[It(Ve(D.text),1)]),_:2},1024)])],40,mU))),128))])):(rt(),Dn("div",bU,[F(q,{type:"info"},{default:U(()=>[It(Ve(M.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),F(Y,{label:M.$t("views.functionLib.title"),name:"function"},{default:U(()=>[F(ee,{height:"400"},{default:U(()=>[ge("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:j[1]||(j[1]=xn(D=>O(Hr(um)),["stop"])),onMousedown:j[2]||(j[2]=xn(D=>S(Hr(um)),["stop"]))},[(rt(),Yt(Oh(Hr(xh)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),ge("div",wU,[ge("div",EU,Ve(Hr(um).label),1),F(q,{type:"info",size:"small"},{default:U(()=>[It(Ve(Hr(um).text),1)]),_:1})])],32),(rt(!0),Dn(ni,null,Bi(h.value,(D,V)=>(rt(),Dn("div",{key:V,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:xn(X=>O(Hr(XO),D,"function"),["stop"]),onMousedown:xn(X=>S(Hr(XO),D,"function"),["stop"])},[(rt(),Yt(Oh(Hr(xh)("function-lib-node-icon")),{class:"mr-8",size:32,item:D},null,8,["item"])),ge("div",xU,[ge("div",{class:"lighter ellipsis-1",title:D.name},Ve(D.name),9,SU),ge("p",null,[D.desc?(rt(),Yt(q,{key:0,class:"ellipsis-1",type:"info",size:"small",title:D.desc},{default:U(()=>[It(Ve(D.desc),1)]),_:2},1032,["title"])):fr("",!0)])])],40,OU))),128))]),_:1})]),_:1},8,["label"]),F(Y,{label:M.$t("views.application.title"),name:"application"},{default:U(()=>[F(ee,{height:"400"},{default:U(()=>[_.value.length>0?(rt(),Dn("div",AU,[(rt(!0),Dn(ni,null,Bi(_.value,(D,V)=>(rt(),Dn("div",{key:V,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:xn(X=>O(Hr(YO),D,"application"),["stop"]),onMousedown:xn(X=>S(Hr(YO),D,"application"),["stop"])},[(rt(),Yt(Oh(Hr(xh)("application-node-icon")),{class:"mr-8",size:32,item:D},null,8,["item"])),ge("div",MU,[ge("div",{class:"lighter ellipsis",title:D.name},Ve(D.name),9,PU),ge("p",null,[D.desc?(rt(),Yt(q,{key:0,class:"ellipsis",type:"info",size:"small",title:D.desc},{default:U(()=>[It(Ve(D.desc),1)]),_:2},1032,["title"])):fr("",!0)])]),ge("div",kU,[Hr(vm)(D.type)?(rt(),Yt(Q,{key:0,type:"warning",style:{height:"22px"}},{default:U(()=>[It(Ve(M.$t("views.application.workflow")),1)]),_:1})):(rt(),Yt(Q,{key:1,class:"blue-tag",style:{height:"22px"}},{default:U(()=>[It(Ve(M.$t("views.application.simple")),1)]),_:1}))])],40,TU))),128))])):(rt(),Dn("div",NU,[F(q,{type:"info"},{default:U(()=>[It(Ve(M.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[Ih,e.show]])}}});const NM=ty(RU,[["__scopeId","data-v-70745e24"]]),jU={class:"flex-between"},CU={class:"flex align-center",style:{width:"70%"}},DU={class:"ellipsis-1 break-all"},IU={key:0,src:dU,alt:""},LU={key:1,src:pU,alt:""},FU={style:{width:"280px"},class:"p-12-16"},$U={class:"mt-8 lighter"},BU={class:"title-decoration-1 mb-8 mt-8"},UU=["onMouseenter"],GU={style:{"max-width":"92%"}},VU={class:"dialog-footer"},WU=Dr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=xl.config.globalProperties.$route,n=St({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),a=St(!1),r=St(),s=St(),c=St(!1),v=St({title:""}),h=Oo({set:D=>{at.set(q.nodeModel.properties,"condition",D)},get:()=>q.nodeModel.properties.condition?q.nodeModel.properties.condition:(at.set(q.nodeModel.properties,"condition","AND"),!0)}),g=Oo({set:D=>{at.set(q.nodeModel.properties,"showNode",D)},get:()=>q.nodeModel.properties.showNode!==void 0?q.nodeModel.properties.showNode:(at.set(q.nodeModel.properties,"showNode",!0),!0)}),_=D=>{D.ctrlKey||D.metaKey||D.stopPropagation()},E=Oo(()=>q.nodeModel.properties.status?q.nodeModel.properties.status:200);function O(){v.value.title=q.nodeModel.properties.stepName,c.value=!0}const S=async D=>{D&&await D.validate(V=>{var X;V&&((X=q.nodeModel.graphModel.nodes)!=null&&X.some(H=>H.properties.stepName===v.value.title)?da(nn("views.applicationWorkflow.tip.repeatedNodeError")):(at.set(q.nodeModel.properties,"stepName",v.value.title),c.value=!1,D.resetFields()))})},k=()=>{q.nodeModel.graphModel.clearSelectElements(),at.set(q.nodeModel,"isSelected",!0),at.set(q.nodeModel,"isHovered",!0),q.nodeModel.graphModel.toFront(q.nodeModel.id)},M=St(null),j=()=>{q.nodeModel.graphModel.clearSelectElements();const D=q.nodeModel.graphModel.cloneNode(q.nodeModel.id);at.set(D,"isSelected",!0),at.set(D,"isHovered",!0),q.nodeModel.graphModel.toFront(D.id)},I=()=>{f1(nn("common.tip"),nn("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:nn("common.confirm"),confirmButtonClass:"danger"}).then(()=>{q.nodeModel.graphModel.deleteNode(q.nodeModel.id)}),q.nodeModel.graphModel.eventCenter.emit("delete_node")},N=D=>{D.height&&(q.nodeModel.virtual||(n.value.stepContainerHeight=D.height,q.nodeModel.setHeight(n.value.stepContainerHeight)))};function B(D){var H,de,Ce;const V=D.properties.width?D.properties.width:214,X=q.nodeModel.graphModel.addNode({type:D.type,properties:D.properties,x:((H=r.value)==null?void 0:H.x)+V/2+200,y:((de=r.value)==null?void 0:de.y)-D.height});q.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:q.nodeModel.id,sourceAnchorId:(Ce=r.value)==null?void 0:Ce.id,targetNodeId:X.id}),z()}const q=e,ee=Oo(()=>{var D;return q.nodeModel.properties.config.fields?(D=q.nodeModel.properties.config.fields)==null?void 0:D.map(X=>({label:X.label,value:X.value,globeLabel:`{{${q.nodeModel.properties.stepName}.${X.value}}}`,globeValue:`{{context['${q.nodeModel.id}'].${X.value}}}`})):[]});function Y(D){return D!==ti.Base&&D!==ti.Start}const Q=D=>{a.value=!0,r.value=D},z=()=>{a.value=!1,r.value=void 0};return $o(()=>{at.set(q.nodeModel,"openNodeMenu",D=>{a.value?z():Q(D)})}),(D,V)=>{var me;const X=ue("ArrowDownBold"),H=ue("el-icon"),de=ue("el-button"),Ce=ue("el-option"),Me=ue("el-select"),He=ue("el-dropdown"),$e=ue("MoreFilled"),ke=ue("el-dropdown-item"),le=ue("el-dropdown-menu"),he=ue("el-alert"),Se=ue("AppIcon"),Ke=ue("el-tooltip"),Ge=ue("el-collapse-transition"),et=ue("el-input"),gt=ue("el-form-item"),dt=ue("el-form"),zt=ue("el-dialog"),je=Lh("resize");return rt(),Dn("div",{onMousedown:k,class:"workflow-node-container p-16",style:{overflow:"visible"}},[ge("div",{class:rd(["step-container app-card p-16",{isSelected:q.nodeModel.isSelected,error:E.value!==200}]),style:{overflow:"visible"}},[hu((rt(),Dn("div",null,[ge("div",jU,[ge("div",CU,[(rt(),Yt(Oh(Hr(xh)(`${D.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(me=D.nodeModel)==null?void 0:me.properties.node_data},null,8,["item"])),ge("h4",DU,Ve(D.nodeModel.properties.stepName),1)]),ge("div",{onMousemove:V[2]||(V[2]=xn(()=>{},["stop"])),onMousedown:V[3]||(V[3]=xn(()=>{},["stop"])),onKeydown:V[4]||(V[4]=xn(()=>{},["stop"])),onClick:V[5]||(V[5]=xn(()=>{},["stop"]))},[F(de,{text:"",onClick:V[0]||(V[0]=xe=>g.value=!g.value)},{default:U(()=>[F(H,{class:rd(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:U(()=>[F(X)]),_:1},8,["class"])]),_:1}),Y(D.nodeModel.type)?(rt(),Yt(He,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:U(()=>[ge("div",FU,[ge("h5",null,Ve(D.$t("views.applicationWorkflow.condition.title")),1),ge("p",$U,[ge("span",null,Ve(D.$t("views.applicationWorkflow.condition.front")),1),F(Me,{modelValue:h.value,"onUpdate:modelValue":V[1]||(V[1]=xe=>h.value=xe),size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[F(Ce,{label:D.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),F(Ce,{label:D.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),ge("span",null,Ve(D.$t("views.applicationWorkflow.condition.text")),1)])])]),default:U(()=>[F(de,{text:""},{default:U(()=>[h.value==="OR"?(rt(),Dn("img",IU)):fr("",!0),h.value==="AND"?(rt(),Dn("img",LU)):fr("",!0)]),_:1})]),_:1})):fr("",!0),Y(D.nodeModel.type)?(rt(),Yt(He,{key:1,teleported:!1,trigger:"click"},{dropdown:U(()=>[F(le,{style:{"min-width":"80px"}},{default:U(()=>[F(ke,{onClick:O,class:"p-8"},{default:U(()=>[It(Ve(D.$t("common.rename")),1)]),_:1}),F(ke,{onClick:j,class:"p-8"},{default:U(()=>[It(Ve(D.$t("common.copy")),1)]),_:1}),F(ke,{onClick:I,class:"border-t p-8"},{default:U(()=>[It(Ve(D.$t("common.delete")),1)]),_:1})]),_:1})]),default:U(()=>[F(de,{text:""},{default:U(()=>[F(H,{class:"color-secondary"},{default:U(()=>[F($e)]),_:1})]),_:1})]),_:1})):fr("",!0)],32)]),F(Ge,null,{default:U(()=>[hu(ge("div",{onMousedown:V[7]||(V[7]=xn(()=>{},["stop"])),onKeydown:V[8]||(V[8]=xn(()=>{},["stop"])),onClick:V[9]||(V[9]=xn(()=>{},["stop"])),class:"mt-16"},[E.value!=200?(rt(),Yt(he,{key:0,class:"mb-16",title:q.nodeModel.type==="application-node"?D.$t("views.applicationWorkflow.tip.applicationNodeError"):D.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):fr("",!0),CC(D.$slots,"default",{},void 0,!0),ee.value.length>0?(rt(),Dn(ni,{key:1},[ge("h5",BU,Ve(D.$t("common.param.outputParam")),1),(rt(!0),Dn(ni,null,Bi(ee.value,(xe,vt)=>(rt(),Dn("div",{key:vt,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:Wt=>M.value=vt,onMouseleave:V[6]||(V[6]=Wt=>M.value=null)},[ge("span",GU,Ve(xe.label)+" "+Ve("{"+xe.value+"}"),1),M.value===vt?(rt(),Yt(Ke,{key:0,effect:"dark",content:D.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[F(de,{link:"",onClick:Wt=>Hr(ZA)(xe.globeLabel),style:{padding:"0"}},{default:U(()=>[F(Se,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):fr("",!0)],40,UU))),128))],64)):fr("",!0)],544),[[Ih,g.value]])]),_:3})])),[[je,N]])],2),F(Ge,null,{default:U(()=>[a.value?(rt(),Yt(NM,{key:0,onMousemove:V[10]||(V[10]=xn(()=>{},["stop"])),onMousedown:V[11]||(V[11]=xn(()=>{},["stop"])),onClick:V[12]||(V[12]=xn(()=>{},["stop"])),onWheel:_,show:a.value,id:Hr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:B},null,8,["show","id"])):fr("",!0)]),_:1}),F(zt,{title:D.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":V[17]||(V[17]=xe=>c.value=xe),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:V[18]||(V[18]=xn(()=>{},["prevent"]))},{footer:U(()=>[ge("span",VU,[F(de,{onClick:V[15]||(V[15]=xn(xe=>c.value=!1,["prevent"]))},{default:U(()=>[It(Ve(D.$t("common.cancel")),1)]),_:1}),F(de,{type:"primary",onClick:V[16]||(V[16]=xe=>S(s.value))},{default:U(()=>[It(Ve(D.$t("common.save")),1)]),_:1})])]),default:U(()=>[F(dt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:v.value},{default:U(()=>[F(gt,{prop:"title",rules:[{required:!0,message:D.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:U(()=>[F(et,{modelValue:v.value.title,"onUpdate:modelValue":V[13]||(V[13]=xe=>v.value.title=xe),onBlur:V[14]||(V[14]=xe=>v.value.title=v.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const Ui=ty(WU,[["__scopeId","data-v-a66024dd"]]),zU={class:"dialog-footer"},HU=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,XU=Dr({__name:"McpServersDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=St(),s=St({mcp_servers:"",mcp_enable:!1}),c=St(!1),v=St(!1);d1(c,_=>{_||(s.value={mcp_servers:"",mcp_enable:!1})});const h=_=>{s.value={...s.value,..._},c.value=!0},g=()=>{r.value.validate().then(_=>{_&&(a("refresh",s.value),c.value=!1)})};return t({open:h}),(_,E)=>{const O=ue("el-switch"),S=ue("el-form-item"),k=ue("el-input"),M=ue("el-form"),j=ue("el-button"),I=ue("el-dialog");return rt(),Yt(I,{"align-center":"",title:_.$t("common.setting"),modelValue:c.value,"onUpdate:modelValue":E[4]||(E[4]=N=>c.value=N),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[ge("span",zU,[F(j,{onClick:E[2]||(E[2]=xn(N=>c.value=!1,["prevent"]))},{default:U(()=>[It(Ve(_.$t("common.cancel")),1)]),_:1}),F(j,{type:"primary",onClick:E[3]||(E[3]=N=>g()),loading:v.value},{default:U(()=>[It(Ve(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(M,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value,"require-asterisk-position":"right"},{default:U(()=>[F(S,{label:"MCP",prop:"mcp_enable"},{default:U(()=>[F(O,{modelValue:s.value.mcp_enable,"onUpdate:modelValue":E[0]||(E[0]=N=>s.value.mcp_enable=N)},null,8,["modelValue"])]),_:1}),s.value.mcp_enable?(rt(),Yt(S,{key:0,label:_.$t("views.applicationWorkflow.nodes.mcpNode.configLabel"),prop:"mcp_servers",rules:[{required:!0,message:_.$t("common.required")}]},{default:U(()=>[F(k,{modelValue:s.value.mcp_servers,"onUpdate:modelValue":E[1]||(E[1]=N=>s.value.mcp_servers=N),rows:6,type:"textarea",placeholder:HU},null,8,["modelValue"])]),_:1},8,["label","rules"])):fr("",!0)]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),YU={class:"title-decoration-1 mb-8"},qU={class:"flex-between w-full"},KU={class:"flex align-center"},ZU={class:"mr-4"},JU={class:"flex-between"},QU={class:"flex-between mb-16"},eG={class:"lighter"},tG={class:"flex-between w-full"},nG={class:"flex align-center"},rG={class:"mr-4"},oG=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=nf(),n=z=>z.ctrlKey===!0?(z.preventDefault(),!0):(z.stopPropagation(),!0);function a(z){at.set(_.nodeModel.properties.node_data,"system",z)}function r(z){at.set(_.nodeModel.properties.node_data,"prompt",z)}const s=z=>{var D;z?(D=S.value)==null||D.reset_default(z,c):B({})},{params:{id:c}}=xl.config.globalProperties.$route,h={model_id:"",system:"",prompt:`${nn("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${nn("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${nn("views.problem.title")}：
{{${nn("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:1,is_result:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",model_setting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},g=Oo({get:()=>_.nodeModel.properties.node_data?(_.nodeModel.properties.node_data.model_setting||at.set(_.nodeModel.properties.node_data,"model_setting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),_.nodeModel.properties.node_data):(at.set(_.nodeModel.properties,"node_data",h),_.nodeModel.properties.node_data),set:z=>{at.set(_.nodeModel.properties,"node_data",z)}}),_=e,E=St(),O=St(null),S=St(),k=St(),M=()=>{var z;return(z=E.value)==null?void 0:z.validate().catch(D=>Promise.reject({node:_.nodeModel,errMessage:D}))};function j(){c?ha.getApplicationModel(c).then(z=>{O.value=at.groupBy(z==null?void 0:z.data,"provider")}):t.asyncGetModel().then(z=>{O.value=at.groupBy(z==null?void 0:z.data,"provider")})}const I=z=>{var D;z&&((D=S.value)==null||D.open(z,c,g.value.model_params_setting))},N=()=>{var z;(z=k.value)==null||z.open(g.value.model_setting)};function B(z){at.set(_.nodeModel.properties.node_data,"model_params_setting",z)}function q(z){let D=at.cloneDeep(_.nodeModel.properties.node_data.model_setting);D={...D,...z},at.set(_.nodeModel.properties.node_data,"model_setting",D)}const ee=St();function Y(){const z={mcp_servers:g.value.mcp_servers,mcp_enable:g.value.mcp_enable};ee.value.open(z)}function Q(z){at.set(_.nodeModel.properties.node_data,"mcp_servers",z.mcp_servers),at.set(_.nodeModel.properties.node_data,"mcp_enable",z.mcp_enable)}return $o(()=>{var z;j(),typeof((z=_.nodeModel.properties.node_data)==null?void 0:z.is_result)>"u"&&yp(_.nodeModel)&&at.set(_.nodeModel.properties.node_data,"is_result",!0),at.set(_.nodeModel,"validate",M),g.value.dialogue_type||(g.value.dialogue_type="WORKFLOW")}),(z,D)=>{const V=ue("Setting"),X=ue("el-icon"),H=ue("el-button"),de=ue("ModelSelect"),Ce=ue("el-form-item"),Me=ue("MdEditorMagnify"),He=ue("AppIcon"),$e=ue("el-tooltip"),ke=ue("el-option"),le=ue("el-select"),he=ue("el-input-number"),Se=ue("el-switch"),Ke=ue("el-form"),Ge=ue("el-card");return rt(),Yt(Ui,{nodeModel:z.nodeModel},{default:U(()=>[ge("h5",YU,Ve(z.$t("views.applicationWorkflow.nodeSetting")),1),F(Ge,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(Ke,{onSubmit:D[10]||(D[10]=xn(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:E,"hide-required-asterisk":""},{default:U(()=>[F(Ce,{label:z.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:z.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[ge("div",qU,[ge("div",null,[ge("span",null,[It(Ve(z.$t("views.application.applicationForm.form.aiModel.label")),1),D[11]||(D[11]=ge("span",{class:"danger"},"*",-1))])]),F(H,{disabled:!g.value.model_id,type:"primary",link:"",onClick:D[0]||(D[0]=et=>I(g.value.model_id)),onRefreshForm:B},{default:U(()=>[F(X,null,{default:U(()=>[F(V)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(de,{onChange:s,onWheel:n,teleported:!1,modelValue:g.value.model_id,"onUpdate:modelValue":D[1]||(D[1]=et=>g.value.model_id=et),placeholder:z.$t("views.application.applicationForm.form.aiModel.placeholder"),options:O.value,onSubmitModel:j,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(Ce,{label:z.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(Me,{title:z.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:g.value.system,"onUpdate:modelValue":D[2]||(D[2]=et=>g.value.system=et),style:{height:"100px"},onSubmitDialog:a,placeholder:z.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(Ce,{label:z.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:z.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[ge("div",KU,[ge("div",ZU,[ge("span",null,[It(Ve(z.$t("views.application.applicationForm.form.prompt.label")),1),D[12]||(D[12]=ge("span",{class:"danger"},"*",-1))])]),F($e,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(z.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(He,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Me,{onWheel:n,title:z.$t("views.application.applicationForm.form.prompt.label"),modelValue:g.value.prompt,"onUpdate:modelValue":D[3]||(D[3]=et=>g.value.prompt=et),style:{height:"150px"},onSubmitDialog:r},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(Ce,{label:z.$t("views.application.applicationForm.form.historyRecord.label")},{label:U(()=>[ge("div",JU,[ge("div",null,Ve(z.$t("views.application.applicationForm.form.historyRecord.label")),1),F(le,{modelValue:g.value.dialogue_type,"onUpdate:modelValue":D[4]||(D[4]=et=>g.value.dialogue_type=et),type:"small",style:{width:"100px"}},{default:U(()=>[F(ke,{label:z.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),F(ke,{label:z.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[F(he,{modelValue:g.value.dialogue_number,"onUpdate:modelValue":D[5]||(D[5]=et=>g.value.dialogue_number=et),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),ge("div",QU,[ge("div",eG,Ve(z.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),F(H,{type:"primary",link:"",onClick:Y,onRefreshForm:B},{default:U(()=>[F(X,null,{default:U(()=>[F(V)]),_:1})]),_:1})]),F(Ce,{onClick:D[7]||(D[7]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",tG,[ge("div",null,[ge("span",null,Ve(z.$t("views.application.applicationForm.form.reasoningContent.label")),1)]),F(H,{type:"primary",link:"",onClick:N,onRefreshForm:B},{default:U(()=>[F(X,null,{default:U(()=>[F(V)]),_:1})]),_:1})])]),default:U(()=>[F(Se,{size:"small",modelValue:g.value.model_setting.reasoning_content_enable,"onUpdate:modelValue":D[6]||(D[6]=et=>g.value.model_setting.reasoning_content_enable=et)},null,8,["modelValue"])]),_:1}),F(Ce,{onClick:D[9]||(D[9]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",nG,[ge("div",rG,[ge("span",null,Ve(z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F($e,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(z.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(He,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Se,{size:"small",modelValue:g.value.is_result,"onUpdate:modelValue":D[8]||(D[8]=et=>g.value.is_result=et)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),F(Qm,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:B},null,512),F(eD,{ref_key:"ReasoningParamSettingDialogRef",ref:k,onRefresh:q},null,512),F(XU,{ref_key:"mcpServersDialogRef",ref:ee,onRefresh:Q},null,512)]),_:1},8,["nodeModel"])}}});var $0={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(s){if(a[s])return a[s].exports;var c=a[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var h in s)r.d(v,h,(function(g){return s[g]}).bind(null,h));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return ee}),r.d(a,"b",function(){return q}),r.d(a,"c",function(){return dt}),r.d(a,"d",function(){return zt}),r.d(a,"e",function(){return I}),r.d(a,"f",function(){return B}),r.d(a,"g",function(){return I}),r.d(a,"h",function(){return gt}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return et}),r.d(a,"k",function(){return H});var s,c,v,h,g,_,E,O={},S=[],k=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function M(je,me){for(var xe in me)je[xe]=me[xe];return je}function j(je){var me=je.parentNode;me&&me.removeChild(je)}function I(je,me,xe){var vt,Wt,Ot,rn={};for(Ot in me)Ot=="key"?vt=me[Ot]:Ot=="ref"?Wt=me[Ot]:rn[Ot]=me[Ot];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):xe),typeof je=="function"&&je.defaultProps!=null)for(Ot in je.defaultProps)rn[Ot]===void 0&&(rn[Ot]=je.defaultProps[Ot]);return N(je,rn,vt,Wt,null)}function N(je,me,xe,vt,Wt){var Ot={type:je,props:me,key:xe,ref:vt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Wt??++v};return Wt==null&&c.vnode!=null&&c.vnode(Ot),Ot}function B(){return{current:null}}function q(je){return je.children}function ee(je,me){this.props=je,this.context=me}function Y(je,me){if(me==null)return je.__?Y(je.__,je.__.__k.indexOf(je)+1):null;for(var xe;me<je.__k.length;me++)if((xe=je.__k[me])!=null&&xe.__e!=null)return xe.__e;return typeof je.type=="function"?Y(je):null}function Q(je){var me,xe;if((je=je.__)!=null&&je.__c!=null){for(je.__e=je.__c.base=null,me=0;me<je.__k.length;me++)if((xe=je.__k[me])!=null&&xe.__e!=null){je.__e=je.__c.base=xe.__e;break}return Q(je)}}function z(je){(!je.__d&&(je.__d=!0)&&h.push(je)&&!D.__r++||_!==c.debounceRendering)&&((_=c.debounceRendering)||g)(D)}function D(){for(var je;D.__r=h.length;)je=h.sort(function(me,xe){return me.__v.__b-xe.__v.__b}),h=[],je.some(function(me){var xe,vt,Wt,Ot,rn,vn;me.__d&&(rn=(Ot=(xe=me).__v).__e,(vn=xe.__P)&&(vt=[],(Wt=M({},Ot)).__v=Ot.__v+1,ke(vn,Ot,Wt,xe.__n,vn.ownerSVGElement!==void 0,Ot.__h!=null?[rn]:null,vt,rn??Y(Ot),Ot.__h),le(vt,Ot),Ot.__e!=rn&&Q(Ot)))})}function V(je,me,xe,vt,Wt,Ot,rn,vn,An,pn){var ft,En,Le,yn,qn,ne,Fn,wr=vt&&vt.__k||S,Lr=wr.length;for(xe.__k=[],ft=0;ft<me.length;ft++)if((yn=xe.__k[ft]=(yn=me[ft])==null||typeof yn=="boolean"?null:typeof yn=="string"||typeof yn=="number"||typeof yn=="bigint"?N(null,yn,null,null,yn):Array.isArray(yn)?N(q,{children:yn},null,null,null):yn.__b>0?N(yn.type,yn.props,yn.key,null,yn.__v):yn)!=null){if(yn.__=xe,yn.__b=xe.__b+1,(Le=wr[ft])===null||Le&&yn.key==Le.key&&yn.type===Le.type)wr[ft]=void 0;else for(En=0;En<Lr;En++){if((Le=wr[En])&&yn.key==Le.key&&yn.type===Le.type){wr[En]=void 0;break}Le=null}ke(je,yn,Le=Le||O,Wt,Ot,rn,vn,An,pn),qn=yn.__e,(En=yn.ref)&&Le.ref!=En&&(Fn||(Fn=[]),Le.ref&&Fn.push(Le.ref,null,yn),Fn.push(En,yn.__c||qn,yn)),qn!=null?(ne==null&&(ne=qn),typeof yn.type=="function"&&yn.__k===Le.__k?yn.__d=An=X(yn,An,je):An=de(je,yn,Le,wr,qn,An),typeof xe.type=="function"&&(xe.__d=An)):An&&Le.__e==An&&An.parentNode!=je&&(An=Y(Le))}for(xe.__e=ne,ft=Lr;ft--;)wr[ft]!=null&&(typeof xe.type=="function"&&wr[ft].__e!=null&&wr[ft].__e==xe.__d&&(xe.__d=Y(vt,ft+1)),Ke(wr[ft],wr[ft]));if(Fn)for(ft=0;ft<Fn.length;ft++)Se(Fn[ft],Fn[++ft],Fn[++ft])}function X(je,me,xe){for(var vt,Wt=je.__k,Ot=0;Wt&&Ot<Wt.length;Ot++)(vt=Wt[Ot])&&(vt.__=je,me=typeof vt.type=="function"?X(vt,me,xe):de(xe,vt,vt,Wt,vt.__e,me));return me}function H(je,me){return me=me||[],je==null||typeof je=="boolean"||(Array.isArray(je)?je.some(function(xe){H(xe,me)}):me.push(je)),me}function de(je,me,xe,vt,Wt,Ot){var rn,vn,An;if(me.__d!==void 0)rn=me.__d,me.__d=void 0;else if(xe==null||Wt!=Ot||Wt.parentNode==null)e:if(Ot==null||Ot.parentNode!==je)je.appendChild(Wt),rn=null;else{for(vn=Ot,An=0;(vn=vn.nextSibling)&&An<vt.length;An+=2)if(vn==Wt)break e;je.insertBefore(Wt,Ot),rn=Ot}return rn!==void 0?rn:Wt.nextSibling}function Ce(je,me,xe){me[0]==="-"?je.setProperty(me,xe):je[me]=xe==null?"":typeof xe!="number"||k.test(me)?xe:xe+"px"}function Me(je,me,xe,vt,Wt){var Ot;e:if(me==="style")if(typeof xe=="string")je.style.cssText=xe;else{if(typeof vt=="string"&&(je.style.cssText=vt=""),vt)for(me in vt)xe&&me in xe||Ce(je.style,me,"");if(xe)for(me in xe)vt&&xe[me]===vt[me]||Ce(je.style,me,xe[me])}else if(me[0]==="o"&&me[1]==="n")Ot=me!==(me=me.replace(/Capture$/,"")),me=me.toLowerCase()in je?me.toLowerCase().slice(2):me.slice(2),je.l||(je.l={}),je.l[me+Ot]=xe,xe?vt||je.addEventListener(me,Ot?$e:He,Ot):je.removeEventListener(me,Ot?$e:He,Ot);else if(me!=="dangerouslySetInnerHTML"){if(Wt)me=me.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(me!=="href"&&me!=="list"&&me!=="form"&&me!=="tabIndex"&&me!=="download"&&me in je)try{je[me]=xe??"";break e}catch{}typeof xe=="function"||(xe!=null&&(xe!==!1||me[0]==="a"&&me[1]==="r")?je.setAttribute(me,xe):je.removeAttribute(me))}}function He(je){this.l[je.type+!1](c.event?c.event(je):je)}function $e(je){this.l[je.type+!0](c.event?c.event(je):je)}function ke(je,me,xe,vt,Wt,Ot,rn,vn,An){var pn,ft,En,Le,yn,qn,ne,Fn,wr,Lr,Kr,jn=me.type;if(me.constructor!==void 0)return null;xe.__h!=null&&(An=xe.__h,vn=me.__e=xe.__e,me.__h=null,Ot=[vn]),(pn=c.__b)&&pn(me);try{e:if(typeof jn=="function"){if(Fn=me.props,wr=(pn=jn.contextType)&&vt[pn.__c],Lr=pn?wr?wr.props.value:pn.__:vt,xe.__c?ne=(ft=me.__c=xe.__c).__=ft.__E:("prototype"in jn&&jn.prototype.render?me.__c=ft=new jn(Fn,Lr):(me.__c=ft=new ee(Fn,Lr),ft.constructor=jn,ft.render=Ge),wr&&wr.sub(ft),ft.props=Fn,ft.state||(ft.state={}),ft.context=Lr,ft.__n=vt,En=ft.__d=!0,ft.__h=[]),ft.__s==null&&(ft.__s=ft.state),jn.getDerivedStateFromProps!=null&&(ft.__s==ft.state&&(ft.__s=M({},ft.__s)),M(ft.__s,jn.getDerivedStateFromProps(Fn,ft.__s))),Le=ft.props,yn=ft.state,En)jn.getDerivedStateFromProps==null&&ft.componentWillMount!=null&&ft.componentWillMount(),ft.componentDidMount!=null&&ft.__h.push(ft.componentDidMount);else{if(jn.getDerivedStateFromProps==null&&Fn!==Le&&ft.componentWillReceiveProps!=null&&ft.componentWillReceiveProps(Fn,Lr),!ft.__e&&ft.shouldComponentUpdate!=null&&ft.shouldComponentUpdate(Fn,ft.__s,Lr)===!1||me.__v===xe.__v){ft.props=Fn,ft.state=ft.__s,me.__v!==xe.__v&&(ft.__d=!1),ft.__v=me,me.__e=xe.__e,me.__k=xe.__k,me.__k.forEach(function(Ao){Ao&&(Ao.__=me)}),ft.__h.length&&rn.push(ft);break e}ft.componentWillUpdate!=null&&ft.componentWillUpdate(Fn,ft.__s,Lr),ft.componentDidUpdate!=null&&ft.__h.push(function(){ft.componentDidUpdate(Le,yn,qn)})}ft.context=Lr,ft.props=Fn,ft.state=ft.__s,(pn=c.__r)&&pn(me),ft.__d=!1,ft.__v=me,ft.__P=je,pn=ft.render(ft.props,ft.state,ft.context),ft.state=ft.__s,ft.getChildContext!=null&&(vt=M(M({},vt),ft.getChildContext())),En||ft.getSnapshotBeforeUpdate==null||(qn=ft.getSnapshotBeforeUpdate(Le,yn)),Kr=pn!=null&&pn.type===q&&pn.key==null?pn.props.children:pn,V(je,Array.isArray(Kr)?Kr:[Kr],me,xe,vt,Wt,Ot,rn,vn,An),ft.base=me.__e,me.__h=null,ft.__h.length&&rn.push(ft),ne&&(ft.__E=ft.__=null),ft.__e=!1}else Ot==null&&me.__v===xe.__v?(me.__k=xe.__k,me.__e=xe.__e):me.__e=he(xe.__e,me,xe,vt,Wt,Ot,rn,An);(pn=c.diffed)&&pn(me)}catch(Ao){me.__v=null,(An||Ot!=null)&&(me.__e=vn,me.__h=!!An,Ot[Ot.indexOf(vn)]=null),c.__e(Ao,me,xe)}}function le(je,me){c.__c&&c.__c(me,je),je.some(function(xe){try{je=xe.__h,xe.__h=[],je.some(function(vt){vt.call(xe)})}catch(vt){c.__e(vt,xe.__v)}})}function he(je,me,xe,vt,Wt,Ot,rn,vn){var An,pn,ft,En=xe.props,Le=me.props,yn=me.type,qn=0;if(yn==="svg"&&(Wt=!0),Ot!=null){for(;qn<Ot.length;qn++)if((An=Ot[qn])&&"setAttribute"in An==!!yn&&(yn?An.localName===yn:An.nodeType===3)){je=An,Ot[qn]=null;break}}if(je==null){if(yn===null)return document.createTextNode(Le);je=Wt?document.createElementNS("http://www.w3.org/2000/svg",yn):document.createElement(yn,Le.is&&Le),Ot=null,vn=!1}if(yn===null)En===Le||vn&&je.data===Le||(je.data=Le);else{if(Ot=Ot&&s.call(je.childNodes),pn=(En=xe.props||O).dangerouslySetInnerHTML,ft=Le.dangerouslySetInnerHTML,!vn){if(Ot!=null)for(En={},qn=0;qn<je.attributes.length;qn++)En[je.attributes[qn].name]=je.attributes[qn].value;(ft||pn)&&(ft&&(pn&&ft.__html==pn.__html||ft.__html===je.innerHTML)||(je.innerHTML=ft&&ft.__html||""))}if(function(ne,Fn,wr,Lr,Kr){var jn;for(jn in wr)jn==="children"||jn==="key"||jn in Fn||Me(ne,jn,null,wr[jn],Lr);for(jn in Fn)Kr&&typeof Fn[jn]!="function"||jn==="children"||jn==="key"||jn==="value"||jn==="checked"||wr[jn]===Fn[jn]||Me(ne,jn,Fn[jn],wr[jn],Lr)}(je,Le,En,Wt,vn),ft)me.__k=[];else if(qn=me.props.children,V(je,Array.isArray(qn)?qn:[qn],me,xe,vt,Wt&&yn!=="foreignObject",Ot,rn,Ot?Ot[0]:xe.__k&&Y(xe,0),vn),Ot!=null)for(qn=Ot.length;qn--;)Ot[qn]!=null&&j(Ot[qn]);vn||("value"in Le&&(qn=Le.value)!==void 0&&(qn!==En.value||qn!==je.value||yn==="progress"&&!qn)&&Me(je,"value",qn,En.value,!1),"checked"in Le&&(qn=Le.checked)!==void 0&&qn!==je.checked&&Me(je,"checked",qn,En.checked,!1))}return je}function Se(je,me,xe){try{typeof je=="function"?je(me):je.current=me}catch(vt){c.__e(vt,xe)}}function Ke(je,me,xe){var vt,Wt;if(c.unmount&&c.unmount(je),(vt=je.ref)&&(vt.current&&vt.current!==je.__e||Se(vt,null,me)),(vt=je.__c)!=null){if(vt.componentWillUnmount)try{vt.componentWillUnmount()}catch(Ot){c.__e(Ot,me)}vt.base=vt.__P=null}if(vt=je.__k)for(Wt=0;Wt<vt.length;Wt++)vt[Wt]&&Ke(vt[Wt],me,typeof je.type!="function");xe||je.__e==null||j(je.__e),je.__e=je.__d=void 0}function Ge(je,me,xe){return this.constructor(je,xe)}function et(je,me,xe){var vt,Wt,Ot;c.__&&c.__(je,me),Wt=(vt=typeof xe=="function")?null:xe&&xe.__k||me.__k,Ot=[],ke(me,je=(!vt&&xe||me).__k=I(q,null,[je]),Wt||O,O,me.ownerSVGElement!==void 0,!vt&&xe?[xe]:Wt?null:me.firstChild?s.call(me.childNodes):null,Ot,!vt&&xe?xe:Wt?Wt.__e:me.firstChild,vt),le(Ot,je)}function gt(je,me){et(je,me,gt)}function dt(je,me,xe){var vt,Wt,Ot,rn=M({},je.props);for(Ot in me)Ot=="key"?vt=me[Ot]:Ot=="ref"?Wt=me[Ot]:rn[Ot]=me[Ot];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):xe),N(je.type,rn,vt||je.key,Wt||je.ref,null)}function zt(je,me){var xe={__c:me="__cC"+E++,__:je,Consumer:function(vt,Wt){return vt.children(Wt)},Provider:function(vt){var Wt,Ot;return this.getChildContext||(Wt=[],(Ot={})[me]=this,this.getChildContext=function(){return Ot},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&Wt.some(z)},this.sub=function(rn){Wt.push(rn);var vn=rn.componentWillUnmount;rn.componentWillUnmount=function(){Wt.splice(Wt.indexOf(rn),1),vn&&vn.call(rn)}}),vt.children}};return xe.Provider.__=xe.Consumer.contextType=xe}s=S.slice,c={__e:function(je,me){for(var xe,vt,Wt;me=me.__;)if((xe=me.__c)&&!xe.__)try{if((vt=xe.constructor)&&vt.getDerivedStateFromError!=null&&(xe.setState(vt.getDerivedStateFromError(je)),Wt=xe.__d),xe.componentDidCatch!=null&&(xe.componentDidCatch(je),Wt=xe.__d),Wt)return xe.__E=xe}catch(Ot){je=Ot}throw je}},v=0,ee.prototype.setState=function(je,me){var xe;xe=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof je=="function"&&(je=je(M({},xe),this.props)),je&&M(xe,je),je!=null&&this.__v&&(me&&this.__h.push(me),z(this))},ee.prototype.forceUpdate=function(je){this.__v&&(this.__e=!0,je&&this.__h.push(je),z(this))},ee.prototype.render=q,h=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,D.__r=0,E=0},function(n,a,r){(function(s,c){r.d(a,"a",function(){return z}),r.d(a,"b",function(){return uc}),r.d(a,"c",function(){return ya}),r.d(a,"d",function(){return Hn}),r.d(a,"e",function(){return qt}),r.d(a,"f",function(){return Qt}),r.d(a,"g",function(){return $n}),r.d(a,"h",function(){return gi}),r.d(a,"i",function(){return Kr}),r.d(a,"j",function(){return On}),r.d(a,"k",function(){return Ja}),r.d(a,"l",function(){return ec}),r.d(a,"m",function(){return ne}),r.d(a,"n",function(){return Vu}),r.d(a,"o",function(){return X}),r.d(a,"p",function(){return vf}),r.d(a,"q",function(){return na}),r.d(a,"r",function(){return Wu}),r.d(a,"s",function(){return Xi}),r.d(a,"t",function(){return To}),r.d(a,"u",function(){return ns}),r.d(a,"v",function(){return hf}),r.d(a,"w",function(){return nc}),r.d(a,"x",function(){return Ko}),r.d(a,"y",function(){return oa}),r.d(a,"z",function(){return Do}),r.d(a,"A",function(){return Jo}),r.d(a,"B",function(){return zi}),r.d(a,"C",function(){return pn}),r.d(a,"D",function(){return rc}),r.d(a,"E",function(){return Fr}),r.d(a,"F",function(){return Br}),r.d(a,"G",function(){return Js}),r.d(a,"H",function(){return Zs}),r.d(a,"I",function(){return oc}),r.d(a,"J",function(){return Zo}),r.d(a,"K",function(){return Xe}),r.d(a,"L",function(){return Zr}),r.d(a,"M",function(){return is});var v=[];Object.freeze(v);var h={};function g(){return++Mn.mobxGuid}function _(A){throw E(!1,A),"X"}function E(A,T){if(!A)throw new Error("[mobx] "+(T||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(h);function O(A){var T=!1;return function(){if(!T)return T=!0,A.apply(this,arguments)}}var S=function(){};function k(A){return A!==null&&typeof A=="object"}function M(A){if(A===null||typeof A!="object")return!1;var T=Object.getPrototypeOf(A);return T===Object.prototype||T===null}function j(A,T,$){Object.defineProperty(A,T,{enumerable:!1,writable:!0,configurable:!0,value:$})}function I(A,T){var $="isMobX"+A;return T.prototype[$]=!0,function(te){return k(te)&&te[$]===!0}}function N(A){return A instanceof Map}function B(A){return A instanceof Set}function q(A){var T=new Set;for(var $ in A)T.add($);return Object.getOwnPropertySymbols(A).forEach(function(te){Object.getOwnPropertyDescriptor(A,te).enumerable&&T.add(te)}),Array.from(T)}function ee(A){return A&&A.toString?A.toString():new String(A).toString()}function Y(A){return A===null?null:typeof A=="object"?""+A:A}var Q=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:Object.getOwnPropertyNames,z=Symbol("mobx administration"),D=function(){function A(T){T===void 0&&(T="Atom@"+g()),this.name=T,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=En.NOT_TRACKING}return A.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(T){return T()})},A.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(T){return T()})},A.prototype.reportObserved=function(){return ts(this)},A.prototype.reportChanged=function(){Ci(),function(T){T.lowestObserverState!==En.STALE&&(T.lowestObserverState=En.STALE,T.observers.forEach(function($){$.dependenciesState===En.UP_TO_DATE&&($.isTracing!==Le.NONE&&va($,T),$.onBecomeStale()),$.dependenciesState=En.STALE}))}(this),Wi()},A.prototype.toString=function(){return this.name},A}(),V=I("Atom",D);function X(A,T,$){T===void 0&&(T=S),$===void 0&&($=S);var te,ye=new D(A);return T!==S&&df("onBecomeObserved",ye,T,te),$!==S&&Fr(ye,$),ye}var H={identity:function(A,T){return A===T},structural:function(A,T){return jt(A,T)},default:function(A,T){return Object.is(A,T)},shallow:function(A,T){return jt(A,T,1)}},de=function(A,T){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,te){$.__proto__=te}||function($,te){for(var ye in te)te.hasOwnProperty(ye)&&($[ye]=te[ye])},de(A,T)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Ce=function(){return Ce=Object.assign||function(A){for(var T,$=1,te=arguments.length;$<te;$++)for(var ye in T=arguments[$])Object.prototype.hasOwnProperty.call(T,ye)&&(A[ye]=T[ye]);return A},Ce.apply(this,arguments)};function Me(A){var T=typeof Symbol=="function"&&A[Symbol.iterator],$=0;return T?T.call(A):{next:function(){return A&&$>=A.length&&(A=void 0),{value:A&&A[$++],done:!A}}}}function He(A,T){var $=typeof Symbol=="function"&&A[Symbol.iterator];if(!$)return A;var te,ye,Ue=$.call(A),yt=[];try{for(;(T===void 0||T-- >0)&&!(te=Ue.next()).done;)yt.push(te.value)}catch(Ht){ye={error:Ht}}finally{try{te&&!te.done&&($=Ue.return)&&$.call(Ue)}finally{if(ye)throw ye.error}}return yt}function $e(){for(var A=[],T=0;T<arguments.length;T++)A=A.concat(He(arguments[T]));return A}var ke=Symbol("mobx did run lazy initializers"),le=Symbol("mobx pending decorators"),he={},Se={};function Ke(A,T){var $=T?he:Se;return $[A]||($[A]={configurable:!0,enumerable:T,get:function(){return Ge(this),this[A]},set:function(te){Ge(this),this[A]=te}})}function Ge(A){var T,$;if(A[ke]!==!0){var te=A[le];if(te){j(A,ke,!0);var ye=$e(Object.getOwnPropertySymbols(te),Object.keys(te));try{for(var Ue=Me(ye),yt=Ue.next();!yt.done;yt=Ue.next()){var Ht=te[yt.value];Ht.propertyCreator(A,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(gn){T={error:gn}}finally{try{yt&&!yt.done&&($=Ue.return)&&$.call(Ue)}finally{if(T)throw T.error}}}}}function et(A,T){return function(){var $,te=function(ye,Ue,yt,Ht){if(Ht===!0)return T(ye,Ue,yt,ye,$),null;if(!Object.prototype.hasOwnProperty.call(ye,le)){var gn=ye[le];j(ye,le,Ce({},gn))}return ye[le][Ue]={prop:Ue,propertyCreator:T,descriptor:yt,decoratorTarget:ye,decoratorArguments:$},Ke(Ue,A)};return gt(arguments)?($=v,te.apply(null,arguments)):($=Array.prototype.slice.call(arguments),te)}}function gt(A){return(A.length===2||A.length===3)&&(typeof A[1]=="string"||typeof A[1]=="symbol")||A.length===4&&A[3]===!0}function dt(A,T,$){return Ko(A)?A:Array.isArray(A)?pn.array(A,{name:$}):M(A)?pn.object(A,void 0,{name:$}):N(A)?pn.map(A,{name:$}):B(A)?pn.set(A,{name:$}):A}function zt(A){return A}function je(A){E(A);var T=et(!0,function(te,ye,Ue,yt,Ht){var gn=Ue?Ue.initializer?Ue.initializer.call(te):Ue.value:void 0;Hi(te).addObservableProp(ye,gn,A)}),$=(s!==void 0&&s.env,T);return $.enhancer=A,$}var me={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function xe(A){return A==null?me:typeof A=="string"?{name:A,deep:!0,proxy:!0}:A}Object.freeze(me);var vt=je(dt),Wt=je(function(A,T,$){return A==null||Jo(A)||oa(A)||Do(A)||Uo(A)?A:Array.isArray(A)?pn.array(A,{name:$,deep:!1}):M(A)?pn.object(A,void 0,{name:$,deep:!1}):N(A)?pn.map(A,{name:$,deep:!1}):B(A)?pn.set(A,{name:$,deep:!1}):_(!1)}),Ot=je(zt),rn=je(function(A,T,$){return jt(A,T)?T:A});function vn(A){return A.defaultDecorator?A.defaultDecorator.enhancer:A.deep===!1?zt:dt}var An={box:function(A,T){arguments.length>2&&ft("box");var $=xe(T);return new Tr(A,vn($),$.name,!0,$.equals)},array:function(A,T){arguments.length>2&&ft("array");var $=xe(T);return bu(A,vn($),$.name)},map:function(A,T){arguments.length>2&&ft("map");var $=xe(T);return new uc(A,vn($),$.name)},set:function(A,T){arguments.length>2&&ft("set");var $=xe(T);return new Na(A,vn($),$.name)},object:function(A,T,$){typeof arguments[1]=="string"&&ft("object");var te=xe($);if(te.proxy===!1)return na({},A,T,te);var ye=rs(te),Ue=na({},void 0,void 0,te),yt=zu(Ue);return pf(yt,A,T,ye),yt},ref:Ot,shallow:Wt,deep:vt,struct:rn},pn=function(A,T,$){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return vt.apply(null,arguments);if(Ko(A))return A;var te=M(A)?pn.object(A,T,$):Array.isArray(A)?pn.array(A,T):N(A)?pn.map(A,T):B(A)?pn.set(A,T):A;if(te!==A)return te;_(!1)};function ft(A){_("Expected one or two arguments to observable."+A+". Did you accidentally try to use observable."+A+" as decorator?")}Object.keys(An).forEach(function(A){return pn[A]=An[A]});var En,Le,yn=et(!1,function(A,T,$,te,ye){var Ue=$.get,yt=$.set,Ht=ye[0]||{};Hi(A).addComputedProp(A,T,Ce({get:Ue,set:yt,context:A},Ht))}),qn=yn({equals:H.structural}),ne=function(A,T,$){if(typeof T=="string"||A!==null&&typeof A=="object"&&arguments.length===1)return yn.apply(null,arguments);var te=typeof T=="object"?T:{};return te.get=A,te.set=typeof T=="function"?T:te.set,te.name=te.name||A.name||"",new Ma(te)};ne.struct=qn,function(A){A[A.NOT_TRACKING=-1]="NOT_TRACKING",A[A.UP_TO_DATE=0]="UP_TO_DATE",A[A.POSSIBLY_STALE=1]="POSSIBLY_STALE",A[A.STALE=2]="STALE"}(En||(En={})),function(A){A[A.NONE=0]="NONE",A[A.LOG=1]="LOG",A[A.BREAK=2]="BREAK"}(Le||(Le={}));var Fn=function(A){this.cause=A};function wr(A){return A instanceof Fn}function Lr(A){switch(A.dependenciesState){case En.UP_TO_DATE:return!1;case En.NOT_TRACKING:case En.STALE:return!0;case En.POSSIBLY_STALE:for(var T=Qt(!0),$=Re(),te=A.observing,ye=te.length,Ue=0;Ue<ye;Ue++){var yt=te[Ue];if(Za(yt)){if(Mn.disableErrorBoundaries)yt.get();else try{yt.get()}catch{return it($),qt(T),!0}if(A.dependenciesState===En.STALE)return it($),qt(T),!0}}return Pn(A),it($),qt(T),!1}}function Kr(){return Mn.trackingDerivation!==null}function jn(A){var T=A.observers.size>0;Mn.computationDepth>0&&T&&_(!1),Mn.allowStateChanges||!T&&Mn.enforceActions!=="strict"||_(!1)}function Ao(A,T,$){var te=Qt(!0);Pn(A),A.newObserving=new Array(A.observing.length+100),A.unboundDepsCount=0,A.runId=++Mn.runId;var ye,Ue=Mn.trackingDerivation;if(Mn.trackingDerivation=A,Mn.disableErrorBoundaries===!0)ye=T.call($);else try{ye=T.call($)}catch(yt){ye=new Fn(yt)}return Mn.trackingDerivation=Ue,function(yt){for(var Ht=yt.observing,gn=yt.observing=yt.newObserving,hr=En.UP_TO_DATE,un=0,$r=yt.unboundDepsCount,dr=0;dr<$r;dr++)(Pr=gn[dr]).diffValue===0&&(Pr.diffValue=1,un!==dr&&(gn[un]=Pr),un++),Pr.dependenciesState>hr&&(hr=Pr.dependenciesState);for(gn.length=un,yt.newObserving=null,$r=Ht.length;$r--;)(Pr=Ht[$r]).diffValue===0&&uo(Pr,yt),Pr.diffValue=0;for(;un--;){var Pr;(Pr=gn[un]).diffValue===1&&(Pr.diffValue=0,uf(Pr,yt))}hr!==En.UP_TO_DATE&&(yt.dependenciesState=hr,yt.onBecomeStale())}(A),qt(te),ye}function Ee(A){var T=A.observing;A.observing=[];for(var $=T.length;$--;)uo(T[$],A);A.dependenciesState=En.NOT_TRACKING}function Xe(A){var T=Re();try{return A()}finally{it(T)}}function Re(){var A=Mn.trackingDerivation;return Mn.trackingDerivation=null,A}function it(A){Mn.trackingDerivation=A}function Qt(A){var T=Mn.allowStateReads;return Mn.allowStateReads=A,T}function qt(A){Mn.allowStateReads=A}function Pn(A){if(A.dependenciesState!==En.UP_TO_DATE){A.dependenciesState=En.UP_TO_DATE;for(var T=A.observing,$=T.length;$--;)T[$].lowestObserverState=En.UP_TO_DATE}}var mr=0,qo=1,li=Object.getOwnPropertyDescriptor(function(){},"name");li&&li.configurable;function Co(A,T,$){var te=function(){return Bo(A,T,$||this,arguments)};return te.isMobxAction=!0,te}function Bo(A,T,$,te){var ye=On();try{return T.apply($,te)}catch(Ue){throw ye.error=Ue,Ue}finally{$n(ye)}}function On(A,T,$){var te=0,ye=Re();Ci();var Ue={prevDerivation:ye,prevAllowStateChanges:rr(!0),prevAllowStateReads:Qt(!0),notifySpy:!1,startTime:te,actionId:qo++,parentActionId:mr};return mr=Ue.actionId,Ue}function $n(A){mr!==A.actionId&&_("invalid action stack. did you forget to finish an action?"),mr=A.parentActionId,A.error!==void 0&&(Mn.suppressReactionErrors=!0),zr(A.prevAllowStateChanges),qt(A.prevAllowStateReads),Wi(),it(A.prevDerivation),A.notifySpy,Mn.suppressReactionErrors=!1}function Hn(A,T){var $,te=rr(A);try{$=T()}finally{zr(te)}return $}function rr(A){var T=Mn.allowStateChanges;return Mn.allowStateChanges=A,T}function zr(A){Mn.allowStateChanges=A}var Tr=function(A){function T($,te,ye,Ue,yt){ye===void 0&&(ye="ObservableValue@"+g()),yt===void 0&&(yt=H.default);var Ht=A.call(this,ye)||this;return Ht.enhancer=te,Ht.name=ye,Ht.equals=yt,Ht.hasUnreportedChange=!1,Ht.value=te($,void 0,ye),Ht}return function($,te){function ye(){this.constructor=$}de($,te),$.prototype=te===null?Object.create(te):(ye.prototype=te.prototype,new ye)}(T,A),T.prototype.dehanceValue=function($){return this.dehancer!==void 0?this.dehancer($):$},T.prototype.set=function($){this.value,($=this.prepareNewValue($))!==Mn.UNCHANGED&&this.setNewValue($)},T.prototype.prepareNewValue=function($){if(jn(this),Di(this)){var te=Or(this,{object:this,type:"update",newValue:$});if(!te)return Mn.UNCHANGED;$=te.newValue}return $=this.enhancer($,this.value,this.name),this.equals(this.value,$)?Mn.UNCHANGED:$},T.prototype.setNewValue=function($){var te=this.value;this.value=$,this.reportChanged(),Ai(this)&&oi(this,{type:"update",object:this,newValue:$,oldValue:te})},T.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},T.prototype.intercept=function($){return ra(this,$)},T.prototype.observe=function($,te){return te&&$({object:this,type:"update",newValue:this.value,oldValue:void 0}),ma(this,$)},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.value+"]"},T.prototype.valueOf=function(){return Y(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(D),Ka=I("ObservableValue",Tr),Ma=function(){function A(T){this.dependenciesState=En.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=En.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new Fn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Le.NONE,E(T.get,"missing option for computed: get"),this.derivation=T.get,this.name=T.name||"ComputedValue@"+g(),T.set&&(this.setter=Co(this.name+"-setter",T.set)),this.equals=T.equals||(T.compareStructural||T.struct?H.structural:H.default),this.scope=T.context,this.requiresReaction=!!T.requiresReaction,this.keepAlive=!!T.keepAlive}return A.prototype.onBecomeStale=function(){(function(T){T.lowestObserverState===En.UP_TO_DATE&&(T.lowestObserverState=En.POSSIBLY_STALE,T.observers.forEach(function($){$.dependenciesState===En.UP_TO_DATE&&($.dependenciesState=En.POSSIBLY_STALE,$.isTracing!==Le.NONE&&va($,T),$.onBecomeStale())}))})(this)},A.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(T){return T()})},A.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(T){return T()})},A.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),Mn.inBatch!==0||this.observers.size!==0||this.keepAlive?(ts(this),Lr(this)&&this.trackAndCompute()&&function($){$.lowestObserverState!==En.STALE&&($.lowestObserverState=En.STALE,$.observers.forEach(function(te){te.dependenciesState===En.POSSIBLY_STALE?te.dependenciesState=En.STALE:te.dependenciesState===En.UP_TO_DATE&&($.lowestObserverState=En.UP_TO_DATE)}))}(this)):Lr(this)&&(this.warnAboutUntrackedRead(),Ci(),this.value=this.computeValue(!1),Wi());var T=this.value;if(wr(T))throw T.cause;return T},A.prototype.peek=function(){var T=this.computeValue(!1);if(wr(T))throw T.cause;return T},A.prototype.set=function(T){if(this.setter){E(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,T)}finally{this.isRunningSetter=!1}}else E(!1,!1)},A.prototype.trackAndCompute=function(){var T=this.value,$=this.dependenciesState===En.NOT_TRACKING,te=this.computeValue(!0),ye=$||wr(T)||wr(te)||!this.equals(T,te);return ye&&(this.value=te),ye},A.prototype.computeValue=function(T){var $;if(this.isComputing=!0,Mn.computationDepth++,T)$=Ao(this,this.derivation,this.scope);else if(Mn.disableErrorBoundaries===!0)$=this.derivation.call(this.scope);else try{$=this.derivation.call(this.scope)}catch(te){$=new Fn(te)}return Mn.computationDepth--,this.isComputing=!1,$},A.prototype.suspend=function(){this.keepAlive||(Ee(this),this.value=void 0)},A.prototype.observe=function(T,$){var te=this,ye=!0,Ue=void 0;return ec(function(){var yt=te.get();if(!ye||$){var Ht=Re();T({type:"update",object:te,newValue:yt,oldValue:Ue}),it(Ht)}ye=!1,Ue=yt})},A.prototype.warnAboutUntrackedRead=function(){},A.prototype.toJSON=function(){return this.get()},A.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},A.prototype.valueOf=function(){return Y(this.get())},A.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},A}(),Za=I("ComputedValue",Ma),Gu=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},dd={};function Xs(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:dd}var ea=!0,Sl=!1,Mn=function(){var A=Xs();return A.__mobxInstanceCount>0&&!A.__mobxGlobals&&(ea=!1),A.__mobxGlobals&&A.__mobxGlobals.version!==new Gu().version&&(ea=!1),ea?A.__mobxGlobals?(A.__mobxInstanceCount+=1,A.__mobxGlobals.UNCHANGED||(A.__mobxGlobals.UNCHANGED={}),A.__mobxGlobals):(A.__mobxInstanceCount=1,A.__mobxGlobals=new Gu):(setTimeout(function(){Sl||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Gu)}();function uf(A,T){A.observers.add(T),A.lowestObserverState>T.dependenciesState&&(A.lowestObserverState=T.dependenciesState)}function uo(A,T){A.observers.delete(T),A.observers.size===0&&Ys(A)}function Ys(A){A.isPendingUnobservation===!1&&(A.isPendingUnobservation=!0,Mn.pendingUnobservations.push(A))}function Ci(){Mn.inBatch++}function Wi(){if(--Mn.inBatch==0){Ks();for(var A=Mn.pendingUnobservations,T=0;T<A.length;T++){var $=A[T];$.isPendingUnobservation=!1,$.observers.size===0&&($.isBeingObserved&&($.isBeingObserved=!1,$.onBecomeUnobserved()),$ instanceof Ma&&$.suspend())}Mn.pendingUnobservations=[]}}function ts(A){var T=Mn.trackingDerivation;return T!==null?(T.runId!==A.lastAccessedBy&&(A.lastAccessedBy=T.runId,T.newObserving[T.unboundDepsCount++]=A,A.isBeingObserved||(A.isBeingObserved=!0,A.onBecomeObserved())),!0):(A.observers.size===0&&Mn.inBatch>0&&Ys(A),!1)}function va(A,T){if(A.isTracing===Le.BREAK){var $=[];ta(To(A),$,1),new Function(`debugger;
/*
Tracing '`+A.name+`'

You are entering this break point because derivation '`+A.name+"' is being traced and '"+T.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(A instanceof Ma?A.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+$.join(`
`)+`
*/
    `)()}}function ta(A,T,$){T.length>=1e3?T.push("(and many more)"):(T.push(""+new Array($).join("	")+A.name),A.dependencies&&A.dependencies.forEach(function(te){return ta(te,T,$+1)}))}var ya=function(){function A(T,$,te,ye){T===void 0&&(T="Reaction@"+g()),ye===void 0&&(ye=!1),this.name=T,this.onInvalidate=$,this.errorHandler=te,this.requiresObservable=ye,this.observing=[],this.newObserving=[],this.dependenciesState=En.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Le.NONE}return A.prototype.onBecomeStale=function(){this.schedule()},A.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Mn.pendingReactions.push(this),Ks())},A.prototype.isScheduled=function(){return this._isScheduled},A.prototype.runReaction=function(){if(!this.isDisposed){if(Ci(),this._isScheduled=!1,Lr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(T){this.reportExceptionInDerivation(T)}}Wi()}},A.prototype.track=function(T){if(!this.isDisposed){Ci(),this._isRunning=!0;var $=Ao(this,T,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ee(this),wr($)&&this.reportExceptionInDerivation($.cause),Wi()}},A.prototype.reportExceptionInDerivation=function(T){var $=this;if(this.errorHandler)this.errorHandler(T,this);else{if(Mn.disableErrorBoundaries)throw T;Mn.suppressReactionErrors,Mn.globalReactionErrorHandlers.forEach(function(te){return te(T,$)})}},A.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ci(),Ee(this),Wi()))},A.prototype.getDisposer=function(){var T=this.dispose.bind(this);return T[z]=this,T},A.prototype.toString=function(){return"Reaction["+this.name+"]"},A.prototype.trace=function(T){T===void 0&&(T=!1),function(){for(var $=[],te=0;te<arguments.length;te++)$[te]=arguments[te];var ye=!1;typeof $[$.length-1]=="boolean"&&(ye=$.pop());var Ue=Rr($);if(!Ue)return _(!1);Ue.isTracing,Le.NONE,Ue.isTracing=ye?Le.BREAK:Le.LOG}(this,T)},A}(),qs=function(A){return A()};function Ks(){Mn.inBatch>0||Mn.isRunningReactions||qs(lf)}function lf(){Mn.isRunningReactions=!0;for(var A=Mn.pendingReactions,T=0;A.length>0;){++T==100&&A.splice(0);for(var $=A.splice(0),te=0,ye=$.length;te<ye;te++)$[te].runReaction()}Mn.isRunningReactions=!1}var Al=I("Reaction",ya);function sf(A){var T=qs;qs=function($){return A(function(){return T($)})}}function Zs(A){return function(){}}function pd(){_(!1)}function mu(A){return function(T,$,te){if(te){if(te.value)return{value:Co(A,te.value),enumerable:!1,configurable:!0,writable:!0};var ye=te.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Co(A,ye.call(this))}}}return cf(A).apply(this,arguments)}}function cf(A){return function(T,$,te){Object.defineProperty(T,$,{configurable:!0,enumerable:!1,get:function(){},set:function(ye){j(this,$,Ja(A,ye))}})}}var Ja=function(A,T,$,te){return arguments.length===1&&typeof A=="function"?Co(A.name||"<unnamed action>",A):arguments.length===2&&typeof T=="function"?Co(A,T):arguments.length===1&&typeof A=="string"?mu(A):te!==!0?mu(T).apply(null,arguments):void j(A,T,Co(A.name||T,$.value,this))};function Js(A,T){return Bo(typeof A=="string"?A:A.name||"<unnamed action>",typeof A=="function"?A:T,this,void 0)}function ns(A){return typeof A=="function"&&A.isMobxAction===!0}function Qs(A,T,$){j(A,T,Co(T,$.bind(A)))}function ec(A,T){T===void 0&&(T=h);var $,te=T&&T.name||A.name||"Autorun@"+g();if(!T.scheduler&&!T.delay)$=new ya(te,function(){this.track(yt)},T.onError,T.requiresObservable);else{var ye=ff(T),Ue=!1;$=new ya(te,function(){Ue||(Ue=!0,ye(function(){Ue=!1,$.isDisposed||$.track(yt)}))},T.onError,T.requiresObservable)}function yt(){A($)}return $.schedule(),$.getDisposer()}Ja.bound=function(A,T,$,te){return te===!0?(Qs(A,T,$.value),null):$?{configurable:!0,enumerable:!1,get:function(){return Qs(this,T,$.value||$.initializer.call(this)),this[T]},set:pd}:{enumerable:!1,configurable:!0,set:function(ye){Qs(this,T,ye)},get:function(){}}};var hd=function(A){return A()};function ff(A){return A.scheduler?A.scheduler:A.delay?function(T){return setTimeout(T,A.delay)}:hd}function Br(A,T,$){$===void 0&&($=h);var te,ye,Ue,yt=$.name||"Reaction@"+g(),Ht=Ja(yt,$.onError?(te=$.onError,ye=T,function(){try{return ye.apply(this,arguments)}catch(fo){te.call(this,fo)}}):T),gn=!$.scheduler&&!$.delay,hr=ff($),un=!0,$r=!1,dr=$.compareStructural?H.structural:$.equals||H.default,Pr=new ya(yt,function(){un||gn?Yi():$r||($r=!0,hr(Yi))},$.onError,$.requiresObservable);function Yi(){if($r=!1,!Pr.isDisposed){var fo=!1;Pr.track(function(){var Li=A(Pr);fo=un||!dr(Ue,Li),Ue=Li}),un&&$.fireImmediately&&Ht(Ue,Pr),un||fo!==!0||Ht(Ue,Pr),un&&(un=!1)}}return Pr.schedule(),Pr.getDisposer()}function Fr(A,T,$){return df("onBecomeUnobserved",A,T,$)}function df(A,T,$,te){var ye=typeof te=="function"?Xi(T,$):Xi(T),Ue=typeof te=="function"?te:$,yt=A+"Listeners";return ye[yt]?ye[yt].add(Ue):ye[yt]=new Set([Ue]),typeof ye[A]!="function"?_(!1):function(){var Ht=ye[yt];Ht&&(Ht.delete(Ue),Ht.size===0&&delete ye[yt])}}function Vu(A){var T=A.enforceActions,$=A.computedRequiresReaction,te=A.computedConfigurable,ye=A.disableErrorBoundaries,Ue=A.reactionScheduler,yt=A.reactionRequiresObservable,Ht=A.observableRequiresReaction;if(A.isolateGlobalState===!0&&((Mn.pendingReactions.length||Mn.inBatch||Mn.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),Sl=!0,ea&&(--Xs().__mobxInstanceCount==0&&(Xs().__mobxGlobals=void 0),Mn=new Gu)),T!==void 0){var gn=void 0;switch(T){case!0:case"observed":gn=!0;break;case!1:case"never":gn=!1;break;case"strict":case"always":gn="strict";break;default:_("Invalid value for 'enforceActions': '"+T+"', expected 'never', 'always' or 'observed'")}Mn.enforceActions=gn,Mn.allowStateChanges=gn!==!0&&gn!=="strict"}$!==void 0&&(Mn.computedRequiresReaction=!!$),yt!==void 0&&(Mn.reactionRequiresObservable=!!yt),Ht!==void 0&&(Mn.observableRequiresReaction=!!Ht,Mn.allowStateReads=!Mn.observableRequiresReaction),te!==void 0&&(Mn.computedConfigurable=!!te),ye!==void 0&&(Mn.disableErrorBoundaries=!!ye),Ue&&sf(Ue)}function na(A,T,$,te){var ye=rs(te=xe(te));return Ge(A),Hi(A,te.name,ye.enhancer),T&&pf(A,T,$,ye),A}function rs(A){return A.defaultDecorator||(A.deep===!1?Ot:vt)}function pf(A,T,$,te){var ye,Ue;Ci();try{var yt=Q(T);try{for(var Ht=Me(yt),gn=Ht.next();!gn.done;gn=Ht.next()){var hr=gn.value,un=Object.getOwnPropertyDescriptor(T,hr),$r=($&&hr in $?$[hr]:un.get?yn:te)(A,hr,un,!0);$r&&Object.defineProperty(A,hr,$r)}}catch(dr){ye={error:dr}}finally{try{gn&&!gn.done&&(Ue=Ht.return)&&Ue.call(Ht)}finally{if(ye)throw ye.error}}}finally{Wi()}}function To(A,T){return gu(Xi(A,T))}function gu(A){var T,$,te={name:A.name};return A.observing&&A.observing.length>0&&(te.dependencies=(T=A.observing,$=[],T.forEach(function(ye){$.indexOf(ye)===-1&&$.push(ye)}),$).map(gu)),te}var _u=0;function os(){this.message="FLOW_CANCELLED"}function Wu(A){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var T=A.name||"<unnamed flow>";return function(){var $,te=this,ye=arguments,Ue=++_u,yt=Ja(T+" - runid: "+Ue+" - init",A).apply(te,ye),Ht=void 0,gn=new Promise(function(hr,un){var $r=0;function dr(fo){var Li;Ht=void 0;try{Li=Ja(T+" - runid: "+Ue+" - yield "+$r++,yt.next).call(yt,fo)}catch(Qa){return un(Qa)}Yi(Li)}function Pr(fo){var Li;Ht=void 0;try{Li=Ja(T+" - runid: "+Ue+" - yield "+$r++,yt.throw).call(yt,fo)}catch(Qa){return un(Qa)}Yi(Li)}function Yi(fo){if(!fo||typeof fo.then!="function")return fo.done?hr(fo.value):(Ht=Promise.resolve(fo.value)).then(dr,Pr);fo.then(Yi,un)}$=un,dr(void 0)});return gn.cancel=Ja(T+" - runid: "+Ue+" - cancel",function(){try{Ht&&si(Ht);var hr=yt.return(void 0),un=Promise.resolve(hr.value);un.then(S,S),si(un),$(new os)}catch($r){$($r)}}),gn}}function si(A){typeof A.cancel=="function"&&A.cancel()}function tc(A,T){if(A==null)return!1;if(T!==void 0){if(Jo(A)===!1||!A[z].values.has(T))return!1;var $=Xi(A,T);return Za($)}return Za(A)}function hf(A){return arguments.length>1?_(!1):tc(A)}function nc(A,T){return typeof T!="string"?_(!1):tc(A,T)}function Ei(A,T){return A!=null&&(T!==void 0?!!Jo(A)&&A[z].values.has(T):Jo(A)||!!A[z]||V(A)||Al(A)||Za(A))}function Ko(A){return arguments.length!==1&&_(!1),Ei(A)}function zi(A){return Jo(A)?A[z].getKeys():Do(A)||Uo(A)?Array.from(A.keys()):oa(A)?A.map(function(T,$){return $}):_(!1)}function Zr(A){return Jo(A)?zi(A).map(function(T){return A[T]}):Do(A)?zi(A).map(function(T){return A.get(T)}):Uo(A)?Array.from(A.values()):oa(A)?A.slice():_(!1)}function vf(A){return Jo(A)?zi(A).map(function(T){return[T,A[T]]}):Do(A)?zi(A).map(function(T){return[T,A.get(T)]}):Uo(A)?Array.from(A.entries()):oa(A)?A.map(function(T,$){return[$,T]}):_(!1)}function Oi(A,T,$){if(arguments.length!==2||Uo(A))if(Jo(A)){var te=A[z],ye=te.values.get(T);ye?te.write(T,$):te.addObservableProp(T,$,te.defaultEnhancer)}else if(Do(A))A.set(T,$);else if(Uo(A))A.add(T);else{if(!oa(A))return _(!1);typeof T!="number"&&(T=parseInt(T,10)),E(T>=0,"Not a valid index: '"+T+"'"),Ci(),T>=A.length&&(A.length=T+1),A[T]=$,Wi()}else{Ci();var Ue=T;try{for(var yt in Ue)Oi(A,yt,Ue[yt])}finally{Wi()}}}function rc(A,T,$,te){return typeof $=="function"?function(ye,Ue,yt,Ht){return gi(ye,Ue).observe(yt,Ht)}(A,T,$,te):function(ye,Ue,yt){return gi(ye).observe(Ue,yt)}(A,T,$)}os.prototype=Object.create(Error.prototype);var yf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function xi(A,T,$,te){return te.detectCycles&&A.set(T,$),$}function mi(A,T,$){if(!T.recurseEverything&&!Ko(A)||typeof A!="object")return A;if(A===null)return null;if(A instanceof Date)return A;if(Ka(A))return mi(A.get(),T,$);if(Ko(A)&&zi(A),T.detectCycles===!0&&A!==null&&$.has(A))return $.get(A);if(oa(A)||Array.isArray(A)){var te=xi($,A,[],T),ye=A.map(function(dr){return mi(dr,T,$)});te.length=ye.length;for(var Ue=0,yt=ye.length;Ue<yt;Ue++)te[Ue]=ye[Ue];return te}if(Uo(A)||Object.getPrototypeOf(A)===Set.prototype){if(T.exportMapsAsObjects===!1){var Ht=xi($,A,new Set,T);return A.forEach(function(dr){Ht.add(mi(dr,T,$))}),Ht}var gn=xi($,A,[],T);return A.forEach(function(dr){gn.push(mi(dr,T,$))}),gn}if(Do(A)||Object.getPrototypeOf(A)===Map.prototype){if(T.exportMapsAsObjects===!1){var hr=xi($,A,new Map,T);return A.forEach(function(dr,Pr){hr.set(Pr,mi(dr,T,$))}),hr}var un=xi($,A,{},T);return A.forEach(function(dr,Pr){un[Pr]=mi(dr,T,$)}),un}var $r=xi($,A,{},T);return q(A).forEach(function(dr){$r[dr]=mi(A[dr],T,$)}),$r}function oc(A,T){var $;return typeof T=="boolean"&&(T={detectCycles:T}),T||(T=yf),T.detectCycles=T.detectCycles===void 0?T.recurseEverything===!0:T.detectCycles===!0,T.detectCycles&&($=new Map),mi(A,T,$)}function Rr(A){switch(A.length){case 0:return Mn.trackingDerivation;case 1:return Xi(A[0]);case 2:return Xi(A[0],A[1])}}function Zo(A,T){T===void 0&&(T=void 0),Ci();try{return A.apply(T)}finally{Wi()}}function is(A,T,$){return arguments.length===1||T&&typeof T=="object"?ic(A,T):mf(A,T,$||{})}function mf(A,T,$){var te;typeof $.timeout=="number"&&(te=setTimeout(function(){if(!Ue[z].isDisposed){Ue();var yt=new Error("WHEN_TIMEOUT");if(!$.onError)throw yt;$.onError(yt)}},$.timeout)),$.name=$.name||"When@"+g();var ye=Co($.name+"-effect",T),Ue=ec(function(yt){A()&&(yt.dispose(),te&&clearTimeout(te),ye())},$);return Ue}function ic(A,T){var $,te=new Promise(function(ye,Ue){var yt=mf(A,ye,Ce(Ce({},T),{onError:Ue}));$=function(){yt(),Ue("WHEN_CANCELLED")}});return te.cancel=$,te}function as(A){return A[z]}function Pa(A){return typeof A=="string"||typeof A=="number"||typeof A=="symbol"}var Si={has:function(A,T){if(T===z||T==="constructor"||T===ke)return!0;var $=as(A);return Pa(T)?$.has(T):T in A},get:function(A,T){if(T===z||T==="constructor"||T===ke)return A[T];var $=as(A),te=$.values.get(T);if(te instanceof D){var ye=te.get();return ye===void 0&&$.has(T),ye}return Pa(T)&&$.has(T),A[T]},set:function(A,T,$){return!!Pa(T)&&(Oi(A,T,$),!0)},deleteProperty:function(A,T){return!!Pa(T)&&(as(A).remove(T),!0)},ownKeys:function(A){return as(A).keysAtom.reportObserved(),Reflect.ownKeys(A)},preventExtensions:function(A){return _("Dynamic observable objects cannot be frozen"),!1}};function zu(A){var T=new Proxy(A,Si);return A[z].proxy=T,T}function Di(A){return A.interceptors!==void 0&&A.interceptors.length>0}function ra(A,T){var $=A.interceptors||(A.interceptors=[]);return $.push(T),O(function(){var te=$.indexOf(T);te!==-1&&$.splice(te,1)})}function Or(A,T){var $=Re();try{for(var te=$e(A.interceptors||[]),ye=0,Ue=te.length;ye<Ue&&(E(!(T=te[ye](T))||T.type,"Intercept handlers should return nothing or a change object"),T);ye++);return T}finally{it($)}}function Ai(A){return A.changeListeners!==void 0&&A.changeListeners.length>0}function ma(A,T){var $=A.changeListeners||(A.changeListeners=[]);return $.push(T),O(function(){var te=$.indexOf(T);te!==-1&&$.splice(te,1)})}function oi(A,T){var $=Re(),te=A.changeListeners;if(te){for(var ye=0,Ue=(te=te.slice()).length;ye<Ue;ye++)te[ye](T);it($)}}var Hu={get:function(A,T){return T===z?A[z]:T==="length"?A[z].getArrayLength():typeof T=="number"?ro.get.call(A,T):typeof T!="string"||isNaN(T)?ro.hasOwnProperty(T)?ro[T]:A[T]:ro.get.call(A,parseInt(T))},set:function(A,T,$){return T==="length"&&A[z].setArrayLength($),typeof T=="number"&&ro.set.call(A,T,$),typeof T=="symbol"||isNaN(T)?A[T]=$:ro.set.call(A,parseInt(T),$),!0},preventExtensions:function(A){return _("Observable arrays cannot be frozen"),!1}};function bu(A,T,$,te){$===void 0&&($="ObservableArray@"+g()),te===void 0&&(te=!1);var ye,Ue,yt,Ht=new ga($,T,te);ye=Ht.values,Ue=z,yt=Ht,Object.defineProperty(ye,Ue,{enumerable:!1,writable:!1,configurable:!0,value:yt});var gn=new Proxy(Ht.values,Hu);if(Ht.proxy=gn,A&&A.length){var hr=rr(!0);Ht.spliceWithArray(0,0,A),zr(hr)}return gn}var ga=function(){function A(T,$,te){this.owned=te,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new D(T||"ObservableArray@"+g()),this.enhancer=function(ye,Ue){return $(ye,Ue,T+"[..]")}}return A.prototype.dehanceValue=function(T){return this.dehancer!==void 0?this.dehancer(T):T},A.prototype.dehanceValues=function(T){return this.dehancer!==void 0&&T.length>0?T.map(this.dehancer):T},A.prototype.intercept=function(T){return ra(this,T)},A.prototype.observe=function(T,$){return $===void 0&&($=!1),$&&T({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ma(this,T)},A.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},A.prototype.setArrayLength=function(T){if(typeof T!="number"||T<0)throw new Error("[mobx.array] Out of range: "+T);var $=this.values.length;if(T!==$)if(T>$){for(var te=new Array(T-$),ye=0;ye<T-$;ye++)te[ye]=void 0;this.spliceWithArray($,0,te)}else this.spliceWithArray(T,$-T)},A.prototype.updateArrayLength=function(T,$){if(T!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=$},A.prototype.spliceWithArray=function(T,$,te){var ye=this;jn(this.atom);var Ue=this.values.length;if(T===void 0?T=0:T>Ue?T=Ue:T<0&&(T=Math.max(0,Ue+T)),$=arguments.length===1?Ue-T:$==null?0:Math.max(0,Math.min($,Ue-T)),te===void 0&&(te=v),Di(this)){var yt=Or(this,{object:this.proxy,type:"splice",index:T,removedCount:$,added:te});if(!yt)return v;$=yt.removedCount,te=yt.added}te=te.length===0?te:te.map(function(gn){return ye.enhancer(gn,void 0)});var Ht=this.spliceItemsIntoValues(T,$,te);return $===0&&te.length===0||this.notifyArraySplice(T,te,Ht),this.dehanceValues(Ht)},A.prototype.spliceItemsIntoValues=function(T,$,te){var ye;if(te.length<1e4)return(ye=this.values).splice.apply(ye,$e([T,$],te));var Ue=this.values.slice(T,T+$);return this.values=this.values.slice(0,T).concat(te,this.values.slice(T+$)),Ue},A.prototype.notifyArrayChildUpdate=function(T,$,te){var ye=!this.owned&&!1,Ue=Ai(this),yt=Ue||ye?{object:this.proxy,type:"update",index:T,newValue:$,oldValue:te}:null;this.atom.reportChanged(),Ue&&oi(this,yt)},A.prototype.notifyArraySplice=function(T,$,te){var ye=!this.owned&&!1,Ue=Ai(this),yt=Ue||ye?{object:this.proxy,type:"splice",index:T,removed:te,added:$,removedCount:te.length,addedCount:$.length}:null;this.atom.reportChanged(),Ue&&oi(this,yt)},A}(),ro={intercept:function(A){return this[z].intercept(A)},observe:function(A,T){return T===void 0&&(T=!1),this[z].observe(A,T)},clear:function(){return this.splice(0)},replace:function(A){var T=this[z];return T.spliceWithArray(0,T.values.length,A)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(A,T){for(var $=[],te=2;te<arguments.length;te++)$[te-2]=arguments[te];var ye=this[z];switch(arguments.length){case 0:return[];case 1:return ye.spliceWithArray(A);case 2:return ye.spliceWithArray(A,T)}return ye.spliceWithArray(A,T,$)},spliceWithArray:function(A,T,$){return this[z].spliceWithArray(A,T,$)},push:function(){for(var A=[],T=0;T<arguments.length;T++)A[T]=arguments[T];var $=this[z];return $.spliceWithArray($.values.length,0,A),$.values.length},pop:function(){return this.splice(Math.max(this[z].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var A=[],T=0;T<arguments.length;T++)A[T]=arguments[T];var $=this[z];return $.spliceWithArray(0,0,A),$.values.length},reverse:function(){var A=this.slice();return A.reverse.apply(A,arguments)},sort:function(A){var T=this.slice();return T.sort.apply(T,arguments)},remove:function(A){var T=this[z],$=T.dehanceValues(T.values).indexOf(A);return $>-1&&(this.splice($,1),!0)},get:function(A){var T=this[z];if(T&&A<T.values.length)return T.atom.reportObserved(),T.dehanceValue(T.values[A])},set:function(A,T){var $=this[z],te=$.values;if(A<te.length){jn($.atom);var ye=te[A];if(Di($)){var Ue=Or($,{type:"update",object:$.proxy,index:A,newValue:T});if(!Ue)return;T=Ue.newValue}(T=$.enhancer(T,ye))!==ye&&(te[A]=T,$.notifyArrayChildUpdate(A,T,ye))}else{if(A!==te.length)throw new Error("[mobx.array] Index out of bounds, "+A+" is larger than "+te.length);$.spliceWithArray(A,0,[T])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(A){typeof Array.prototype[A]=="function"&&(ro[A]=function(){var T=this[z];T.atom.reportObserved();var $=T.dehanceValues(T.values);return $[A].apply($,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(A){typeof Array.prototype[A]=="function"&&(ro[A]=function(T,$){var te=this,ye=this[z];return ye.atom.reportObserved(),ye.dehanceValues(ye.values)[A](function(Ue,yt){return T.call($,Ue,yt,te)},$)})}),["reduce","reduceRight"].forEach(function(A){ro[A]=function(){var T=this,$=this[z];$.atom.reportObserved();var te=arguments[0];return arguments[0]=function(ye,Ue,yt){return Ue=$.dehanceValue(Ue),te(ye,Ue,yt,T)},$.values[A].apply($.values,arguments)}});var Tl,ka=I("ObservableArrayAdministration",ga);function oa(A){return k(A)&&ka(A[z])}var ac,vd={},uc=function(){function A(T,$,te){if($===void 0&&($=dt),te===void 0&&(te="ObservableMap@"+g()),this.enhancer=$,this.name=te,this[Tl]=vd,this._keysAtom=X(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(T)}return A.prototype._has=function(T){return this._data.has(T)},A.prototype.has=function(T){var $=this;if(!Mn.trackingDerivation)return this._has(T);var te=this._hasMap.get(T);if(!te){var ye=te=new Tr(this._has(T),zt,this.name+"."+ee(T)+"?",!1);this._hasMap.set(T,ye),Fr(ye,function(){return $._hasMap.delete(T)})}return te.get()},A.prototype.set=function(T,$){var te=this._has(T);if(Di(this)){var ye=Or(this,{type:te?"update":"add",object:this,newValue:$,name:T});if(!ye)return this;$=ye.newValue}return te?this._updateValue(T,$):this._addValue(T,$),this},A.prototype.delete=function(T){var $=this;if(jn(this._keysAtom),Di(this)&&!(ye=Or(this,{type:"delete",object:this,name:T})))return!1;if(this._has(T)){var te=Ai(this),ye=te?{type:"delete",object:this,oldValue:this._data.get(T).value,name:T}:null;return Zo(function(){$._keysAtom.reportChanged(),$._updateHasMapEntry(T,!1),$._data.get(T).setNewValue(void 0),$._data.delete(T)}),te&&oi(this,ye),!0}return!1},A.prototype._updateHasMapEntry=function(T,$){var te=this._hasMap.get(T);te&&te.setNewValue($)},A.prototype._updateValue=function(T,$){var te=this._data.get(T);if(($=te.prepareNewValue($))!==Mn.UNCHANGED){var ye=Ai(this),Ue=ye?{type:"update",object:this,oldValue:te.value,name:T,newValue:$}:null;te.setNewValue($),ye&&oi(this,Ue)}},A.prototype._addValue=function(T,$){var te=this;jn(this._keysAtom),Zo(function(){var yt=new Tr($,te.enhancer,te.name+"."+ee(T),!1);te._data.set(T,yt),$=yt.value,te._updateHasMapEntry(T,!0),te._keysAtom.reportChanged()});var ye=Ai(this),Ue=ye?{type:"add",object:this,name:T,newValue:$}:null;ye&&oi(this,Ue)},A.prototype.get=function(T){return this.has(T)?this.dehanceValue(this._data.get(T).get()):this.dehanceValue(void 0)},A.prototype.dehanceValue=function(T){return this.dehancer!==void 0?this.dehancer(T):T},A.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},A.prototype.values=function(){var T=this,$=this.keys();return xr({next:function(){var te=$.next(),ye=te.done,Ue=te.value;return{done:ye,value:ye?void 0:T.get(Ue)}}})},A.prototype.entries=function(){var T=this,$=this.keys();return xr({next:function(){var te=$.next(),ye=te.done,Ue=te.value;return{done:ye,value:ye?void 0:[Ue,T.get(Ue)]}}})},A.prototype[Tl=z,Symbol.iterator]=function(){return this.entries()},A.prototype.forEach=function(T,$){var te,ye;try{for(var Ue=Me(this),yt=Ue.next();!yt.done;yt=Ue.next()){var Ht=He(yt.value,2),gn=Ht[0],hr=Ht[1];T.call($,hr,gn,this)}}catch(un){te={error:un}}finally{try{yt&&!yt.done&&(ye=Ue.return)&&ye.call(Ue)}finally{if(te)throw te.error}}},A.prototype.merge=function(T){var $=this;return Do(T)&&(T=T.toJS()),Zo(function(){var te=rr(!0);try{M(T)?q(T).forEach(function(ye){return $.set(ye,T[ye])}):Array.isArray(T)?T.forEach(function(ye){var Ue=He(ye,2),yt=Ue[0],Ht=Ue[1];return $.set(yt,Ht)}):N(T)?(T.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+T.constructor.name),T.forEach(function(ye,Ue){return $.set(Ue,ye)})):T!=null&&_("Cannot initialize map from "+T)}finally{zr(te)}}),this},A.prototype.clear=function(){var T=this;Zo(function(){Xe(function(){var $,te;try{for(var ye=Me(T.keys()),Ue=ye.next();!Ue.done;Ue=ye.next()){var yt=Ue.value;T.delete(yt)}}catch(Ht){$={error:Ht}}finally{try{Ue&&!Ue.done&&(te=ye.return)&&te.call(ye)}finally{if($)throw $.error}}})})},A.prototype.replace=function(T){var $=this;return Zo(function(){var te,ye,Ue,yt,Ht=function(Go){if(N(Go)||Do(Go))return Go;if(Array.isArray(Go))return new Map(Go);if(M(Go)){var Ou=new Map;for(var tu in Go)Ou.set(tu,Go[tu]);return Ou}return _("Cannot convert to map from '"+Go+"'")}(T),gn=new Map,hr=!1;try{for(var un=Me($._data.keys()),$r=un.next();!$r.done;$r=un.next()){var dr=$r.value;if(!Ht.has(dr))if($.delete(dr))hr=!0;else{var Pr=$._data.get(dr);gn.set(dr,Pr)}}}catch(Go){te={error:Go}}finally{try{$r&&!$r.done&&(ye=un.return)&&ye.call(un)}finally{if(te)throw te.error}}try{for(var Yi=Me(Ht.entries()),fo=Yi.next();!fo.done;fo=Yi.next()){var Li=He(fo.value,2),Qa=(dr=Li[0],Pr=Li[1],$._data.has(dr));if($.set(dr,Pr),$._data.has(dr)){var eu=$._data.get(dr);gn.set(dr,eu),Qa||(hr=!0)}}}catch(Go){Ue={error:Go}}finally{try{fo&&!fo.done&&(yt=Yi.return)&&yt.call(Yi)}finally{if(Ue)throw Ue.error}}if(!hr)if($._data.size!==gn.size)$._keysAtom.reportChanged();else for(var Eu=$._data.keys(),Xu=gn.keys(),Ra=Eu.next(),Yu=Xu.next();!Ra.done;){if(Ra.value!==Yu.value){$._keysAtom.reportChanged();break}Ra=Eu.next(),Yu=Xu.next()}$._data=gn}),this},Object.defineProperty(A.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),A.prototype.toPOJO=function(){var T,$,te={};try{for(var ye=Me(this),Ue=ye.next();!Ue.done;Ue=ye.next()){var yt=He(Ue.value,2),Ht=yt[0],gn=yt[1];te[typeof Ht=="symbol"?Ht:ee(Ht)]=gn}}catch(hr){T={error:hr}}finally{try{Ue&&!Ue.done&&($=ye.return)&&$.call(ye)}finally{if(T)throw T.error}}return te},A.prototype.toJS=function(){return new Map(this)},A.prototype.toJSON=function(){return this.toPOJO()},A.prototype.toString=function(){var T=this;return this.name+"[{ "+Array.from(this.keys()).map(function($){return ee($)+": "+T.get($)}).join(", ")+" }]"},A.prototype.observe=function(T,$){return ma(this,T)},A.prototype.intercept=function(T){return ra(this,T)},A}(),Do=I("ObservableMap",uc),wu={},Na=function(){function A(T,$,te){if($===void 0&&($=dt),te===void 0&&(te="ObservableSet@"+g()),this.name=te,this[ac]=wu,this._data=new Set,this._atom=X(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(ye,Ue){return $(ye,Ue,te)},T&&this.replace(T)}return A.prototype.dehanceValue=function(T){return this.dehancer!==void 0?this.dehancer(T):T},A.prototype.clear=function(){var T=this;Zo(function(){Xe(function(){var $,te;try{for(var ye=Me(T._data.values()),Ue=ye.next();!Ue.done;Ue=ye.next()){var yt=Ue.value;T.delete(yt)}}catch(Ht){$={error:Ht}}finally{try{Ue&&!Ue.done&&(te=ye.return)&&te.call(ye)}finally{if($)throw $.error}}})})},A.prototype.forEach=function(T,$){var te,ye;try{for(var Ue=Me(this),yt=Ue.next();!yt.done;yt=Ue.next()){var Ht=yt.value;T.call($,Ht,Ht,this)}}catch(gn){te={error:gn}}finally{try{yt&&!yt.done&&(ye=Ue.return)&&ye.call(Ue)}finally{if(te)throw te.error}}},Object.defineProperty(A.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),A.prototype.add=function(T){var $=this;if(jn(this._atom),Di(this)&&!(ye=Or(this,{type:"add",object:this,newValue:T})))return this;if(!this.has(T)){Zo(function(){$._data.add($.enhancer(T,void 0)),$._atom.reportChanged()});var te=Ai(this),ye=te?{type:"add",object:this,newValue:T}:null;te&&oi(this,ye)}return this},A.prototype.delete=function(T){var $=this;if(Di(this)&&!(ye=Or(this,{type:"delete",object:this,oldValue:T})))return!1;if(this.has(T)){var te=Ai(this),ye=te?{type:"delete",object:this,oldValue:T}:null;return Zo(function(){$._atom.reportChanged(),$._data.delete(T)}),te&&oi(this,ye),!0}return!1},A.prototype.has=function(T){return this._atom.reportObserved(),this._data.has(this.dehanceValue(T))},A.prototype.entries=function(){var T=0,$=Array.from(this.keys()),te=Array.from(this.values());return xr({next:function(){var ye=T;return T+=1,ye<te.length?{value:[$[ye],te[ye]],done:!1}:{done:!0}}})},A.prototype.keys=function(){return this.values()},A.prototype.values=function(){this._atom.reportObserved();var T=this,$=0,te=Array.from(this._data.values());return xr({next:function(){return $<te.length?{value:T.dehanceValue(te[$++]),done:!1}:{done:!0}}})},A.prototype.replace=function(T){var $=this;return Uo(T)&&(T=T.toJS()),Zo(function(){var te=rr(!0);try{Array.isArray(T)||B(T)?($.clear(),T.forEach(function(ye){return $.add(ye)})):T!=null&&_("Cannot initialize set from "+T)}finally{zr(te)}}),this},A.prototype.observe=function(T,$){return ma(this,T)},A.prototype.intercept=function(T){return ra(this,T)},A.prototype.toJS=function(){return new Set(this)},A.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},A.prototype[ac=z,Symbol.iterator]=function(){return this.values()},A}(),Uo=I("ObservableSet",Na),lc=function(){function A(T,$,te,ye){$===void 0&&($=new Map),this.target=T,this.values=$,this.name=te,this.defaultEnhancer=ye,this.keysAtom=new D(te+".keys")}return A.prototype.read=function(T){return this.values.get(T).get()},A.prototype.write=function(T,$){var te=this.target,ye=this.values.get(T);if(ye instanceof Ma)ye.set($);else{if(Di(this)){if(!(yt=Or(this,{type:"update",object:this.proxy||te,name:T,newValue:$})))return;$=yt.newValue}if(($=ye.prepareNewValue($))!==Mn.UNCHANGED){var Ue=Ai(this),yt=Ue?{type:"update",object:this.proxy||te,oldValue:ye.value,name:T,newValue:$}:null;ye.setNewValue($),Ue&&oi(this,yt)}}},A.prototype.has=function(T){var $=this.pendingKeys||(this.pendingKeys=new Map),te=$.get(T);if(te)return te.get();var ye=!!this.values.get(T);return te=new Tr(ye,zt,this.name+"."+ee(T)+"?",!1),$.set(T,te),te.get()},A.prototype.addObservableProp=function(T,$,te){te===void 0&&(te=this.defaultEnhancer);var ye=this.target;if(Di(this)){var Ue=Or(this,{object:this.proxy||ye,name:T,type:"add",newValue:$});if(!Ue)return;$=Ue.newValue}var yt=new Tr($,te,this.name+"."+ee(T),!1);this.values.set(T,yt),$=yt.value,Object.defineProperty(ye,T,function(Ht){return ia[Ht]||(ia[Ht]={configurable:!0,enumerable:!0,get:function(){return this[z].read(Ht)},set:function(gn){this[z].write(Ht,gn)}})}(T)),this.notifyPropertyAddition(T,$)},A.prototype.addComputedProp=function(T,$,te){var ye,Ue,yt,Ht=this.target;te.name=te.name||this.name+"."+ee($),this.values.set($,new Ma(te)),(T===Ht||(ye=T,Ue=$,!(yt=Object.getOwnPropertyDescriptor(ye,Ue))||yt.configurable!==!1&&yt.writable!==!1))&&Object.defineProperty(T,$,function(gn){return us[gn]||(us[gn]={configurable:Mn.computedConfigurable,enumerable:!1,get:function(){return Ti(this).read(gn)},set:function(hr){Ti(this).write(gn,hr)}})}($))},A.prototype.remove=function(T){if(this.values.has(T)){var $=this.target;if(Di(this)&&!(gn=Or(this,{object:this.proxy||$,name:T,type:"remove"})))return;try{Ci();var te=Ai(this),ye=!1,Ue=this.values.get(T),yt=Ue&&Ue.get();if(Ue&&Ue.set(void 0),this.keysAtom.reportChanged(),this.values.delete(T),this.pendingKeys){var Ht=this.pendingKeys.get(T);Ht&&Ht.set(!1)}delete this.target[T];var gn=te?{type:"remove",object:this.proxy||$,oldValue:yt,name:T}:null;te&&oi(this,gn)}finally{Wi()}}},A.prototype.illegalAccess=function(T,$){},A.prototype.observe=function(T,$){return ma(this,T)},A.prototype.intercept=function(T){return ra(this,T)},A.prototype.notifyPropertyAddition=function(T,$){var te=Ai(this),ye=te?{type:"add",object:this.proxy||this.target,name:T,newValue:$}:null;if(te&&oi(this,ye),this.pendingKeys){var Ue=this.pendingKeys.get(T);Ue&&Ue.set(!0)}this.keysAtom.reportChanged()},A.prototype.getKeys=function(){var T,$;this.keysAtom.reportObserved();var te=[];try{for(var ye=Me(this.values),Ue=ye.next();!Ue.done;Ue=ye.next()){var yt=He(Ue.value,2),Ht=yt[0];yt[1]instanceof Tr&&te.push(Ht)}}catch(gn){T={error:gn}}finally{try{Ue&&!Ue.done&&($=ye.return)&&$.call(ye)}finally{if(T)throw T.error}}return te},A}();function Hi(A,T,$){if(T===void 0&&(T=""),$===void 0&&($=dt),Object.prototype.hasOwnProperty.call(A,z))return A[z];M(A)||(T=(A.constructor.name||"ObservableObject")+"@"+g()),T||(T="ObservableObject@"+g());var te=new lc(A,new Map,ee(T),$);return j(A,z,te),te}var ia=Object.create(null),us=Object.create(null);function Ti(A){var T=A[z];return T||(Ge(A),A[z])}var Ii=I("ObservableObjectAdministration",lc);function Jo(A){return!!k(A)&&(Ge(A),Ii(A[z]))}function Xi(A,T){if(typeof A=="object"&&A!==null){if(oa(A))return T!==void 0&&_(!1),A[z].atom;if(Uo(A))return A[z];if(Do(A)){var $=A;return T===void 0?$._keysAtom:((te=$._data.get(T)||$._hasMap.get(T))||_(!1),te)}var te;if(Ge(A),T&&!A[z]&&A[T],Jo(A))return T?((te=A[z].values.get(T))||_(!1),te):_(!1);if(V(A)||Za(A)||Al(A))return A}else if(typeof A=="function"&&Al(A[z]))return A[z];return _(!1)}function gi(A,T){return A||_("Expecting some object"),T!==void 0?gi(Xi(A,T)):V(A)||Za(A)||Al(A)||Do(A)||Uo(A)?A:(Ge(A),A[z]?A[z]:void _(!1))}var lt=Object.prototype.toString;function jt(A,T,$){return $===void 0&&($=-1),Ft(A,T,$)}function Ft(A,T,$,te,ye){if(A===T)return A!==0||1/A==1/T;if(A==null||T==null)return!1;if(A!=A)return T!=T;var Ue=typeof A;if(Ue!=="function"&&Ue!=="object"&&typeof T!="object")return!1;var yt=lt.call(A);if(yt!==lt.call(T))return!1;switch(yt){case"[object RegExp]":case"[object String]":return""+A==""+T;case"[object Number]":return+A!=+A?+T!=+T:+A==0?1/+A==1/T:+A==+T;case"[object Date]":case"[object Boolean]":return+A==+T;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(A)===Symbol.valueOf.call(T);case"[object Map]":case"[object Set]":$>=0&&$++}A=fn(A),T=fn(T);var Ht=yt==="[object Array]";if(!Ht){if(typeof A!="object"||typeof T!="object")return!1;var gn=A.constructor,hr=T.constructor;if(gn!==hr&&!(typeof gn=="function"&&gn instanceof gn&&typeof hr=="function"&&hr instanceof hr)&&"constructor"in A&&"constructor"in T)return!1}if($===0)return!1;$<0&&($=-1),ye=ye||[];for(var un=(te=te||[]).length;un--;)if(te[un]===A)return ye[un]===T;if(te.push(A),ye.push(T),Ht){if((un=A.length)!==T.length)return!1;for(;un--;)if(!Ft(A[un],T[un],$-1,te,ye))return!1}else{var $r=Object.keys(A),dr=void 0;if(un=$r.length,Object.keys(T).length!==un)return!1;for(;un--;)if(!ar(T,dr=$r[un])||!Ft(A[dr],T[dr],$-1,te,ye))return!1}return te.pop(),ye.pop(),!0}function fn(A){return oa(A)?A.slice():N(A)||Do(A)||B(A)||Uo(A)?Array.from(A.entries()):A}function ar(A,T){return Object.prototype.hasOwnProperty.call(A,T)}function xr(A){return A[Symbol.iterator]=oo,A}function oo(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Zs,extras:{getDebugName:function(A,T){return(T!==void 0?Xi(A,T):Jo(A)||Do(A)||Uo(A)?gi(A):Xi(A)).name}},$mobx:z})}).call(this,r(163),r(68))},function(n,a,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,a,r){var s=r(41),c=r(100),v=r(80),h=r(58),g=r(116),_="Array Iterator",E=h.set,O=h.getterFor(_);n.exports=g(Array,"Array",function(S,k){E(this,{type:_,target:s(S),index:0,kind:k})},function(){var S=O(this),k=S.target,M=S.kind,j=S.index++;return!k||j>=k.length?(S.target=void 0,{value:void 0,done:!0}):M=="keys"?{value:j,done:!1}:M=="values"?{value:k[j],done:!1}:{value:[j,k[j]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var s=r(16),c=r(7),v=r(46),h=r(76),g=r(34),_=r(15),E=r(71),O=r(36),S=r(108),k=r(18),M=r(35),j=r(96),I=r(30),N=r(33),B=r(54),q=r(87),ee=r(32),Y=r(40),Q=r(41),z=r(86),D=r(39),V=r(69),X=r(60),H=r(77),de=r(74),Ce=r(139),Me=r(112),He=r(50),$e=r(38),ke=r(84),le=r(98),he=r(42),Se=r(89),Ke=r(93),Ge=r(72),et=r(90),gt=r(28),dt=r(140),zt=r(141),je=r(78),me=r(58),xe=r(79).forEach,vt=Ke("hidden"),Wt="Symbol",Ot=gt("toPrimitive"),rn=me.set,vn=me.getterFor(Wt),An=Object.prototype,pn=c.Symbol,ft=pn&&pn.prototype,En=c.TypeError,Le=c.QObject,yn=v("JSON","stringify"),qn=He.f,ne=$e.f,Fn=Ce.f,wr=ke.f,Lr=_([].push),Kr=Se("symbols"),jn=Se("op-symbols"),Ao=Se("string-to-symbol-registry"),Ee=Se("symbol-to-string-registry"),Xe=Se("wks"),Re=!Le||!Le.prototype||!Le.prototype.findChild,it=O&&k(function(){return X(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a!=7})?function(On,$n,Hn){var rr=qn(An,$n);rr&&delete An[$n],ne(On,$n,Hn),rr&&On!==An&&ne(An,$n,rr)}:ne,Qt=function(On,$n){var Hn=Kr[On]=X(ft);return rn(Hn,{type:Wt,tag:On,description:$n}),O||(Hn.description=$n),Hn},qt=function(On,$n,Hn){On===An&&qt(jn,$n,Hn),ee(On);var rr=z($n);return ee(Hn),M(Kr,rr)?(Hn.enumerable?(M(On,vt)&&On[vt][rr]&&(On[vt][rr]=!1),Hn=X(Hn,{enumerable:V(0,!1)})):(M(On,vt)||ne(On,vt,V(1,{})),On[vt][rr]=!0),it(On,rr,Hn)):ne(On,rr,Hn)},Pn=function(On,$n){ee(On);var Hn=Q($n),rr=H(Hn).concat(Co(Hn));return xe(rr,function(zr){O&&!g(mr,Hn,zr)||qt(On,zr,Hn[zr])}),On},mr=function(On){var $n=z(On),Hn=g(wr,this,$n);return!(this===An&&M(Kr,$n)&&!M(jn,$n))&&(!(Hn||!M(this,$n)||!M(Kr,$n)||M(this,vt)&&this[vt][$n])||Hn)},qo=function(On,$n){var Hn=Q(On),rr=z($n);if(Hn!==An||!M(Kr,rr)||M(jn,rr)){var zr=qn(Hn,rr);return!zr||!M(Kr,rr)||M(Hn,vt)&&Hn[vt][rr]||(zr.enumerable=!0),zr}},li=function(On){var $n=Fn(Q(On)),Hn=[];return xe($n,function(rr){M(Kr,rr)||M(Ge,rr)||Lr(Hn,rr)}),Hn},Co=function(On){var $n=On===An,Hn=Fn($n?jn:Q(On)),rr=[];return xe(Hn,function(zr){!M(Kr,zr)||$n&&!M(An,zr)||Lr(rr,Kr[zr])}),rr};if(S||(pn=function(){if(B(ft,this))throw En("Symbol is not a constructor");var On=arguments.length&&arguments[0]!==void 0?D(arguments[0]):void 0,$n=et(On),Hn=function(rr){this===An&&g(Hn,jn,rr),M(this,vt)&&M(this[vt],$n)&&(this[vt][$n]=!1),it(this,$n,V(1,rr))};return O&&Re&&it(An,$n,{configurable:!0,set:Hn}),Qt($n,On)},he(ft=pn.prototype,"toString",function(){return vn(this).tag}),he(pn,"withoutSetter",function(On){return Qt(et(On),On)}),ke.f=mr,$e.f=qt,He.f=qo,de.f=Ce.f=li,Me.f=Co,dt.f=function(On){return Qt(gt(On),On)},O&&(ne(ft,"description",{configurable:!0,get:function(){return vn(this).description}}),E||he(An,"propertyIsEnumerable",mr,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:pn}),xe(H(Xe),function(On){zt(On)}),s({target:Wt,stat:!0,forced:!S},{for:function(On){var $n=D(On);if(M(Ao,$n))return Ao[$n];var Hn=pn($n);return Ao[$n]=Hn,Ee[Hn]=$n,Hn},keyFor:function(On){if(!q(On))throw En(On+" is not a symbol");if(M(Ee,On))return Ee[On]},useSetter:function(){Re=!0},useSimple:function(){Re=!1}}),s({target:"Object",stat:!0,forced:!S,sham:!O},{create:function(On,$n){return $n===void 0?X(On):Pn(X(On),$n)},defineProperty:qt,defineProperties:Pn,getOwnPropertyDescriptor:qo}),s({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:li,getOwnPropertySymbols:Co}),s({target:"Object",stat:!0,forced:k(function(){Me.f(1)})},{getOwnPropertySymbols:function(On){return Me.f(Y(On))}}),yn&&s({target:"JSON",stat:!0,forced:!S||k(function(){var On=pn();return yn([On])!="[null]"||yn({a:On})!="{}"||yn(Object(On))!="{}"})},{stringify:function(On,$n,Hn){var rr=le(arguments),zr=$n;if((N($n)||On!==void 0)&&!q(On))return j($n)||($n=function(Tr,Ka){if(I(zr)&&(Ka=g(zr,this,Tr,Ka)),!q(Ka))return Ka}),rr[1]=$n,h(yn,null,rr)}}),!ft[Ot]){var Bo=ft.valueOf;he(ft,Ot,function(On){return g(Bo,this)})}je(pn,Wt),Ge[vt]=!0},function(n,a,r){var s=r(7),c=r(152),v=r(153),h=r(3),g=r(57),_=r(28),E=_("iterator"),O=_("toStringTag"),S=h.values,k=function(j,I){if(j){if(j[E]!==S)try{g(j,E,S)}catch{j[E]=S}if(j[O]||g(j,O,I),c[I]){for(var N in h)if(j[N]!==h[N])try{g(j,N,h[N])}catch{j[N]=h[N]}}}};for(var M in c)k(s[M]&&s[M].prototype,M);k(v,"DOMTokenList")},function(n,a,r){var s=r(151).charAt,c=r(39),v=r(58),h=r(116),g="String Iterator",_=v.set,E=v.getterFor(g);h(String,"String",function(O){_(this,{type:g,string:c(O),index:0})},function(){var O,S=E(this),k=S.string,M=S.index;return M>=k.length?{value:void 0,done:!0}:(O=s(k,M),S.index+=O.length,{value:O,done:!1})})},function(n,a,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var s=r(16),c=r(36),v=r(7),h=r(15),g=r(35),_=r(30),E=r(54),O=r(39),S=r(38).f,k=r(134),M=v.Symbol,j=M&&M.prototype;if(c&&_(M)&&(!("description"in j)||M().description!==void 0)){var I={},N=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),V=E(j,this)?new M(D):D===void 0?M():M(D);return D===""&&(I[V]=!0),V};k(N,M),N.prototype=j,j.constructor=N;var B=String(M("test"))=="Symbol(test)",q=h(j.toString),ee=h(j.valueOf),Y=/^Symbol\((.*)\)[^)]+$/,Q=h("".replace),z=h("".slice);S(j,"description",{configurable:!0,get:function(){var D=ee(this),V=q(D);if(g(I,D))return"";var X=B?z(V,7,-1):Q(V,Y,"$1");return X===""?void 0:X}}),s({global:!0,forced:!0},{Symbol:N})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return h.a}),r.d(a,"c",function(){return h.e}),r.d(a,"h",function(){return Y}),r.d(a,"i",function(){return B}),r.d(a,"j",function(){return I}),r.d(a,"b",function(){return He}),r.d(a,"e",function(){return he}),r.d(a,"f",function(){return $e}),r.d(a,"g",function(){return Kr});var s,c,v,h=r(0),g=0,_=[],E=h.i.__b,O=h.i.__r,S=h.i.diffed,k=h.i.__c,M=h.i.unmount;function j(Ee,Xe){h.i.__h&&h.i.__h(c,Ee,g||Xe),g=0;var Re=c.__H||(c.__H={__:[],__h:[]});return Ee>=Re.__.length&&Re.__.push({}),Re.__[Ee]}function I(Ee){return g=1,N(de,Ee)}function N(Ee,Xe,Re){var it=j(s++,2);return it.t=Ee,it.__c||(it.__=[Re?Re(Xe):de(void 0,Xe),function(Qt){var qt=it.t(it.__[0],Qt);it.__[0]!==qt&&(it.__=[qt,it.__[1]],it.__c.setState({}))}],it.__c=c),it.__}function B(Ee,Xe){var Re=j(s++,3);!h.i.__s&&H(Re.__H,Xe)&&(Re.__=Ee,Re.__H=Xe,c.__H.__h.push(Re))}function q(Ee,Xe){var Re=j(s++,4);!h.i.__s&&H(Re.__H,Xe)&&(Re.__=Ee,Re.__H=Xe,c.__h.push(Re))}function ee(Ee,Xe){var Re=j(s++,7);return H(Re.__H,Xe)&&(Re.__=Ee(),Re.__H=Xe,Re.__h=Ee),Re.__}function Y(Ee,Xe){return g=8,ee(function(){return Ee},Xe)}function Q(){var Ee;for(_.sort(function(Xe,Re){return Xe.__v.__b-Re.__v.__b});Ee=_.pop();)if(Ee.__P)try{Ee.__H.__h.forEach(V),Ee.__H.__h.forEach(X),Ee.__H.__h=[]}catch(Xe){Ee.__H.__h=[],h.i.__e(Xe,Ee.__v)}}h.i.__b=function(Ee){c=null,E&&E(Ee)},h.i.__r=function(Ee){O&&O(Ee),s=0;var Xe=(c=Ee.__c).__H;Xe&&(Xe.__h.forEach(V),Xe.__h.forEach(X),Xe.__h=[])},h.i.diffed=function(Ee){S&&S(Ee);var Xe=Ee.__c;Xe&&Xe.__H&&Xe.__H.__h.length&&(_.push(Xe)!==1&&v===h.i.requestAnimationFrame||((v=h.i.requestAnimationFrame)||D)(Q)),c=null},h.i.__c=function(Ee,Xe){Xe.some(function(Re){try{Re.__h.forEach(V),Re.__h=Re.__h.filter(function(it){return!it.__||X(it)})}catch(it){Xe.some(function(Qt){Qt.__h&&(Qt.__h=[])}),Xe=[],h.i.__e(it,Re.__v)}}),k&&k(Ee,Xe)},h.i.unmount=function(Ee){M&&M(Ee);var Xe,Re=Ee.__c;Re&&Re.__H&&(Re.__H.__.forEach(function(it){try{V(it)}catch(Qt){Xe=Qt}}),Xe&&h.i.__e(Xe,Re.__v))};var z=typeof requestAnimationFrame=="function";function D(Ee){var Xe,Re=function(){clearTimeout(it),z&&cancelAnimationFrame(Xe),setTimeout(Ee)},it=setTimeout(Re,100);z&&(Xe=requestAnimationFrame(Re))}function V(Ee){var Xe=c,Re=Ee.__c;typeof Re=="function"&&(Ee.__c=void 0,Re()),c=Xe}function X(Ee){var Xe=c;Ee.__c=Ee.__(),c=Xe}function H(Ee,Xe){return!Ee||Ee.length!==Xe.length||Xe.some(function(Re,it){return Re!==Ee[it]})}function de(Ee,Xe){return typeof Xe=="function"?Xe(Ee):Xe}function Ce(Ee,Xe){for(var Re in Xe)Ee[Re]=Xe[Re];return Ee}function Me(Ee,Xe){for(var Re in Ee)if(Re!=="__source"&&!(Re in Xe))return!0;for(var it in Xe)if(it!=="__source"&&Ee[it]!==Xe[it])return!0;return!1}function He(Ee){this.props=Ee}function $e(Ee,Xe){function Re(Qt){var qt=this.props.ref,Pn=qt==Qt.ref;return!Pn&&qt&&(qt.call?qt(null):qt.current=null),Xe?!Xe(this.props,Qt)||!Pn:Me(this.props,Qt)}function it(Qt){return this.shouldComponentUpdate=Re,Object(h.e)(Ee,Qt)}return it.displayName="Memo("+(Ee.displayName||Ee.name)+")",it.prototype.isReactComponent=!0,it.__f=!0,it}(He.prototype=new h.a).isPureReactComponent=!0,He.prototype.shouldComponentUpdate=function(Ee,Xe){return Me(this.props,Ee)||Me(this.state,Xe)};var ke=h.i.__b;h.i.__b=function(Ee){Ee.type&&Ee.type.__f&&Ee.ref&&(Ee.props.ref=Ee.ref,Ee.ref=null),ke&&ke(Ee)};var le=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function he(Ee){function Xe(Re,it){var Qt=Ce({},Re);return delete Qt.ref,Ee(Qt,!(it=Re.ref||it)||typeof it=="object"&&!("current"in it)?null:it)}return Xe.$$typeof=le,Xe.render=Xe,Xe.prototype.isReactComponent=Xe.__f=!0,Xe.displayName="ForwardRef("+(Ee.displayName||Ee.name)+")",Xe}var Se=function(Ee,Xe){return Ee==null?null:Object(h.k)(Object(h.k)(Ee).map(Xe))},Ke={map:Se,forEach:Se,count:function(Ee){return Ee?Object(h.k)(Ee).length:0},only:function(Ee){var Xe=Object(h.k)(Ee);if(Xe.length!==1)throw"Children.only";return Xe[0]},toArray:h.k},Ge=h.i.__e;h.i.__e=function(Ee,Xe,Re){if(Ee.then){for(var it,Qt=Xe;Qt=Qt.__;)if((it=Qt.__c)&&it.__c)return Xe.__e==null&&(Xe.__e=Re.__e,Xe.__k=Re.__k),it.__c(Ee,Xe)}Ge(Ee,Xe,Re)};var et=h.i.unmount;function gt(Ee,Xe,Re){return Ee&&(Ee.__c&&Ee.__c.__H&&(Ee.__c.__H.__.forEach(function(it){typeof it.__c=="function"&&it.__c()}),Ee.__c.__H=null),(Ee=Ce({},Ee)).__c!=null&&(Ee.__c.__P===Re&&(Ee.__c.__P=Xe),Ee.__c=null),Ee.__k=Ee.__k&&Ee.__k.map(function(it){return gt(it,Xe,Re)})),Ee}function dt(Ee,Xe,Re){return Ee&&(Ee.__v=null,Ee.__k=Ee.__k&&Ee.__k.map(function(it){return dt(it,Xe,Re)}),Ee.__c&&Ee.__c.__P===Xe&&(Ee.__e&&Re.insertBefore(Ee.__e,Ee.__d),Ee.__c.__e=!0,Ee.__c.__P=Re)),Ee}function zt(){this.__u=0,this.t=null,this.__b=null}function je(Ee){var Xe=Ee.__.__c;return Xe&&Xe.__e&&Xe.__e(Ee)}function me(){this.u=null,this.o=null}h.i.unmount=function(Ee){var Xe=Ee.__c;Xe&&Xe.__R&&Xe.__R(),Xe&&Ee.__h===!0&&(Ee.type=null),et&&et(Ee)},(zt.prototype=new h.a).__c=function(Ee,Xe){var Re=Xe.__c,it=this;it.t==null&&(it.t=[]),it.t.push(Re);var Qt=je(it.__v),qt=!1,Pn=function(){qt||(qt=!0,Re.__R=null,Qt?Qt(mr):mr())};Re.__R=Pn;var mr=function(){if(!--it.__u){if(it.state.__e){var li=it.state.__e;it.__v.__k[0]=dt(li,li.__c.__P,li.__c.__O)}var Co;for(it.setState({__e:it.__b=null});Co=it.t.pop();)Co.forceUpdate()}},qo=Xe.__h===!0;it.__u++||qo||it.setState({__e:it.__b=it.__v.__k[0]}),Ee.then(Pn,Pn)},zt.prototype.componentWillUnmount=function(){this.t=[]},zt.prototype.render=function(Ee,Xe){if(this.__b){if(this.__v.__k){var Re=document.createElement("div"),it=this.__v.__k[0].__c;this.__v.__k[0]=gt(this.__b,Re,it.__O=it.__P)}this.__b=null}var Qt=Xe.__e&&Object(h.e)(h.b,null,Ee.fallback);return Qt&&(Qt.__h=null),[Object(h.e)(h.b,null,Xe.__e?null:Ee.children),Qt]};var xe=function(Ee,Xe,Re){if(++Re[1]===Re[0]&&Ee.o.delete(Xe),Ee.props.revealOrder&&(Ee.props.revealOrder[0]!=="t"||!Ee.o.size))for(Re=Ee.u;Re;){for(;Re.length>3;)Re.pop()();if(Re[1]<Re[0])break;Ee.u=Re=Re[2]}};function vt(Ee){return this.getChildContext=function(){return Ee.context},Ee.children}function Wt(Ee){var Xe=this,Re=Ee.i;Xe.componentWillUnmount=function(){Object(h.j)(null,Xe.l),Xe.l=null,Xe.i=null},Xe.i&&Xe.i!==Re&&Xe.componentWillUnmount(),Ee.__v?(Xe.l||(Xe.i=Re,Xe.l={nodeType:1,parentNode:Re,childNodes:[],appendChild:function(it){this.childNodes.push(it),Xe.i.appendChild(it)},insertBefore:function(it,Qt){this.childNodes.push(it),Xe.i.appendChild(it)},removeChild:function(it){this.childNodes.splice(this.childNodes.indexOf(it)>>>1,1),Xe.i.removeChild(it)}}),Object(h.j)(Object(h.e)(vt,{context:Xe.context},Ee.__v),Xe.l)):Xe.l&&Xe.componentWillUnmount()}(me.prototype=new h.a).__e=function(Ee){var Xe=this,Re=je(Xe.__v),it=Xe.o.get(Ee);return it[0]++,function(Qt){var qt=function(){Xe.props.revealOrder?(it.push(Qt),xe(Xe,Ee,it)):Qt()};Re?Re(qt):qt()}},me.prototype.render=function(Ee){this.u=null,this.o=new Map;var Xe=Object(h.k)(Ee.children);Ee.revealOrder&&Ee.revealOrder[0]==="b"&&Xe.reverse();for(var Re=Xe.length;Re--;)this.o.set(Xe[Re],this.u=[1,0,this.u]);return Ee.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var Ee=this;this.o.forEach(function(Xe,Re){xe(Ee,Re,Xe)})};var Ot=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,vn=typeof document<"u",An=function(Ee){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ee)};h.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ee){Object.defineProperty(h.a.prototype,Ee,{configurable:!0,get:function(){return this["UNSAFE_"+Ee]},set:function(Xe){Object.defineProperty(this,Ee,{configurable:!0,writable:!0,value:Xe})}})});var pn=h.i.event;function ft(){}function En(){return this.cancelBubble}function Le(){return this.defaultPrevented}h.i.event=function(Ee){return pn&&(Ee=pn(Ee)),Ee.persist=ft,Ee.isPropagationStopped=En,Ee.isDefaultPrevented=Le,Ee.nativeEvent=Ee};var yn,qn={configurable:!0,get:function(){return this.class}},ne=h.i.vnode;h.i.vnode=function(Ee){var Xe=Ee.type,Re=Ee.props,it=Re;if(typeof Xe=="string"){var Qt=Xe.indexOf("-")===-1;for(var qt in it={},Re){var Pn=Re[qt];vn&&qt==="children"&&Xe==="noscript"||qt==="value"&&"defaultValue"in Re&&Pn==null||(qt==="defaultValue"&&"value"in Re&&Re.value==null?qt="value":qt==="download"&&Pn===!0?Pn="":/ondoubleclick/i.test(qt)?qt="ondblclick":/^onchange(textarea|input)/i.test(qt+Xe)&&!An(Re.type)?qt="oninput":/^onfocus$/i.test(qt)?qt="onfocusin":/^onblur$/i.test(qt)?qt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(qt)?qt=qt.toLowerCase():Qt&&rn.test(qt)?qt=qt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Pn===null&&(Pn=void 0),it[qt]=Pn)}Xe=="select"&&it.multiple&&Array.isArray(it.value)&&(it.value=Object(h.k)(Re.children).forEach(function(mr){mr.props.selected=it.value.indexOf(mr.props.value)!=-1})),Xe=="select"&&it.defaultValue!=null&&(it.value=Object(h.k)(Re.children).forEach(function(mr){mr.props.selected=it.multiple?it.defaultValue.indexOf(mr.props.value)!=-1:it.defaultValue==mr.props.value})),Ee.props=it,Re.class!=Re.className&&(qn.enumerable="className"in Re,Re.className!=null&&(it.class=Re.className),Object.defineProperty(it,"className",qn))}Ee.$$typeof=Ot,ne&&ne(Ee)};var Fn=h.i.__r;h.i.__r=function(Ee){Fn&&Fn(Ee),yn=Ee.__c};var wr={ReactCurrentDispatcher:{current:{readContext:function(Ee){return yn.__n[Ee.__c].props.value}}}};function Lr(Ee){return!!Ee&&Ee.$$typeof===Ot}var Kr=function(Ee,Xe){return Ee(Xe)},jn=h.b,Ao={useState:I,useReducer:N,useEffect:B,useLayoutEffect:q,useRef:function(Ee){return g=5,ee(function(){return{current:Ee}},[])},useImperativeHandle:function(Ee,Xe,Re){g=6,q(function(){typeof Ee=="function"?Ee(Xe()):Ee&&(Ee.current=Xe())},Re==null?Re:Re.concat(Ee))},useMemo:ee,useCallback:Y,useContext:function(Ee){var Xe=c.context[Ee.__c],Re=j(s++,9);return Re.c=Ee,Xe?(Re.__==null&&(Re.__=!0,Xe.sub(c)),Xe.props.value):Ee.__},useDebugValue:function(Ee,Xe){h.i.useDebugValue&&h.i.useDebugValue(Xe?Xe(Ee):Ee)},version:"17.0.2",Children:Ke,render:function(Ee,Xe,Re){return Xe.__k==null&&(Xe.textContent=""),Object(h.j)(Ee,Xe),typeof Re=="function"&&Re(),Ee?Ee.__c:null},hydrate:function(Ee,Xe,Re){return Object(h.h)(Ee,Xe),typeof Re=="function"&&Re(),Ee?Ee.__c:null},unmountComponentAtNode:function(Ee){return!!Ee.__k&&(Object(h.j)(null,Ee),!0)},createPortal:function(Ee,Xe){return Object(h.e)(Wt,{__v:Ee,i:Xe})},createElement:h.e,createContext:h.d,createFactory:function(Ee){return h.e.bind(null,Ee)},cloneElement:function(Ee){return Lr(Ee)?h.c.apply(null,arguments):Ee},createRef:h.f,Fragment:h.b,isValidElement:Lr,findDOMNode:function(Ee){return Ee&&(Ee.base||Ee.nodeType===1&&Ee)||null},Component:h.a,PureComponent:He,memo:$e,forwardRef:he,flushSync:function(Ee,Xe){return Ee(Xe)},unstable_batchedUpdates:Kr,StrictMode:jn,Suspense:zt,SuspenseList:me,lazy:function(Ee){var Xe,Re,it;function Qt(qt){if(Xe||(Xe=Ee()).then(function(Pn){Re=Pn.default||Pn},function(Pn){it=Pn}),it)throw it;if(!Re)throw Xe;return Object(h.e)(Re,qt)}return Qt.displayName="Lazy",Qt.__f=!0,Qt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:wr};a.d=Ao},function(n,a,r){var s=r(7),c=r(152),v=r(153),h=r(187),g=r(57),_=function(O){if(O&&O.forEach!==h)try{g(O,"forEach",h)}catch{O.forEach=h}};for(var E in c)c[E]&&_(s[E]&&s[E].prototype);_(v)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var s=r(16),c=r(18),v=r(40),h=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){h(1)}),sham:!g},{getPrototypeOf:function(_){return h(v(_))}})},function(n,a,r){var s=r(16),c=r(46),v=r(76),h=r(203),g=r(165),_=r(32),E=r(33),O=r(60),S=r(18),k=c("Reflect","construct"),M=Object.prototype,j=[].push,I=S(function(){function q(){}return!(k(function(){},[],q)instanceof q)}),N=!S(function(){k(function(){})}),B=I||N;s({target:"Reflect",stat:!0,forced:B,sham:B},{construct:function(q,ee){g(q),_(ee);var Y=arguments.length<3?q:g(arguments[2]);if(N&&!I)return k(q,ee,Y);if(q==Y){switch(ee.length){case 0:return new q;case 1:return new q(ee[0]);case 2:return new q(ee[0],ee[1]);case 3:return new q(ee[0],ee[1],ee[2]);case 4:return new q(ee[0],ee[1],ee[2],ee[3])}var Q=[null];return v(j,Q,ee),new(v(h,q,Q))}var z=Y.prototype,D=O(E(z)?z:M),V=v(q,D,ee);return E(V)?V:D}})},function(n,a){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(h){return h&&v(c,h)}:function(h){return h&&function(){return c.apply(h,arguments)}}},function(n,a,r){var s=r(7),c=r(50).f,v=r(57),h=r(42),g=r(110),_=r(134),E=r(95);n.exports=function(O,S){var k,M,j,I,N,B=O.target,q=O.global,ee=O.stat;if(k=q?s:ee?s[B]||g(B,{}):(s[B]||{}).prototype)for(M in S){if(I=S[M],j=O.noTargetGet?(N=c(k,M))&&N.value:k[M],!E(q?M:B+(ee?".":"#")+M,O.forced)&&j!==void 0){if(typeof I==typeof j)continue;_(I,j)}(O.sham||j&&j.sham)&&v(I,"sham",!0),h(k,M,I,O)}}},function(n,a,r){var s=r(16),c=r(7),v=r(96),h=r(99),g=r(33),_=r(75),E=r(45),O=r(41),S=r(63),k=r(28),M=r(81),j=r(98),I=M("slice"),N=k("species"),B=c.Array,q=Math.max;s({target:"Array",proto:!0,forced:!I},{slice:function(ee,Y){var Q,z,D,V=O(this),X=E(V),H=_(ee,X),de=_(Y===void 0?X:Y,X);if(v(V)&&(Q=V.constructor,(h(Q)&&(Q===B||v(Q.prototype))||g(Q)&&(Q=Q[N])===null)&&(Q=void 0),Q===B||Q===void 0))return j(V,H,de);for(z=new(Q===void 0?B:Q)(q(de-H,0)),D=0;H<de;H++,D++)H in V&&S(z,D,V[H]);return z.length=D,z}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(h){return v(c(h))}})},function(n,a,r){var s=r(36),c=r(73).EXISTS,v=r(15),h=r(38).f,g=Function.prototype,_=v(g.toString),E=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=v(E.exec);s&&!c&&h(g,"name",{configurable:!0,get:function(){try{return O(E,_(this))[1]}catch{return""}}})},function(n,a,r){var s=r(16),c=r(18),v=r(41),h=r(50).f,g=r(36),_=c(function(){h(1)});s({target:"Object",stat:!0,forced:!g||_,sham:!g},{getOwnPropertyDescriptor:function(E,O){return h(v(E),O)}})},function(n,a,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,a,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(16),c=r(36),v=r(135),h=r(41),g=r(50),_=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(E){for(var O,S,k=h(E),M=g.f,j=v(k),I={},N=0;j.length>N;)(S=M(k,O=j[N++]))!==void 0&&_(I,O,S);return I}})},,function(n,a,r){var s=r(16),c=r(7),v=r(18),h=r(96),g=r(33),_=r(40),E=r(45),O=r(63),S=r(115),k=r(81),M=r(28),j=r(70),I=M("isConcatSpreadable"),N=9007199254740991,B="Maximum allowed index exceeded",q=c.TypeError,ee=j>=51||!v(function(){var z=[];return z[I]=!1,z.concat()[0]!==z}),Y=k("concat"),Q=function(z){if(!g(z))return!1;var D=z[I];return D!==void 0?!!D:h(z)};s({target:"Array",proto:!0,forced:!ee||!Y},{concat:function(z){var D,V,X,H,de,Ce=_(this),Me=S(Ce,0),He=0;for(D=-1,X=arguments.length;D<X;D++)if(Q(de=D===-1?Ce:arguments[D])){if(He+(H=E(de))>N)throw q(B);for(V=0;V<H;V++,He++)V in de&&O(Me,He,de[V])}else{if(He>=N)throw q(B);O(Me,He++,de)}return Me.length=He,Me}})},function(n,a,r){var s=r(7),c=r(89),v=r(35),h=r(90),g=r(108),_=r(132),E=c("wks"),O=s.Symbol,S=O&&O.for,k=_?O:O&&O.withoutSetter||h;n.exports=function(M){if(!v(E,M)||!g&&typeof E[M]!="string"){var j="Symbol."+M;g&&v(O,M)?E[M]=O[M]:E[M]=_&&S?S(j):k(j)}return E[M]}},function(n,a,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();a.a=v},function(n,a,r){var s=r(7),c=r(33),v=s.String,h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not an object")}},function(n,a,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(h,g){return v(c(h),g)}},function(n,a,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(7),c=r(36),v=r(133),h=r(32),g=r(86),_=s.TypeError,E=Object.defineProperty;a.f=c?E:function(O,S,k){if(h(O),S=g(S),h(k),v)try{return E(O,S,k)}catch{}if("get"in k||"set"in k)throw _("Accessors not supported");return"value"in k&&(O[S]=k.value),O}},function(n,a,r){var s=r(7),c=r(97),v=s.String;n.exports=function(h){if(c(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(h)}},function(n,a,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(h){return v(c(h))}},function(n,a,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,a,r){var s=r(7),c=r(30),v=r(35),h=r(57),g=r(110),_=r(92),E=r(58),O=r(73).CONFIGURABLE,S=E.get,k=E.enforce,M=String(String).split("String");(n.exports=function(j,I,N,B){var q,ee=!!B&&!!B.unsafe,Y=!!B&&!!B.enumerable,Q=!!B&&!!B.noTargetGet,z=B&&B.name!==void 0?B.name:I;c(N)&&(String(z).slice(0,7)==="Symbol("&&(z="["+String(z).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(N,"name")||O&&N.name!==z)&&h(N,"name",z),(q=k(N)).source||(q.source=M.join(typeof z=="string"?z:""))),j!==s?(ee?!Q&&j[I]&&(Y=!0):delete j[I],Y?j[I]=N:h(j,I,N)):Y?j[I]=N:g(I,N)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||_(this)})},function(n,a,r){(function(s){r.d(a,"d",function(){return h}),r.d(a,"c",function(){return g}),r.d(a,"b",function(){return _}),r.d(a,"a",function(){return O});var c=r(10),v=function(S,k){var M=typeof Symbol=="function"&&S[Symbol.iterator];if(!M)return S;var j,I,N=M.call(S),B=[];try{for(;(k===void 0||k-- >0)&&!(j=N.next()).done;)B.push(j.value)}catch(q){I={error:q}}finally{try{j&&!j.done&&(M=N.return)&&M.call(N)}finally{if(I)throw I.error}}return B};function h(){var S=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){S(function(k){return k+1})},[])}function g(S){if(!S||typeof S!="object")return!1;var k=Object.getPrototypeOf(S);return!k||k===Object.prototype}function _(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var E={};function O(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:E}}).call(this,r(68))},function(n,a,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,a,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,a,r){var s=r(7),c=r(30),v=function(h){return c(h)?h:void 0};n.exports=function(h,g){return arguments.length<2?v(s[h]):s[h]&&s[h][g]}},function(n,a,r){var s=r(16),c=r(34),v=r(33),h=r(32),g=r(204),_=r(50),E=r(101);s({target:"Reflect",stat:!0},{get:function O(S,k){var M,j,I=arguments.length<3?S:arguments[2];return h(S)===I?S[k]:(M=_.f(S,k))?g(M)?M.value:M.get===void 0?void 0:c(M.get,I):v(j=E(S))?O(j,k,I):void 0}})},function(n,a,r){(function(s){var c=r(31),v=r(171),h=t&&!t.nodeType&&t,g=h&&typeof s=="object"&&s&&!s.nodeType&&s,_=g&&g.exports===h?c.a.Buffer:void 0,E=(_?_.isBuffer:void 0)||v.a;a.a=E}).call(this,r(122)(n))},function(n,a,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v&&c.a.process,_=function(){try{var E=h&&h.require&&h.require("util").types;return E||g&&g.binding&&g.binding("util")}catch{}}();a.a=_}).call(this,r(122)(n))},function(n,a,r){var s=r(36),c=r(34),v=r(84),h=r(69),g=r(41),_=r(86),E=r(35),O=r(133),S=Object.getOwnPropertyDescriptor;a.f=s?S:function(k,M){if(k=g(k),M=_(M),O)try{return S(k,M)}catch{}if(E(k,M))return h(!c(v.f,k,M),k[M])}},function(n,a,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(h){return v(c(h),8,-1)}},function(n,a,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,a,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,a,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,a,r){var s=r(7),c=r(30),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a function")}},function(n,a,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(h,g,_){return c.f(h,g,v(1,_))}:function(h,g,_){return h[g]=_,h}},function(n,a,r){var s,c,v,h=r(175),g=r(7),_=r(15),E=r(33),O=r(57),S=r(35),k=r(109),M=r(93),j=r(72),I="Object already initialized",N=g.TypeError,B=g.WeakMap;if(h||k.state){var q=k.state||(k.state=new B),ee=_(q.get),Y=_(q.has),Q=_(q.set);s=function(D,V){if(Y(q,D))throw new N(I);return V.facade=D,Q(q,D,V),V},c=function(D){return ee(q,D)||{}},v=function(D){return Y(q,D)}}else{var z=M("state");j[z]=!0,s=function(D,V){if(S(D,z))throw new N(I);return V.facade=D,O(D,z,V),V},c=function(D){return S(D,z)?D[z]:{}},v=function(D){return S(D,z)}}n.exports={set:s,get:c,has:v,enforce:function(D){return v(D)?c(D):s(D,{})},getterFor:function(D){return function(V){var X;if(!E(V)||(X=c(V)).type!==D)throw N("Incompatible receiver, "+D+" required");return X}}}},function(n,a){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,a,r){var s,c=r(32),v=r(176),h=r(111),g=r(72),_=r(138),E=r(91),O=r(93),S=O("IE_PROTO"),k=function(){},M=function(N){return"<script>"+N+"<\/script>"},j=function(N){N.write(M("")),N.close();var B=N.parentWindow.Object;return N=null,B},I=function(){try{s=new ActiveXObject("htmlfile")}catch{}var N,B;I=typeof document<"u"?document.domain&&s?j(s):((B=E("iframe")).style.display="none",_.appendChild(B),B.src="javascript:",(N=B.contentWindow.document).open(),N.write(M("document.F=Object")),N.close(),N.F):j(s);for(var q=h.length;q--;)delete I.prototype[h[q]];return I()};g[S]=!0,n.exports=Object.create||function(N,B){var q;return N!==null?(k.prototype=c(N),q=new k,k.prototype=null,q[S]=N):q=I(),B===void 0?q:v(q,B)}},function(n,a,r){var s=r(36),c=r(7),v=r(15),h=r(95),g=r(42),_=r(35),E=r(148),O=r(54),S=r(87),k=r(131),M=r(18),j=r(74).f,I=r(50).f,N=r(38).f,B=r(160),q=r(161).trim,ee="Number",Y=c.Number,Q=Y.prototype,z=c.TypeError,D=v("".slice),V=v("".charCodeAt),X=function($e){var ke=k($e,"number");return typeof ke=="bigint"?ke:H(ke)},H=function($e){var ke,le,he,Se,Ke,Ge,et,gt,dt=k($e,"number");if(S(dt))throw z("Cannot convert a Symbol value to a number");if(typeof dt=="string"&&dt.length>2){if(dt=q(dt),(ke=V(dt,0))===43||ke===45){if((le=V(dt,2))===88||le===120)return NaN}else if(ke===48){switch(V(dt,1)){case 66:case 98:he=2,Se=49;break;case 79:case 111:he=8,Se=55;break;default:return+dt}for(Ge=(Ke=D(dt,2)).length,et=0;et<Ge;et++)if((gt=V(Ke,et))<48||gt>Se)return NaN;return parseInt(Ke,he)}}return+dt};if(h(ee,!Y(" 0o1")||!Y("0b1")||Y("+0x1"))){for(var de,Ce=function($e){var ke=arguments.length<1?0:Y(X($e)),le=this;return O(Q,le)&&M(function(){B(le)})?E(Object(ke),le,Ce):ke},Me=s?j(Y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),He=0;Me.length>He;He++)_(Y,de=Me[He])&&!_(Ce,de)&&N(Ce,de,I(Y,de));Ce.prototype=Q,Q.constructor=Ce,g(c,ee,Ce)}},function(n,a,r){var s=r(56);n.exports=function(c,v){var h=c[v];return h==null?void 0:s(h)}},function(n,a,r){var s=r(86),c=r(38),v=r(69);n.exports=function(h,g,_){var E=s(g);E in h?c.f(h,E,v(0,_)):h[E]=_}},function(n,a,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(h,g){return c(h),g===void 0?h:v?v(h,g):function(){return h.apply(g,arguments)}}},function(n,a,r){var s=r(16),c=r(15),v=r(85),h=r(41),g=r(121),_=c([].join),E=v!=Object,O=g("join",",");s({target:"Array",proto:!0,forced:E||!O},{join:function(S){return _(h(this),S===void 0?",":S)}})},function(n,a,r){var s=r(15),c=r(73).PROPER,v=r(42),h=r(32),g=r(54),_=r(39),E=r(18),O=r(154),S="toString",k=RegExp.prototype,M=k.toString,j=s(O),I=E(function(){return M.call({source:"a",flags:"b"})!="/a/b"}),N=c&&M.name!=S;(I||N)&&v(RegExp.prototype,S,function(){var B=h(this),q=_(B.source),ee=B.flags;return"/"+q+"/"+_(ee===void 0&&g(k,B)&&!("flags"in k)?j(B):ee)},{unsafe:!0})},function(n,a,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,a,r){var s,c,v=r(7),h=r(55),g=v.process,_=v.Deno,E=g&&g.versions||_&&_.version,O=E&&E.v8;O&&(c=(s=O.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&h&&(!(s=h.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=h.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var s=r(36),c=r(35),v=Function.prototype,h=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),_=g&&(function(){}).name==="something",E=g&&(!s||s&&h(v,"name").configurable);n.exports={EXISTS:g,PROPER:_,CONFIGURABLE:E}},function(n,a,r){var s=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,a,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(h,g){var _=s(h);return _<0?c(_+g,0):v(_,g)}},function(n,a){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,a,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,a,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(h,g,_){h&&!c(h=_?h:h.prototype,v)&&s(h,v,{configurable:!0,value:g})}},function(n,a,r){var s=r(64),c=r(15),v=r(85),h=r(40),g=r(45),_=r(115),E=c([].push),O=function(S){var k=S==1,M=S==2,j=S==3,I=S==4,N=S==6,B=S==7,q=S==5||N;return function(ee,Y,Q,z){for(var D,V,X=h(ee),H=v(X),de=s(Y,Q),Ce=g(H),Me=0,He=z||_,$e=k?He(ee,Ce):M||B?He(ee,0):void 0;Ce>Me;Me++)if((q||Me in H)&&(V=de(D=H[Me],Me,X),S))if(k)$e[Me]=V;else if(V)switch(S){case 3:return!0;case 5:return D;case 6:return Me;case 2:E($e,D)}else switch(S){case 4:return!1;case 7:E($e,D)}return N?-1:j||I?I:$e}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,a){n.exports={}},function(n,a,r){var s=r(18),c=r(28),v=r(70),h=c("species");n.exports=function(g){return v>=51||!s(function(){var _=[];return(_.constructor={})[h]=function(){return{foo:1}},_[g](Boolean).foo!==1})}},function(n,a,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(159),_=r(32),E=r(44),O=r(164),S=r(124),k=r(94),M=r(39),j=r(62),I=r(114),N=r(125),B=r(103),q=r(155),ee=r(18),Y=q.UNSUPPORTED_Y,Q=4294967295,z=Math.min,D=[].push,V=v(/./.exec),X=v(D),H=v("".slice),de=!ee(function(){var Ce=/(?:)/,Me=Ce.exec;Ce.exec=function(){return Me.apply(this,arguments)};var He="ab".split(Ce);return He.length!==2||He[0]!=="a"||He[1]!=="b"});h("split",function(Ce,Me,He){var $e;return $e="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(ke,le){var he=M(E(this)),Se=le===void 0?Q:le>>>0;if(Se===0)return[];if(ke===void 0)return[he];if(!g(ke))return c(Me,he,ke,Se);for(var Ke,Ge,et,gt=[],dt=(ke.ignoreCase?"i":"")+(ke.multiline?"m":"")+(ke.unicode?"u":"")+(ke.sticky?"y":""),zt=0,je=new RegExp(ke.source,dt+"g");(Ke=c(B,je,he))&&!((Ge=je.lastIndex)>zt&&(X(gt,H(he,zt,Ke.index)),Ke.length>1&&Ke.index<he.length&&s(D,gt,I(Ke,1)),et=Ke[0].length,zt=Ge,gt.length>=Se));)je.lastIndex===Ke.index&&je.lastIndex++;return zt===he.length?!et&&V(je,"")||X(gt,""):X(gt,H(he,zt)),gt.length>Se?I(gt,0,Se):gt}:"0".split(void 0,0).length?function(ke,le){return ke===void 0&&le===0?[]:c(Me,this,ke,le)}:Me,[function(ke,le){var he=E(this),Se=ke==null?void 0:j(ke,Ce);return Se?c(Se,ke,he,le):c($e,M(he),ke,le)},function(ke,le){var he=_(this),Se=M(ke),Ke=He($e,he,Se,le,$e!==Me);if(Ke.done)return Ke.value;var Ge=O(he,RegExp),et=he.unicode,gt=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(Y?"g":"y"),dt=new Ge(Y?"^(?:"+he.source+")":he,gt),zt=le===void 0?Q:le>>>0;if(zt===0)return[];if(Se.length===0)return N(dt,Se)===null?[Se]:[];for(var je=0,me=0,xe=[];me<Se.length;){dt.lastIndex=Y?0:me;var vt,Wt=N(dt,Y?H(Se,me):Se);if(Wt===null||(vt=z(k(dt.lastIndex+(Y?me:0)),Se.length))===je)me=S(Se,me,et);else{if(X(xe,H(Se,je,me)),xe.length===zt)return xe;for(var Ot=1;Ot<=Wt.length-1;Ot++)if(X(xe,Wt[Ot]),xe.length===zt)return xe;me=je=vt}}return X(xe,H(Se,je)),xe}]},!de,Y)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);a.f=v?function(h){var g=c(this,h);return!!g&&g.enumerable}:s},function(n,a,r){var s=r(7),c=r(15),v=r(18),h=r(51),g=s.Object,_=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(E){return h(E)=="String"?_(E,""):g(E)}:g},function(n,a,r){var s=r(131),c=r(87);n.exports=function(v){var h=s(v,"string");return c(h)?h:h+""}},function(n,a,r){var s=r(7),c=r(46),v=r(30),h=r(54),g=r(132),_=s.Object;n.exports=g?function(E){return typeof E=="symbol"}:function(E){var O=c("Symbol");return v(O)&&h(O.prototype,_(E))}},function(n,a,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,a,r){var s=r(71),c=r(109);(n.exports=function(v,h){return c[v]||(c[v]=h!==void 0?h:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var s=r(15),c=0,v=Math.random(),h=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+h(++c+v,36)}},function(n,a,r){var s=r(7),c=r(33),v=s.document,h=c(v)&&c(v.createElement);n.exports=function(g){return h?v.createElement(g):{}}},function(n,a,r){var s=r(15),c=r(30),v=r(109),h=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return h(g)}),n.exports=v.inspectSource},function(n,a,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(h){return v[h]||(v[h]=c(h))}},function(n,a,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,a,r){var s=r(18),c=r(30),v=/#|\.prototype\./,h=function(S,k){var M=_[g(S)];return M==O||M!=E&&(c(k)?s(k):!!k)},g=h.normalize=function(S){return String(S).replace(v,".").toLowerCase()},_=h.data={},E=h.NATIVE="N",O=h.POLYFILL="P";n.exports=h},function(n,a,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,a,r){var s=r(7),c=r(113),v=r(30),h=r(51),g=r(28)("toStringTag"),_=s.Object,E=h(function(){return arguments}())=="Arguments";n.exports=c?h:function(O){var S,k,M;return O===void 0?"Undefined":O===null?"Null":typeof(k=function(j,I){try{return j[I]}catch{}}(S=_(O),g))=="string"?k:E?h(S):(M=h(S))=="Object"&&v(S.callee)?"Arguments":M}},function(n,a,r){var s=r(15);n.exports=s([].slice)},function(n,a,r){var s=r(15),c=r(18),v=r(30),h=r(97),g=r(46),_=r(92),E=function(){},O=[],S=g("Reflect","construct"),k=/^\s*(?:class|function)\b/,M=s(k.exec),j=!k.exec(E),I=function(N){if(!v(N))return!1;try{return S(E,O,N),!0}catch{return!1}};n.exports=!S||c(function(){var N;return I(I.call)||!I(Object)||!I(function(){N=!0})||N})?function(N){if(!v(N))return!1;switch(h(N)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return j||!!M(k,_(N))}:I},function(n,a,r){var s=r(28),c=r(60),v=r(38),h=s("unscopables"),g=Array.prototype;g[h]==null&&v.f(g,h,{configurable:!0,value:c(null)}),n.exports=function(_){g[h][_]=!0}},function(n,a,r){var s=r(7),c=r(35),v=r(30),h=r(40),g=r(93),_=r(143),E=g("IE_PROTO"),O=s.Object,S=O.prototype;n.exports=_?O.getPrototypeOf:function(k){var M=h(k);if(c(M,E))return M[E];var j=M.constructor;return v(j)&&M instanceof j?j.prototype:M instanceof O?S:null}},function(n,a,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,g=!1,_={};try{(h=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),g=_ instanceof Array}catch{}return function(E,O){return c(E),v(O),g?h(E,O):E.__proto__=O,E}}():void 0)},function(n,a,r){var s,c,v=r(34),h=r(15),g=r(39),_=r(154),E=r(155),O=r(89),S=r(60),k=r(58).get,M=r(190),j=r(191),I=O("native-string-replace",String.prototype.replace),N=RegExp.prototype.exec,B=N,q=h("".charAt),ee=h("".indexOf),Y=h("".replace),Q=h("".slice),z=(c=/b*/g,v(N,s=/a/,"a"),v(N,c,"a"),s.lastIndex!==0||c.lastIndex!==0),D=E.BROKEN_CARET,V=/()??/.exec("")[1]!==void 0;(z||V||D||M||j)&&(B=function(X){var H,de,Ce,Me,He,$e,ke,le=this,he=k(le),Se=g(X),Ke=he.raw;if(Ke)return Ke.lastIndex=le.lastIndex,H=v(B,Ke,Se),le.lastIndex=Ke.lastIndex,H;var Ge=he.groups,et=D&&le.sticky,gt=v(_,le),dt=le.source,zt=0,je=Se;if(et&&(gt=Y(gt,"y",""),ee(gt,"g")===-1&&(gt+="g"),je=Q(Se,le.lastIndex),le.lastIndex>0&&(!le.multiline||le.multiline&&q(Se,le.lastIndex-1)!==`
`)&&(dt="(?: "+dt+")",je=" "+je,zt++),de=new RegExp("^(?:"+dt+")",gt)),V&&(de=new RegExp("^"+dt+"$(?!\\s)",gt)),z&&(Ce=le.lastIndex),Me=v(N,et?de:le,je),et?Me?(Me.input=Q(Me.input,zt),Me[0]=Q(Me[0],zt),Me.index=le.lastIndex,le.lastIndex+=Me[0].length):le.lastIndex=0:z&&Me&&(le.lastIndex=le.global?Me.index+Me[0].length:Ce),V&&Me&&Me.length>1&&v(I,Me[0],de,function(){for(He=1;He<arguments.length-2;He++)arguments[He]===void 0&&(Me[He]=void 0)}),Me&&Ge)for(Me.groups=$e=S(null),He=0;He<Ge.length;He++)$e[(ke=Ge[He])[0]]=Me[ke[1]];return Me}),n.exports=B},function(n,a,r){var s=r(16),c=r(7),v=r(75),h=r(59),g=r(45),_=r(40),E=r(115),O=r(63),S=r(81)("splice"),k=c.TypeError,M=Math.max,j=Math.min,I=9007199254740991,N="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!S},{splice:function(B,q){var ee,Y,Q,z,D,V,X=_(this),H=g(X),de=v(B,H),Ce=arguments.length;if(Ce===0?ee=Y=0:Ce===1?(ee=0,Y=H-de):(ee=Ce-2,Y=j(M(h(q),0),H-de)),H+ee-Y>I)throw k(N);for(Q=E(X,Y),z=0;z<Y;z++)(D=de+z)in X&&O(Q,z,X[D]);if(Q.length=Y,ee<Y){for(z=de;z<H-Y;z++)V=z+ee,(D=z+Y)in X?X[V]=X[D]:delete X[V];for(z=H;z>H-Y+ee;z--)delete X[z-1]}else if(ee>Y)for(z=H-Y;z>de;z--)V=z+ee-1,(D=z+Y-1)in X?X[V]=X[D]:delete X[V];for(z=0;z<ee;z++)X[z+de]=arguments[z+2];return X.length=H-Y+ee,Q}})},function(n,a,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,a,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;a.a=c}).call(this,r(68))},function(n,a,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v?c.a.Buffer:void 0,_=g?g.allocUnsafe:void 0;a.a=function(E,O){if(O)return E.slice();var S=E.length,k=_?_(S):new E.constructor(S);return E.copy(k),k}}).call(this,r(122)(n))},function(n,a,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,a,r){var s=r(7),c=r(110),v="__core-js_shared__",h=s[v]||c(v,{});n.exports=h},function(n,a,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,h){try{c(s,v,{value:h,configurable:!0,writable:!0})}catch{s[v]=h}return h}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,a,r){var s=r(7),c=r(75),v=r(45),h=r(63),g=s.Array,_=Math.max;n.exports=function(E,O,S){for(var k=v(E),M=c(O,k),j=c(S===void 0?k:S,k),I=g(_(j-M,0)),N=0;M<j;M++,N++)h(I,N,E[M]);return I.length=N,I}},function(n,a,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,a,r){var s=r(16),c=r(34),v=r(71),h=r(73),g=r(30),_=r(180),E=r(101),O=r(102),S=r(78),k=r(57),M=r(42),j=r(28),I=r(80),N=r(142),B=h.PROPER,q=h.CONFIGURABLE,ee=N.IteratorPrototype,Y=N.BUGGY_SAFARI_ITERATORS,Q=j("iterator"),z="keys",D="values",V="entries",X=function(){return this};n.exports=function(H,de,Ce,Me,He,$e,ke){_(Ce,de,Me);var le,he,Se,Ke=function(me){if(me===He&&zt)return zt;if(!Y&&me in gt)return gt[me];switch(me){case z:case D:case V:return function(){return new Ce(this,me)}}return function(){return new Ce(this)}},Ge=de+" Iterator",et=!1,gt=H.prototype,dt=gt[Q]||gt["@@iterator"]||He&&gt[He],zt=!Y&&dt||Ke(He),je=de=="Array"&&gt.entries||dt;if(je&&(le=E(je.call(new H)))!==Object.prototype&&le.next&&(v||E(le)===ee||(O?O(le,ee):g(le[Q])||M(le,Q,X)),S(le,Ge,!0,!0),v&&(I[Ge]=X)),B&&He==D&&dt&&dt.name!==D&&(!v&&q?k(gt,"name",D):(et=!0,zt=function(){return c(dt,this)})),He)if(he={values:Ke(D),keys:$e?zt:Ke(z),entries:Ke(V)},ke)for(Se in he)(Y||et||!(Se in gt))&&M(gt,Se,he[Se]);else s({target:de,proto:!0,forced:Y||et},he);return v&&!ke||gt[Q]===zt||M(gt,Q,zt,{name:He}),I[de]=zt,he}},function(n,a,r){var s=r(7),c=r(64),v=r(34),h=r(32),g=r(88),_=r(145),E=r(45),O=r(54),S=r(146),k=r(118),M=r(147),j=s.TypeError,I=function(B,q){this.stopped=B,this.result=q},N=I.prototype;n.exports=function(B,q,ee){var Y,Q,z,D,V,X,H,de=ee&&ee.that,Ce=!(!ee||!ee.AS_ENTRIES),Me=!(!ee||!ee.IS_ITERATOR),He=!(!ee||!ee.INTERRUPTED),$e=c(q,de),ke=function(he){return Y&&M(Y,"normal",he),new I(!0,he)},le=function(he){return Ce?(h(he),He?$e(he[0],he[1],ke):$e(he[0],he[1])):He?$e(he,ke):$e(he)};if(Me)Y=B;else{if(!(Q=k(B)))throw j(g(B)+" is not iterable");if(_(Q)){for(z=0,D=E(B);D>z;z++)if((V=le(B[z]))&&O(N,V))return V;return new I(!1)}Y=S(B,Q)}for(X=Y.next;!(H=v(X,Y)).done;){try{V=le(H.value)}catch(he){M(Y,"throw",he)}if(typeof V=="object"&&V&&O(N,V))return V}return new I(!1)}},function(n,a,r){var s=r(97),c=r(62),v=r(80),h=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,h)||c(g,"@@iterator")||v[s(g)]}},function(n,a,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(h,g){if(c(g,h))return h;throw v("Incorrect invocation")}},function(n,a,r){var s=r(28)("iterator"),c=!1;try{var v=0,h={next:function(){return{done:!!v++}},return:function(){c=!0}};h[s]=function(){return this},Array.from(h,function(){throw 2})}catch{}n.exports=function(g,_){if(!_&&!c)return!1;var E=!1;try{var O={};O[s]=function(){return{next:function(){return{done:E=!0}}}},g(O)}catch{}return E}},function(n,a,r){var s=r(18);n.exports=function(c,v){var h=[][c];return!!h&&s(function(){h.call(null,v||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,a,r){r(19);var s=r(15),c=r(42),v=r(103),h=r(18),g=r(28),_=r(57),E=g("species"),O=RegExp.prototype;n.exports=function(S,k,M,j){var I=g(S),N=!h(function(){var Y={};return Y[I]=function(){return 7},""[S](Y)!=7}),B=N&&!h(function(){var Y=!1,Q=/a/;return S==="split"&&((Q={}).constructor={},Q.constructor[E]=function(){return Q},Q.flags="",Q[I]=/./[I]),Q.exec=function(){return Y=!0,null},Q[I](""),!Y});if(!N||!B||M){var q=s(/./[I]),ee=k(I,""[S],function(Y,Q,z,D,V){var X=s(Y),H=Q.exec;return H===v||H===O.exec?N&&!V?{done:!0,value:q(Q,z,D)}:{done:!0,value:X(z,Q,D)}:{done:!1}});c(String.prototype,S,ee[0]),c(O,I,ee[1])}j&&_(O[I],"sham",!0)}},function(n,a,r){var s=r(151).charAt;n.exports=function(c,v,h){return v+(h?s(c,v).length:1)}},function(n,a,r){var s=r(7),c=r(34),v=r(32),h=r(30),g=r(51),_=r(103),E=s.TypeError;n.exports=function(O,S){var k=O.exec;if(h(k)){var M=c(k,O,S);return M!==null&&v(M),M}if(g(O)==="RegExp")return c(_,O,S);throw E("RegExp#exec called on incompatible receiver")}},function(n,a,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(18),_=r(32),E=r(30),O=r(59),S=r(94),k=r(39),M=r(44),j=r(124),I=r(62),N=r(201),B=r(125),q=r(28)("replace"),ee=Math.max,Y=Math.min,Q=v([].concat),z=v([].push),D=v("".indexOf),V=v("".slice),X="a".replace(/./,"$0")==="$0",H=!!/./[q]&&/./[q]("a","$0")==="";h("replace",function(de,Ce,Me){var He=H?"$":"$0";return[function($e,ke){var le=M(this),he=$e==null?void 0:I($e,q);return he?c(he,$e,le,ke):c(Ce,k(le),$e,ke)},function($e,ke){var le=_(this),he=k($e);if(typeof ke=="string"&&D(ke,He)===-1&&D(ke,"$<")===-1){var Se=Me(Ce,le,he,ke);if(Se.done)return Se.value}var Ke=E(ke);Ke||(ke=k(ke));var Ge=le.global;if(Ge){var et=le.unicode;le.lastIndex=0}for(var gt=[];;){var dt=B(le,he);if(dt===null||(z(gt,dt),!Ge))break;k(dt[0])===""&&(le.lastIndex=j(he,S(le.lastIndex),et))}for(var zt,je="",me=0,xe=0;xe<gt.length;xe++){for(var vt=k((dt=gt[xe])[0]),Wt=ee(Y(O(dt.index),he.length),0),Ot=[],rn=1;rn<dt.length;rn++)z(Ot,(zt=dt[rn])===void 0?zt:String(zt));var vn=dt.groups;if(Ke){var An=Q([vt],Ot,Wt,he);vn!==void 0&&z(An,vn);var pn=k(s(ke,void 0,An))}else pn=N(vt,he,Wt,Ot,vn,ke);Wt>=me&&(je+=V(he,me,Wt)+pn,me=Wt+vt.length)}return je+V(he,me)}]},!!g(function(){var de=/./;return de.exec=function(){var Ce=[];return Ce.groups={a:"7"},Ce},"".replace(de,"$<a>")!=="7"})||!X||H)},function(n,a,r){var s=r(16),c=Math.hypot,v=Math.abs,h=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,_){for(var E,O,S=0,k=0,M=arguments.length,j=0;k<M;)j<(E=v(arguments[k++]))?(S=S*(O=j/E)*O+1,j=E):S+=E>0?(O=E/j)*O:E;return j===1/0?1/0:j*h(S)}})},function(n,a,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var h,g="Expected a function",_="__lodash_hash_undefined__",E="__lodash_placeholder__",O=16,S=32,k=64,M=128,j=256,I=1/0,N=9007199254740991,B=NaN,q=4294967295,ee=[["ary",M],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",S],["partialRight",k],["rearg",j]],Y="[object Arguments]",Q="[object Array]",z="[object Boolean]",D="[object Date]",V="[object Error]",X="[object Function]",H="[object GeneratorFunction]",de="[object Map]",Ce="[object Number]",Me="[object Object]",He="[object Promise]",$e="[object RegExp]",ke="[object Set]",le="[object String]",he="[object Symbol]",Se="[object WeakMap]",Ke="[object ArrayBuffer]",Ge="[object DataView]",et="[object Float32Array]",gt="[object Float64Array]",dt="[object Int8Array]",zt="[object Int16Array]",je="[object Int32Array]",me="[object Uint8Array]",xe="[object Uint8ClampedArray]",vt="[object Uint16Array]",Wt="[object Uint32Array]",Ot=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,vn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,An=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,ft=RegExp(An.source),En=RegExp(pn.source),Le=/<%-([\s\S]+?)%>/g,yn=/<%([\s\S]+?)%>/g,qn=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fn=/^\w*$/,wr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lr=/[\\^$.*+?()[\]{}|]/g,Kr=RegExp(Lr.source),jn=/^\s+/,Ao=/\s/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,it=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qt=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,Pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,qo=/^[-+]0x[0-9a-f]+$/i,li=/^0b[01]+$/i,Co=/^\[object .+?Constructor\]$/,Bo=/^0o[0-7]+$/i,On=/^(?:0|[1-9]\d*)$/,$n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,rr=/['\n\r\u2028\u2029\\]/g,zr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Tr="\\u2700-\\u27bf",Ka="a-z\\xdf-\\xf6\\xf8-\\xff",Ma="A-Z\\xc0-\\xd6\\xd8-\\xde",Za="\\ufe0e\\ufe0f",Gu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dd="['’]",Xs="[\\ud800-\\udfff]",ea="["+Gu+"]",Sl="["+zr+"]",Mn="\\d+",uf="[\\u2700-\\u27bf]",uo="["+Ka+"]",Ys="[^\\ud800-\\udfff"+Gu+Mn+Tr+Ka+Ma+"]",Ci="\\ud83c[\\udffb-\\udfff]",Wi="[^\\ud800-\\udfff]",ts="(?:\\ud83c[\\udde6-\\uddff]){2}",va="[\\ud800-\\udbff][\\udc00-\\udfff]",ta="["+Ma+"]",ya="(?:"+uo+"|"+Ys+")",qs="(?:"+ta+"|"+Ys+")",Ks="(?:['’](?:d|ll|m|re|s|t|ve))?",lf="(?:['’](?:D|LL|M|RE|S|T|VE))?",Al="(?:"+Sl+"|"+Ci+")?",sf="[\\ufe0e\\ufe0f]?",Zs=sf+Al+("(?:\\u200d(?:"+[Wi,ts,va].join("|")+")"+sf+Al+")*"),pd="(?:"+[uf,ts,va].join("|")+")"+Zs,mu="(?:"+[Wi+Sl+"?",Sl,ts,va,Xs].join("|")+")",cf=RegExp(dd,"g"),Ja=RegExp(Sl,"g"),Js=RegExp(Ci+"(?="+Ci+")|"+mu+Zs,"g"),ns=RegExp([ta+"?"+uo+"+"+Ks+"(?="+[ea,ta,"$"].join("|")+")",qs+"+"+lf+"(?="+[ea,ta+ya,"$"].join("|")+")",ta+"?"+ya+"+"+Ks,ta+"+"+lf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mn,pd].join("|"),"g"),Qs=RegExp("[\\u200d\\ud800-\\udfff"+zr+Za+"]"),ec=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ff=-1,Br={};Br[et]=Br[gt]=Br[dt]=Br[zt]=Br[je]=Br[me]=Br[xe]=Br[vt]=Br[Wt]=!0,Br[Y]=Br[Q]=Br[Ke]=Br[z]=Br[Ge]=Br[D]=Br[V]=Br[X]=Br[de]=Br[Ce]=Br[Me]=Br[$e]=Br[ke]=Br[le]=Br[Se]=!1;var Fr={};Fr[Y]=Fr[Q]=Fr[Ke]=Fr[Ge]=Fr[z]=Fr[D]=Fr[et]=Fr[gt]=Fr[dt]=Fr[zt]=Fr[je]=Fr[de]=Fr[Ce]=Fr[Me]=Fr[$e]=Fr[ke]=Fr[le]=Fr[he]=Fr[me]=Fr[xe]=Fr[vt]=Fr[Wt]=!0,Fr[V]=Fr[X]=Fr[Se]=!1;var df={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vu=parseFloat,na=parseInt,rs=typeof s=="object"&&s&&s.Object===Object&&s,pf=typeof self=="object"&&self&&self.Object===Object&&self,To=rs||pf||Function("return this")(),gu=a&&!a.nodeType&&a,_u=gu&&typeof c=="object"&&c&&!c.nodeType&&c,os=_u&&_u.exports===gu,Wu=os&&rs.process,si=function(){try{var lt=_u&&_u.require&&_u.require("util").types;return lt||Wu&&Wu.binding&&Wu.binding("util")}catch{}}(),tc=si&&si.isArrayBuffer,hf=si&&si.isDate,nc=si&&si.isMap,Ei=si&&si.isRegExp,Ko=si&&si.isSet,zi=si&&si.isTypedArray;function Zr(lt,jt,Ft){switch(Ft.length){case 0:return lt.call(jt);case 1:return lt.call(jt,Ft[0]);case 2:return lt.call(jt,Ft[0],Ft[1]);case 3:return lt.call(jt,Ft[0],Ft[1],Ft[2])}return lt.apply(jt,Ft)}function vf(lt,jt,Ft,fn){for(var ar=-1,xr=lt==null?0:lt.length;++ar<xr;){var oo=lt[ar];jt(fn,oo,Ft(oo),lt)}return fn}function Oi(lt,jt){for(var Ft=-1,fn=lt==null?0:lt.length;++Ft<fn&&jt(lt[Ft],Ft,lt)!==!1;);return lt}function rc(lt,jt){for(var Ft=lt==null?0:lt.length;Ft--&&jt(lt[Ft],Ft,lt)!==!1;);return lt}function yf(lt,jt){for(var Ft=-1,fn=lt==null?0:lt.length;++Ft<fn;)if(!jt(lt[Ft],Ft,lt))return!1;return!0}function xi(lt,jt){for(var Ft=-1,fn=lt==null?0:lt.length,ar=0,xr=[];++Ft<fn;){var oo=lt[Ft];jt(oo,Ft,lt)&&(xr[ar++]=oo)}return xr}function mi(lt,jt){return!!(lt!=null&&lt.length)&&zu(lt,jt,0)>-1}function oc(lt,jt,Ft){for(var fn=-1,ar=lt==null?0:lt.length;++fn<ar;)if(Ft(jt,lt[fn]))return!0;return!1}function Rr(lt,jt){for(var Ft=-1,fn=lt==null?0:lt.length,ar=Array(fn);++Ft<fn;)ar[Ft]=jt(lt[Ft],Ft,lt);return ar}function Zo(lt,jt){for(var Ft=-1,fn=jt.length,ar=lt.length;++Ft<fn;)lt[ar+Ft]=jt[Ft];return lt}function is(lt,jt,Ft,fn){var ar=-1,xr=lt==null?0:lt.length;for(fn&&xr&&(Ft=lt[++ar]);++ar<xr;)Ft=jt(Ft,lt[ar],ar,lt);return Ft}function mf(lt,jt,Ft,fn){var ar=lt==null?0:lt.length;for(fn&&ar&&(Ft=lt[--ar]);ar--;)Ft=jt(Ft,lt[ar],ar,lt);return Ft}function ic(lt,jt){for(var Ft=-1,fn=lt==null?0:lt.length;++Ft<fn;)if(jt(lt[Ft],Ft,lt))return!0;return!1}var as=Ai("length");function Pa(lt,jt,Ft){var fn;return Ft(lt,function(ar,xr,oo){if(jt(ar,xr,oo))return fn=xr,!1}),fn}function Si(lt,jt,Ft,fn){for(var ar=lt.length,xr=Ft+(fn?1:-1);fn?xr--:++xr<ar;)if(jt(lt[xr],xr,lt))return xr;return-1}function zu(lt,jt,Ft){return jt==jt?function(fn,ar,xr){for(var oo=xr-1,A=fn.length;++oo<A;)if(fn[oo]===ar)return oo;return-1}(lt,jt,Ft):Si(lt,ra,Ft)}function Di(lt,jt,Ft,fn){for(var ar=Ft-1,xr=lt.length;++ar<xr;)if(fn(lt[ar],jt))return ar;return-1}function ra(lt){return lt!=lt}function Or(lt,jt){var Ft=lt==null?0:lt.length;return Ft?Hu(lt,jt)/Ft:B}function Ai(lt){return function(jt){return jt==null?h:jt[lt]}}function ma(lt){return function(jt){return lt==null?h:lt[jt]}}function oi(lt,jt,Ft,fn,ar){return ar(lt,function(xr,oo,A){Ft=fn?(fn=!1,xr):jt(Ft,xr,oo,A)}),Ft}function Hu(lt,jt){for(var Ft,fn=-1,ar=lt.length;++fn<ar;){var xr=jt(lt[fn]);xr!==h&&(Ft=Ft===h?xr:Ft+xr)}return Ft}function bu(lt,jt){for(var Ft=-1,fn=Array(lt);++Ft<lt;)fn[Ft]=jt(Ft);return fn}function ga(lt){return lt&&lt.slice(0,Jo(lt)+1).replace(jn,"")}function ro(lt){return function(jt){return lt(jt)}}function Tl(lt,jt){return Rr(jt,function(Ft){return lt[Ft]})}function ka(lt,jt){return lt.has(jt)}function oa(lt,jt){for(var Ft=-1,fn=lt.length;++Ft<fn&&zu(jt,lt[Ft],0)>-1;);return Ft}function ac(lt,jt){for(var Ft=lt.length;Ft--&&zu(jt,lt[Ft],0)>-1;);return Ft}function vd(lt,jt){for(var Ft=lt.length,fn=0;Ft--;)lt[Ft]===jt&&++fn;return fn}var uc=ma({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Do=ma({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function wu(lt){return"\\"+df[lt]}function Na(lt){return Qs.test(lt)}function Uo(lt){var jt=-1,Ft=Array(lt.size);return lt.forEach(function(fn,ar){Ft[++jt]=[ar,fn]}),Ft}function lc(lt,jt){return function(Ft){return lt(jt(Ft))}}function Hi(lt,jt){for(var Ft=-1,fn=lt.length,ar=0,xr=[];++Ft<fn;){var oo=lt[Ft];oo!==jt&&oo!==E||(lt[Ft]=E,xr[ar++]=Ft)}return xr}function ia(lt){var jt=-1,Ft=Array(lt.size);return lt.forEach(function(fn){Ft[++jt]=fn}),Ft}function us(lt){var jt=-1,Ft=Array(lt.size);return lt.forEach(function(fn){Ft[++jt]=[fn,fn]}),Ft}function Ti(lt){return Na(lt)?function(jt){for(var Ft=Js.lastIndex=0;Js.test(jt);)++Ft;return Ft}(lt):as(lt)}function Ii(lt){return Na(lt)?function(jt){return jt.match(Js)||[]}(lt):function(jt){return jt.split("")}(lt)}function Jo(lt){for(var jt=lt.length;jt--&&Ao.test(lt.charAt(jt)););return jt}var Xi=ma({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gi=function lt(jt){var Ft,fn=(jt=jt==null?To:gi.defaults(To.Object(),jt,gi.pick(To,hd))).Array,ar=jt.Date,xr=jt.Error,oo=jt.Function,A=jt.Math,T=jt.Object,$=jt.RegExp,te=jt.String,ye=jt.TypeError,Ue=fn.prototype,yt=oo.prototype,Ht=T.prototype,gn=jt["__core-js_shared__"],hr=yt.toString,un=Ht.hasOwnProperty,$r=0,dr=(Ft=/[^.]+$/.exec(gn&&gn.keys&&gn.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",Pr=Ht.toString,Yi=hr.call(T),fo=To._,Li=$("^"+hr.call(un).replace(Lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qa=os?jt.Buffer:h,eu=jt.Symbol,Eu=jt.Uint8Array,Xu=Qa?Qa.allocUnsafe:h,Ra=lc(T.getPrototypeOf,T),Yu=T.create,Go=Ht.propertyIsEnumerable,Ou=Ue.splice,tu=eu?eu.isConcatSpreadable:h,ja=eu?eu.iterator:h,Ca=eu?eu.toStringTag:h,Ml=function(){try{var d=$a(T,"defineProperty");return d({},"",{}),d}catch{}}(),Op=jt.clearTimeout!==To.clearTimeout&&jt.clearTimeout,xp=ar&&ar.now!==To.Date.now&&ar.now,yd=jt.setTimeout!==To.setTimeout&&jt.setTimeout,sc=A.ceil,Pl=A.floor,gf=T.getOwnPropertySymbols,Sp=Qa?Qa.isBuffer:h,kl=jt.isFinite,cc=Ue.join,_f=lc(T.keys,T),Mo=A.max,Mi=A.min,bf=ar.now,wf=jt.parseInt,ls=A.random,nv=Ue.reverse,ss=$a(jt,"DataView"),nu=$a(jt,"Map"),fc=$a(jt,"Promise"),Nl=$a(jt,"Set"),qu=$a(jt,"WeakMap"),cs=$a(T,"create"),dc=qu&&new qu,Ku={},rv=ll(ss),pc=ll(nu),ov=ll(fc),iv=ll(Nl),Ap=ll(qu),Ef=eu?eu.prototype:h,_i=Ef?Ef.valueOf:h,Tp=Ef?Ef.toString:h;function re(d){if(bo(d)&&!vr(d)&&!(d instanceof Sr)){if(d instanceof _a)return d;if(un.call(d,"__wrapped__"))return Wf(d)}return new _a(d)}var Rl=function(){function d(){}return function(m){if(!Yr(m))return{};if(Yu)return Yu(m);d.prototype=m;var w=new d;return d.prototype=h,w}}();function xu(){}function _a(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=h}function Sr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function ci(d){var m=-1,w=d==null?0:d.length;for(this.clear();++m<w;){var R=d[m];this.set(R[0],R[1])}}function jr(d){var m=-1,w=d==null?0:d.length;for(this.clear();++m<w;){var R=d[m];this.set(R[0],R[1])}}function Da(d){var m=-1,w=d==null?0:d.length;for(this.clear();++m<w;){var R=d[m];this.set(R[0],R[1])}}function Su(d){var m=-1,w=d==null?0:d.length;for(this.__data__=new Da;++m<w;)this.add(d[m])}function aa(d){var m=this.__data__=new jr(d);this.size=m.size}function Of(d,m){var w=vr(d),R=!w&&cl(d),G=!w&&!R&&Sa(d),Z=!w&&!R&&!G&&Ze(d),fe=w||R||G||Z,be=fe?bu(d.length,te):[],Ie=be.length;for(var ht in d)!m&&!un.call(d,ht)||fe&&(ht=="length"||G&&(ht=="offset"||ht=="parent")||Z&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||Jr(ht,Ie))||be.push(ht);return be}function xf(d){var m=d.length;return m?d[Td(0,m-1)]:h}function md(d,m){return cu(ii(d),Zu(m,0,d.length))}function Mp(d){return cu(ii(d))}function Au(d,m,w){(w!==h&&!Zi(d[m],w)||w===h&&!(m in d))&&Ia(d,m,w)}function Po(d,m,w){var R=d[m];un.call(d,m)&&Zi(R,w)&&(w!==h||m in d)||Ia(d,m,w)}function fs(d,m){for(var w=d.length;w--;)if(Zi(d[w][0],m))return w;return-1}function gd(d,m,w,R){return lo(d,function(G,Z,fe){m(R,G,w(G),fe)}),R}function Tu(d,m){return d&&iu(m,Dt(m),d)}function Ia(d,m,w){m=="__proto__"&&Ml?Ml(d,m,{configurable:!0,enumerable:!0,value:w,writable:!0}):d[m]=w}function hc(d,m){for(var w=-1,R=m.length,G=fn(R),Z=d==null;++w<R;)G[w]=Z?h:Vt(d,m[w]);return G}function Zu(d,m,w){return d==d&&(w!==h&&(d=d<=w?d:w),m!==h&&(d=d>=m?d:m)),d}function ua(d,m,w,R,G,Z){var fe,be=1&m,Ie=2&m,ht=4&m;if(w&&(fe=G?w(d,R,G,Z):w(d)),fe!==h)return fe;if(!Yr(d))return d;var _t=vr(d);if(_t){if(fe=function(Mt){var Jt=Mt.length,cr=new Mt.constructor(Jt);return Jt&&typeof Mt[0]=="string"&&un.call(Mt,"index")&&(cr.index=Mt.index,cr.input=Mt.input),cr}(d),!be)return ii(d,fe)}else{var Ut=go(d),Sn=Ut==X||Ut==H;if(Sa(d))return Rd(d,be);if(Ut==Me||Ut==Y||Sn&&!G){if(fe=Ie||Sn?{}:il(d),!be)return Ie?function(Mt,Jt){return iu(Mt,_s(Mt),Jt)}(d,function(Mt,Jt){return Mt&&iu(Jt,Tt(Jt),Mt)}(fe,d)):function(Mt,Jt){return iu(Mt,gs(Mt),Jt)}(d,Tu(fe,d))}else{if(!Fr[Ut])return G?d:{};fe=function(Mt,Jt,cr){var mn=Mt.constructor;switch(Jt){case Ke:return Cl(Mt);case z:case D:return new mn(+Mt);case Ge:return function(nr,kr){var Bn=kr?Cl(nr.buffer):nr.buffer;return new nr.constructor(Bn,nr.byteOffset,nr.byteLength)}(Mt,cr);case et:case gt:case dt:case zt:case je:case me:case xe:case vt:case Wt:return io(Mt,cr);case de:return new mn;case Ce:case le:return new mn(Mt);case $e:return function(nr){var kr=new nr.constructor(nr.source,mr.exec(nr));return kr.lastIndex=nr.lastIndex,kr}(Mt);case ke:return new mn;case he:return or=Mt,_i?T(_i.call(or)):{}}var or}(d,Ut,be)}}Z||(Z=new aa);var wn=Z.get(d);if(wn)return wn;Z.set(d,fe),_e(d)?d.forEach(function(Mt){fe.add(ua(Mt,m,w,Mt,d,Z))}):fi(d)&&d.forEach(function(Mt,Jt){fe.set(Jt,ua(Mt,m,w,Jt,d,Z))});var Xn=_t?h:(ht?Ie?Uf:Ac:Ie?Tt:Dt)(d);return Oi(Xn||d,function(Mt,Jt){Xn&&(Mt=d[Jt=Mt]),Po(fe,Jt,ua(Mt,m,w,Jt,d,Z))}),fe}function _d(d,m,w){var R=w.length;if(d==null)return!R;for(d=T(d);R--;){var G=w[R],Z=m[G],fe=d[G];if(fe===h&&!(G in d)||!Z(fe))return!1}return!0}function bd(d,m,w){if(typeof d!="function")throw new ye(g);return Ll(function(){d.apply(h,w)},m)}function La(d,m,w,R){var G=-1,Z=mi,fe=!0,be=d.length,Ie=[],ht=m.length;if(!be)return Ie;w&&(m=Rr(m,ro(w))),R?(Z=oc,fe=!1):m.length>=200&&(Z=ka,fe=!1,m=new Su(m));e:for(;++G<be;){var _t=d[G],Ut=w==null?_t:w(_t);if(_t=R||_t!==0?_t:0,fe&&Ut==Ut){for(var Sn=ht;Sn--;)if(m[Sn]===Ut)continue e;Ie.push(_t)}else Z(m,Ut,R)||Ie.push(_t)}return Ie}re.templateSettings={escape:Le,evaluate:yn,interpolate:qn,variable:"",imports:{_:re}},re.prototype=xu.prototype,re.prototype.constructor=re,_a.prototype=Rl(xu.prototype),_a.prototype.constructor=_a,Sr.prototype=Rl(xu.prototype),Sr.prototype.constructor=Sr,ci.prototype.clear=function(){this.__data__=cs?cs(null):{},this.size=0},ci.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},ci.prototype.get=function(d){var m=this.__data__;if(cs){var w=m[d];return w===_?h:w}return un.call(m,d)?m[d]:h},ci.prototype.has=function(d){var m=this.__data__;return cs?m[d]!==h:un.call(m,d)},ci.prototype.set=function(d,m){var w=this.__data__;return this.size+=this.has(d)?0:1,w[d]=cs&&m===h?_:m,this},jr.prototype.clear=function(){this.__data__=[],this.size=0},jr.prototype.delete=function(d){var m=this.__data__,w=fs(m,d);return!(w<0)&&(w==m.length-1?m.pop():Ou.call(m,w,1),--this.size,!0)},jr.prototype.get=function(d){var m=this.__data__,w=fs(m,d);return w<0?h:m[w][1]},jr.prototype.has=function(d){return fs(this.__data__,d)>-1},jr.prototype.set=function(d,m){var w=this.__data__,R=fs(w,d);return R<0?(++this.size,w.push([d,m])):w[R][1]=m,this},Da.prototype.clear=function(){this.size=0,this.__data__={hash:new ci,map:new(nu||jr),string:new ci}},Da.prototype.delete=function(d){var m=ms(this,d).delete(d);return this.size-=m?1:0,m},Da.prototype.get=function(d){return ms(this,d).get(d)},Da.prototype.has=function(d){return ms(this,d).has(d)},Da.prototype.set=function(d,m){var w=ms(this,d),R=w.size;return w.set(d,m),this.size+=w.size==R?0:1,this},Su.prototype.add=Su.prototype.push=function(d){return this.__data__.set(d,_),this},Su.prototype.has=function(d){return this.__data__.has(d)},aa.prototype.clear=function(){this.__data__=new jr,this.size=0},aa.prototype.delete=function(d){var m=this.__data__,w=m.delete(d);return this.size=m.size,w},aa.prototype.get=function(d){return this.__data__.get(d)},aa.prototype.has=function(d){return this.__data__.has(d)},aa.prototype.set=function(d,m){var w=this.__data__;if(w instanceof jr){var R=w.__data__;if(!nu||R.length<199)return R.push([d,m]),this.size=++w.size,this;w=this.__data__=new Da(R)}return w.set(d,m),this.size=w.size,this};var lo=Dl(kn),Pp=Dl(to,!0);function wd(d,m){var w=!0;return lo(d,function(R,G,Z){return w=!!m(R,G,Z)}),w}function ko(d,m,w){for(var R=-1,G=d.length;++R<G;){var Z=d[R],fe=m(Z);if(fe!=null&&(be===h?fe==fe&&!pt(fe):w(fe,be)))var be=fe,Ie=Z}return Ie}function Ur(d,m){var w=[];return lo(d,function(R,G,Z){m(R,G,Z)&&w.push(R)}),w}function Vo(d,m,w,R,G){var Z=-1,fe=d.length;for(w||(w=Mc),G||(G=[]);++Z<fe;){var be=d[Z];m>0&&w(be)?m>1?Vo(be,m-1,w,R,G):Zo(G,be):R||(G[G.length]=be)}return G}var _r=Cf(),eo=Cf(!0);function kn(d,m){return d&&_r(d,m,Dt)}function to(d,m){return d&&eo(d,m,Dt)}function vc(d,m){return xi(m,function(w){return du(d[w])})}function ru(d,m){for(var w=0,R=(m=tl(m,d)).length;d!=null&&w<R;)d=d[Ga(m[w++])];return w&&w==R?d:h}function Sf(d,m,w){var R=m(d);return vr(d)?R:Zo(R,w(d))}function po(d){return d==null?d===h?"[object Undefined]":"[object Null]":Ca&&Ca in T(d)?function(m){var w=un.call(m,Ca),R=m[Ca];try{m[Ca]=h;var G=!0}catch{}var Z=Pr.call(m);return G&&(w?m[Ca]=R:delete m[Ca]),Z}(d):function(m){return Pr.call(m)}(d)}function mo(d,m){return d>m}function Ed(d,m){return d!=null&&un.call(d,m)}function Od(d,m){return d!=null&&m in T(d)}function yc(d,m,w){for(var R=w?oc:mi,G=d[0].length,Z=d.length,fe=Z,be=fn(Z),Ie=1/0,ht=[];fe--;){var _t=d[fe];fe&&m&&(_t=Rr(_t,ro(m))),Ie=Mi(_t.length,Ie),be[fe]=!w&&(m||G>=120&&_t.length>=120)?new Su(fe&&_t):h}_t=d[0];var Ut=-1,Sn=be[0];e:for(;++Ut<G&&ht.length<Ie;){var wn=_t[Ut],Xn=m?m(wn):wn;if(wn=w||wn!==0?wn:0,!(Sn?ka(Sn,Xn):R(ht,Xn,w))){for(fe=Z;--fe;){var Mt=be[fe];if(!(Mt?ka(Mt,Xn):R(d[fe],Xn,w)))continue e}Sn&&Sn.push(Xn),ht.push(wn)}}return ht}function Pi(d,m,w){var R=(d=ul(d,m=tl(m,d)))==null?d:d[Ga(ki(m))];return R==null?h:Zr(R,d,w)}function Af(d){return bo(d)&&po(d)==Y}function ds(d,m,w,R,G){return d===m||(d==null||m==null||!bo(d)&&!bo(m)?d!=d&&m!=m:function(Z,fe,be,Ie,ht,_t){var Ut=vr(Z),Sn=vr(fe),wn=Ut?Q:go(Z),Xn=Sn?Q:go(fe),Mt=(wn=wn==Y?Me:wn)==Me,Jt=(Xn=Xn==Y?Me:Xn)==Me,cr=wn==Xn;if(cr&&Sa(Z)){if(!Sa(fe))return!1;Ut=!0,Mt=!1}if(cr&&!Mt)return _t||(_t=new aa),Ut||Ze(Z)?Bf(Z,fe,be,Ie,ht,_t):function(Bn,Qn,Lo,ot,Lu,di,fl){switch(Lo){case Ge:if(Bn.byteLength!=Qn.byteLength||Bn.byteOffset!=Qn.byteOffset)return!1;Bn=Bn.buffer,Qn=Qn.buffer;case Ke:return!(Bn.byteLength!=Qn.byteLength||!di(new Eu(Bn),new Eu(Qn)));case z:case D:case Ce:return Zi(+Bn,+Qn);case V:return Bn.name==Qn.name&&Bn.message==Qn.message;case $e:case le:return Bn==Qn+"";case de:var Vl=Uo;case ke:var Yf=1&ot;if(Vl||(Vl=ia),Bn.size!=Qn.size&&!Yf)return!1;var Xd=fl.get(Bn);if(Xd)return Xd==Qn;ot|=2,fl.set(Bn,Qn);var $c=Bf(Vl(Bn),Vl(Qn),ot,Lu,di,fl);return fl.delete(Bn),$c;case he:if(_i)return _i.call(Bn)==_i.call(Qn)}return!1}(Z,fe,wn,be,Ie,ht,_t);if(!(1&be)){var mn=Mt&&un.call(Z,"__wrapped__"),or=Jt&&un.call(fe,"__wrapped__");if(mn||or){var nr=mn?Z.value():Z,kr=or?fe.value():fe;return _t||(_t=new aa),ht(nr,kr,be,Ie,_t)}}return cr?(_t||(_t=new aa),function(Bn,Qn,Lo,ot,Lu,di){var fl=1&Lo,Vl=Ac(Bn),Yf=Vl.length,Xd=Ac(Qn).length;if(Yf!=Xd&&!fl)return!1;for(var $c=Yf;$c--;){var Ms=Vl[$c];if(!(fl?Ms in Qn:un.call(Qn,Ms)))return!1}var fv=di.get(Bn),dv=di.get(Qn);if(fv&&dv)return fv==Qn&&dv==Bn;var Yd=!0;di.set(Bn,Qn),di.set(Qn,Bn);for(var qp=fl;++$c<Yf;){var Ps=Bn[Ms=Vl[$c]],qd=Qn[Ms];if(ot)var pv=fl?ot(qd,Ps,Ms,Qn,Bn,di):ot(Ps,qd,Ms,Bn,Qn,di);if(!(pv===h?Ps===qd||Lu(Ps,qd,Lo,ot,di):pv)){Yd=!1;break}qp||(qp=Ms=="constructor")}if(Yd&&!qp){var ks=Bn.constructor,Kd=Qn.constructor;ks==Kd||!("constructor"in Bn)||!("constructor"in Qn)||typeof ks=="function"&&ks instanceof ks&&typeof Kd=="function"&&Kd instanceof Kd||(Yd=!1)}return di.delete(Bn),di.delete(Qn),Yd}(Z,fe,be,Ie,ht,_t)):!1}(d,m,w,R,ds,G))}function ba(d,m,w,R){var G=w.length,Z=G,fe=!R;if(d==null)return!Z;for(d=T(d);G--;){var be=w[G];if(fe&&be[2]?be[1]!==d[be[0]]:!(be[0]in d))return!1}for(;++G<Z;){var Ie=(be=w[G])[0],ht=d[Ie],_t=be[1];if(fe&&be[2]){if(ht===h&&!(Ie in d))return!1}else{var Ut=new aa;if(R)var Sn=R(ht,_t,Ie,d,m,Ut);if(!(Sn===h?ds(_t,ht,3,R,Ut):Sn))return!1}}return!0}function Ju(d){return!(!Yr(d)||(m=d,dr&&dr in m))&&(du(d)?Li:Co).test(ll(d));var m}function Mu(d){return typeof d=="function"?d:d==null?Wn:typeof d=="object"?vr(d)?Sd(d[0],d[1]):xd(d):ae(d)}function wa(d){if(!al(d))return _f(d);var m=[];for(var w in T(d))un.call(d,w)&&w!="constructor"&&m.push(w);return m}function kp(d){if(!Yr(d))return function(G){var Z=[];if(G!=null)for(var fe in T(G))Z.push(fe);return Z}(d);var m=al(d),w=[];for(var R in d)(R!="constructor"||!m&&un.call(d,R))&&w.push(R);return w}function ou(d,m){return d<m}function la(d,m){var w=-1,R=Ji(d)?fn(d.length):[];return lo(d,function(G,Z,fe){R[++w]=m(G,Z,fe)}),R}function xd(d){var m=Tc(d);return m.length==1&&m[0][2]?ws(m[0][0],m[0][1]):function(w){return w===d||ba(w,d,m)}}function Sd(d,m){return Ru(d)&&su(m)?ws(Ga(d),m):function(w){var R=Vt(w,d);return R===h&&R===m?wt(w,d):ds(m,R,3)}}function Tf(d,m,w,R,G){d!==m&&_r(m,function(Z,fe){if(G||(G=new aa),Yr(Z))(function(Ie,ht,_t,Ut,Sn,wn,Xn){var Mt=Nt(Ie,_t),Jt=Nt(ht,_t),cr=Xn.get(Jt);if(cr)return void Au(Ie,_t,cr);var mn=wn?wn(Mt,Jt,_t+"",Ie,ht,Xn):h,or=mn===h;if(or){var nr=vr(Jt),kr=!nr&&Sa(Jt),Bn=!nr&&!kr&&Ze(Jt);mn=Jt,nr||kr||Bn?vr(Mt)?mn=Mt:Ho(Mt)?mn=ii(Mt):kr?(or=!1,mn=Rd(Jt,!0)):Bn?(or=!1,mn=io(Jt,!0)):mn=[]:L(Jt)||cl(Jt)?(mn=Mt,cl(Mt)?mn=kt(Mt):Yr(Mt)&&!du(Mt)||(mn=il(Jt))):or=!1}or&&(Xn.set(Jt,mn),Sn(mn,Jt,Ut,wn,Xn),Xn.delete(Jt)),Au(Ie,_t,mn)})(d,m,fe,w,Tf,R,G);else{var be=R?R(Nt(d,fe),Z,fe+"",d,m,G):h;be===h&&(be=Z),Au(d,fe,be)}},Tt)}function Np(d,m){var w=d.length;if(w)return Jr(m+=m<0?w:0,w)?d[m]:h}function Rp(d,m,w){m=m.length?Rr(m,function(Z){return vr(Z)?function(fe){return ru(fe,Z.length===1?Z[0]:Z)}:Z}):[Wn];var R=-1;m=Rr(m,ro(Zn()));var G=la(d,function(Z,fe,be){var Ie=Rr(m,function(ht){return ht(Z)});return{criteria:Ie,index:++R,value:Z}});return function(Z,fe){var be=Z.length;for(Z.sort(fe);be--;)Z[be]=Z[be].value;return Z}(G,function(Z,fe){return function(be,Ie,ht){for(var _t=-1,Ut=be.criteria,Sn=Ie.criteria,wn=Ut.length,Xn=ht.length;++_t<wn;){var Mt=wc(Ut[_t],Sn[_t]);if(Mt)return _t>=Xn?Mt:Mt*(ht[_t]=="desc"?-1:1)}return be.index-Ie.index}(Z,fe,w)})}function jp(d,m,w){for(var R=-1,G=m.length,Z={};++R<G;){var fe=m[R],be=ru(d,fe);w(be,fe)&&Qu(Z,tl(fe,d),be)}return Z}function Ad(d,m,w,R){var G=R?Di:zu,Z=-1,fe=m.length,be=d;for(d===m&&(m=ii(m)),w&&(be=Rr(d,ro(w)));++Z<fe;)for(var Ie=0,ht=m[Z],_t=w?w(ht):ht;(Ie=G(be,_t,Ie,R))>-1;)be!==d&&Ou.call(be,Ie,1),Ou.call(d,Ie,1);return d}function ps(d,m){for(var w=d?m.length:0,R=w-1;w--;){var G=m[w];if(w==R||G!==Z){var Z=G;Jr(G)?Ou.call(d,G,1):kf(d,G)}}return d}function Td(d,m){return d+Pl(ls()*(m-d+1))}function mc(d,m){var w="";if(!d||m<1||m>N)return w;do m%2&&(w+=d),(m=Pl(m/2))&&(d+=d);while(m);return w}function br(d,m){return kc(Pc(d,m,Wn),d+"")}function av(d){return xf(yr(d))}function Md(d,m){var w=yr(d);return cu(w,Zu(m,0,w.length))}function Qu(d,m,w,R){if(!Yr(d))return d;for(var G=-1,Z=(m=tl(m,d)).length,fe=Z-1,be=d;be!=null&&++G<Z;){var Ie=Ga(m[G]),ht=w;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return d;if(G!=fe){var _t=be[Ie];(ht=R?R(_t,Ie,be):h)===h&&(ht=Yr(_t)?_t:Jr(m[G+1])?[]:{})}Po(be,Ie,ht),be=be[Ie]}return d}var gc=dc?function(d,m){return dc.set(d,m),d}:Wn,uv=Ml?function(d,m){return Ml(d,"toString",{configurable:!0,enumerable:!1,value:Ar(m),writable:!0})}:Wn;function lv(d){return cu(yr(d))}function Ea(d,m,w){var R=-1,G=d.length;m<0&&(m=-m>G?0:G+m),(w=w>G?G:w)<0&&(w+=G),G=m>w?0:w-m>>>0,m>>>=0;for(var Z=fn(G);++R<G;)Z[R]=d[R+m];return Z}function Pd(d,m){var w;return lo(d,function(R,G,Z){return!(w=m(R,G,Z))}),!!w}function Mf(d,m,w){var R=0,G=d==null?R:d.length;if(typeof m=="number"&&m==m&&G<=2147483647){for(;R<G;){var Z=R+G>>>1,fe=d[Z];fe!==null&&!pt(fe)&&(w?fe<=m:fe<m)?R=Z+1:G=Z}return G}return Pf(d,m,Wn,w)}function Pf(d,m,w,R){var G=0,Z=d==null?0:d.length;if(Z===0)return 0;for(var fe=(m=w(m))!=m,be=m===null,Ie=pt(m),ht=m===h;G<Z;){var _t=Pl((G+Z)/2),Ut=w(d[_t]),Sn=Ut!==h,wn=Ut===null,Xn=Ut==Ut,Mt=pt(Ut);if(fe)var Jt=R||Xn;else Jt=ht?Xn&&(R||Sn):be?Xn&&Sn&&(R||!wn):Ie?Xn&&Sn&&!wn&&(R||!Mt):!wn&&!Mt&&(R?Ut<=m:Ut<m);Jt?G=_t+1:Z=_t}return Mi(Z,4294967294)}function Cp(d,m){for(var w=-1,R=d.length,G=0,Z=[];++w<R;){var fe=d[w],be=m?m(fe):fe;if(!w||!Zi(be,Ie)){var Ie=be;Z[G++]=fe===0?0:fe}}return Z}function kd(d){return typeof d=="number"?d:pt(d)?B:+d}function qi(d){if(typeof d=="string")return d;if(vr(d))return Rr(d,qi)+"";if(pt(d))return Tp?Tp.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function el(d,m,w){var R=-1,G=mi,Z=d.length,fe=!0,be=[],Ie=be;if(w)fe=!1,G=oc;else if(Z>=200){var ht=m?null:Ff(d);if(ht)return ia(ht);fe=!1,G=ka,Ie=new Su}else Ie=m?[]:be;e:for(;++R<Z;){var _t=d[R],Ut=m?m(_t):_t;if(_t=w||_t!==0?_t:0,fe&&Ut==Ut){for(var Sn=Ie.length;Sn--;)if(Ie[Sn]===Ut)continue e;m&&Ie.push(Ut),be.push(_t)}else G(Ie,Ut,w)||(Ie!==be&&Ie.push(Ut),be.push(_t))}return be}function kf(d,m){return(d=ul(d,m=tl(m,d)))==null||delete d[Ga(ki(m))]}function jl(d,m,w,R){return Qu(d,m,w(ru(d,m)),R)}function _c(d,m,w,R){for(var G=d.length,Z=R?G:-1;(R?Z--:++Z<G)&&m(d[Z],Z,d););return w?Ea(d,R?0:Z,R?Z+1:G):Ea(d,R?Z+1:0,R?G:Z)}function Dp(d,m){var w=d;return w instanceof Sr&&(w=w.value()),is(m,function(R,G){return G.func.apply(G.thisArg,Zo([R],G.args))},w)}function bc(d,m,w){var R=d.length;if(R<2)return R?el(d[0]):[];for(var G=-1,Z=fn(R);++G<R;)for(var fe=d[G],be=-1;++be<R;)be!=G&&(Z[G]=La(Z[G]||fe,d[be],m,w));return el(Vo(Z,1),m,w)}function Nf(d,m,w){for(var R=-1,G=d.length,Z=m.length,fe={};++R<G;){var be=R<Z?m[R]:h;w(fe,d[R],be)}return fe}function Rf(d){return Ho(d)?d:[]}function jf(d){return typeof d=="function"?d:Wn}function tl(d,m){return vr(d)?d:Ru(d,m)?[d]:$d(bt(d))}var Ip=br;function nl(d,m,w){var R=d.length;return w=w===h?R:w,!m&&w>=R?d:Ea(d,m,w)}var Nd=Op||function(d){return To.clearTimeout(d)};function Rd(d,m){if(m)return d.slice();var w=d.length,R=Xu?Xu(w):new d.constructor(w);return d.copy(R),R}function Cl(d){var m=new d.constructor(d.byteLength);return new Eu(m).set(new Eu(d)),m}function io(d,m){var w=m?Cl(d.buffer):d.buffer;return new d.constructor(w,d.byteOffset,d.length)}function wc(d,m){if(d!==m){var w=d!==h,R=d===null,G=d==d,Z=pt(d),fe=m!==h,be=m===null,Ie=m==m,ht=pt(m);if(!be&&!ht&&!Z&&d>m||Z&&fe&&Ie&&!be&&!ht||R&&fe&&Ie||!w&&Ie||!G)return 1;if(!R&&!Z&&!ht&&d<m||ht&&w&&G&&!R&&!Z||be&&w&&G||!fe&&G||!Ie)return-1}return 0}function ho(d,m,w,R){for(var G=-1,Z=d.length,fe=w.length,be=-1,Ie=m.length,ht=Mo(Z-fe,0),_t=fn(Ie+ht),Ut=!R;++be<Ie;)_t[be]=m[be];for(;++G<fe;)(Ut||G<Z)&&(_t[w[G]]=d[G]);for(;ht--;)_t[be++]=d[G++];return _t}function Pu(d,m,w,R){for(var G=-1,Z=d.length,fe=-1,be=w.length,Ie=-1,ht=m.length,_t=Mo(Z-be,0),Ut=fn(_t+ht),Sn=!R;++G<_t;)Ut[G]=d[G];for(var wn=G;++Ie<ht;)Ut[wn+Ie]=m[Ie];for(;++fe<be;)(Sn||G<Z)&&(Ut[wn+w[fe]]=d[G++]);return Ut}function ii(d,m){var w=-1,R=d.length;for(m||(m=fn(R));++w<R;)m[w]=d[w];return m}function iu(d,m,w,R){var G=!w;w||(w={});for(var Z=-1,fe=m.length;++Z<fe;){var be=m[Z],Ie=R?R(w[be],d[be],be,w,d):h;Ie===h&&(Ie=d[be]),G?Ia(w,be,Ie):Po(w,be,Ie)}return w}function ku(d,m){return function(w,R){var G=vr(w)?vf:gd,Z=m?m():{};return G(w,d,Zn(R,2),Z)}}function rl(d){return br(function(m,w){var R=-1,G=w.length,Z=G>1?w[G-1]:h,fe=G>2?w[2]:h;for(Z=d.length>3&&typeof Z=="function"?(G--,Z):h,fe&&No(w[0],w[1],fe)&&(Z=G<3?h:Z,G=1),m=T(m);++R<G;){var be=w[R];be&&d(m,be,R,Z)}return m})}function Dl(d,m){return function(w,R){if(w==null)return w;if(!Ji(w))return d(w,R);for(var G=w.length,Z=m?G:-1,fe=T(w);(m?Z--:++Z<G)&&R(fe[Z],Z,fe)!==!1;);return w}}function Cf(d){return function(m,w,R){for(var G=-1,Z=T(m),fe=R(m),be=fe.length;be--;){var Ie=fe[d?be:++G];if(w(Z[Ie],Ie,Z)===!1)break}return m}}function Df(d){return function(m){var w=Na(m=bt(m))?Ii(m):h,R=w?w[0]:m.charAt(0),G=w?nl(w,1).join(""):m.slice(1);return R[d]()+G}}function au(d){return function(m){return is(yo(lr(m).replace(cf,"")),d,"")}}function Il(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var w=Rl(d.prototype),R=d.apply(w,m);return Yr(R)?R:w}}function If(d){return function(m,w,R){var G=T(m);if(!Ji(m)){var Z=Zn(w,3);m=Dt(m),w=function(be){return Z(G[be],be,G)}}var fe=d(m,w,R);return fe>-1?G[Z?m[fe]:fe]:h}}function Ec(d){return lu(function(m){var w=m.length,R=w,G=_a.prototype.thru;for(d&&m.reverse();R--;){var Z=m[R];if(typeof Z!="function")throw new ye(g);if(G&&!fe&&ys(Z)=="wrapper")var fe=new _a([],!0)}for(R=fe?R:w;++R<w;){var be=ys(Z=m[R]),Ie=be=="wrapper"?Gf(Z):h;fe=Ie&&Ba(Ie[0])&&Ie[1]==424&&!Ie[4].length&&Ie[9]==1?fe[ys(Ie[0])].apply(fe,Ie[3]):Z.length==1&&Ba(Z)?fe[be]():fe.thru(Z)}return function(){var ht=arguments,_t=ht[0];if(fe&&ht.length==1&&vr(_t))return fe.plant(_t).value();for(var Ut=0,Sn=w?m[Ut].apply(this,ht):_t;++Ut<w;)Sn=m[Ut].call(this,Sn);return Sn}})}function ol(d,m,w,R,G,Z,fe,be,Ie,ht){var _t=m&M,Ut=1&m,Sn=2&m,wn=24&m,Xn=512&m,Mt=Sn?h:Il(d);return function Jt(){for(var cr=arguments.length,mn=fn(cr),or=cr;or--;)mn[or]=arguments[or];if(wn)var nr=Nu(Jt),kr=vd(mn,nr);if(R&&(mn=ho(mn,R,G,wn)),Z&&(mn=Pu(mn,Z,fe,wn)),cr-=kr,wn&&cr<ht){var Bn=Hi(mn,nr);return xc(d,m,ol,Jt.placeholder,w,mn,Bn,be,Ie,ht-cr)}var Qn=Ut?w:this,Lo=Sn?Qn[d]:d;return cr=mn.length,be?mn=Es(mn,be):Xn&&cr>1&&mn.reverse(),_t&&Ie<cr&&(mn.length=Ie),this&&this!==To&&this instanceof Jt&&(Lo=Mt||Il(Lo)),Lo.apply(Qn,mn)}}function jd(d,m){return function(w,R){return function(G,Z,fe,be){return kn(G,function(Ie,ht,_t){Z(be,fe(Ie),ht,_t)}),be}(w,d,m(R),{})}}function hs(d,m){return function(w,R){var G;if(w===h&&R===h)return m;if(w!==h&&(G=w),R!==h){if(G===h)return R;typeof w=="string"||typeof R=="string"?(w=qi(w),R=qi(R)):(w=kd(w),R=kd(R)),G=d(w,R)}return G}}function Lf(d){return lu(function(m){return m=Rr(m,ro(Zn())),br(function(w){var R=this;return d(m,function(G){return Zr(G,R,w)})})})}function Oc(d,m){var w=(m=m===h?" ":qi(m)).length;if(w<2)return w?mc(m,d):m;var R=mc(m,sc(d/Ti(m)));return Na(m)?nl(Ii(R),0,d).join(""):R.slice(0,d)}function uu(d){return function(m,w,R){return R&&typeof R!="number"&&No(m,w,R)&&(w=R=h),m=Rt(m),w===h?(w=m,m=0):w=Rt(w),function(G,Z,fe,be){for(var Ie=-1,ht=Mo(sc((Z-G)/(fe||1)),0),_t=fn(ht);ht--;)_t[be?ht:++Ie]=G,G+=fe;return _t}(m,w,R=R===h?m<w?1:-1:Rt(R),d)}}function vs(d){return function(m,w){return typeof m=="string"&&typeof w=="string"||(m=Bt(m),w=Bt(w)),d(m,w)}}function xc(d,m,w,R,G,Z,fe,be,Ie,ht){var _t=8&m;m|=_t?S:k,4&(m&=~(_t?k:S))||(m&=-4);var Ut=[d,m,G,_t?Z:h,_t?fe:h,_t?h:Z,_t?h:fe,be,Ie,ht],Sn=w.apply(h,Ut);return Ba(d)&&Ld(Sn,Ut),Sn.placeholder=R,Vf(Sn,d,m)}function Sc(d){var m=A[d];return function(w,R){if(w=Bt(w),(R=R==null?0:Mi(ct(R),292))&&kl(w)){var G=(bt(w)+"e").split("e");return+((G=(bt(m(G[0]+"e"+(+G[1]+R)))+"e").split("e"))[0]+"e"+(+G[1]-R))}return m(w)}}var Ff=Nl&&1/ia(new Nl([,-0]))[1]==I?function(d){return new Nl(d)}:nt;function $f(d){return function(m){var w=go(m);return w==de?Uo(m):w==ke?us(m):function(R,G){return Rr(G,function(Z){return[Z,R[Z]]})}(m,d(m))}}function Fa(d,m,w,R,G,Z,fe,be){var Ie=2&m;if(!Ie&&typeof d!="function")throw new ye(g);var ht=R?R.length:0;if(ht||(m&=-97,R=G=h),fe=fe===h?fe:Mo(ct(fe),0),be=be===h?be:ct(be),ht-=G?G.length:0,m&k){var _t=R,Ut=G;R=G=h}var Sn=Ie?h:Gf(d),wn=[d,m,w,R,G,_t,Ut,Z,fe,be];if(Sn&&function(Mt,Jt){var cr=Mt[1],mn=Jt[1],or=cr|mn,nr=or<131,kr=mn==M&&cr==8||mn==M&&cr==j&&Mt[7].length<=Jt[8]||mn==384&&Jt[7].length<=Jt[8]&&cr==8;if(!nr&&!kr)return Mt;1&mn&&(Mt[2]=Jt[2],or|=1&cr?0:4);var Bn=Jt[3];if(Bn){var Qn=Mt[3];Mt[3]=Qn?ho(Qn,Bn,Jt[4]):Bn,Mt[4]=Qn?Hi(Mt[3],E):Jt[4]}(Bn=Jt[5])&&(Qn=Mt[5],Mt[5]=Qn?Pu(Qn,Bn,Jt[6]):Bn,Mt[6]=Qn?Hi(Mt[5],E):Jt[6]),(Bn=Jt[7])&&(Mt[7]=Bn),mn&M&&(Mt[8]=Mt[8]==null?Jt[8]:Mi(Mt[8],Jt[8])),Mt[9]==null&&(Mt[9]=Jt[9]),Mt[0]=Jt[0],Mt[1]=or}(wn,Sn),d=wn[0],m=wn[1],w=wn[2],R=wn[3],G=wn[4],!(be=wn[9]=wn[9]===h?Ie?0:d.length:Mo(wn[9]-ht,0))&&24&m&&(m&=-25),m&&m!=1)Xn=m==8||m==O?function(Mt,Jt,cr){var mn=Il(Mt);return function or(){for(var nr=arguments.length,kr=fn(nr),Bn=nr,Qn=Nu(or);Bn--;)kr[Bn]=arguments[Bn];var Lo=nr<3&&kr[0]!==Qn&&kr[nr-1]!==Qn?[]:Hi(kr,Qn);return(nr-=Lo.length)<cr?xc(Mt,Jt,ol,or.placeholder,h,kr,Lo,h,h,cr-nr):Zr(this&&this!==To&&this instanceof or?mn:Mt,this,kr)}}(d,m,be):m!=S&&m!=33||G.length?ol.apply(h,wn):function(Mt,Jt,cr,mn){var or=1&Jt,nr=Il(Mt);return function kr(){for(var Bn=-1,Qn=arguments.length,Lo=-1,ot=mn.length,Lu=fn(ot+Qn),di=this&&this!==To&&this instanceof kr?nr:Mt;++Lo<ot;)Lu[Lo]=mn[Lo];for(;Qn--;)Lu[Lo++]=arguments[++Bn];return Zr(di,or?cr:this,Lu)}}(d,m,w,R);else var Xn=function(Mt,Jt,cr){var mn=1&Jt,or=Il(Mt);return function nr(){return(this&&this!==To&&this instanceof nr?or:Mt).apply(mn?cr:this,arguments)}}(d,m,w);return Vf((Sn?gc:Ld)(Xn,wn),d,m)}function Cd(d,m,w,R){return d===h||Zi(d,Ht[w])&&!un.call(R,w)?m:d}function Dd(d,m,w,R,G,Z){return Yr(d)&&Yr(m)&&(Z.set(m,d),Tf(d,m,h,Dd,Z),Z.delete(m)),d}function Id(d){return L(d)?h:d}function Bf(d,m,w,R,G,Z){var fe=1&w,be=d.length,Ie=m.length;if(be!=Ie&&!(fe&&Ie>be))return!1;var ht=Z.get(d),_t=Z.get(m);if(ht&&_t)return ht==m&&_t==d;var Ut=-1,Sn=!0,wn=2&w?new Su:h;for(Z.set(d,m),Z.set(m,d);++Ut<be;){var Xn=d[Ut],Mt=m[Ut];if(R)var Jt=fe?R(Mt,Xn,Ut,m,d,Z):R(Xn,Mt,Ut,d,m,Z);if(Jt!==h){if(Jt)continue;Sn=!1;break}if(wn){if(!ic(m,function(cr,mn){if(!ka(wn,mn)&&(Xn===cr||G(Xn,cr,w,R,Z)))return wn.push(mn)})){Sn=!1;break}}else if(Xn!==Mt&&!G(Xn,Mt,w,R,Z)){Sn=!1;break}}return Z.delete(d),Z.delete(m),Sn}function lu(d){return kc(Pc(d,h,Gd),d+"")}function Ac(d){return Sf(d,Dt,gs)}function Uf(d){return Sf(d,Tt,_s)}var Gf=dc?function(d){return dc.get(d)}:nt;function ys(d){for(var m=d.name+"",w=Ku[m],R=un.call(Ku,m)?w.length:0;R--;){var G=w[R],Z=G.func;if(Z==null||Z==d)return G.name}return m}function Nu(d){return(un.call(re,"placeholder")?re:d).placeholder}function Zn(){var d=re.iteratee||no;return d=d===no?Mu:d,arguments.length?d(arguments[0],arguments[1]):d}function ms(d,m){var w,R,G=d.__data__;return((R=typeof(w=m))=="string"||R=="number"||R=="symbol"||R=="boolean"?w!=="__proto__":w===null)?G[typeof m=="string"?"string":"hash"]:G.map}function Tc(d){for(var m=Dt(d),w=m.length;w--;){var R=m[w],G=d[R];m[w]=[R,G,su(G)]}return m}function $a(d,m){var w=function(R,G){return R==null?h:R[G]}(d,m);return Ju(w)?w:h}var gs=gf?function(d){return d==null?[]:(d=T(d),xi(gf(d),function(m){return Go.call(d,m)}))}:Be,_s=gf?function(d){for(var m=[];d;)Zo(m,gs(d)),d=Ra(d);return m}:Be,go=po;function bs(d,m,w){for(var R=-1,G=(m=tl(m,d)).length,Z=!1;++R<G;){var fe=Ga(m[R]);if(!(Z=d!=null&&w(d,fe)))break;d=d[fe]}return Z||++R!=G?Z:!!(G=d==null?0:d.length)&&Du(G)&&Jr(fe,G)&&(vr(d)||cl(d))}function il(d){return typeof d.constructor!="function"||al(d)?{}:Rl(Ra(d))}function Mc(d){return vr(d)||cl(d)||!!(tu&&d&&d[tu])}function Jr(d,m){var w=typeof d;return!!(m=m??N)&&(w=="number"||w!="symbol"&&On.test(d))&&d>-1&&d%1==0&&d<m}function No(d,m,w){if(!Yr(w))return!1;var R=typeof m;return!!(R=="number"?Ji(w)&&Jr(m,w.length):R=="string"&&m in w)&&Zi(w[m],d)}function Ru(d,m){if(vr(d))return!1;var w=typeof d;return!(w!="number"&&w!="symbol"&&w!="boolean"&&d!=null&&!pt(d))||Fn.test(d)||!ne.test(d)||m!=null&&d in T(m)}function Ba(d){var m=ys(d),w=re[m];if(typeof w!="function"||!(m in Sr.prototype))return!1;if(d===w)return!0;var R=Gf(w);return!!R&&d===R[0]}(ss&&go(new ss(new ArrayBuffer(1)))!=Ge||nu&&go(new nu)!=de||fc&&go(fc.resolve())!=He||Nl&&go(new Nl)!=ke||qu&&go(new qu)!=Se)&&(go=function(d){var m=po(d),w=m==Me?d.constructor:h,R=w?ll(w):"";if(R)switch(R){case rv:return Ge;case pc:return de;case ov:return He;case iv:return ke;case Ap:return Se}return m});var Ua=gn?du:ze;function al(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function su(d){return d==d&&!Yr(d)}function ws(d,m){return function(w){return w!=null&&w[d]===m&&(m!==h||d in T(w))}}function Pc(d,m,w){return m=Mo(m===h?d.length-1:m,0),function(){for(var R=arguments,G=-1,Z=Mo(R.length-m,0),fe=fn(Z);++G<Z;)fe[G]=R[m+G];G=-1;for(var be=fn(m+1);++G<m;)be[G]=R[G];return be[m]=w(fe),Zr(d,this,be)}}function ul(d,m){return m.length<2?d:ru(d,Ea(m,0,-1))}function Es(d,m){for(var w=d.length,R=Mi(m.length,w),G=ii(d);R--;){var Z=m[R];d[R]=Jr(Z,w)?G[Z]:h}return d}function Nt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var Ld=Fd(gc),Ll=yd||function(d,m){return To.setTimeout(d,m)},kc=Fd(uv);function Vf(d,m,w){var R=m+"";return kc(d,function(G,Z){var fe=Z.length;if(!fe)return G;var be=fe-1;return Z[be]=(fe>1?"& ":"")+Z[be],Z=Z.join(fe>2?", ":" "),G.replace(Ee,`{
/* [wrapped with `+Z+`] */
`)}(R,function(G,Z){return Oi(ee,function(fe){var be="_."+fe[0];Z&fe[1]&&!mi(G,be)&&G.push(be)}),G.sort()}(function(G){var Z=G.match(Xe);return Z?Z[1].split(Re):[]}(R),w)))}function Fd(d){var m=0,w=0;return function(){var R=bf(),G=16-(R-w);if(w=R,G>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(h,arguments)}}function cu(d,m){var w=-1,R=d.length,G=R-1;for(m=m===h?R:m;++w<m;){var Z=Td(w,G),fe=d[Z];d[Z]=d[w],d[w]=fe}return d.length=m,d}var $d=function(d){var m=sl(d,function(R){return w.size===500&&w.clear(),R}),w=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(wr,function(w,R,G,Z){m.push(G?Z.replace(qt,"$1"):R||w)}),m});function Ga(d){if(typeof d=="string"||pt(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function ll(d){if(d!=null){try{return hr.call(d)}catch{}try{return d+""}catch{}}return""}function Wf(d){if(d instanceof Sr)return d.clone();var m=new _a(d.__wrapped__,d.__chain__);return m.__actions__=ii(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var Lp=br(function(d,m){return Ho(d)?La(d,Vo(m,1,Ho,!0)):[]}),Fp=br(function(d,m){var w=ki(m);return Ho(w)&&(w=h),Ho(d)?La(d,Vo(m,1,Ho,!0),Zn(w,2)):[]}),$p=br(function(d,m){var w=ki(m);return Ho(w)&&(w=h),Ho(d)?La(d,Vo(m,1,Ho,!0),h,w):[]});function Bd(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var G=w==null?0:ct(w);return G<0&&(G=Mo(R+G,0)),Si(d,Zn(m,3),G)}function Ud(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var G=R-1;return w!==h&&(G=ct(w),G=w<0?Mo(R+G,0):Mi(G,R-1)),Si(d,Zn(m,3),G,!0)}function Gd(d){return d!=null&&d.length?Vo(d,1):[]}function Vd(d){return d&&d.length?d[0]:h}var Bp=br(function(d){var m=Rr(d,Rf);return m.length&&m[0]===d[0]?yc(m):[]}),Up=br(function(d){var m=ki(d),w=Rr(d,Rf);return m===ki(w)?m=h:w.pop(),w.length&&w[0]===d[0]?yc(w,Zn(m,2)):[]}),Gp=br(function(d){var m=ki(d),w=Rr(d,Rf);return(m=typeof m=="function"?m:h)&&w.pop(),w.length&&w[0]===d[0]?yc(w,h,m):[]});function ki(d){var m=d==null?0:d.length;return m?d[m-1]:h}var Fl=br(Nc);function Nc(d,m){return d&&d.length&&m&&m.length?Ad(d,m):d}var Ki=lu(function(d,m){var w=d==null?0:d.length,R=hc(d,m);return ps(d,Rr(m,function(G){return Jr(G,w)?+G:G}).sort(wc)),R});function Oa(d){return d==null?d:nv.call(d)}var zf=br(function(d){return el(Vo(d,1,Ho,!0))}),Ni=br(function(d){var m=ki(d);return Ho(m)&&(m=h),el(Vo(d,1,Ho,!0),Zn(m,2))}),Rc=br(function(d){var m=ki(d);return m=typeof m=="function"?m:h,el(Vo(d,1,Ho,!0),h,m)});function $l(d){if(!d||!d.length)return[];var m=0;return d=xi(d,function(w){if(Ho(w))return m=Mo(w.length,m),!0}),bu(m,function(w){return Rr(d,Ai(w))})}function Os(d,m){if(!d||!d.length)return[];var w=$l(d);return m==null?w:Rr(w,function(R){return Zr(m,h,R)})}var jc=br(function(d,m){return Ho(d)?La(d,m):[]}),Cc=br(function(d){return bc(xi(d,Ho))}),xs=br(function(d){var m=ki(d);return Ho(m)&&(m=h),bc(xi(d,Ho),Zn(m,2))}),Ss=br(function(d){var m=ki(d);return m=typeof m=="function"?m:h,bc(xi(d,Ho),h,m)}),Bl=br($l),ju=br(function(d){var m=d.length,w=m>1?d[m-1]:h;return w=typeof w=="function"?(d.pop(),w):h,Os(d,w)});function Wo(d){var m=re(d);return m.__chain__=!0,m}function Dc(d,m){return m(d)}var Ic=lu(function(d){var m=d.length,w=m?d[0]:0,R=this.__wrapped__,G=function(Z){return hc(Z,d)};return!(m>1||this.__actions__.length)&&R instanceof Sr&&Jr(w)?((R=R.slice(w,+w+(m?1:0))).__actions__.push({func:Dc,args:[G],thisArg:h}),new _a(R,this.__chain__).thru(function(Z){return m&&!Z.length&&Z.push(h),Z})):this.thru(G)}),Cu=ku(function(d,m,w){un.call(d,w)?++d[w]:Ia(d,w,1)}),Wd=If(Bd),Ri=If(Ud);function zo(d,m){return(vr(d)?Oi:lo)(d,Zn(m,3))}function Vp(d,m){return(vr(d)?rc:Pp)(d,Zn(m,3))}var xa=ku(function(d,m,w){un.call(d,w)?d[w].push(m):Ia(d,w,[m])}),Ln=br(function(d,m,w){var R=-1,G=typeof m=="function",Z=Ji(d)?fn(d.length):[];return lo(d,function(fe){Z[++R]=G?Zr(m,fe,w):Pi(fe,m,w)}),Z}),Hf=ku(function(d,m,w){Ia(d,w,m)});function Ul(d,m){return(vr(d)?Rr:la)(d,Zn(m,3))}var Xf=ku(function(d,m,w){d[w?0:1].push(m)},function(){return[[],[]]}),Wp=br(function(d,m){if(d==null)return[];var w=m.length;return w>1&&No(d,m[0],m[1])?m=[]:w>2&&No(m[0],m[1],m[2])&&(m=[m[0]]),Rp(d,Vo(m,1),[])}),As=xp||function(){return To.Date.now()};function zp(d,m,w){return m=w?h:m,m=d&&m==null?d.length:m,Fa(d,M,h,h,h,h,m)}function Va(d,m){var w;if(typeof m!="function")throw new ye(g);return d=ct(d),function(){return--d>0&&(w=m.apply(this,arguments)),d<=1&&(m=h),w}}var Ts=br(function(d,m,w){var R=1;if(w.length){var G=Hi(w,Nu(Ts));R|=S}return Fa(d,R,m,w,G)}),Gl=br(function(d,m,w){var R=3;if(w.length){var G=Hi(w,Nu(Gl));R|=S}return Fa(m,R,d,w,G)});function Wa(d,m,w){var R,G,Z,fe,be,Ie,ht=0,_t=!1,Ut=!1,Sn=!0;if(typeof d!="function")throw new ye(g);function wn(or){var nr=R,kr=G;return R=G=h,ht=or,fe=d.apply(kr,nr)}function Xn(or){return ht=or,be=Ll(Jt,m),_t?wn(or):fe}function Mt(or){var nr=or-Ie;return Ie===h||nr>=m||nr<0||Ut&&or-ht>=Z}function Jt(){var or=As();if(Mt(or))return cr(or);be=Ll(Jt,function(nr){var kr=m-(nr-Ie);return Ut?Mi(kr,Z-(nr-ht)):kr}(or))}function cr(or){return be=h,Sn&&R?wn(or):(R=G=h,fe)}function mn(){var or=As(),nr=Mt(or);if(R=arguments,G=this,Ie=or,nr){if(be===h)return Xn(Ie);if(Ut)return Nd(be),be=Ll(Jt,m),wn(Ie)}return be===h&&(be=Ll(Jt,m)),fe}return m=Bt(m)||0,Yr(w)&&(_t=!!w.leading,Z=(Ut="maxWait"in w)?Mo(Bt(w.maxWait)||0,m):Z,Sn="trailing"in w?!!w.trailing:Sn),mn.cancel=function(){be!==h&&Nd(be),ht=0,R=Ie=G=be=h},mn.flush=function(){return be===h?fe:cr(As())},mn}var Hp=br(function(d,m){return bd(d,1,m)}),zd=br(function(d,m,w){return bd(d,Bt(m)||0,w)});function sl(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new ye(g);var w=function(){var R=arguments,G=m?m.apply(this,R):R[0],Z=w.cache;if(Z.has(G))return Z.get(G);var fe=d.apply(this,R);return w.cache=Z.set(G,fe)||Z,fe};return w.cache=new(sl.Cache||Da),w}function fu(d){if(typeof d!="function")throw new ye(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}sl.Cache=Da;var ji=Ip(function(d,m){var w=(m=m.length==1&&vr(m[0])?Rr(m[0],ro(Zn())):Rr(Vo(m,1),ro(Zn()))).length;return br(function(R){for(var G=-1,Z=Mi(R.length,w);++G<Z;)R[G]=m[G].call(this,R[G]);return Zr(d,this,R)})}),Un=br(function(d,m){var w=Hi(m,Nu(Un));return Fa(d,S,h,m,w)}),_o=br(function(d,m){var w=Hi(m,Nu(_o));return Fa(d,k,h,m,w)}),bi=lu(function(d,m){return Fa(d,j,h,h,h,m)});function Zi(d,m){return d===m||d!=d&&m!=m}var sv=vs(mo),Xp=vs(function(d,m){return d>=m}),cl=Af(function(){return arguments}())?Af:function(d){return bo(d)&&un.call(d,"callee")&&!Go.call(d,"callee")},vr=fn.isArray,Yp=tc?ro(tc):function(d){return bo(d)&&po(d)==Ke};function Ji(d){return d!=null&&Du(d.length)&&!du(d)}function Ho(d){return bo(d)&&Ji(d)}var Sa=Sp||ze,cv=hf?ro(hf):function(d){return bo(d)&&po(d)==D};function Lc(d){if(!bo(d))return!1;var m=po(d);return m==V||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!L(d)}function du(d){if(!Yr(d))return!1;var m=po(d);return m==X||m==H||m=="[object AsyncFunction]"||m=="[object Proxy]"}function Hd(d){return typeof d=="number"&&d==ct(d)}function Du(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=N}function Yr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function bo(d){return d!=null&&typeof d=="object"}var fi=nc?ro(nc):function(d){return bo(d)&&go(d)==de};function Fc(d){return typeof d=="number"||bo(d)&&po(d)==Ce}function L(d){if(!bo(d)||po(d)!=Me)return!1;var m=Ra(d);if(m===null)return!0;var w=un.call(m,"constructor")&&m.constructor;return typeof w=="function"&&w instanceof w&&hr.call(w)==Yi}var oe=Ei?ro(Ei):function(d){return bo(d)&&po(d)==$e},_e=Ko?ro(Ko):function(d){return bo(d)&&go(d)==ke};function tt(d){return typeof d=="string"||!vr(d)&&bo(d)&&po(d)==le}function pt(d){return typeof d=="symbol"||bo(d)&&po(d)==he}var Ze=zi?ro(zi):function(d){return bo(d)&&Du(d.length)&&!!Br[po(d)]},st=vs(ou),Pt=vs(function(d,m){return d<=m});function Ct(d){if(!d)return[];if(Ji(d))return tt(d)?Ii(d):ii(d);if(ja&&d[ja])return function(w){for(var R,G=[];!(R=w.next()).done;)G.push(R.value);return G}(d[ja]());var m=go(d);return(m==de?Uo:m==ke?ia:yr)(d)}function Rt(d){return d?(d=Bt(d))===I||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function ct(d){var m=Rt(d),w=m%1;return m==m?w?m-w:m:0}function Gt(d){return d?Zu(ct(d),0,q):0}function Bt(d){if(typeof d=="number")return d;if(pt(d))return B;if(Yr(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Yr(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=ga(d);var w=li.test(d);return w||Bo.test(d)?na(d.slice(2),w?2:8):qo.test(d)?B:+d}function kt(d){return iu(d,Tt(d))}function bt(d){return d==null?"":qi(d)}var We=rl(function(d,m){if(al(m)||Ji(m))iu(m,Dt(m),d);else for(var w in m)un.call(m,w)&&Po(d,w,m[w])}),ut=rl(function(d,m){iu(m,Tt(m),d)}),Lt=rl(function(d,m,w,R){iu(m,Tt(m),d,R)}),Kt=rl(function(d,m,w,R){iu(m,Dt(m),d,R)}),xt=lu(hc),Zt=br(function(d,m){d=T(d);var w=-1,R=m.length,G=R>2?m[2]:h;for(G&&No(m[0],m[1],G)&&(R=1);++w<R;)for(var Z=m[w],fe=Tt(Z),be=-1,Ie=fe.length;++be<Ie;){var ht=fe[be],_t=d[ht];(_t===h||Zi(_t,Ht[ht])&&!un.call(d,ht))&&(d[ht]=Z[ht])}return d}),At=br(function(d){return d.push(h,Dd),Zr(Rn,h,d)});function Vt(d,m,w){var R=d==null?h:ru(d,m);return R===h?w:R}function wt(d,m){return d!=null&&bs(d,m,Od)}var Xt=jd(function(d,m,w){m!=null&&typeof m.toString!="function"&&(m=Pr.call(m)),d[m]=w},Ar(Wn)),Tn=jd(function(d,m,w){m!=null&&typeof m.toString!="function"&&(m=Pr.call(m)),un.call(d,m)?d[m].push(w):d[m]=[w]},Zn),Vn=br(Pi);function Dt(d){return Ji(d)?Of(d):wa(d)}function Tt(d){return Ji(d)?Of(d,!0):kp(d)}var Et=rl(function(d,m,w){Tf(d,m,w)}),Rn=rl(function(d,m,w,R){Tf(d,m,w,R)}),er=lu(function(d,m){var w={};if(d==null)return w;var R=!1;m=Rr(m,function(Z){return Z=tl(Z,d),R||(R=Z.length>1),Z}),iu(d,Uf(d),w),R&&(w=ua(w,7,Id));for(var G=m.length;G--;)kf(w,m[G]);return w}),ln=lu(function(d,m){return d==null?{}:function(w,R){return jp(w,R,function(G,Z){return wt(w,Z)})}(d,m)});function Jn(d,m){if(d==null)return{};var w=Rr(Uf(d),function(R){return[R]});return m=Zn(m),jp(d,w,function(R,G){return m(R,G[0])})}var Gn=$f(Dt),tr=$f(Tt);function yr(d){return d==null?[]:Tl(d,Dt(d))}var wo=au(function(d,m,w){return m=m.toLowerCase(),d+(w?Ro(m):m)});function Ro(d){return Xo(bt(d).toLowerCase())}function lr(d){return(d=bt(d))&&d.replace($n,uc).replace(Ja,"")}var Io=au(function(d,m,w){return d+(w?"-":"")+m.toLowerCase()}),qr=au(function(d,m,w){return d+(w?" ":"")+m.toLowerCase()}),Eo=Df("toLowerCase"),jo=au(function(d,m,w){return d+(w?"_":"")+m.toLowerCase()}),vo=au(function(d,m,w){return d+(w?" ":"")+Xo(m)}),so=au(function(d,m,w){return d+(w?" ":"")+m.toUpperCase()}),Xo=Df("toUpperCase");function yo(d,m,w){return d=bt(d),(m=w?h:m)===h?function(R){return ec.test(R)}(d)?function(R){return R.match(ns)||[]}(d):function(R){return R.match(it)||[]}(d):d.match(m)||[]}var Kn=br(function(d,m){try{return Zr(d,h,m)}catch(w){return Lc(w)?w:new xr(w)}}),Qo=lu(function(d,m){return Oi(m,function(w){w=Ga(w),Ia(d,w,Ts(d[w],d))}),d});function Ar(d){return function(){return d}}var Nn=Ec(),sr=Ec(!0);function Wn(d){return d}function no(d){return Mu(typeof d=="function"?d:ua(d,1))}var Aa=br(function(d,m){return function(w){return Pi(w,d,m)}}),Iu=br(function(d,m){return function(w){return Pi(d,w,m)}});function ve(d,m,w){var R=Dt(m),G=vc(m,R);w!=null||Yr(m)&&(G.length||!R.length)||(w=m,m=d,d=this,G=vc(m,Dt(m)));var Z=!(Yr(w)&&"chain"in w&&!w.chain),fe=du(d);return Oi(G,function(be){var Ie=m[be];d[be]=Ie,fe&&(d.prototype[be]=function(){var ht=this.__chain__;if(Z||ht){var _t=d(this.__wrapped__),Ut=_t.__actions__=ii(this.__actions__);return Ut.push({func:Ie,args:arguments,thisArg:d}),_t.__chain__=ht,_t}return Ie.apply(d,Zo([this.value()],arguments))})}),d}function nt(){}var qe=Lf(Rr),en=Lf(yf),pr=Lf(ic);function ae(d){return Ru(d)?Ai(Ga(d)):function(m){return function(w){return ru(w,m)}}(d)}var J=uu(),Ae=uu(!0);function Be(){return[]}function ze(){return!1}var Pe=hs(function(d,m){return d+m},0),Te=Sc("ceil"),De=hs(function(d,m){return d/m},1),ce=Sc("floor"),we,se=hs(function(d,m){return d*m},1),Fe=Sc("round"),Ye=hs(function(d,m){return d-m},0);return re.after=function(d,m){if(typeof m!="function")throw new ye(g);return d=ct(d),function(){if(--d<1)return m.apply(this,arguments)}},re.ary=zp,re.assign=We,re.assignIn=ut,re.assignInWith=Lt,re.assignWith=Kt,re.at=xt,re.before=Va,re.bind=Ts,re.bindAll=Qo,re.bindKey=Gl,re.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return vr(d)?d:[d]},re.chain=Wo,re.chunk=function(d,m,w){m=(w?No(d,m,w):m===h)?1:Mo(ct(m),0);var R=d==null?0:d.length;if(!R||m<1)return[];for(var G=0,Z=0,fe=fn(sc(R/m));G<R;)fe[Z++]=Ea(d,G,G+=m);return fe},re.compact=function(d){for(var m=-1,w=d==null?0:d.length,R=0,G=[];++m<w;){var Z=d[m];Z&&(G[R++]=Z)}return G},re.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),w=arguments[0],R=d;R--;)m[R-1]=arguments[R];return Zo(vr(w)?ii(w):[w],Vo(m,1))},re.cond=function(d){var m=d==null?0:d.length,w=Zn();return d=m?Rr(d,function(R){if(typeof R[1]!="function")throw new ye(g);return[w(R[0]),R[1]]}):[],br(function(R){for(var G=-1;++G<m;){var Z=d[G];if(Zr(Z[0],this,R))return Zr(Z[1],this,R)}})},re.conforms=function(d){return function(m){var w=Dt(m);return function(R){return _d(R,m,w)}}(ua(d,1))},re.constant=Ar,re.countBy=Cu,re.create=function(d,m){var w=Rl(d);return m==null?w:Tu(w,m)},re.curry=function d(m,w,R){var G=Fa(m,8,h,h,h,h,h,w=R?h:w);return G.placeholder=d.placeholder,G},re.curryRight=function d(m,w,R){var G=Fa(m,O,h,h,h,h,h,w=R?h:w);return G.placeholder=d.placeholder,G},re.debounce=Wa,re.defaults=Zt,re.defaultsDeep=At,re.defer=Hp,re.delay=zd,re.difference=Lp,re.differenceBy=Fp,re.differenceWith=$p,re.drop=function(d,m,w){var R=d==null?0:d.length;return R?Ea(d,(m=w||m===h?1:ct(m))<0?0:m,R):[]},re.dropRight=function(d,m,w){var R=d==null?0:d.length;return R?Ea(d,0,(m=R-(m=w||m===h?1:ct(m)))<0?0:m):[]},re.dropRightWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3),!0,!0):[]},re.dropWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3),!0):[]},re.fill=function(d,m,w,R){var G=d==null?0:d.length;return G?(w&&typeof w!="number"&&No(d,m,w)&&(w=0,R=G),function(Z,fe,be,Ie){var ht=Z.length;for((be=ct(be))<0&&(be=-be>ht?0:ht+be),(Ie=Ie===h||Ie>ht?ht:ct(Ie))<0&&(Ie+=ht),Ie=be>Ie?0:Gt(Ie);be<Ie;)Z[be++]=fe;return Z}(d,m,w,R)):[]},re.filter=function(d,m){return(vr(d)?xi:Ur)(d,Zn(m,3))},re.flatMap=function(d,m){return Vo(Ul(d,m),1)},re.flatMapDeep=function(d,m){return Vo(Ul(d,m),I)},re.flatMapDepth=function(d,m,w){return w=w===h?1:ct(w),Vo(Ul(d,m),w)},re.flatten=Gd,re.flattenDeep=function(d){return d!=null&&d.length?Vo(d,I):[]},re.flattenDepth=function(d,m){return d!=null&&d.length?Vo(d,m=m===h?1:ct(m)):[]},re.flip=function(d){return Fa(d,512)},re.flow=Nn,re.flowRight=sr,re.fromPairs=function(d){for(var m=-1,w=d==null?0:d.length,R={};++m<w;){var G=d[m];R[G[0]]=G[1]}return R},re.functions=function(d){return d==null?[]:vc(d,Dt(d))},re.functionsIn=function(d){return d==null?[]:vc(d,Tt(d))},re.groupBy=xa,re.initial=function(d){return d!=null&&d.length?Ea(d,0,-1):[]},re.intersection=Bp,re.intersectionBy=Up,re.intersectionWith=Gp,re.invert=Xt,re.invertBy=Tn,re.invokeMap=Ln,re.iteratee=no,re.keyBy=Hf,re.keys=Dt,re.keysIn=Tt,re.map=Ul,re.mapKeys=function(d,m){var w={};return m=Zn(m,3),kn(d,function(R,G,Z){Ia(w,m(R,G,Z),R)}),w},re.mapValues=function(d,m){var w={};return m=Zn(m,3),kn(d,function(R,G,Z){Ia(w,G,m(R,G,Z))}),w},re.matches=function(d){return xd(ua(d,1))},re.matchesProperty=function(d,m){return Sd(d,ua(m,1))},re.memoize=sl,re.merge=Et,re.mergeWith=Rn,re.method=Aa,re.methodOf=Iu,re.mixin=ve,re.negate=fu,re.nthArg=function(d){return d=ct(d),br(function(m){return Np(m,d)})},re.omit=er,re.omitBy=function(d,m){return Jn(d,fu(Zn(m)))},re.once=function(d){return Va(2,d)},re.orderBy=function(d,m,w,R){return d==null?[]:(vr(m)||(m=m==null?[]:[m]),vr(w=R?h:w)||(w=w==null?[]:[w]),Rp(d,m,w))},re.over=qe,re.overArgs=ji,re.overEvery=en,re.overSome=pr,re.partial=Un,re.partialRight=_o,re.partition=Xf,re.pick=ln,re.pickBy=Jn,re.property=ae,re.propertyOf=function(d){return function(m){return d==null?h:ru(d,m)}},re.pull=Fl,re.pullAll=Nc,re.pullAllBy=function(d,m,w){return d&&d.length&&m&&m.length?Ad(d,m,Zn(w,2)):d},re.pullAllWith=function(d,m,w){return d&&d.length&&m&&m.length?Ad(d,m,h,w):d},re.pullAt=Ki,re.range=J,re.rangeRight=Ae,re.rearg=bi,re.reject=function(d,m){return(vr(d)?xi:Ur)(d,fu(Zn(m,3)))},re.remove=function(d,m){var w=[];if(!d||!d.length)return w;var R=-1,G=[],Z=d.length;for(m=Zn(m,3);++R<Z;){var fe=d[R];m(fe,R,d)&&(w.push(fe),G.push(R))}return ps(d,G),w},re.rest=function(d,m){if(typeof d!="function")throw new ye(g);return br(d,m=m===h?m:ct(m))},re.reverse=Oa,re.sampleSize=function(d,m,w){return m=(w?No(d,m,w):m===h)?1:ct(m),(vr(d)?md:Md)(d,m)},re.set=function(d,m,w){return d==null?d:Qu(d,m,w)},re.setWith=function(d,m,w,R){return R=typeof R=="function"?R:h,d==null?d:Qu(d,m,w,R)},re.shuffle=function(d){return(vr(d)?Mp:lv)(d)},re.slice=function(d,m,w){var R=d==null?0:d.length;return R?(w&&typeof w!="number"&&No(d,m,w)?(m=0,w=R):(m=m==null?0:ct(m),w=w===h?R:ct(w)),Ea(d,m,w)):[]},re.sortBy=Wp,re.sortedUniq=function(d){return d&&d.length?Cp(d):[]},re.sortedUniqBy=function(d,m){return d&&d.length?Cp(d,Zn(m,2)):[]},re.split=function(d,m,w){return w&&typeof w!="number"&&No(d,m,w)&&(m=w=h),(w=w===h?q:w>>>0)?(d=bt(d))&&(typeof m=="string"||m!=null&&!oe(m))&&!(m=qi(m))&&Na(d)?nl(Ii(d),0,w):d.split(m,w):[]},re.spread=function(d,m){if(typeof d!="function")throw new ye(g);return m=m==null?0:Mo(ct(m),0),br(function(w){var R=w[m],G=nl(w,0,m);return R&&Zo(G,R),Zr(d,this,G)})},re.tail=function(d){var m=d==null?0:d.length;return m?Ea(d,1,m):[]},re.take=function(d,m,w){return d&&d.length?Ea(d,0,(m=w||m===h?1:ct(m))<0?0:m):[]},re.takeRight=function(d,m,w){var R=d==null?0:d.length;return R?Ea(d,(m=R-(m=w||m===h?1:ct(m)))<0?0:m,R):[]},re.takeRightWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3),!1,!0):[]},re.takeWhile=function(d,m){return d&&d.length?_c(d,Zn(m,3)):[]},re.tap=function(d,m){return m(d),d},re.throttle=function(d,m,w){var R=!0,G=!0;if(typeof d!="function")throw new ye(g);return Yr(w)&&(R="leading"in w?!!w.leading:R,G="trailing"in w?!!w.trailing:G),Wa(d,m,{leading:R,maxWait:m,trailing:G})},re.thru=Dc,re.toArray=Ct,re.toPairs=Gn,re.toPairsIn=tr,re.toPath=function(d){return vr(d)?Rr(d,Ga):pt(d)?[d]:ii($d(bt(d)))},re.toPlainObject=kt,re.transform=function(d,m,w){var R=vr(d),G=R||Sa(d)||Ze(d);if(m=Zn(m,4),w==null){var Z=d&&d.constructor;w=G?R?new Z:[]:Yr(d)&&du(Z)?Rl(Ra(d)):{}}return(G?Oi:kn)(d,function(fe,be,Ie){return m(w,fe,be,Ie)}),w},re.unary=function(d){return zp(d,1)},re.union=zf,re.unionBy=Ni,re.unionWith=Rc,re.uniq=function(d){return d&&d.length?el(d):[]},re.uniqBy=function(d,m){return d&&d.length?el(d,Zn(m,2)):[]},re.uniqWith=function(d,m){return m=typeof m=="function"?m:h,d&&d.length?el(d,h,m):[]},re.unset=function(d,m){return d==null||kf(d,m)},re.unzip=$l,re.unzipWith=Os,re.update=function(d,m,w){return d==null?d:jl(d,m,jf(w))},re.updateWith=function(d,m,w,R){return R=typeof R=="function"?R:h,d==null?d:jl(d,m,jf(w),R)},re.values=yr,re.valuesIn=function(d){return d==null?[]:Tl(d,Tt(d))},re.without=jc,re.words=yo,re.wrap=function(d,m){return Un(jf(m),d)},re.xor=Cc,re.xorBy=xs,re.xorWith=Ss,re.zip=Bl,re.zipObject=function(d,m){return Nf(d||[],m||[],Po)},re.zipObjectDeep=function(d,m){return Nf(d||[],m||[],Qu)},re.zipWith=ju,re.entries=Gn,re.entriesIn=tr,re.extend=ut,re.extendWith=Lt,ve(re,re),re.add=Pe,re.attempt=Kn,re.camelCase=wo,re.capitalize=Ro,re.ceil=Te,re.clamp=function(d,m,w){return w===h&&(w=m,m=h),w!==h&&(w=(w=Bt(w))==w?w:0),m!==h&&(m=(m=Bt(m))==m?m:0),Zu(Bt(d),m,w)},re.clone=function(d){return ua(d,4)},re.cloneDeep=function(d){return ua(d,5)},re.cloneDeepWith=function(d,m){return ua(d,5,m=typeof m=="function"?m:h)},re.cloneWith=function(d,m){return ua(d,4,m=typeof m=="function"?m:h)},re.conformsTo=function(d,m){return m==null||_d(d,m,Dt(m))},re.deburr=lr,re.defaultTo=function(d,m){return d==null||d!=d?m:d},re.divide=De,re.endsWith=function(d,m,w){d=bt(d),m=qi(m);var R=d.length,G=w=w===h?R:Zu(ct(w),0,R);return(w-=m.length)>=0&&d.slice(w,G)==m},re.eq=Zi,re.escape=function(d){return(d=bt(d))&&En.test(d)?d.replace(pn,Do):d},re.escapeRegExp=function(d){return(d=bt(d))&&Kr.test(d)?d.replace(Lr,"\\$&"):d},re.every=function(d,m,w){var R=vr(d)?yf:wd;return w&&No(d,m,w)&&(m=h),R(d,Zn(m,3))},re.find=Wd,re.findIndex=Bd,re.findKey=function(d,m){return Pa(d,Zn(m,3),kn)},re.findLast=Ri,re.findLastIndex=Ud,re.findLastKey=function(d,m){return Pa(d,Zn(m,3),to)},re.floor=ce,re.forEach=zo,re.forEachRight=Vp,re.forIn=function(d,m){return d==null?d:_r(d,Zn(m,3),Tt)},re.forInRight=function(d,m){return d==null?d:eo(d,Zn(m,3),Tt)},re.forOwn=function(d,m){return d&&kn(d,Zn(m,3))},re.forOwnRight=function(d,m){return d&&to(d,Zn(m,3))},re.get=Vt,re.gt=sv,re.gte=Xp,re.has=function(d,m){return d!=null&&bs(d,m,Ed)},re.hasIn=wt,re.head=Vd,re.identity=Wn,re.includes=function(d,m,w,R){d=Ji(d)?d:yr(d),w=w&&!R?ct(w):0;var G=d.length;return w<0&&(w=Mo(G+w,0)),tt(d)?w<=G&&d.indexOf(m,w)>-1:!!G&&zu(d,m,w)>-1},re.indexOf=function(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var G=w==null?0:ct(w);return G<0&&(G=Mo(R+G,0)),zu(d,m,G)},re.inRange=function(d,m,w){return m=Rt(m),w===h?(w=m,m=0):w=Rt(w),function(R,G,Z){return R>=Mi(G,Z)&&R<Mo(G,Z)}(d=Bt(d),m,w)},re.invoke=Vn,re.isArguments=cl,re.isArray=vr,re.isArrayBuffer=Yp,re.isArrayLike=Ji,re.isArrayLikeObject=Ho,re.isBoolean=function(d){return d===!0||d===!1||bo(d)&&po(d)==z},re.isBuffer=Sa,re.isDate=cv,re.isElement=function(d){return bo(d)&&d.nodeType===1&&!L(d)},re.isEmpty=function(d){if(d==null)return!0;if(Ji(d)&&(vr(d)||typeof d=="string"||typeof d.splice=="function"||Sa(d)||Ze(d)||cl(d)))return!d.length;var m=go(d);if(m==de||m==ke)return!d.size;if(al(d))return!wa(d).length;for(var w in d)if(un.call(d,w))return!1;return!0},re.isEqual=function(d,m){return ds(d,m)},re.isEqualWith=function(d,m,w){var R=(w=typeof w=="function"?w:h)?w(d,m):h;return R===h?ds(d,m,h,w):!!R},re.isError=Lc,re.isFinite=function(d){return typeof d=="number"&&kl(d)},re.isFunction=du,re.isInteger=Hd,re.isLength=Du,re.isMap=fi,re.isMatch=function(d,m){return d===m||ba(d,m,Tc(m))},re.isMatchWith=function(d,m,w){return w=typeof w=="function"?w:h,ba(d,m,Tc(m),w)},re.isNaN=function(d){return Fc(d)&&d!=+d},re.isNative=function(d){if(Ua(d))throw new xr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ju(d)},re.isNil=function(d){return d==null},re.isNull=function(d){return d===null},re.isNumber=Fc,re.isObject=Yr,re.isObjectLike=bo,re.isPlainObject=L,re.isRegExp=oe,re.isSafeInteger=function(d){return Hd(d)&&d>=-9007199254740991&&d<=N},re.isSet=_e,re.isString=tt,re.isSymbol=pt,re.isTypedArray=Ze,re.isUndefined=function(d){return d===h},re.isWeakMap=function(d){return bo(d)&&go(d)==Se},re.isWeakSet=function(d){return bo(d)&&po(d)=="[object WeakSet]"},re.join=function(d,m){return d==null?"":cc.call(d,m)},re.kebabCase=Io,re.last=ki,re.lastIndexOf=function(d,m,w){var R=d==null?0:d.length;if(!R)return-1;var G=R;return w!==h&&(G=(G=ct(w))<0?Mo(R+G,0):Mi(G,R-1)),m==m?function(Z,fe,be){for(var Ie=be+1;Ie--;)if(Z[Ie]===fe)return Ie;return Ie}(d,m,G):Si(d,ra,G,!0)},re.lowerCase=qr,re.lowerFirst=Eo,re.lt=st,re.lte=Pt,re.max=function(d){return d&&d.length?ko(d,Wn,mo):h},re.maxBy=function(d,m){return d&&d.length?ko(d,Zn(m,2),mo):h},re.mean=function(d){return Or(d,Wn)},re.meanBy=function(d,m){return Or(d,Zn(m,2))},re.min=function(d){return d&&d.length?ko(d,Wn,ou):h},re.minBy=function(d,m){return d&&d.length?ko(d,Zn(m,2),ou):h},re.stubArray=Be,re.stubFalse=ze,re.stubObject=function(){return{}},re.stubString=function(){return""},re.stubTrue=function(){return!0},re.multiply=se,re.nth=function(d,m){return d&&d.length?Np(d,ct(m)):h},re.noConflict=function(){return To._===this&&(To._=fo),this},re.noop=nt,re.now=As,re.pad=function(d,m,w){d=bt(d);var R=(m=ct(m))?Ti(d):0;if(!m||R>=m)return d;var G=(m-R)/2;return Oc(Pl(G),w)+d+Oc(sc(G),w)},re.padEnd=function(d,m,w){d=bt(d);var R=(m=ct(m))?Ti(d):0;return m&&R<m?d+Oc(m-R,w):d},re.padStart=function(d,m,w){d=bt(d);var R=(m=ct(m))?Ti(d):0;return m&&R<m?Oc(m-R,w)+d:d},re.parseInt=function(d,m,w){return w||m==null?m=0:m&&(m=+m),wf(bt(d).replace(jn,""),m||0)},re.random=function(d,m,w){if(w&&typeof w!="boolean"&&No(d,m,w)&&(m=w=h),w===h&&(typeof m=="boolean"?(w=m,m=h):typeof d=="boolean"&&(w=d,d=h)),d===h&&m===h?(d=0,m=1):(d=Rt(d),m===h?(m=d,d=0):m=Rt(m)),d>m){var R=d;d=m,m=R}if(w||d%1||m%1){var G=ls();return Mi(d+G*(m-d+Vu("1e-"+((G+"").length-1))),m)}return Td(d,m)},re.reduce=function(d,m,w){var R=vr(d)?is:oi,G=arguments.length<3;return R(d,Zn(m,4),w,G,lo)},re.reduceRight=function(d,m,w){var R=vr(d)?mf:oi,G=arguments.length<3;return R(d,Zn(m,4),w,G,Pp)},re.repeat=function(d,m,w){return m=(w?No(d,m,w):m===h)?1:ct(m),mc(bt(d),m)},re.replace=function(){var d=arguments,m=bt(d[0]);return d.length<3?m:m.replace(d[1],d[2])},re.result=function(d,m,w){var R=-1,G=(m=tl(m,d)).length;for(G||(G=1,d=h);++R<G;){var Z=d==null?h:d[Ga(m[R])];Z===h&&(R=G,Z=w),d=du(Z)?Z.call(d):Z}return d},re.round=Fe,re.runInContext=lt,re.sample=function(d){return(vr(d)?xf:av)(d)},re.size=function(d){if(d==null)return 0;if(Ji(d))return tt(d)?Ti(d):d.length;var m=go(d);return m==de||m==ke?d.size:wa(d).length},re.snakeCase=jo,re.some=function(d,m,w){var R=vr(d)?ic:Pd;return w&&No(d,m,w)&&(m=h),R(d,Zn(m,3))},re.sortedIndex=function(d,m){return Mf(d,m)},re.sortedIndexBy=function(d,m,w){return Pf(d,m,Zn(w,2))},re.sortedIndexOf=function(d,m){var w=d==null?0:d.length;if(w){var R=Mf(d,m);if(R<w&&Zi(d[R],m))return R}return-1},re.sortedLastIndex=function(d,m){return Mf(d,m,!0)},re.sortedLastIndexBy=function(d,m,w){return Pf(d,m,Zn(w,2),!0)},re.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var w=Mf(d,m,!0)-1;if(Zi(d[w],m))return w}return-1},re.startCase=vo,re.startsWith=function(d,m,w){return d=bt(d),w=w==null?0:Zu(ct(w),0,d.length),m=qi(m),d.slice(w,w+m.length)==m},re.subtract=Ye,re.sum=function(d){return d&&d.length?Hu(d,Wn):0},re.sumBy=function(d,m){return d&&d.length?Hu(d,Zn(m,2)):0},re.template=function(d,m,w){var R=re.templateSettings;w&&No(d,m,w)&&(m=h),d=bt(d),m=Lt({},m,R,Cd);var G,Z,fe=Lt({},m.imports,R.imports,Cd),be=Dt(fe),Ie=Tl(fe,be),ht=0,_t=m.interpolate||Hn,Ut="__p += '",Sn=$((m.escape||Hn).source+"|"+_t.source+"|"+(_t===qn?Pn:Hn).source+"|"+(m.evaluate||Hn).source+"|$","g"),wn="//# sourceURL="+(un.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ff+"]")+`
`;d.replace(Sn,function(Jt,cr,mn,or,nr,kr){return mn||(mn=or),Ut+=d.slice(ht,kr).replace(rr,wu),cr&&(G=!0,Ut+=`' +
__e(`+cr+`) +
'`),nr&&(Z=!0,Ut+=`';
`+nr+`;
__p += '`),mn&&(Ut+=`' +
((__t = (`+mn+`)) == null ? '' : __t) +
'`),ht=kr+Jt.length,Jt}),Ut+=`';
`;var Xn=un.call(m,"variable")&&m.variable;if(Xn){if(Qt.test(Xn))throw new xr("Invalid `variable` option passed into `_.template`")}else Ut=`with (obj) {
`+Ut+`
}
`;Ut=(Z?Ut.replace(Ot,""):Ut).replace(rn,"$1").replace(vn,"$1;"),Ut="function("+(Xn||"obj")+`) {
`+(Xn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ut+`return __p
}`;var Mt=Kn(function(){return oo(be,wn+"return "+Ut).apply(h,Ie)});if(Mt.source=Ut,Lc(Mt))throw Mt;return Mt},re.times=function(d,m){if((d=ct(d))<1||d>N)return[];var w=q,R=Mi(d,q);m=Zn(m),d-=q;for(var G=bu(R,m);++w<d;)m(w);return G},re.toFinite=Rt,re.toInteger=ct,re.toLength=Gt,re.toLower=function(d){return bt(d).toLowerCase()},re.toNumber=Bt,re.toSafeInteger=function(d){return d?Zu(ct(d),-9007199254740991,N):d===0?d:0},re.toString=bt,re.toUpper=function(d){return bt(d).toUpperCase()},re.trim=function(d,m,w){if((d=bt(d))&&(w||m===h))return ga(d);if(!d||!(m=qi(m)))return d;var R=Ii(d),G=Ii(m);return nl(R,oa(R,G),ac(R,G)+1).join("")},re.trimEnd=function(d,m,w){if((d=bt(d))&&(w||m===h))return d.slice(0,Jo(d)+1);if(!d||!(m=qi(m)))return d;var R=Ii(d);return nl(R,0,ac(R,Ii(m))+1).join("")},re.trimStart=function(d,m,w){if((d=bt(d))&&(w||m===h))return d.replace(jn,"");if(!d||!(m=qi(m)))return d;var R=Ii(d);return nl(R,oa(R,Ii(m))).join("")},re.truncate=function(d,m){var w=30,R="...";if(Yr(m)){var G="separator"in m?m.separator:G;w="length"in m?ct(m.length):w,R="omission"in m?qi(m.omission):R}var Z=(d=bt(d)).length;if(Na(d)){var fe=Ii(d);Z=fe.length}if(w>=Z)return d;var be=w-Ti(R);if(be<1)return R;var Ie=fe?nl(fe,0,be).join(""):d.slice(0,be);if(G===h)return Ie+R;if(fe&&(be+=Ie.length-be),oe(G)){if(d.slice(be).search(G)){var ht,_t=Ie;for(G.global||(G=$(G.source,bt(mr.exec(G))+"g")),G.lastIndex=0;ht=G.exec(_t);)var Ut=ht.index;Ie=Ie.slice(0,Ut===h?be:Ut)}}else if(d.indexOf(qi(G),be)!=be){var Sn=Ie.lastIndexOf(G);Sn>-1&&(Ie=Ie.slice(0,Sn))}return Ie+R},re.unescape=function(d){return(d=bt(d))&&ft.test(d)?d.replace(An,Xi):d},re.uniqueId=function(d){var m=++$r;return bt(d)+m},re.upperCase=so,re.upperFirst=Xo,re.each=zo,re.eachRight=Vp,re.first=Vd,ve(re,(we={},kn(re,function(d,m){un.call(re.prototype,m)||(we[m]=d)}),we),{chain:!1}),re.VERSION="4.17.21",Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){re[d].placeholder=re}),Oi(["drop","take"],function(d,m){Sr.prototype[d]=function(w){w=w===h?1:Mo(ct(w),0);var R=this.__filtered__&&!m?new Sr(this):this.clone();return R.__filtered__?R.__takeCount__=Mi(w,R.__takeCount__):R.__views__.push({size:Mi(w,q),type:d+(R.__dir__<0?"Right":"")}),R},Sr.prototype[d+"Right"]=function(w){return this.reverse()[d](w).reverse()}}),Oi(["filter","map","takeWhile"],function(d,m){var w=m+1,R=w==1||w==3;Sr.prototype[d]=function(G){var Z=this.clone();return Z.__iteratees__.push({iteratee:Zn(G,3),type:w}),Z.__filtered__=Z.__filtered__||R,Z}}),Oi(["head","last"],function(d,m){var w="take"+(m?"Right":"");Sr.prototype[d]=function(){return this[w](1).value()[0]}}),Oi(["initial","tail"],function(d,m){var w="drop"+(m?"":"Right");Sr.prototype[d]=function(){return this.__filtered__?new Sr(this):this[w](1)}}),Sr.prototype.compact=function(){return this.filter(Wn)},Sr.prototype.find=function(d){return this.filter(d).head()},Sr.prototype.findLast=function(d){return this.reverse().find(d)},Sr.prototype.invokeMap=br(function(d,m){return typeof d=="function"?new Sr(this):this.map(function(w){return Pi(w,d,m)})}),Sr.prototype.reject=function(d){return this.filter(fu(Zn(d)))},Sr.prototype.slice=function(d,m){d=ct(d);var w=this;return w.__filtered__&&(d>0||m<0)?new Sr(w):(d<0?w=w.takeRight(-d):d&&(w=w.drop(d)),m!==h&&(w=(m=ct(m))<0?w.dropRight(-m):w.take(m-d)),w)},Sr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Sr.prototype.toArray=function(){return this.take(q)},kn(Sr.prototype,function(d,m){var w=/^(?:filter|find|map|reject)|While$/.test(m),R=/^(?:head|last)$/.test(m),G=re[R?"take"+(m=="last"?"Right":""):m],Z=R||/^find/.test(m);G&&(re.prototype[m]=function(){var fe=this.__wrapped__,be=R?[1]:arguments,Ie=fe instanceof Sr,ht=be[0],_t=Ie||vr(fe),Ut=function(cr){var mn=G.apply(re,Zo([cr],be));return R&&Sn?mn[0]:mn};_t&&w&&typeof ht=="function"&&ht.length!=1&&(Ie=_t=!1);var Sn=this.__chain__,wn=!!this.__actions__.length,Xn=Z&&!Sn,Mt=Ie&&!wn;if(!Z&&_t){fe=Mt?fe:new Sr(this);var Jt=d.apply(fe,be);return Jt.__actions__.push({func:Dc,args:[Ut],thisArg:h}),new _a(Jt,Sn)}return Xn&&Mt?d.apply(this,be):(Jt=this.thru(Ut),Xn?R?Jt.value()[0]:Jt.value():Jt)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(d){var m=Ue[d],w=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",R=/^(?:pop|shift)$/.test(d);re.prototype[d]=function(){var G=arguments;if(R&&!this.__chain__){var Z=this.value();return m.apply(vr(Z)?Z:[],G)}return this[w](function(fe){return m.apply(vr(fe)?fe:[],G)})}}),kn(Sr.prototype,function(d,m){var w=re[m];if(w){var R=w.name+"";un.call(Ku,R)||(Ku[R]=[]),Ku[R].push({name:m,func:w})}}),Ku[ol(h,2).name]=[{name:"wrapper",func:h}],Sr.prototype.clone=function(){var d=new Sr(this.__wrapped__);return d.__actions__=ii(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=ii(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=ii(this.__views__),d},Sr.prototype.reverse=function(){if(this.__filtered__){var d=new Sr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Sr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,w=vr(d),R=m<0,G=w?d.length:0,Z=function(kr,Bn,Qn){for(var Lo=-1,ot=Qn.length;++Lo<ot;){var Lu=Qn[Lo],di=Lu.size;switch(Lu.type){case"drop":kr+=di;break;case"dropRight":Bn-=di;break;case"take":Bn=Mi(Bn,kr+di);break;case"takeRight":kr=Mo(kr,Bn-di)}}return{start:kr,end:Bn}}(0,G,this.__views__),fe=Z.start,be=Z.end,Ie=be-fe,ht=R?be:fe-1,_t=this.__iteratees__,Ut=_t.length,Sn=0,wn=Mi(Ie,this.__takeCount__);if(!w||!R&&G==Ie&&wn==Ie)return Dp(d,this.__actions__);var Xn=[];e:for(;Ie--&&Sn<wn;){for(var Mt=-1,Jt=d[ht+=m];++Mt<Ut;){var cr=_t[Mt],mn=cr.iteratee,or=cr.type,nr=mn(Jt);if(or==2)Jt=nr;else if(!nr){if(or==1)continue e;break e}}Xn[Sn++]=Jt}return Xn},re.prototype.at=Ic,re.prototype.chain=function(){return Wo(this)},re.prototype.commit=function(){return new _a(this.value(),this.__chain__)},re.prototype.next=function(){this.__values__===h&&(this.__values__=Ct(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?h:this.__values__[this.__index__++]}},re.prototype.plant=function(d){for(var m,w=this;w instanceof xu;){var R=Wf(w);R.__index__=0,R.__values__=h,m?G.__wrapped__=R:m=R;var G=R;w=w.__wrapped__}return G.__wrapped__=d,m},re.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof Sr){var m=d;return this.__actions__.length&&(m=new Sr(this)),(m=m.reverse()).__actions__.push({func:Dc,args:[Oa],thisArg:h}),new _a(m,this.__chain__)}return this.thru(Oa)},re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=function(){return Dp(this.__wrapped__,this.__actions__)},re.prototype.first=re.prototype.head,ja&&(re.prototype[ja]=function(){return this}),re}();To._=gi,(v=(function(){return gi}).call(a,r,a,c))===h||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var s=r(7),c=r(34),v=r(33),h=r(87),g=r(62),_=r(174),E=r(28),O=s.TypeError,S=E("toPrimitive");n.exports=function(k,M){if(!v(k)||h(k))return k;var j,I=g(k,S);if(I){if(M===void 0&&(M="default"),j=c(I,k,M),!v(j)||h(j))return j;throw O("Can't convert object to primitive value")}return M===void 0&&(M="number"),_(k,M)}},function(n,a,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var s=r(35),c=r(135),v=r(50),h=r(38);n.exports=function(g,_){for(var E=c(_),O=h.f,S=v.f,k=0;k<E.length;k++){var M=E[k];s(g,M)||O(g,M,S(_,M))}}},function(n,a,r){var s=r(46),c=r(15),v=r(74),h=r(112),g=r(32),_=c([].concat);n.exports=s("Reflect","ownKeys")||function(E){var O=v.f(g(E)),S=h.f;return S?_(O,S(E)):O}},function(n,a,r){var s=r(15),c=r(35),v=r(41),h=r(137).indexOf,g=r(72),_=s([].push);n.exports=function(E,O){var S,k=v(E),M=0,j=[];for(S in k)!c(g,S)&&c(k,S)&&_(j,S);for(;O.length>M;)c(k,S=O[M++])&&(~h(j,S)||_(j,S));return j}},function(n,a,r){var s=r(41),c=r(75),v=r(45),h=function(g){return function(_,E,O){var S,k=s(_),M=v(k),j=c(O,M);if(g&&E!=E){for(;M>j;)if((S=k[j++])!=S)return!0}else for(;M>j;j++)if((g||j in k)&&k[j]===E)return g||j||0;return!g&&-1}};n.exports={includes:h(!0),indexOf:h(!1)}},function(n,a,r){var s=r(46);n.exports=s("document","documentElement")},function(n,a,r){var s=r(51),c=r(41),v=r(74).f,h=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(_){return g&&s(_)=="Window"?function(E){try{return v(E)}catch{return h(g)}}(_):v(c(_))}},function(n,a,r){var s=r(28);a.f=s},function(n,a,r){var s=r(177),c=r(35),v=r(140),h=r(38).f;n.exports=function(g){var _=s.Symbol||(s.Symbol={});c(_,g)||h(_,g,{value:v.f(g)})}},function(n,a,r){var s,c,v,h=r(18),g=r(30),_=r(60),E=r(101),O=r(42),S=r(28),k=r(71),M=S("iterator"),j=!1;[].keys&&("next"in(v=[].keys())?(c=E(E(v)))!==Object.prototype&&(s=c):j=!0),s==null||h(function(){var I={};return s[M].call(I)!==I})?s={}:k&&(s=_(s)),g(s[M])||O(s,M,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:j}},function(n,a,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var s=r(16),c=r(15),v=r(72),h=r(33),g=r(35),_=r(38).f,E=r(74),O=r(139),S=r(183),k=r(90),M=r(185),j=!1,I=k("meta"),N=0,B=function(ee){_(ee,I,{value:{objectID:"O"+N++,weakData:{}}})},q=n.exports={enable:function(){q.enable=function(){},j=!0;var ee=E.f,Y=c([].splice),Q={};Q[I]=1,ee(Q).length&&(E.f=function(z){for(var D=ee(z),V=0,X=D.length;V<X;V++)if(D[V]===I){Y(D,V,1);break}return D},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(ee,Y){if(!h(ee))return typeof ee=="symbol"?ee:(typeof ee=="string"?"S":"P")+ee;if(!g(ee,I)){if(!S(ee))return"F";if(!Y)return"E";B(ee)}return ee[I].objectID},getWeakData:function(ee,Y){if(!g(ee,I)){if(!S(ee))return!0;if(!Y)return!1;B(ee)}return ee[I].weakData},onFreeze:function(ee){return M&&j&&S(ee)&&!g(ee,I)&&B(ee),ee}};v[I]=!0},function(n,a,r){var s=r(28),c=r(80),v=s("iterator"),h=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||h[v]===g)}},function(n,a,r){var s=r(7),c=r(34),v=r(56),h=r(32),g=r(88),_=r(118),E=s.TypeError;n.exports=function(O,S){var k=arguments.length<2?_(O):S;if(v(k))return h(c(k,O));throw E(g(O)+" is not iterable")}},function(n,a,r){var s=r(34),c=r(32),v=r(62);n.exports=function(h,g,_){var E,O;c(h);try{if(!(E=v(h,"return"))){if(g==="throw")throw _;return _}E=s(E,h)}catch(S){O=!0,E=S}if(g==="throw")throw _;if(O)throw E;return c(E),_}},function(n,a,r){var s=r(30),c=r(33),v=r(102);n.exports=function(h,g,_){var E,O;return v&&s(E=g.constructor)&&E!==_&&c(O=E.prototype)&&O!==_.prototype&&v(h,O),h}},function(n,a,r){var s=r(42);n.exports=function(c,v,h){for(var g in v)s(c,g,v[g],h);return c}},function(n,a,r){var s=r(46),c=r(38),v=r(28),h=r(36),g=v("species");n.exports=function(_){var E=s(_),O=c.f;h&&E&&!E[g]&&O(E,g,{configurable:!0,get:function(){return this}})}},function(n,a,r){var s=r(15),c=r(59),v=r(39),h=r(44),g=s("".charAt),_=s("".charCodeAt),E=s("".slice),O=function(S){return function(k,M){var j,I,N=v(h(k)),B=c(M),q=N.length;return B<0||B>=q?S?"":void 0:(j=_(N,B))<55296||j>56319||B+1===q||(I=_(N,B+1))<56320||I>57343?S?g(N,B):j:S?E(N,B,B+2):I-56320+(j-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,a,r){var s=r(18),c=r(7).RegExp,v=s(function(){var _=c("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),h=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var _=c("^r","gy");return _.lastIndex=2,_.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:v}},function(n,a,r){var s=r(16),c=r(79).find,v=r(100),h="find",g=!0;h in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(_){return c(this,_,arguments.length>1?arguments[1]:void 0)}}),v(h)},function(n,a,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,a,r){var s=r(16),c=r(15),v=r(197),h=r(44),g=r(39),_=r(198),E=c("".indexOf);s({target:"String",proto:!0,forced:!_("includes")},{includes:function(O){return!!~E(g(h(this)),g(v(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(h){var g;return s(h)&&((g=h[v])!==void 0?!!g:c(h)=="RegExp")}},function(n,a,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,a,r){var s=r(15),c=r(44),v=r(39),h=r(162),g=s("".replace),_="["+h+"]",E=RegExp("^"+_+_+"*"),O=RegExp(_+_+"*$"),S=function(k){return function(M){var j=v(c(M));return 1&k&&(j=g(j,E,"")),2&k&&(j=g(j,O,"")),j}};n.exports={start:S(1),end:S(2),trim:S(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function g(N){if(r===setTimeout)return setTimeout(N,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(N,0);try{return r(N,0)}catch{try{return r.call(null,N,0)}catch{return r.call(this,N,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:h}catch{s=h}})();var _,E=[],O=!1,S=-1;function k(){O&&_&&(O=!1,_.length?E=_.concat(E):S=-1,E.length&&M())}function M(){if(!O){var N=g(k);O=!0;for(var B=E.length;B;){for(_=E,E=[];++S<B;)_&&_[S].run();S=-1,B=E.length}_=null,O=!1,function(q){if(s===clearTimeout)return clearTimeout(q);if((s===h||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(q);try{s(q)}catch{try{return s.call(null,q)}catch{return s.call(this,q)}}}(N)}}function j(N,B){this.fun=N,this.array=B}function I(){}c.nextTick=function(N){var B=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)B[q-1]=arguments[q];E.push(new j(N,B)),E.length!==1||O||g(M)},j.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=I,c.addListener=I,c.once=I,c.off=I,c.removeListener=I,c.removeAllListeners=I,c.emit=I,c.prependListener=I,c.prependOnceListener=I,c.listeners=function(N){return[]},c.binding=function(N){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(N){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(h,g){var _,E=s(h).constructor;return E===void 0||(_=s(E)[v])==null?g:c(_)}},function(n,a,r){var s=r(7),c=r(99),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a constructor")}},function(n,a,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var s=r(34),c=r(123),v=r(32),h=r(94),g=r(39),_=r(44),E=r(62),O=r(124),S=r(125);c("match",function(k,M,j){return[function(I){var N=_(this),B=I==null?void 0:E(I,k);return B?s(B,I,N):new RegExp(I)[k](g(N))},function(I){var N=v(this),B=g(I),q=j(M,N,B);if(q.done)return q.value;if(!N.global)return S(N,B);var ee=N.unicode;N.lastIndex=0;for(var Y,Q=[],z=0;(Y=S(N,B))!==null;){var D=g(Y[0]);Q[z]=D,D===""&&(N.lastIndex=O(B,h(N.lastIndex),ee)),z++}return z===0?null:Q}]})},function(n,a,r){var s,c,v,h,g=r(7),_=r(76),E=r(64),O=r(30),S=r(35),k=r(18),M=r(138),j=r(98),I=r(91),N=r(169),B=r(128),q=g.setImmediate,ee=g.clearImmediate,Y=g.process,Q=g.Dispatch,z=g.Function,D=g.MessageChannel,V=g.String,X=0,H={},de="onreadystatechange";try{s=g.location}catch{}var Ce=function(ke){if(S(H,ke)){var le=H[ke];delete H[ke],le()}},Me=function(ke){return function(){Ce(ke)}},He=function(ke){Ce(ke.data)},$e=function(ke){g.postMessage(V(ke),s.protocol+"//"+s.host)};q&&ee||(q=function(ke){var le=j(arguments,1);return H[++X]=function(){_(O(ke)?ke:z(ke),void 0,le)},c(X),X},ee=function(ke){delete H[ke]},B?c=function(ke){Y.nextTick(Me(ke))}:Q&&Q.now?c=function(ke){Q.now(Me(ke))}:D&&!N?(h=(v=new D).port2,v.port1.onmessage=He,c=E(h.postMessage,h)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!k($e)?(c=$e,g.addEventListener("message",He,!1)):c=de in I("script")?function(ke){M.appendChild(I("script")).onreadystatechange=function(){M.removeChild(this),Ce(ke)}}:function(ke){setTimeout(Me(ke),0)}),n.exports={set:q,clear:ee}},function(n,a,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,a,r){var s=r(56),c=function(v){var h,g;this.promise=new v(function(_,E){if(h!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");h=_,g=E}),this.resolve=s(h),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(s){r.d(a,"a",function(){return Y});var c=r(1);function v(D){throw new Error("[mobx-utils] "+D)}function h(D,V){V===void 0&&(V="Illegal state"),D||v(V)}var g=function(D){return D&&D!==Object.prototype&&Object.getOwnPropertyNames(D).concat(g(Object.getPrototypeOf(D))||[])},_=function(D){return function(V){var X=g(V);return X.filter(function(H,de){return X.indexOf(H)===de})}(D).filter(function(V){return V!=="constructor"&&!~V.indexOf("__")})},E="pending",O="fulfilled",S="rejected";function k(D){switch(this.state){case E:return D.pending&&D.pending(this.value);case S:return D.rejected&&D.rejected(this.value);case O:return D.fulfilled?D.fulfilled(this.value):this.value}}function M(D,V){if(h(arguments.length<=2,"fromPromise expects up to two arguments"),h(typeof D=="function"||typeof D=="object"&&D&&typeof D.then=="function","Please pass a promise or function to fromPromise"),D.isPromiseBasedObservable===!0)return D;typeof D=="function"&&(D=new Promise(D));var X=D;D.then(Object(c.k)("observableFromPromise-resolve",function(de){X.value=de,X.state=O}),Object(c.k)("observableFromPromise-reject",function(de){X.value=de,X.state=S})),X.isPromiseBasedObservable=!0,X.case=k;var H=V&&V.state===O?V.value:void 0;return Object(c.q)(X,{value:H,state:E},{},{deep:!1}),X}(function(D){D.reject=Object(c.k)("fromPromise.reject",function(V){var X=D(Promise.reject(V));return X.state=S,X.value=V,X}),D.resolve=Object(c.k)("fromPromise.resolve",function(V){V===void 0&&(V=void 0);var X=D(Promise.resolve(V));return X.state=O,X.value=V,X})})(M||(M={}));var j=function(D,V,X,H){var de,Ce=arguments.length,Me=Ce<3?V:H===null?H=Object.getOwnPropertyDescriptor(V,X):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Me=Reflect.decorate(D,V,X,H);else for(var He=D.length-1;He>=0;He--)(de=D[He])&&(Me=(Ce<3?de(Me):Ce>3?de(V,X,Me):de(V,X))||Me);return Ce>3&&Me&&Object.defineProperty(V,X,Me),Me};(function(){function D(V,X){var H=this;Object(c.G)(function(){H.current=X,H.subscription=V.subscribe(H)})}D.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},D.prototype.next=function(V){this.current=V},D.prototype.complete=function(){this.dispose()},D.prototype.error=function(V){this.current=V,this.dispose()},j([c.C.ref],D.prototype,"current",void 0),j([c.k.bound],D.prototype,"next",null),j([c.k.bound],D.prototype,"complete",null),j([c.k.bound],D.prototype,"error",null)})();var I=function(){return I=Object.assign||function(D){for(var V,X=1,H=arguments.length;X<H;X++)for(var de in V=arguments[X])Object.prototype.hasOwnProperty.call(V,de)&&(D[de]=V[de]);return D},I.apply(this,arguments)},N=function(D,V,X,H){var de,Ce=arguments.length,Me=Ce<3?V:H===null?H=Object.getOwnPropertyDescriptor(V,X):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Me=Reflect.decorate(D,V,X,H);else for(var He=D.length-1;He>=0;He--)(de=D[He])&&(Me=(Ce<3?de(Me):Ce>3?de(V,X,Me):de(V,X))||Me);return Ce>3&&Me&&Object.defineProperty(V,X,Me),Me},B=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function D(V){var X=this;this.model=V,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(H){return X.localValues.has(H)},h(Object(c.A)(V),"createViewModel expects an observable object"),_(V).forEach(function(H){if(H!==c.a&&H!=="__mobxDidRunLazyInitializers"){if(h(B.indexOf(H)===-1,"The propertyname "+H+" is reserved and cannot be used with viewModels"),Object(c.w)(V,H)){var de=Object(c.h)(V,H).derivation;X.localComputedValues.set(H,Object(c.m)(de.bind(X)))}var Ce=Object.getOwnPropertyDescriptor(V,H),Me=Ce?{enumerable:Ce.enumerable}:{};Object.defineProperty(X,H,I(I({},Me),{configurable:!0,get:function(){return Object(c.w)(V,H)?X.localComputedValues.get(H).get():X.isPropertyDirty(H)?X.localValues.get(H):X.model[H]},set:Object(c.k)(function(He){He!==X.model[H]?X.localValues.set(H,He):X.localValues.delete(H)})}))}})}Object.defineProperty(D.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),D.prototype.submit=function(){var V=this;Object(c.B)(this.localValues).forEach(function(X){var H=V.localValues.get(X),de=V.model[X];Object(c.y)(de)?de.replace(H):Object(c.z)(de)?(de.clear(),de.merge(H)):Object(c.v)(H)||(V.model[X]=H)}),this.localValues.clear()},D.prototype.reset=function(){this.localValues.clear()},D.prototype.resetProperty=function(V){this.localValues.delete(V)},N([c.m],D.prototype,"isDirty",null),N([c.m],D.prototype,"changedValues",null),N([c.k.bound],D.prototype,"submit",null),N([c.k.bound],D.prototype,"reset",null),N([c.k.bound],D.prototype,"resetProperty",null)})();function q(D){if(!D)return"ROOT";for(var V=[];D.parent;)V.push(D.path),D=D.parent;return V.reverse().join("/")}function ee(D){return Object(c.A)(D)||Object(c.y)(D)||Object(c.z)(D)}function Y(D,V){var X=new WeakMap;function H(Me){var He=X.get(Me.object);(function($e,ke){switch($e.type){case"add":de($e.newValue,ke,$e.name);break;case"update":Ce($e.oldValue),de($e.newValue,ke,$e.name||""+$e.index);break;case"remove":case"delete":Ce($e.oldValue);break;case"splice":$e.removed.map(Ce),$e.added.forEach(function(Se,Ke){return de(Se,ke,""+($e.index+Ke))});for(var le=$e.index+$e.addedCount;le<$e.object.length;le++)if(ee($e.object[le])){var he=X.get($e.object[le]);he&&(he.path=""+le)}}})(Me,He),V(Me,q(He),D)}function de(Me,He,$e){if(ee(Me)){var ke=X.get(Me);if(ke){if(ke.parent!==He||ke.path!==$e)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+q(He)+"/"+$e+"', but it already exists at '"+q(ke.parent)+"/"+ke.path+"'")}else{var le={parent:He,path:$e,dispose:Object(c.D)(Me,H)};X.set(Me,le),Object(c.p)(Me).forEach(function(he){var Se=he[0];return de(he[1],le,Se)})}}}function Ce(Me){if(ee(Me)){var He=X.get(Me);if(!He)return;X.delete(Me),He.dispose(),Object(c.L)(Me).forEach(Ce)}}return de(D,void 0,""),function(){Ce(D)}}var Q,z=(Q=function(D,V){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,H){X.__proto__=H}||function(X,H){for(var de in H)H.hasOwnProperty(de)&&(X[de]=H[de])},Q(D,V)},function(D,V){function X(){this.constructor=D}Q(D,V),D.prototype=V===null?Object.create(V):(X.prototype=V.prototype,new X)});(function(D){function V(X,H,de){var Ce=de===void 0?{}:de,Me=Ce.name,He=Me===void 0?"ogm"+(1e3*Math.random()|0):Me,$e=Ce.keyToName,ke=$e===void 0?function(Se){return""+Se}:$e,le=D.call(this)||this;le._keyToName=ke,le._groupBy=H,le._ogmInfoKey=Symbol("ogmInfo"+He),le._base=X;for(var he=0;he<X.length;he++)le._addItem(X[he]);return le._disposeBaseObserver=Object(c.D)(le._base,function(Se){if(Se.type==="splice")Object(c.J)(function(){for(var Ke=0,Ge=Se.removed;Ke<Ge.length;Ke++){var et=Ge[Ke];le._removeItem(et)}for(var gt=0,dt=Se.added;gt<dt.length;gt++){var zt=dt[gt];le._addItem(zt)}});else{if(Se.type!=="update")throw new Error("illegal state");Object(c.J)(function(){le._removeItem(Se.oldValue),le._addItem(Se.newValue)})}}),le}z(V,D),V.prototype.clear=function(){throw new Error("not supported")},V.prototype.delete=function(X){throw new Error("not supported")},V.prototype.set=function(X,H){throw new Error("not supported")},V.prototype.dispose=function(){this._disposeBaseObserver();for(var X=0;X<this._base.length;X++){var H=this._base[X];H[this._ogmInfoKey].reaction(),delete H[this._ogmInfoKey]}},V.prototype._getGroupArr=function(X){var H=D.prototype.get.call(this,X);return H===void 0&&(H=Object(c.C)([],{name:"GroupArray["+this._keyToName(X)+"]",deep:!1}),D.prototype.set.call(this,X,H)),H},V.prototype._removeFromGroupArr=function(X,H){var de=D.prototype.get.call(this,X);de.length===1?D.prototype.delete.call(this,X):(H===de.length-1||(de[H]=de[de.length-1],de[H][this._ogmInfoKey].groupArrIndex=H),de.length--)},V.prototype._addItem=function(X){var H=this,de=this._groupBy(X),Ce=this._getGroupArr(de),Me={groupByValue:de,groupArrIndex:Ce.length,reaction:Object(c.F)(function(){return H._groupBy(X)},function(He,$e){var ke=X[H._ogmInfoKey];H._removeFromGroupArr(ke.groupByValue,ke.groupArrIndex);var le=H._getGroupArr(He),he=le.length;le.push(X),ke.groupByValue=He,ke.groupArrIndex=he})};Object.defineProperty(X,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Me}),Ce.push(X)},V.prototype._removeItem=function(X){var H=X[this._ogmInfoKey];this._removeFromGroupArr(H.groupByValue,H.groupArrIndex),H.reaction(),delete X[this._ogmInfoKey]}})(c.b),function(){function D(V,X){this.base=V,this.args=X,this.closestIdx=0,this.isDisposed=!1;for(var H=this.closest=this.root=V,de=0;de<this.args.length-1&&(H=H.get(X[de]));de++)this.closest=H;this.closestIdx=de}return D.prototype.exists=function(){this.assertNotDisposed();var V=this.args.length;return this.closestIdx>=V-1&&this.closest.has(this.args[V-1])},D.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},D.prototype.set=function(V){this.assertNotDisposed();for(var X=this.args.length,H=this.closest,de=this.closestIdx;de<X-1;de++){var Ce=new Map;H.set(this.args[de],Ce),H=Ce}this.closestIdx=X-1,this.closest=H,H.set(this.args[X-1],V)},D.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var V=this.args.length;this.closest.delete(this.args[V-1]);for(var X=this.root,H=[X],de=0;de<V-1;de++)X=X.get(this.args[de]),H.push(X);for(de=H.length-1;de>0;de--)H[de].size===0&&H[de-1].delete(this.args[de-1]);this.isDisposed=!0},D.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},D}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,a,r){var s;(function(c,v,h){if(c){for(var g,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},k=1;k<20;++k)_[111+k]="f"+k;for(k=0;k<=9;++k)_[k+96]=k.toString();ee.prototype.bind=function(Y,Q,z){var D=this;return Y=Y instanceof Array?Y:[Y],D._bindMultiple.call(D,Y,Q,z),D},ee.prototype.unbind=function(Y,Q){return this.bind.call(this,Y,function(){},Q)},ee.prototype.trigger=function(Y,Q){var z=this;return z._directMap[Y+":"+Q]&&z._directMap[Y+":"+Q]({},Y),z},ee.prototype.reset=function(){var Y=this;return Y._callbacks={},Y._directMap={},Y},ee.prototype.stopCallback=function(Y,Q){if((" "+Q.className+" ").indexOf(" mousetrap ")>-1||q(Q,this.target))return!1;if("composedPath"in Y&&typeof Y.composedPath=="function"){var z=Y.composedPath()[0];z!==Y.target&&(Q=z)}return Q.tagName=="INPUT"||Q.tagName=="SELECT"||Q.tagName=="TEXTAREA"||Q.isContentEditable},ee.prototype.handleKey=function(){var Y=this;return Y._handleKey.apply(Y,arguments)},ee.addKeycodes=function(Y){for(var Q in Y)Y.hasOwnProperty(Q)&&(_[Q]=Y[Q]);g=null},ee.init=function(){var Y=ee(v);for(var Q in Y)Q.charAt(0)!=="_"&&(ee[Q]=function(z){return function(){return Y[z].apply(Y,arguments)}}(Q))},ee.init(),c.Mousetrap=ee,n.exports&&(n.exports=ee),(s=(function(){return ee}).call(a,r,a,n))===void 0||(n.exports=s)}function M(Y,Q,z){Y.addEventListener?Y.addEventListener(Q,z,!1):Y.attachEvent("on"+Q,z)}function j(Y){if(Y.type=="keypress"){var Q=String.fromCharCode(Y.which);return Y.shiftKey||(Q=Q.toLowerCase()),Q}return _[Y.which]?_[Y.which]:E[Y.which]?E[Y.which]:String.fromCharCode(Y.which).toLowerCase()}function I(Y){return Y=="shift"||Y=="ctrl"||Y=="alt"||Y=="meta"}function N(Y,Q,z){return z||(z=function(){if(!g)for(var D in g={},_)D>95&&D<112||_.hasOwnProperty(D)&&(g[_[D]]=D);return g}()[Y]?"keydown":"keypress"),z=="keypress"&&Q.length&&(z="keydown"),z}function B(Y,Q){var z,D,V,X=[];for(z=function(H){return H==="+"?["+"]:(H=H.replace(/\+{2}/g,"+plus")).split("+")}(Y),V=0;V<z.length;++V)D=z[V],S[D]&&(D=S[D]),Q&&Q!="keypress"&&O[D]&&(D=O[D],X.push("shift")),I(D)&&X.push(D);return{key:D,modifiers:X,action:Q=N(D,X,Q)}}function q(Y,Q){return Y!==null&&Y!==v&&(Y===Q||q(Y.parentNode,Q))}function ee(Y){var Q=this;if(Y=Y||v,!(Q instanceof ee))return new ee(Y);Q.target=Y,Q._callbacks={},Q._directMap={};var z,D={},V=!1,X=!1,H=!1;function de(le){le=le||{};var he,Se=!1;for(he in D)le[he]?Se=!0:D[he]=0;Se||(H=!1)}function Ce(le,he,Se,Ke,Ge,et){var gt,dt,zt,je,me=[],xe=Se.type;if(!Q._callbacks[le])return[];for(xe=="keyup"&&I(le)&&(he=[le]),gt=0;gt<Q._callbacks[le].length;++gt)if(dt=Q._callbacks[le][gt],(Ke||!dt.seq||D[dt.seq]==dt.level)&&xe==dt.action&&(xe=="keypress"&&!Se.metaKey&&!Se.ctrlKey||(zt=he,je=dt.modifiers,zt.sort().join(",")===je.sort().join(",")))){var vt=!Ke&&dt.combo==Ge,Wt=Ke&&dt.seq==Ke&&dt.level==et;(vt||Wt)&&Q._callbacks[le].splice(gt,1),me.push(dt)}return me}function Me(le,he,Se,Ke){Q.stopCallback(he,he.target||he.srcElement,Se,Ke)||le(he,Se)===!1&&(function(Ge){Ge.preventDefault?Ge.preventDefault():Ge.returnValue=!1}(he),function(Ge){Ge.stopPropagation?Ge.stopPropagation():Ge.cancelBubble=!0}(he))}function He(le){typeof le.which!="number"&&(le.which=le.keyCode);var he=j(le);he&&(le.type!="keyup"||V!==he?Q.handleKey(he,function(Se){var Ke=[];return Se.shiftKey&&Ke.push("shift"),Se.altKey&&Ke.push("alt"),Se.ctrlKey&&Ke.push("ctrl"),Se.metaKey&&Ke.push("meta"),Ke}(le),le):V=!1)}function $e(le,he,Se,Ke){function Ge(zt){return function(){H=zt,++D[le],clearTimeout(z),z=setTimeout(de,1e3)}}function et(zt){Me(Se,zt,le),Ke!=="keyup"&&(V=j(zt)),setTimeout(de,10)}D[le]=0;for(var gt=0;gt<he.length;++gt){var dt=gt+1===he.length?et:Ge(Ke||B(he[gt+1]).action);ke(he[gt],dt,Ke,le,gt)}}function ke(le,he,Se,Ke,Ge){Q._directMap[le+":"+Se]=he;var et,gt=(le=le.replace(/\s+/g," ")).split(" ");gt.length>1?$e(le,gt,he,Se):(et=B(le,Se),Q._callbacks[et.key]=Q._callbacks[et.key]||[],Ce(et.key,et.modifiers,{type:et.action},Ke,le,Ge),Q._callbacks[et.key][Ke?"unshift":"push"]({callback:he,modifiers:et.modifiers,action:et.action,seq:Ke,level:Ge,combo:le}))}Q._handleKey=function(le,he,Se){var Ke,Ge=Ce(le,he,Se),et={},gt=0,dt=!1;for(Ke=0;Ke<Ge.length;++Ke)Ge[Ke].seq&&(gt=Math.max(gt,Ge[Ke].level));for(Ke=0;Ke<Ge.length;++Ke)if(Ge[Ke].seq){if(Ge[Ke].level!=gt)continue;dt=!0,et[Ge[Ke].seq]=1,Me(Ge[Ke].callback,Se,Ge[Ke].combo,Ge[Ke].seq)}else dt||Me(Ge[Ke].callback,Se,Ge[Ke].combo);var zt=Se.type=="keypress"&&X;Se.type!=H||I(le)||zt||de(et),X=dt&&Se.type=="keydown"},Q._bindMultiple=function(le,he,Se){for(var Ke=0;Ke<le.length;++Ke)ke(le[Ke],he,Se)},M(Y,"keypress",He),M(Y,"keydown",He),M(Y,"keyup",He)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var s=r(7),c=r(34),v=r(30),h=r(33),g=s.TypeError;n.exports=function(_,E){var O,S;if(E==="string"&&v(O=_.toString)&&!h(S=c(O,_))||v(O=_.valueOf)&&!h(S=c(O,_))||E!=="string"&&v(O=_.toString)&&!h(S=c(O,_)))return S;throw g("Can't convert object to primitive value")}},function(n,a,r){var s=r(7),c=r(30),v=r(92),h=s.WeakMap;n.exports=c(h)&&/native code/.test(v(h))},function(n,a,r){var s=r(36),c=r(38),v=r(32),h=r(41),g=r(77);n.exports=s?Object.defineProperties:function(_,E){v(_);for(var O,S=h(E),k=g(E),M=k.length,j=0;M>j;)c.f(_,O=k[j++],S[O]);return _}},function(n,a,r){var s=r(7);n.exports=s},function(n,a,r){var s=r(7),c=r(96),v=r(99),h=r(33),g=r(28)("species"),_=s.Array;n.exports=function(E){var O;return c(E)&&(O=E.constructor,(v(O)&&(O===_||c(O.prototype))||h(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?_:O}},function(n,a,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),h=r(78),g=r(80),_=function(){return this};n.exports=function(E,O,S,k){var M=O+" Iterator";return E.prototype=c(s,{next:v(+!k,S)}),h(E,M,!1,!0),g[M]=_,E}},function(n,a,r){var s=r(7),c=r(30),v=s.String,h=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw h("Can't set "+v(g)+" as a prototype")}},function(n,a,r){var s=r(16),c=r(7),v=r(15),h=r(95),g=r(42),_=r(144),E=r(117),O=r(119),S=r(30),k=r(33),M=r(18),j=r(120),I=r(78),N=r(148);n.exports=function(B,q,ee){var Y=B.indexOf("Map")!==-1,Q=B.indexOf("Weak")!==-1,z=Y?"set":"add",D=c[B],V=D&&D.prototype,X=D,H={},de=function(le){var he=v(V[le]);g(V,le,le=="add"?function(Se){return he(this,Se===0?0:Se),this}:le=="delete"?function(Se){return!(Q&&!k(Se))&&he(this,Se===0?0:Se)}:le=="get"?function(Se){return Q&&!k(Se)?void 0:he(this,Se===0?0:Se)}:le=="has"?function(Se){return!(Q&&!k(Se))&&he(this,Se===0?0:Se)}:function(Se,Ke){return he(this,Se===0?0:Se,Ke),this})};if(h(B,!S(D)||!(Q||V.forEach&&!M(function(){new D().entries().next()}))))X=ee.getConstructor(q,B,Y,z),_.enable();else if(h(B,!0)){var Ce=new X,Me=Ce[z](Q?{}:-0,1)!=Ce,He=M(function(){Ce.has(1)}),$e=j(function(le){new D(le)}),ke=!Q&&M(function(){for(var le=new D,he=5;he--;)le[z](he,he);return!le.has(-0)});$e||((X=q(function(le,he){O(le,V);var Se=N(new D,le,X);return he!=null&&E(he,Se[z],{that:Se,AS_ENTRIES:Y}),Se})).prototype=V,V.constructor=X),(He||ke)&&(de("delete"),de("has"),Y&&de("get")),(ke||Me)&&de(z),Q&&V.clear&&delete V.clear}return H[B]=X,s({global:!0,forced:X!=D},H),I(X,B),Q||ee.setStrong(X,B,Y),X}},function(n,a,r){var s=r(18),c=r(33),v=r(51),h=r(184),g=Object.isExtensible,_=s(function(){});n.exports=_||h?function(E){return!!c(E)&&(!h||v(E)!="ArrayBuffer")&&(!g||g(E))}:g},function(n,a,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var s=r(38).f,c=r(60),v=r(149),h=r(64),g=r(119),_=r(117),E=r(116),O=r(150),S=r(36),k=r(144).fastKey,M=r(58),j=M.set,I=M.getterFor;n.exports={getConstructor:function(N,B,q,ee){var Y=N(function(X,H){g(X,Q),j(X,{type:B,index:c(null),first:void 0,last:void 0,size:0}),S||(X.size=0),H!=null&&_(H,X[ee],{that:X,AS_ENTRIES:q})}),Q=Y.prototype,z=I(B),D=function(X,H,de){var Ce,Me,He=z(X),$e=V(X,H);return $e?$e.value=de:(He.last=$e={index:Me=k(H,!0),key:H,value:de,previous:Ce=He.last,next:void 0,removed:!1},He.first||(He.first=$e),Ce&&(Ce.next=$e),S?He.size++:X.size++,Me!=="F"&&(He.index[Me]=$e)),X},V=function(X,H){var de,Ce=z(X),Me=k(H);if(Me!=="F")return Ce.index[Me];for(de=Ce.first;de;de=de.next)if(de.key==H)return de};return v(Q,{clear:function(){for(var X=z(this),H=X.index,de=X.first;de;)de.removed=!0,de.previous&&(de.previous=de.previous.next=void 0),delete H[de.index],de=de.next;X.first=X.last=void 0,S?X.size=0:this.size=0},delete:function(X){var H=this,de=z(H),Ce=V(H,X);if(Ce){var Me=Ce.next,He=Ce.previous;delete de.index[Ce.index],Ce.removed=!0,He&&(He.next=Me),Me&&(Me.previous=He),de.first==Ce&&(de.first=Me),de.last==Ce&&(de.last=He),S?de.size--:H.size--}return!!Ce},forEach:function(X){for(var H,de=z(this),Ce=h(X,arguments.length>1?arguments[1]:void 0);H=H?H.next:de.first;)for(Ce(H.value,H.key,this);H&&H.removed;)H=H.previous},has:function(X){return!!V(this,X)}}),v(Q,q?{get:function(X){var H=V(this,X);return H&&H.value},set:function(X,H){return D(this,X===0?0:X,H)}}:{add:function(X){return D(this,X=X===0?0:X,X)}}),S&&s(Q,"size",{get:function(){return z(this).size}}),Y},setStrong:function(N,B,q){var ee=B+" Iterator",Y=I(B),Q=I(ee);E(N,B,function(z,D){j(this,{type:ee,target:z,state:Y(z),kind:D,last:void 0})},function(){for(var z=Q(this),D=z.kind,V=z.last;V&&V.removed;)V=V.previous;return z.target&&(z.last=V=V?V.next:z.state.first)?D=="keys"?{value:V.key,done:!1}:D=="values"?{value:V.value,done:!1}:{value:[V.key,V.value],done:!1}:(z.target=void 0,{value:void 0,done:!0})},q?"entries":"values",!q,!0),O(B)}}},function(n,a,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var s=r(7),c=r(64),v=r(34),h=r(40),g=r(189),_=r(145),E=r(99),O=r(45),S=r(63),k=r(146),M=r(118),j=s.Array;n.exports=function(I){var N=h(I),B=E(this),q=arguments.length,ee=q>1?arguments[1]:void 0,Y=ee!==void 0;Y&&(ee=c(ee,q>2?arguments[2]:void 0));var Q,z,D,V,X,H,de=M(N),Ce=0;if(!de||this==j&&_(de))for(Q=O(N),z=B?new this(Q):j(Q);Q>Ce;Ce++)H=Y?ee(N[Ce],Ce):N[Ce],S(z,Ce,H);else for(X=(V=k(N,de)).next,z=B?new this:[];!(D=v(X,V)).done;Ce++)H=Y?g(V,ee,[D.value,Ce],!0):D.value,S(z,Ce,H);return z.length=Ce,z}},function(n,a,r){var s=r(32),c=r(147);n.exports=function(v,h,g,_){try{return _?h(s(g)[0],g[1]):h(g)}catch(E){c(v,"throw",E)}}},function(n,a,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,a,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,a,r){var s=r(16),c=r(15),v=r(56),h=r(40),g=r(45),_=r(39),E=r(18),O=r(193),S=r(121),k=r(194),M=r(195),j=r(70),I=r(196),N=[],B=c(N.sort),q=c(N.push),ee=E(function(){N.sort(void 0)}),Y=E(function(){N.sort(null)}),Q=S("sort"),z=!E(function(){if(j)return j<70;if(!(k&&k>3)){if(M)return!0;if(I)return I<603;var D,V,X,H,de="";for(D=65;D<76;D++){switch(V=String.fromCharCode(D),D){case 66:case 69:case 70:case 72:X=3;break;case 68:case 71:X=4;break;default:X=2}for(H=0;H<47;H++)N.push({k:V+H,v:X})}for(N.sort(function(Ce,Me){return Me.v-Ce.v}),H=0;H<N.length;H++)V=N[H].k.charAt(0),de.charAt(de.length-1)!==V&&(de+=V);return de!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:ee||!Y||!Q||!z},{sort:function(D){D!==void 0&&v(D);var V=h(this);if(z)return D===void 0?B(V):B(V,D);var X,H,de=[],Ce=g(V);for(H=0;H<Ce;H++)H in V&&q(de,V[H]);for(O(de,function(Me){return function(He,$e){return $e===void 0?-1:He===void 0?1:Me!==void 0?+Me(He,$e)||0:_(He)>_($e)?1:-1}}(D)),X=de.length,H=0;H<X;)V[H]=de[H++];for(;H<Ce;)delete V[H++];return V}})},function(n,a,r){var s=r(114),c=Math.floor,v=function(_,E){var O=_.length,S=c(O/2);return O<8?h(_,E):g(_,v(s(_,0,S),E),v(s(_,S),E),E)},h=function(_,E){for(var O,S,k=_.length,M=1;M<k;){for(S=M,O=_[M];S&&E(_[S-1],O)>0;)_[S]=_[--S];S!==M++&&(_[S]=O)}return _},g=function(_,E,O,S){for(var k=E.length,M=O.length,j=0,I=0;j<k||I<M;)_[j+I]=j<k&&I<M?S(E[j],O[I])<=0?E[j++]:O[I++]:j<k?E[j++]:O[I++];return _};n.exports=v},function(n,a,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,a,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,a,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,a,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(h){if(c(h))throw v("The method doesn't accept regular expressions");return h}},function(n,a,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,a,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(h){return c(function(){return!!v[h]()||"​᠎"[h]()!=="​᠎"||s&&v[h].name!==h})}},function(n,a,r){var s=r(15),c=r(40),v=Math.floor,h=s("".charAt),g=s("".replace),_=s("".slice),E=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(S,k,M,j,I,N){var B=M+S.length,q=j.length,ee=O;return I!==void 0&&(I=c(I),ee=E),g(N,ee,function(Y,Q){var z;switch(h(Q,0)){case"$":return"$";case"&":return S;case"`":return _(k,0,M);case"'":return _(k,B);case"<":z=I[_(Q,1,-1)];break;default:var D=+Q;if(D===0)return Y;if(D>q){var V=v(D/10);return V===0?Y:V<=q?j[V-1]===void 0?h(Q,1):j[V-1]+h(Q,1):Y}z=j[D-1]}return z===void 0?"":z})}},function(n,a,r){var s=r(36),c=r(15),v=r(34),h=r(18),g=r(77),_=r(112),E=r(84),O=r(40),S=r(85),k=Object.assign,M=Object.defineProperty,j=c([].concat);n.exports=!k||h(function(){if(s&&k({b:1},k(M({},"a",{enumerable:!0,get:function(){M(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var I={},N={},B=Symbol(),q="abcdefghijklmnopqrst";return I[B]=7,q.split("").forEach(function(ee){N[ee]=ee}),k({},I)[B]!=7||g(k({},N)).join("")!=q})?function(I,N){for(var B=O(I),q=arguments.length,ee=1,Y=_.f,Q=E.f;q>ee;)for(var z,D=S(arguments[ee++]),V=Y?j(g(D),Y(D)):g(D),X=V.length,H=0;X>H;)z=V[H++],s&&!v(Q,D,z)||(B[z]=D[z]);return B}:k},function(n,a,r){var s=r(7),c=r(15),v=r(56),h=r(33),g=r(35),_=r(98),E=s.Function,O=c([].concat),S=c([].join),k={},M=function(j,I,N){if(!g(k,I)){for(var B=[],q=0;q<I;q++)B[q]="a["+q+"]";k[I]=E("C,a","return new C("+S(B,",")+")")}return k[I](j,N)};n.exports=E.bind||function(j){var I=v(this),N=I.prototype,B=_(arguments,1),q=function(){var ee=O(B,_(arguments));return this instanceof q?M(I,ee.length,ee):I.apply(j,ee)};return h(N)&&(q.prototype=N),q}},function(n,a,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,a,r){var s=r(15),c=r(44),v=r(39),h=/"/g,g=s("".replace);n.exports=function(_,E,O,S){var k=v(c(_)),M="<"+E;return O!==""&&(M+=" "+O+'="'+g(v(S),h,"&quot;")+'"'),M+">"+k+"</"+E+">"}},function(n,a,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var s,c,v,h,g=r(16),_=r(71),E=r(7),O=r(46),S=r(34),k=r(209),M=r(42),j=r(149),I=r(102),N=r(78),B=r(150),q=r(56),ee=r(30),Y=r(33),Q=r(119),z=r(92),D=r(117),V=r(120),X=r(164),H=r(168).set,de=r(210),Ce=r(213),Me=r(214),He=r(170),$e=r(215),ke=r(58),le=r(95),he=r(28),Se=r(216),Ke=r(128),Ge=r(70),et=he("species"),gt="Promise",dt=ke.getterFor(gt),zt=ke.set,je=ke.getterFor(gt),me=k&&k.prototype,xe=k,vt=me,Wt=E.TypeError,Ot=E.document,rn=E.process,vn=He.f,An=vn,pn=!!(Ot&&Ot.createEvent&&E.dispatchEvent),ft=ee(E.PromiseRejectionEvent),En="unhandledrejection",Le=!1,yn=le(gt,function(){var Re=z(xe),it=Re!==String(xe);if(!it&&Ge===66||_&&!vt.finally)return!0;if(Ge>=51&&/native code/.test(Re))return!1;var Qt=new xe(function(Pn){Pn(1)}),qt=function(Pn){Pn(function(){},function(){})};return(Qt.constructor={})[et]=qt,!(Le=Qt.then(function(){})instanceof qt)||!it&&Se&&!ft}),qn=yn||!V(function(Re){xe.all(Re).catch(function(){})}),ne=function(Re){var it;return!(!Y(Re)||!ee(it=Re.then))&&it},Fn=function(Re,it){if(!Re.notified){Re.notified=!0;var Qt=Re.reactions;de(function(){for(var qt=Re.value,Pn=Re.state==1,mr=0;Qt.length>mr;){var qo,li,Co,Bo=Qt[mr++],On=Pn?Bo.ok:Bo.fail,$n=Bo.resolve,Hn=Bo.reject,rr=Bo.domain;try{On?(Pn||(Re.rejection===2&&jn(Re),Re.rejection=1),On===!0?qo=qt:(rr&&rr.enter(),qo=On(qt),rr&&(rr.exit(),Co=!0)),qo===Bo.promise?Hn(Wt("Promise-chain cycle")):(li=ne(qo))?S(li,qo,$n,Hn):$n(qo)):Hn(qt)}catch(zr){rr&&!Co&&rr.exit(),Hn(zr)}}Re.reactions=[],Re.notified=!1,it&&!Re.rejection&&Lr(Re)})}},wr=function(Re,it,Qt){var qt,Pn;pn?((qt=Ot.createEvent("Event")).promise=it,qt.reason=Qt,qt.initEvent(Re,!1,!0),E.dispatchEvent(qt)):qt={promise:it,reason:Qt},!ft&&(Pn=E["on"+Re])?Pn(qt):Re===En&&Me("Unhandled promise rejection",Qt)},Lr=function(Re){S(H,E,function(){var it,Qt=Re.facade,qt=Re.value;if(Kr(Re)&&(it=$e(function(){Ke?rn.emit("unhandledRejection",qt,Qt):wr(En,Qt,qt)}),Re.rejection=Ke||Kr(Re)?2:1,it.error))throw it.value})},Kr=function(Re){return Re.rejection!==1&&!Re.parent},jn=function(Re){S(H,E,function(){var it=Re.facade;Ke?rn.emit("rejectionHandled",it):wr("rejectionhandled",it,Re.value)})},Ao=function(Re,it,Qt){return function(qt){Re(it,qt,Qt)}},Ee=function(Re,it,Qt){Re.done||(Re.done=!0,Qt&&(Re=Qt),Re.value=it,Re.state=2,Fn(Re,!0))},Xe=function(Re,it,Qt){if(!Re.done){Re.done=!0,Qt&&(Re=Qt);try{if(Re.facade===it)throw Wt("Promise can't be resolved itself");var qt=ne(it);qt?de(function(){var Pn={done:!1};try{S(qt,it,Ao(Xe,Pn,Re),Ao(Ee,Pn,Re))}catch(mr){Ee(Pn,mr,Re)}}):(Re.value=it,Re.state=1,Fn(Re,!1))}catch(Pn){Ee({done:!1},Pn,Re)}}};if(yn&&(vt=(xe=function(Re){Q(this,vt),q(Re),S(s,this);var it=dt(this);try{Re(Ao(Xe,it),Ao(Ee,it))}catch(Qt){Ee(it,Qt)}}).prototype,(s=function(Re){zt(this,{type:gt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=j(vt,{then:function(Re,it){var Qt=je(this),qt=Qt.reactions,Pn=vn(X(this,xe));return Pn.ok=!ee(Re)||Re,Pn.fail=ee(it)&&it,Pn.domain=Ke?rn.domain:void 0,Qt.parent=!0,qt[qt.length]=Pn,Qt.state!=0&&Fn(Qt,!1),Pn.promise},catch:function(Re){return this.then(void 0,Re)}}),c=function(){var Re=new s,it=dt(Re);this.promise=Re,this.resolve=Ao(Xe,it),this.reject=Ao(Ee,it)},He.f=vn=function(Re){return Re===xe||Re===v?new c(Re):An(Re)},!_&&ee(k)&&me!==Object.prototype)){h=me.then,Le||(M(me,"then",function(Re,it){var Qt=this;return new xe(function(qt,Pn){S(h,Qt,qt,Pn)}).then(Re,it)},{unsafe:!0}),M(me,"catch",vt.catch,{unsafe:!0}));try{delete me.constructor}catch{}I&&I(me,vt)}g({global:!0,wrap:!0,forced:yn},{Promise:xe}),N(xe,gt,!1,!0),B(gt),v=O(gt),g({target:gt,stat:!0,forced:yn},{reject:function(Re){var it=vn(this);return S(it.reject,void 0,Re),it.promise}}),g({target:gt,stat:!0,forced:_||yn},{resolve:function(Re){return Ce(_&&this===v?xe:this,Re)}}),g({target:gt,stat:!0,forced:qn},{all:function(Re){var it=this,Qt=vn(it),qt=Qt.resolve,Pn=Qt.reject,mr=$e(function(){var qo=q(it.resolve),li=[],Co=0,Bo=1;D(Re,function(On){var $n=Co++,Hn=!1;Bo++,S(qo,it,On).then(function(rr){Hn||(Hn=!0,li[$n]=rr,--Bo||qt(li))},Pn)}),--Bo||qt(li)});return mr.error&&Pn(mr.value),Qt.promise},race:function(Re){var it=this,Qt=vn(it),qt=Qt.reject,Pn=$e(function(){var mr=q(it.resolve);D(Re,function(qo){S(mr,it,qo).then(Qt.resolve,qt)})});return Pn.error&&qt(Pn.value),Qt.promise}})},function(n,a,r){var s=r(7);n.exports=s.Promise},function(n,a,r){var s,c,v,h,g,_,E,O,S=r(7),k=r(64),M=r(50).f,j=r(168).set,I=r(169),N=r(211),B=r(212),q=r(128),ee=S.MutationObserver||S.WebKitMutationObserver,Y=S.document,Q=S.process,z=S.Promise,D=M(S,"queueMicrotask"),V=D&&D.value;V||(s=function(){var X,H;for(q&&(X=Q.domain)&&X.exit();c;){H=c.fn,c=c.next;try{H()}catch(de){throw c?h():v=void 0,de}}v=void 0,X&&X.enter()},I||q||B||!ee||!Y?!N&&z&&z.resolve?((E=z.resolve(void 0)).constructor=z,O=k(E.then,E),h=function(){O(s)}):q?h=function(){Q.nextTick(s)}:(j=k(j,S),h=function(){j(s)}):(g=!0,_=Y.createTextNode(""),new ee(s).observe(_,{characterData:!0}),h=function(){_.data=g=!g})),n.exports=V||function(X){var H={fn:X,next:void 0};v&&(v.next=H),c||(c=H,h()),v=H}},function(n,a,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,a,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,a,r){var s=r(32),c=r(33),v=r(170);n.exports=function(h,g){if(s(h),c(g)&&g.constructor===h)return g;var _=v.f(h);return(0,_.resolve)(g),_.promise}},function(n,a,r){var s=r(7);n.exports=function(c,v){var h=s.console;h&&h.error&&(arguments.length==1?h.error(c):h.error(c,v))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var s=r(40),c=r(75),v=r(45);n.exports=function(h){for(var g=s(this),_=v(g),E=arguments.length,O=c(E>1?arguments[1]:void 0,_),S=E>2?arguments[2]:void 0,k=S===void 0?_:c(S,_);k>O;)g[O++]=h;return g}},function(n,a,r){var s=r(16),c=r(7),v=r(15),h=r(59),g=r(160),_=r(219),E=r(18),O=c.RangeError,S=c.String,k=Math.floor,M=v(_),j=v("".slice),I=v(1 .toFixed),N=function(Y,Q,z){return Q===0?z:Q%2==1?N(Y,Q-1,z*Y):N(Y*Y,Q/2,z)},B=function(Y,Q,z){for(var D=-1,V=z;++D<6;)V+=Q*Y[D],Y[D]=V%1e7,V=k(V/1e7)},q=function(Y,Q){for(var z=6,D=0;--z>=0;)D+=Y[z],Y[z]=k(D/Q),D=D%Q*1e7},ee=function(Y){for(var Q=6,z="";--Q>=0;)if(z!==""||Q===0||Y[Q]!==0){var D=S(Y[Q]);z=z===""?D:z+M("0",7-D.length)+D}return z};s({target:"Number",proto:!0,forced:E(function(){return I(8e-5,3)!=="0.000"||I(.9,0)!=="1"||I(1.255,2)!=="1.25"||I(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!E(function(){I({})})},{toFixed:function(Y){var Q,z,D,V,X=g(this),H=h(Y),de=[0,0,0,0,0,0],Ce="",Me="0";if(H<0||H>20)throw O("Incorrect fraction digits");if(X!=X)return"NaN";if(X<=-1e21||X>=1e21)return S(X);if(X<0&&(Ce="-",X=-X),X>1e-21)if(z=(Q=function(He){for(var $e=0,ke=He;ke>=4096;)$e+=12,ke/=4096;for(;ke>=2;)$e+=1,ke/=2;return $e}(X*N(2,69,1))-69)<0?X*N(2,-Q,1):X/N(2,Q,1),z*=4503599627370496,(Q=52-Q)>0){for(B(de,0,z),D=H;D>=7;)B(de,1e7,0),D-=7;for(B(de,N(10,D,1),0),D=Q-1;D>=23;)q(de,1<<23),D-=23;q(de,1<<D),B(de,1,1),q(de,2),Me=ee(de)}else B(de,0,z),B(de,1<<-Q,0),Me=ee(de)+M("0",H);return Me=H>0?Ce+((V=Me.length)<=H?"0."+M("0",H-V)+Me:j(Me,0,V-H)+"."+j(Me,V-H)):Ce+Me}})},function(n,a,r){var s=r(7),c=r(59),v=r(39),h=r(44),g=s.RangeError;n.exports=function(_){var E=v(h(this)),O="",S=c(_);if(S<0||S==1/0)throw g("Wrong number of repetitions");for(;S>0;(S>>>=1)&&(E+=E))1&S&&(O+=E);return O}},function(n,a,r){var s=r(36),c=r(15),v=r(77),h=r(41),g=c(r(84).f),_=c([].push),E=function(O){return function(S){for(var k,M=h(S),j=v(M),I=j.length,N=0,B=[];I>N;)k=j[N++],s&&!g(M,k)||_(B,O?[k,M[k]]:M[k]);return B}};n.exports={entries:E(!0),values:E(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return Yl}),r.d(a,"LogicFlow",function(){return i0}),r.d(a,"h",function(){return Le.g}),r.d(a,"LogicFlowUtil",function(){return s}),r.d(a,"BaseNode",function(){return Wc}),r.d(a,"RectNode",function(){return K_}),r.d(a,"CircleNode",function(){return eb}),r.d(a,"PolygonNode",function(){return ib}),r.d(a,"DiamondNode",function(){return sb}),r.d(a,"EllipseNode",function(){return hb}),r.d(a,"TextNode",function(){return mb}),r.d(a,"HtmlNode",function(){return wb}),r.d(a,"BaseEdge",function(){return Ov}),r.d(a,"LineEdge",function(){return Db}),r.d(a,"PolylineEdge",function(){return Bb}),r.d(a,"BezierEdge",function(){return Wb}),r.d(a,"Arrow",function(){return lj}),r.d(a,"BaseEdgeModel",function(){return Hf}),r.d(a,"BezierEdgeModel",function(){return n_}),r.d(a,"LineEdgeModel",function(){return bi}),r.d(a,"PolylineEdgeModel",function(){return Fc}),r.d(a,"BaseNodeModel",function(){return Vc}),r.d(a,"CircleNodeModel",function(){return l_}),r.d(a,"DiamondNodeModel",function(){return p_}),r.d(a,"EllipseNodeModel",function(){return m_}),r.d(a,"PolygonNodeModel",function(){return O_}),r.d(a,"RectNodeModel",function(){return T_}),r.d(a,"TextNodeModel",function(){return N_}),r.d(a,"HtmlNodeModel",function(){return C_}),r.d(a,"EditConfigModel",function(){return Sf}),r.d(a,"GraphModel",function(){return vw}),r.d(a,"SnaplineModel",function(){return QE}),r.d(a,"Keyboard",function(){return $O}),r.d(a,"get",function(){return $w}),r.d(a,"defaults",function(){return Uw}),r.d(a,"ElementState",function(){return Ur}),r.d(a,"ModelType",function(){return _r}),r.d(a,"ElementType",function(){return eo}),r.d(a,"EventType",function(){return kn}),r.d(a,"formateAnchorConnectValidateData",function(){return ju});var s={};r.r(s),r.d(s,"createUuid",function(){return Ua}),r.d(s,"refreshGraphId",function(){return al}),r.d(s,"StepDrag",function(){return J}),r.d(s,"setupEdgeModel",function(){return bt}),r.d(s,"isBboxOverLapping",function(){return We}),r.d(s,"filterRepeatPoints",function(){return ut}),r.d(s,"getSimplePolyline",function(){return Lt}),r.d(s,"getExpandedBBox",function(){return Kt}),r.d(s,"pointDirection",function(){return xt}),r.d(s,"getExpandedBBoxPoint",function(){return Zt}),r.d(s,"mergeBBox",function(){return At}),r.d(s,"getBBoxOfPoints",function(){return Vt}),r.d(s,"getPointsFromBBox",function(){return wt}),r.d(s,"isPointOutsideBBox",function(){return Xt}),r.d(s,"getBBoxXCrossPoints",function(){return Tn}),r.d(s,"getBBoxYCrossPoints",function(){return Vn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return Dt}),r.d(s,"estimateDistance",function(){return Tt}),r.d(s,"costByPoints",function(){return Et}),r.d(s,"heuristicCostEstimate",function(){return Rn}),r.d(s,"rebuildPath",function(){return er}),r.d(s,"removeClosePointFromOpenList",function(){return ln}),r.d(s,"isSegmentsIntersected",function(){return Jn}),r.d(s,"isSegmentCrossingBBox",function(){return Gn}),r.d(s,"getNextNeighborPoints",function(){return tr}),r.d(s,"pathFinder",function(){return yr}),r.d(s,"getBoxByOriginNode",function(){return wo}),r.d(s,"pointFilter",function(){return Ro}),r.d(s,"getPolylinePoints",function(){return lr}),r.d(s,"getLongestEdge",function(){return Io}),r.d(s,"isSegmentsInNode",function(){return qr}),r.d(s,"isSegmentsCrossNode",function(){return Eo}),r.d(s,"getCrossPointInRect",function(){return jo}),r.d(s,"segmentDirection",function(){return vo}),r.d(s,"points2PointsList",function(){return so}),r.d(s,"getSimplePoints",function(){return Xo}),r.d(s,"getBytesLength",function(){return Kn}),r.d(s,"getTextWidth",function(){return Ar}),r.d(s,"getAppendAttributes",function(){return Nn}),r.d(s,"getBezierControlPoints",function(){return sr}),r.d(s,"getBezierPoints",function(){return Wn}),r.d(s,"getEndTangent",function(){return Aa}),r.d(s,"getClosestPointOfPolyline",function(){return Iu}),r.d(s,"pickEdgeConfig",function(){return ve}),r.d(s,"twoPointDistance",function(){return nt}),r.d(s,"createEdgeGenerator",function(){return qe}),r.d(s,"snapToGrid",function(){return uu}),r.d(s,"getGridOffset",function(){return vs}),r.d(s,"sampleCubic",function(){return _e}),r.d(s,"getThetaOfVector",function(){return pt}),r.d(s,"degrees",function(){return Ze}),r.d(s,"Vector",function(){return Z}),r.d(s,"Point",function(){return fe}),r.d(s,"Matrix",function(){return Ps}),r.d(s,"RotateMatrix",function(){return qd}),r.d(s,"ScaleMatrix",function(){return pv}),r.d(s,"TranslateMatrix",function(){return ks});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var h=r(43),g=Object(h.b)("observerBatching");function _(i){i()}var E=!1;function O(){return E}function S(i){return Object(c.t)(i)}var k,M=1e4,j=new Set;function I(){k===void 0&&(k=setTimeout(N,1e4))}function N(){k=void 0;var i=Date.now();j.forEach(function(o){var u=o.current;u&&i>=u.cleanAt&&(u.reaction.dispose(),o.current=null,j.delete(o))}),j.size>0&&I()}var B=!1,q=[],ee={};function Y(i){return"observer"+i}function Q(i,o,u){o===void 0&&(o="observed"),u===void 0&&(u=ee),O();var l,p=function(P){return function(){B?q.push(P):P()}}((u.useForceUpdate||h.d)()),f=v.d.useRef(null);if(!f.current){var y=new c.c(Y(o),function(){b.mounted?p():(y.dispose(),f.current=null)}),b=function(P){return{cleanAt:Date.now()+M,reaction:P}}(y);f.current=b,l=f,j.add(l),I()}var x=f.current.reaction;return v.d.useDebugValue(x,S),v.d.useEffect(function(){var P;return P=f,j.delete(P),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(Y(o),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(P){B=!0,q=[];try{var C=P();B=!1;var W=q.length>0?q:void 0;return v.d.useLayoutEffect(function(){W&&W.forEach(function(K){return K()})},[W]),C}finally{B=!1}}(function(){var P,C;if(x.track(function(){try{P=i()}catch(W){C=W}}),C)throw C;return P})}var z=function(){return z=Object.assign||function(i){for(var o,u=1,l=arguments.length;u<l;u++)for(var p in o=arguments[u])Object.prototype.hasOwnProperty.call(o,p)&&(i[p]=o[p]);return i},z.apply(this,arguments)};function D(i,o){var u,l,p,f=z({forwardRef:!1},o),y=i.displayName||i.name,b=function(x,P){return Q(function(){return i(x,P)},y)};return b.displayName=y,u=f.forwardRef?Object(v.f)(Object(v.e)(b)):Object(v.f)(b),l=i,p=u,Object.keys(l).forEach(function(x){V[x]||Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(l,x))}),u.displayName=y,u}var V={$$typeof:!0,render:!0,compare:!0,type:!0};function X(i){var o=i.children,u=i.render,l=o||u;return typeof l!="function"?null:Q(l)}function H(i,o,u,l,p){var f=o==="children"?"render":"children",y=typeof i[o]=="function",b=typeof i[f]=="function";return y&&b?new Error("MobX Observer: Do not use children and render in the same time in`"+u):y||b?null:new Error("Invalid prop `"+p+"` of type `"+typeof i[o]+"` supplied to `"+u+"`, expected `function`.")}X.propTypes={children:H,render:H},X.displayName="Observer";var de;(de=v.g)||(de=_),Object(c.n)({reactionScheduler:de}),Object(h.a)()[g]=!0;var Ce=0,Me={};function He(i){return Me[i]||(Me[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var u="__$mobx-react "+o+" ("+Ce+")";return Ce++,u}(i)),Me[i]}function $e(i,o){if(ke(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),l=Object.keys(o);if(u.length!==l.length)return!1;for(var p=0;p<u.length;p++)if(!Object.hasOwnProperty.call(o,u[p])||!ke(i[u[p]],o[u[p]]))return!1;return!0}function ke(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function le(i,o,u){Object.hasOwnProperty.call(i,o)?i[o]=u:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:u})}var he=He("patchMixins"),Se=He("patchedDefinition");function Ke(i,o){for(var u=this,l=arguments.length,p=new Array(l>2?l-2:0),f=2;f<l;f++)p[f-2]=arguments[f];o.locks++;try{var y;return i!=null&&(y=i.apply(this,p)),y}finally{o.locks--,o.locks===0&&o.methods.forEach(function(b){b.apply(u,p)})}}function Ge(i,o){return function(){for(var u=arguments.length,l=new Array(u),p=0;p<u;p++)l[p]=arguments[p];Ke.call.apply(Ke,[this,i,o].concat(l))}}function et(i,o,u){var l=function(b,x){var P=b[he]=b[he]||{},C=P[x]=P[x]||{};return C.locks=C.locks||0,C.methods=C.methods||[],C}(i,o);l.methods.indexOf(u)<0&&l.methods.push(u);var p=Object.getOwnPropertyDescriptor(i,o);if(!p||!p[Se]){var f=i[o],y=gt(i,o,p?p.enumerable:void 0,l,f);Object.defineProperty(i,o,y)}}function gt(i,o,u,l,p){var f,y=Ge(p,l);return(f={})[Se]=!0,f.get=function(){return y},f.set=function(b){if(this===i)y=Ge(b,l);else{var x=gt(this,o,u,l,b);Object.defineProperty(this,o,x)}},f.configurable=!0,f.enumerable=u,f}var dt=c.a||"$mobx",zt=He("isMobXReactObserver"),je=He("isUnmounted"),me=He("skipRender"),xe=He("isForcingUpdate");function vt(i){var o=i.prototype;if(i[zt]?Wt(o):i[zt]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==v.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=rn;vn(o,"props"),vn(o,"state");var u=o.render;return o.render=function(){return Ot.call(this,u)},et(o,"componentWillUnmount",function(){var l;(l=this.render[dt])===null||l===void 0||l.dispose(),this[je]=!0,!this.render[dt]&&Wt(this)}),i}function Wt(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function Ot(i){var o=this;le(this,me,!1),le(this,xe,!1);var u=Wt(this),l=i.bind(this),p=!1,f=new c.c(u+".render()",function(){if(!p&&(p=!0,o[je]!==!0)){var b=!0;try{le(o,xe,!0),o[me]||v.a.prototype.forceUpdate.call(o),b=!1}finally{le(o,xe,!1),b&&f.dispose()}}});function y(){p=!1;var b=void 0,x=void 0;if(f.track(function(){try{x=Object(c.d)(!1,l)}catch(P){b=P}}),b)throw b;return x}return f.reactComponent=this,y[dt]=f,this.render=y,y.call(this)}function rn(i,o){return this.state!==o||!$e(this.props,i)}function vn(i,o){var u=He("reactProp_"+o+"_valueHolder"),l=He("reactProp_"+o+"_atomHolder");function p(){return this[l]||le(this,l,Object(c.o)("reactive "+o)),this[l]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[u]},set:function(f){this[xe]||$e(this[u],f)?le(this,u,f):(le(this,u,f),le(this,me,!0),p.call(this).reportChanged(),le(this,me,!1))}})}var An=typeof Symbol=="function"&&Symbol.for,pn=An?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(i){return null}).$$typeof,ft=An?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(i){return null}).$$typeof;function En(i){if(i.isMobxInjector,ft&&i.$$typeof===ft)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&i.$$typeof===pn){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var u=arguments;return Object(v.c)(X,null,function(){return o.apply(void 0,u)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(v.a,i)?vt(i):D(i)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Le=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var yn=function(i,o){for(var u=-1,l=i==null?0:i.length,p=Array(l);++u<l;)p[u]=o(i[u],u,i);return p},qn=function(){this.__data__=[],this.size=0},ne=function(i,o){return i===o||i!=i&&o!=o},Fn=function(i,o){for(var u=i.length;u--;)if(ne(i[u][0],o))return u;return-1},wr=Array.prototype.splice,Lr=function(i){var o=this.__data__,u=Fn(o,i);return!(u<0)&&(u==o.length-1?o.pop():wr.call(o,u,1),--this.size,!0)},Kr=function(i){var o=this.__data__,u=Fn(o,i);return u<0?void 0:o[u][1]},jn=function(i){return Fn(this.__data__,i)>-1},Ao=function(i,o){var u=this.__data__,l=Fn(u,i);return l<0?(++this.size,u.push([i,o])):u[l][1]=o,this};function Ee(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var l=i[o];this.set(l[0],l[1])}}Ee.prototype.clear=qn,Ee.prototype.delete=Lr,Ee.prototype.get=Kr,Ee.prototype.has=jn,Ee.prototype.set=Ao;var Xe=Ee,Re=function(){this.__data__=new Xe,this.size=0},it=function(i){var o=this.__data__,u=o.delete(i);return this.size=o.size,u},Qt=function(i){return this.__data__.get(i)},qt=function(i){return this.__data__.has(i)},Pn=r(31),mr=Pn.a.Symbol,qo=Object.prototype,li=qo.hasOwnProperty,Co=qo.toString,Bo=mr?mr.toStringTag:void 0,On=function(i){var o=li.call(i,Bo),u=i[Bo];try{i[Bo]=void 0;var l=!0}catch{}var p=Co.call(i);return l&&(o?i[Bo]=u:delete i[Bo]),p},$n=Object.prototype.toString,Hn=function(i){return $n.call(i)},rr=mr?mr.toStringTag:void 0,zr=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":rr&&rr in Object(i)?On(i):Hn(i)},Tr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},Ka,Ma=function(i){if(!Tr(i))return!1;var o=zr(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},Za=Pn.a["__core-js_shared__"],Gu=(Ka=/[^.]+$/.exec(Za&&Za.keys&&Za.keys.IE_PROTO||""))?"Symbol(src)_1."+Ka:"",dd=function(i){return!!Gu&&Gu in i},Xs=Function.prototype.toString,ea=function(i){if(i!=null){try{return Xs.call(i)}catch{}try{return i+""}catch{}}return""},Sl=/^\[object .+?Constructor\]$/,Mn=Function.prototype,uf=Object.prototype,uo=Mn.toString,Ys=uf.hasOwnProperty,Ci=RegExp("^"+uo.call(Ys).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wi=function(i){return!(!Tr(i)||dd(i))&&(Ma(i)?Ci:Sl).test(ea(i))},ts=function(i,o){return i==null?void 0:i[o]},va=function(i,o){var u=ts(i,o);return Wi(u)?u:void 0},ta=va(Pn.a,"Map"),ya=va(Object,"create"),qs=function(){this.__data__=ya?ya(null):{},this.size=0},Ks=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},lf=Object.prototype.hasOwnProperty,Al=function(i){var o=this.__data__;if(ya){var u=o[i];return u==="__lodash_hash_undefined__"?void 0:u}return lf.call(o,i)?o[i]:void 0},sf=Object.prototype.hasOwnProperty,Zs=function(i){var o=this.__data__;return ya?o[i]!==void 0:sf.call(o,i)},pd=function(i,o){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=ya&&o===void 0?"__lodash_hash_undefined__":o,this};function mu(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var l=i[o];this.set(l[0],l[1])}}mu.prototype.clear=qs,mu.prototype.delete=Ks,mu.prototype.get=Al,mu.prototype.has=Zs,mu.prototype.set=pd;var cf=mu,Ja=function(){this.size=0,this.__data__={hash:new cf,map:new(ta||Xe),string:new cf}},Js=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},ns=function(i,o){var u=i.__data__;return Js(o)?u[typeof o=="string"?"string":"hash"]:u.map},Qs=function(i){var o=ns(this,i).delete(i);return this.size-=o?1:0,o},ec=function(i){return ns(this,i).get(i)},hd=function(i){return ns(this,i).has(i)},ff=function(i,o){var u=ns(this,i),l=u.size;return u.set(i,o),this.size+=u.size==l?0:1,this};function Br(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var l=i[o];this.set(l[0],l[1])}}Br.prototype.clear=Ja,Br.prototype.delete=Qs,Br.prototype.get=ec,Br.prototype.has=hd,Br.prototype.set=ff;var Fr=Br,df=function(i,o){var u=this.__data__;if(u instanceof Xe){var l=u.__data__;if(!ta||l.length<199)return l.push([i,o]),this.size=++u.size,this;u=this.__data__=new Fr(l)}return u.set(i,o),this.size=u.size,this};function Vu(i){var o=this.__data__=new Xe(i);this.size=o.size}Vu.prototype.clear=Re,Vu.prototype.delete=it,Vu.prototype.get=Qt,Vu.prototype.has=qt,Vu.prototype.set=df;var na=Vu,rs=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},pf=function(i){return this.__data__.has(i)};function To(i){var o=-1,u=i==null?0:i.length;for(this.__data__=new Fr;++o<u;)this.add(i[o])}To.prototype.add=To.prototype.push=rs,To.prototype.has=pf;var gu=To,_u=function(i,o){for(var u=-1,l=i==null?0:i.length;++u<l;)if(o(i[u],u,i))return!0;return!1},os=function(i,o){return i.has(o)},Wu=function(i,o,u,l,p,f){var y=1&u,b=i.length,x=o.length;if(b!=x&&!(y&&x>b))return!1;var P=f.get(i),C=f.get(o);if(P&&C)return P==o&&C==i;var W=-1,K=!0,pe=2&u?new gu:void 0;for(f.set(i,o),f.set(o,i);++W<b;){var Oe=i[W],Ne=o[W];if(l)var Je=y?l(Ne,Oe,W,o,i,f):l(Oe,Ne,W,i,o,f);if(Je!==void 0){if(Je)continue;K=!1;break}if(pe){if(!_u(o,function(Qe,mt){if(!os(pe,mt)&&(Oe===Qe||p(Oe,Qe,u,l,f)))return pe.push(mt)})){K=!1;break}}else if(Oe!==Ne&&!p(Oe,Ne,u,l,f)){K=!1;break}}return f.delete(i),f.delete(o),K},si=Pn.a.Uint8Array,tc=function(i){var o=-1,u=Array(i.size);return i.forEach(function(l,p){u[++o]=[p,l]}),u},hf=function(i){var o=-1,u=Array(i.size);return i.forEach(function(l){u[++o]=l}),u},nc=mr?mr.prototype:void 0,Ei=nc?nc.valueOf:void 0,Ko=function(i,o,u,l,p,f,y){switch(u){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!f(new si(i),new si(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ne(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var b=tc;case"[object Set]":var x=1&l;if(b||(b=hf),i.size!=o.size&&!x)return!1;var P=y.get(i);if(P)return P==o;l|=2,y.set(i,o);var C=Wu(b(i),b(o),l,p,f,y);return y.delete(i),C;case"[object Symbol]":if(Ei)return Ei.call(i)==Ei.call(o)}return!1},zi=function(i,o){for(var u=-1,l=o.length,p=i.length;++u<l;)i[p+u]=o[u];return i},Zr=Array.isArray,vf=function(i,o,u){var l=o(i);return Zr(i)?l:zi(l,u(i))},Oi=function(i,o){for(var u=-1,l=i==null?0:i.length,p=0,f=[];++u<l;){var y=i[u];o(y,u,i)&&(f[p++]=y)}return f},rc=function(){return[]},yf=Object.prototype.propertyIsEnumerable,xi=Object.getOwnPropertySymbols,mi=xi?function(i){return i==null?[]:(i=Object(i),Oi(xi(i),function(o){return yf.call(i,o)}))}:rc,oc=function(i,o){for(var u=-1,l=Array(i);++u<i;)l[u]=o(u);return l},Rr=function(i){return i!=null&&typeof i=="object"},Zo=function(i){return Rr(i)&&zr(i)=="[object Arguments]"},is=Object.prototype,mf=is.hasOwnProperty,ic=is.propertyIsEnumerable,as=Zo(function(){return arguments}())?Zo:function(i){return Rr(i)&&mf.call(i,"callee")&&!ic.call(i,"callee")},Pa=as,Si=r(48),zu=/^(?:0|[1-9]\d*)$/,Di=function(i,o){var u=typeof i;return!!(o=o??9007199254740991)&&(u=="number"||u!="symbol"&&zu.test(i))&&i>-1&&i%1==0&&i<o},ra=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Or={};Or["[object Float32Array]"]=Or["[object Float64Array]"]=Or["[object Int8Array]"]=Or["[object Int16Array]"]=Or["[object Int32Array]"]=Or["[object Uint8Array]"]=Or["[object Uint8ClampedArray]"]=Or["[object Uint16Array]"]=Or["[object Uint32Array]"]=!0,Or["[object Arguments]"]=Or["[object Array]"]=Or["[object ArrayBuffer]"]=Or["[object Boolean]"]=Or["[object DataView]"]=Or["[object Date]"]=Or["[object Error]"]=Or["[object Function]"]=Or["[object Map]"]=Or["[object Number]"]=Or["[object Object]"]=Or["[object RegExp]"]=Or["[object Set]"]=Or["[object String]"]=Or["[object WeakMap]"]=!1;var Ai=function(i){return Rr(i)&&ra(i.length)&&!!Or[zr(i)]},ma=function(i){return function(o){return i(o)}},oi=r(49),Hu=oi.a&&oi.a.isTypedArray,bu=Hu?ma(Hu):Ai,ga=Object.prototype.hasOwnProperty,ro=function(i,o){var u=Zr(i),l=!u&&Pa(i),p=!u&&!l&&Object(Si.a)(i),f=!u&&!l&&!p&&bu(i),y=u||l||p||f,b=y?oc(i.length,String):[],x=b.length;for(var P in i)!o&&!ga.call(i,P)||y&&(P=="length"||p&&(P=="offset"||P=="parent")||f&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||Di(P,x))||b.push(P);return b},Tl=Object.prototype,ka=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Tl)},oa=function(i,o){return function(u){return i(o(u))}},ac=oa(Object.keys,Object),vd=Object.prototype.hasOwnProperty,uc=function(i){if(!ka(i))return ac(i);var o=[];for(var u in Object(i))vd.call(i,u)&&u!="constructor"&&o.push(u);return o},Do=function(i){return i!=null&&ra(i.length)&&!Ma(i)},wu=function(i){return Do(i)?ro(i):uc(i)},Na=function(i){return vf(i,wu,mi)},Uo=Object.prototype.hasOwnProperty,lc=function(i,o,u,l,p,f){var y=1&u,b=Na(i),x=b.length;if(x!=Na(o).length&&!y)return!1;for(var P=x;P--;){var C=b[P];if(!(y?C in o:Uo.call(o,C)))return!1}var W=f.get(i),K=f.get(o);if(W&&K)return W==o&&K==i;var pe=!0;f.set(i,o),f.set(o,i);for(var Oe=y;++P<x;){var Ne=i[C=b[P]],Je=o[C];if(l)var Qe=y?l(Je,Ne,C,o,i,f):l(Ne,Je,C,i,o,f);if(!(Qe===void 0?Ne===Je||p(Ne,Je,u,l,f):Qe)){pe=!1;break}Oe||(Oe=C=="constructor")}if(pe&&!Oe){var mt=i.constructor,$t=o.constructor;mt==$t||!("constructor"in i)||!("constructor"in o)||typeof mt=="function"&&mt instanceof mt&&typeof $t=="function"&&$t instanceof $t||(pe=!1)}return f.delete(i),f.delete(o),pe},Hi=va(Pn.a,"DataView"),ia=va(Pn.a,"Promise"),us=va(Pn.a,"Set"),Ti=va(Pn.a,"WeakMap"),Ii="[object Map]",Jo="[object Promise]",Xi="[object Set]",gi="[object WeakMap]",lt="[object DataView]",jt=ea(Hi),Ft=ea(ta),fn=ea(ia),ar=ea(us),xr=ea(Ti),oo=zr;(Hi&&oo(new Hi(new ArrayBuffer(1)))!=lt||ta&&oo(new ta)!=Ii||ia&&oo(ia.resolve())!=Jo||us&&oo(new us)!=Xi||Ti&&oo(new Ti)!=gi)&&(oo=function(i){var o=zr(i),u=o=="[object Object]"?i.constructor:void 0,l=u?ea(u):"";if(l)switch(l){case jt:return lt;case Ft:return Ii;case fn:return Jo;case ar:return Xi;case xr:return gi}return o});var A=oo,T="[object Arguments]",$="[object Array]",te="[object Object]",ye=Object.prototype.hasOwnProperty,Ue=function(i,o,u,l,p,f){var y=Zr(i),b=Zr(o),x=y?$:A(i),P=b?$:A(o),C=(x=x==T?te:x)==te,W=(P=P==T?te:P)==te,K=x==P;if(K&&Object(Si.a)(i)){if(!Object(Si.a)(o))return!1;y=!0,C=!1}if(K&&!C)return f||(f=new na),y||bu(i)?Wu(i,o,u,l,p,f):Ko(i,o,x,u,l,p,f);if(!(1&u)){var pe=C&&ye.call(i,"__wrapped__"),Oe=W&&ye.call(o,"__wrapped__");if(pe||Oe){var Ne=pe?i.value():i,Je=Oe?o.value():o;return f||(f=new na),p(Ne,Je,u,l,f)}}return!!K&&(f||(f=new na),lc(i,o,u,l,p,f))},yt=function i(o,u,l,p,f){return o===u||(o==null||u==null||!Rr(o)&&!Rr(u)?o!=o&&u!=u:Ue(o,u,l,p,i,f))},Ht=function(i,o,u,l){var p=u.length,f=p,y=!l;if(i==null)return!f;for(i=Object(i);p--;){var b=u[p];if(y&&b[2]?b[1]!==i[b[0]]:!(b[0]in i))return!1}for(;++p<f;){var x=(b=u[p])[0],P=i[x],C=b[1];if(y&&b[2]){if(P===void 0&&!(x in i))return!1}else{var W=new na;if(l)var K=l(P,C,x,i,o,W);if(!(K===void 0?yt(C,P,3,l,W):K))return!1}}return!0},gn=function(i){return i==i&&!Tr(i)},hr=function(i){for(var o=wu(i),u=o.length;u--;){var l=o[u],p=i[l];o[u]=[l,p,gn(p)]}return o},un=function(i,o){return function(u){return u!=null&&u[i]===o&&(o!==void 0||i in Object(u))}},$r=function(i){var o=hr(i);return o.length==1&&o[0][2]?un(o[0][0],o[0][1]):function(u){return u===i||Ht(u,i,o)}},dr=function(i){return typeof i=="symbol"||Rr(i)&&zr(i)=="[object Symbol]"},Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yi=/^\w*$/,fo=function(i,o){if(Zr(i))return!1;var u=typeof i;return!(u!="number"&&u!="symbol"&&u!="boolean"&&i!=null&&!dr(i))||Yi.test(i)||!Pr.test(i)||o!=null&&i in Object(o)};function Li(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var u=function(){var l=arguments,p=o?o.apply(this,l):l[0],f=u.cache;if(f.has(p))return f.get(p);var y=i.apply(this,l);return u.cache=f.set(p,y)||f,y};return u.cache=new(Li.Cache||Fr),u}Li.Cache=Fr;var Qa=Li,eu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eu=/\\(\\)?/g,Xu=function(i){var o=Qa(i,function(l){return u.size===500&&u.clear(),l}),u=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(eu,function(u,l,p,f){o.push(p?f.replace(Eu,"$1"):l||u)}),o}),Ra=mr?mr.prototype:void 0,Yu=Ra?Ra.toString:void 0,Go=function i(o){if(typeof o=="string")return o;if(Zr(o))return yn(o,i)+"";if(dr(o))return Yu?Yu.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u},Ou=function(i){return i==null?"":Go(i)},tu=function(i,o){return Zr(i)?i:fo(i,o)?[i]:Xu(Ou(i))},ja=function(i){if(typeof i=="string"||dr(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ca=function(i,o){for(var u=0,l=(o=tu(o,i)).length;i!=null&&u<l;)i=i[ja(o[u++])];return u&&u==l?i:void 0},Ml=function(i,o,u){var l=i==null?void 0:Ca(i,o);return l===void 0?u:l},Op=function(i,o){return i!=null&&o in Object(i)},xp=function(i,o,u){for(var l=-1,p=(o=tu(o,i)).length,f=!1;++l<p;){var y=ja(o[l]);if(!(f=i!=null&&u(i,y)))break;i=i[y]}return f||++l!=p?f:!!(p=i==null?0:i.length)&&ra(p)&&Di(y,p)&&(Zr(i)||Pa(i))},yd=function(i,o){return i!=null&&xp(i,o,Op)},sc=function(i,o){return fo(i)&&gn(o)?un(ja(i),o):function(u){var l=Ml(u,i);return l===void 0&&l===o?yd(u,i):yt(o,l,3)}},Pl=function(i){return i},gf=function(i){return function(o){return o==null?void 0:o[i]}},Sp=function(i){return function(o){return Ca(o,i)}},kl=function(i){return fo(i)?gf(ja(i)):Sp(i)},cc=function(i){return typeof i=="function"?i:i==null?Pl:typeof i=="object"?Zr(i)?sc(i[0],i[1]):$r(i):kl(i)},_f=function(i){return function(o,u,l){for(var p=-1,f=Object(o),y=l(o),b=y.length;b--;){var x=y[i?b:++p];if(u(f[x],x,f)===!1)break}return o}}(),Mo=function(i,o){return function(u,l){if(u==null)return u;if(!Do(u))return i(u,l);for(var p=u.length,f=o?p:-1,y=Object(u);(o?f--:++f<p)&&l(y[f],f,y)!==!1;);return u}}(function(i,o){return i&&_f(i,o,wu)}),Mi=function(i,o){var u=-1,l=Do(i)?Array(i.length):[];return Mo(i,function(p,f,y){l[++u]=o(p,f,y)}),l},bf=function(i,o){return(Zr(i)?yn:Mi)(i,cc(o))};Object(c.n)({isolateGlobalState:!0});var wf=function(){try{var i=va(Object,"defineProperty");return i({},"",{}),i}catch{}}(),ls=function(i,o,u){o=="__proto__"&&wf?wf(i,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):i[o]=u},nv=Object.prototype.hasOwnProperty,ss=function(i,o,u){var l=i[o];nv.call(i,o)&&ne(l,u)&&(u!==void 0||o in i)||ls(i,o,u)},nu=function(i,o,u,l){var p=!u;u||(u={});for(var f=-1,y=o.length;++f<y;){var b=o[f],x=l?l(u[b],i[b],b,u,i):void 0;x===void 0&&(x=i[b]),p?ls(u,b,x):ss(u,b,x)}return u},fc=function(i,o,u){switch(u.length){case 0:return i.call(o);case 1:return i.call(o,u[0]);case 2:return i.call(o,u[0],u[1]);case 3:return i.call(o,u[0],u[1],u[2])}return i.apply(o,u)},Nl=Math.max,qu=function(i,o,u){return o=Nl(o===void 0?i.length-1:o,0),function(){for(var l=arguments,p=-1,f=Nl(l.length-o,0),y=Array(f);++p<f;)y[p]=l[o+p];p=-1;for(var b=Array(o+1);++p<o;)b[p]=l[p];return b[o]=u(y),fc(i,this,b)}},cs=function(i){return function(){return i}},dc=wf?function(i,o){return wf(i,"toString",{configurable:!0,enumerable:!1,value:cs(o),writable:!0})}:Pl,Ku=Date.now,rv=function(i){var o=0,u=0;return function(){var l=Ku(),p=16-(l-u);if(u=l,p>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},pc=rv(dc),ov=function(i,o){return pc(qu(i,o,Pl),i+"")},iv=function(i,o,u){if(!Tr(u))return!1;var l=typeof o;return!!(l=="number"?Do(u)&&Di(o,u.length):l=="string"&&o in u)&&ne(u[o],i)},Ap=function(i){return ov(function(o,u){var l=-1,p=u.length,f=p>1?u[p-1]:void 0,y=p>2?u[2]:void 0;for(f=i.length>3&&typeof f=="function"?(p--,f):void 0,y&&iv(u[0],u[1],y)&&(f=p<3?void 0:f,p=1),o=Object(o);++l<p;){var b=u[l];b&&i(o,b,l,f)}return o})},Ef=Object.prototype.hasOwnProperty,_i=Ap(function(i,o){if(ka(o)||Do(o))nu(o,wu(o),i);else for(var u in o)Ef.call(o,u)&&ss(i,u,o[u])}),Tp=function(i,o,u,l){if(!Tr(i))return i;for(var p=-1,f=(o=tu(o,i)).length,y=f-1,b=i;b!=null&&++p<f;){var x=ja(o[p]),P=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return i;if(p!=y){var C=b[x];(P=l?l(C,x,b):void 0)===void 0&&(P=Tr(C)?C:Di(o[p+1])?[]:{})}ss(b,x,P),b=b[x]}return i},re=function(i,o,u){for(var l=-1,p=o.length,f={};++l<p;){var y=o[l],b=Ca(i,y);u(b,y)&&Tp(f,tu(y,i),b)}return f},Rl=function(i,o){return re(i,o,function(u,l){return yd(i,l)})},xu=mr?mr.isConcatSpreadable:void 0,_a=function(i){return Zr(i)||Pa(i)||!!(xu&&i&&i[xu])},Sr=function i(o,u,l,p,f){var y=-1,b=o.length;for(l||(l=_a),f||(f=[]);++y<b;){var x=o[y];u>0&&l(x)?u>1?i(x,u-1,l,p,f):zi(f,x):p||(f[f.length]=x)}return f},ci=function(i){return i!=null&&i.length?Sr(i,1):[]},jr,Da,Su,aa,Of,xf,md,Mp,Au,Po,fs,gd,Tu,Ia,hc,Zu,ua,_d,bd,La=function(i){return pc(qu(i,void 0,ci),i+"")}(function(i,o){return i==null?{}:Rl(i,o)});function lo(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Pp(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function wd(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function ko(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Ur,Vo,_r,eo,kn,to,vc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},ru=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Sf=(Da=ko((jr=function(){function i(l){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),lo(this,"isSilentMode",Da,this),lo(this,"stopZoomGraph",Su,this),lo(this,"stopScrollGraph",aa,this),lo(this,"stopMoveGraph",Of,this),lo(this,"adjustEdge",xf,this),lo(this,"adjustEdgeMiddle",md,this),lo(this,"adjustEdgeStartAndEnd",Mp,this),lo(this,"adjustNodePosition",Au,this),lo(this,"hideAnchors",Po,this),lo(this,"allowRotation",fs,this),lo(this,"hoverOutline",gd,this),lo(this,"nodeSelectedOutline",Tu,this),lo(this,"edgeSelectedOutline",Ia,this),lo(this,"nodeTextEdit",hc,this),lo(this,"edgeTextEdit",Zu,this),lo(this,"nodeTextDraggable",ua,this),lo(this,"edgeTextDraggable",_d,this),lo(this,"autoExpand",bd,this),wd(this,"multipleSelectKey",""),wd(this,"defaultConfig",{}),_i(this,this.getConfigDetail(l))}var o,u;return o=i,(u=[{key:"updateEditConfig",value:function(l){var p=this.getConfigDetail(l);_i(this,p)}},{key:"getConfigDetail",value:function(l){var p=l.isSilentMode,f=l.textEdit,y={};if(p===!1&&_i(y,this.defaultConfig),p===!0&&p!==this.isSilentMode){var b=La(vc,ru);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},_i(y,b)}f===!1&&_i(y,{nodeTextEdit:!1,edgeTextEdit:!1});var x=La(l,ru);return _i(y,x)}},{key:"getConfig",value:function(){return La(this,ru)}}])&&Pp(o.prototype,u),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Su=ko(jr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aa=ko(jr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Of=ko(jr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xf=ko(jr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),md=ko(jr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mp=ko(jr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Au=ko(jr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Po=ko(jr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fs=ko(jr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gd=ko(jr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Tu=ko(jr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ia=ko(jr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hc=ko(jr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zu=ko(jr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ua=ko(jr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_d=ko(jr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bd=ko(jr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ko(jr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(jr.prototype,"updateEditConfig"),jr.prototype),jr);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Ur||(Ur={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(Vo||(Vo={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(_r||(_r={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(eo||(eo={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(kn||(kn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(to||(to={}));var po,mo,Ed,Od,yc,Pi,Af,ds,ba;function Ju(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return Mu(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Mu(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mu(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function wa(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function kp(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function ou(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function la(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(po||(po={}));var xd={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},Sd=(mo=function(){function i(l,p){(function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")})(this,i),ou(this,"MINI_SCALE_SIZE",.2),ou(this,"MAX_SCALE_SIZE",16),wa(this,"SCALE_X",Ed,this),wa(this,"SKEW_Y",Od,this),wa(this,"SKEW_X",yc,this),wa(this,"SCALE_Y",Pi,this),wa(this,"TRANSLATE_X",Af,this),wa(this,"TRANSLATE_Y",ds,this),wa(this,"ZOOM_SIZE",ba,this),ou(this,"eventCenter",void 0),ou(this,"translateLimitMinX",void 0),ou(this,"translateLimitMinY",void 0),ou(this,"translateLimitMaxX",void 0),ou(this,"translateLimitMaxY",void 0),this.eventCenter=l;var f=p.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var o,u;return o=i,u=[{key:"setZoomMiniSize",value:function(l){this.MINI_SCALE_SIZE=l}},{key:"setZoomMaxSize",value:function(l){this.MAX_SCALE_SIZE=l}},{key:"HtmlPointToCanvasPoint",value:function(l){var p=Ju(l,2),f=p[0],y=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(l){var p=Ju(l,2),f=p[0],y=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(l,p,f){var y=Ju(l,2),b=y[0],x=y[1];return[b+p/this.SCALE_X,x+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(l,p){return[l/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var l=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(l,")")}}},{key:"zoom",value:function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return l===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):l===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof l=="number"&&(f=l,y=l),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(l){this.eventCenter.emit(kn.GRAPH_TRANSFORM,{type:l,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(l,p){this.TRANSLATE_X+l<=this.translateLimitMaxX&&this.TRANSLATE_X+l>=this.translateLimitMinX&&(this.TRANSLATE_X+=l),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(l,p,f,y){var b=Ju(this.CanvasPointToHtmlPoint([l,p]),2),x=f/2-b[0],P=y/2-b[1];this.TRANSLATE_X+=x,this.TRANSLATE_Y+=P,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(l){var p=Ju(Array.isArray(l)&&l.length===4?l:xd[l.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],u&&kp(o.prototype,u),i}(),Ed=la(mo.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Od=la(mo.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yc=la(mo.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pi=la(mo.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Af=la(mo.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ds=la(mo.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ba=la(mo.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),la(mo.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(mo.prototype,"zoom"),mo.prototype),la(mo.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(mo.prototype,"resetZoom"),mo.prototype),la(mo.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(mo.prototype,"translate"),mo.prototype),la(mo.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(mo.prototype,"focusOn"),mo.prototype),mo),Tf=function(i,o){for(var u=-1,l=i==null?0:i.length;++u<l&&o(i[u],u,i)!==!1;);return i},Np=function(i,o){return i&&nu(o,wu(o),i)},Rp=function(i){var o=[];if(i!=null)for(var u in Object(i))o.push(u);return o},jp=Object.prototype.hasOwnProperty,Ad=function(i){if(!Tr(i))return Rp(i);var o=ka(i),u=[];for(var l in i)(l!="constructor"||!o&&jp.call(i,l))&&u.push(l);return u},ps=function(i){return Do(i)?ro(i,!0):Ad(i)},Td=function(i,o){return i&&nu(o,ps(o),i)},mc=r(107),br=function(i,o){var u=-1,l=i.length;for(o||(o=Array(l));++u<l;)o[u]=i[u];return o},av=function(i,o){return nu(i,mi(i),o)},Md=oa(Object.getPrototypeOf,Object),Qu=Object.getOwnPropertySymbols?function(i){for(var o=[];i;)zi(o,mi(i)),i=Md(i);return o}:rc,gc=function(i,o){return nu(i,Qu(i),o)},uv=function(i){return vf(i,ps,Qu)},lv=Object.prototype.hasOwnProperty,Ea=function(i){var o=i.length,u=new i.constructor(o);return o&&typeof i[0]=="string"&&lv.call(i,"index")&&(u.index=i.index,u.input=i.input),u},Pd=function(i){var o=new i.constructor(i.byteLength);return new si(o).set(new si(i)),o},Mf=function(i,o){var u=o?Pd(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.byteLength)},Pf=/\w*$/,Cp=function(i){var o=new i.constructor(i.source,Pf.exec(i));return o.lastIndex=i.lastIndex,o},kd=mr?mr.prototype:void 0,qi=kd?kd.valueOf:void 0,el=function(i){return qi?Object(qi.call(i)):{}},kf=function(i,o){var u=o?Pd(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.length)},jl=function(i,o,u){var l=i.constructor;switch(o){case"[object ArrayBuffer]":return Pd(i);case"[object Boolean]":case"[object Date]":return new l(+i);case"[object DataView]":return Mf(i,u);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return kf(i,u);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(i);case"[object RegExp]":return Cp(i);case"[object Symbol]":return el(i)}},_c=Object.create,Dp=function(){function i(){}return function(o){if(!Tr(o))return{};if(_c)return _c(o);i.prototype=o;var u=new i;return i.prototype=void 0,u}}(),bc=function(i){return typeof i.constructor!="function"||ka(i)?{}:Dp(Md(i))},Nf=function(i){return Rr(i)&&A(i)=="[object Map]"},Rf=oi.a&&oi.a.isMap,jf=Rf?ma(Rf):Nf,tl=function(i){return Rr(i)&&A(i)=="[object Set]"},Ip=oi.a&&oi.a.isSet,nl=Ip?ma(Ip):tl,Nd="[object Arguments]",Rd="[object Function]",Cl="[object Object]",io={};io[Nd]=io["[object Array]"]=io["[object ArrayBuffer]"]=io["[object DataView]"]=io["[object Boolean]"]=io["[object Date]"]=io["[object Float32Array]"]=io["[object Float64Array]"]=io["[object Int8Array]"]=io["[object Int16Array]"]=io["[object Int32Array]"]=io["[object Map]"]=io["[object Number]"]=io["[object Object]"]=io["[object RegExp]"]=io["[object Set]"]=io["[object String]"]=io["[object Symbol]"]=io["[object Uint8Array]"]=io["[object Uint8ClampedArray]"]=io["[object Uint16Array]"]=io["[object Uint32Array]"]=!0,io["[object Error]"]=io[Rd]=io["[object WeakMap]"]=!1;var wc=function i(o,u,l,p,f,y){var b,x=1&u,P=2&u,C=4&u;if(l&&(b=f?l(o,p,f,y):l(o)),b!==void 0)return b;if(!Tr(o))return o;var W=Zr(o);if(W){if(b=Ea(o),!x)return br(o,b)}else{var K=A(o),pe=K==Rd||K=="[object GeneratorFunction]";if(Object(Si.a)(o))return Object(mc.a)(o,x);if(K==Cl||K==Nd||pe&&!f){if(b=P||pe?{}:bc(o),!x)return P?gc(o,Td(b,o)):av(o,Np(b,o))}else{if(!io[K])return f?o:{};b=jl(o,K,x)}}y||(y=new na);var Oe=y.get(o);if(Oe)return Oe;y.set(o,b),nl(o)?o.forEach(function(Je){b.add(i(Je,u,l,Je,o,y))}):jf(o)&&o.forEach(function(Je,Qe){b.set(Qe,i(Je,u,l,Qe,o,y))});var Ne=W?void 0:(C?P?uv:Na:P?ps:wu)(o);return Tf(Ne||o,function(Je,Qe){Ne&&(Je=o[Qe=Je]),ss(b,Qe,i(Je,u,l,Qe,o,y))}),b},ho=function(i){return wc(i,5)},Pu=function(i,o,u){(u!==void 0&&!ne(i[o],u)||u===void 0&&!(o in i))&&ls(i,o,u)},ii=function(i){return Rr(i)&&Do(i)},iu=Function.prototype,ku=Object.prototype,rl=iu.toString,Dl=ku.hasOwnProperty,Cf=rl.call(Object),Df=function(i){if(!Rr(i)||zr(i)!="[object Object]")return!1;var o=Md(i);if(o===null)return!0;var u=Dl.call(o,"constructor")&&o.constructor;return typeof u=="function"&&u instanceof u&&rl.call(u)==Cf},au=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Il=function(i){return nu(i,ps(i))},If=function(i,o,u,l,p,f,y){var b=au(i,u),x=au(o,u),P=y.get(x);if(P)Pu(i,u,P);else{var C=f?f(b,x,u+"",i,o,y):void 0,W=C===void 0;if(W){var K=Zr(x),pe=!K&&Object(Si.a)(x),Oe=!K&&!pe&&bu(x);C=x,K||pe||Oe?Zr(b)?C=b:ii(b)?C=br(b):pe?(W=!1,C=Object(mc.a)(x,!0)):Oe?(W=!1,C=kf(x,!0)):C=[]:Df(x)||Pa(x)?(C=b,Pa(b)?C=Il(b):Tr(b)&&!Ma(b)||(C=bc(x))):W=!1}W&&(y.set(x,C),p(C,x,l,f,y),y.delete(x)),Pu(i,u,C)}},Ec=function i(o,u,l,p,f){o!==u&&_f(u,function(y,b){if(f||(f=new na),Tr(y))If(o,u,b,l,i,p,f);else{var x=p?p(au(o,b),y,b+"",o,u,f):void 0;x===void 0&&(x=y),Pu(o,b,x)}},ps)},ol=Ap(function(i,o,u){Ec(i,o,u)}),jd={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},hs=function(i){var o=ho(jd);return i&&(o=ol(o,i)),o};r(82),r(166);function Lf(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}var Oc=function(){function i(){var l,p,f;(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,i),f={},(p="_events")in(l=this)?Object.defineProperty(l,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[p]=f}var o,u;return o=i,(u=[{key:"on",value:function(l,p,f){var y=this;return l==null||l.split(",").forEach(function(b){b=b.trim(),y._events[b]||(y._events[b]=[]),y._events[b].push({callback:p,once:!!f})}),this}},{key:"once",value:function(l,p){var f=this;l==null||l.split(",").forEach(function(y){return y=y.trim(),f.on(y,p,!0)})}},{key:"emit",value:function(l,p){var f=this;l==null||l.split(",").forEach(function(y){var b=f._events[y]||[],x=f._events["*"]||[],P=function(C){for(var W=C.length,K=0;K<W;K++)if(C[K]){var pe=C[K],Oe=pe.callback;pe.once&&(C.splice(K,1),C.length===0&&delete f._events[y],W--,K--),Oe.apply(f,[p])}};P(b),P(x)})}},{key:"off",value:function(l,p){var f=this;return l||(this._events={}),l.split(",").forEach(function(y){if(p){for(var b=f._events[y]||[],x=b.length,P=0;P<x;P++)b[P].callback===p&&(b.splice(P,1),x--,P--);b.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&Lf(o.prototype,u),i}();function uu(i,o){return o*Math.round(i/o)||i}function vs(i,o){return i%o}function xc(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return Sc(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Sc(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sc(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}var Ff=function(i,o,u){var l=xc(i,2),p=l[0],f=l[1],y=xc(o,2),b=y[0],x=y[1],P=xc(u,2),C=P[0],W=P[1];return p>b&&p<C&&f>x&&f<W},$f=function(i,o){var u=!1;switch(o.multipleSelectKey){case"meta":u=i.metaKey;break;case"alt":u=i.altKey;break;case"shift":u=i.shiftKey;break;case"ctrl":u=i.ctrlKey;break;default:u=!1}return u};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Fa=function(i){return function(o,u,l){var p=Object(o);if(!Do(o)){var f=cc(u);o=wu(o),u=function(b){return f(p[b],b,p)}}var y=i(o,u,l);return y>-1?p[f?o[y]:y]:void 0}},Cd=function(i,o,u,l){for(var p=i.length,f=u+(l?1:-1);l?f--:++f<p;)if(o(i[f],f,i))return f;return-1},Dd=/\s/,Id=function(i){for(var o=i.length;o--&&Dd.test(i.charAt(o)););return o},Bf=/^\s+/,lu=function(i){return i&&i.slice(0,Id(i)+1).replace(Bf,"")},Ac=/^[-+]0x[0-9a-f]+$/i,Uf=/^0b[01]+$/i,Gf=/^0o[0-7]+$/i,ys=parseInt,Nu=function(i){if(typeof i=="number")return i;if(dr(i))return NaN;if(Tr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=Tr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=lu(i);var u=Uf.test(i);return u||Gf.test(i)?ys(i.slice(2),u?2:8):Ac.test(i)?NaN:+i},Zn=1/0,ms=function(i){return i?(i=Nu(i))===Zn||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},Tc=function(i){var o=ms(i),u=o%1;return o==o?u?o-u:o:0},$a=Math.max,gs,_s=Fa(function(i,o,u){var l=i==null?0:i.length;if(!l)return-1;var p=u==null?0:Tc(u);return p<0&&(p=$a(l+p,0)),Cd(i,cc(o),p)}),go=new Uint8Array(16);function bs(){if(!gs&&!(gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gs(go)}for(var il=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Mc=function(i){return typeof i=="string"&&il.test(i)},Jr=[],No=0;No<256;++No)Jr.push((No+256).toString(16).substr(1));var Ru=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(Jr[i[o+0]]+Jr[i[o+1]]+Jr[i[o+2]]+Jr[i[o+3]]+"-"+Jr[i[o+4]]+Jr[i[o+5]]+"-"+Jr[i[o+6]]+Jr[i[o+7]]+"-"+Jr[i[o+8]]+Jr[i[o+9]]+"-"+Jr[i[o+10]]+Jr[i[o+11]]+Jr[i[o+12]]+Jr[i[o+13]]+Jr[i[o+14]]+Jr[i[o+15]]).toLowerCase();if(!Mc(u))throw TypeError("Stringified UUID is invalid");return u},Ba=function(i,o,u){var l=(i=i||{}).random||(i.rng||bs)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,o){u=u||0;for(var p=0;p<16;++p)o[u+p]=l[p];return o}return Ru(l)},Ua=function(){return Ba()},al=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=i.nodes.reduce(function(l,p){return l[p.id]=o+Ba(),p.id=l[p.id],l},{});return i.edges.forEach(function(l){l.id=o+Ba(),l.sourceNodeId=u[l.sourceNodeId],l.targetNodeId=u[l.targetNodeId]}),i},su=(r(105),r(127),r(207),function(i,o,u){var l=i.x,p=i.y,f=o.x,y=o.y,b=u.x,x=u.y,P=(x-y)/(b-f),C=y-P*f;return l>=f&&l<=b&&p>=y&&p<=x&&Math.abs(p-P*l+C)<Number.EPSILON});function ws(i){return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ws(i)}function Pc(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function ul(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Pc(Object(u),!0).forEach(function(l){Es(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Pc(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Es(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Nt,Ld,Ll,kc,Vf,Fd,cu,$d,Ga,ll,Wf,Lp,Fp,$p,Bd,Ud,Gd,Vd,Bp,Up,Gp,ki=function(i){return i.anchors},Fl=function(i,o){for(var u,l=o.nodes,p=l.length-1;p>=0;p--){var f=l[p];if(zf(i,f)){var y=f.getTargetAnchor(i);if(y){var b={node:f,anchorIndex:y.index,anchor:y.anchor};u&&!Nc(f,u.node,o)||(u=b)}}}return u},Nc=function(i,o,u){return i.zIndex>o.zIndex||u.nodesMap[i.id].index>u.nodesMap[o.id].index},Ki=function(i,o,u,l){return Math.hypot(i-u,o-l)},Oa=function(i,o){var u=!1,l=Ni(o);return i.x>=l.minX-0&&i.x<=l.maxX+0&&i.y>=l.minY-0&&i.y<=l.maxY+0&&(u=!0),u},zf=function(i,o){var u=!1,l=Ni(o);return i.x>=l.minX-5&&i.x<=l.maxX+5&&i.y>=l.minY-5&&i.y<=l.maxY+5&&(u=!0),u},Ni=function(i){var o=i.x,u=i.y,l=i.width,p=i.height;return{minX:o-l/2,minY:u-p/2,maxX:o+l/2,maxY:u+p/2,x:o,y:u,width:l,height:p,centerX:o,centerY:u}},Rc=function(i,o,u){var l,p=function(y){var b=y,x=b.x,P=b.y,C=b.width,W=b.height,K=b.radius;return[{x:x-C/2+K,y:P-W/2+K,r:K},{x:x+C/2-K,y:P-W/2+K,r:K},{x:x-C/2+K,y:P+W/2-K,r:K},{x:x+C/2-K,y:P+W/2-K,r:K}]}(u),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(y){var b=Ki(i.x,i.y,y.x,y.y);b<f&&(f=b,l=y)}),$l(i,o,l)},$l=function(i,o,u){var l,p=u,f=p.x,y=p.y,b=p.r;if(o===to.HORIZONTAL){var x=f-Math.sqrt(b*b-(i.y-y)*(i.y-y)),P=f+Math.sqrt(b*b-(i.y-y)*(i.y-y));l={x:Math.abs(x-i.x)<Math.abs(P-i.x)?x:P,y:i.y}}else if(o===to.VERTICAL){var C=y-Math.sqrt(b*b-(i.x-f)*(i.x-f)),W=y+Math.sqrt(b*b-(i.x-f)*(i.x-f)),K=Math.abs(C-i.y)<Math.abs(W-i.y)?C:W;l={x:i.x,y:K}}return l},Os=function(i,o){var u=o,l=!1,p=u.x-u.width/2+u.radius,f=u.x+u.width/2-u.radius,y=u.y-u.height/2+u.radius,b=u.y+u.height/2-u.radius,x=u.x,P=u.y,C=u.width,W=u.height;return i.y===P+W/2||i.y===P-W/2?l=i.x>p&&i.x<f:i.x!==x+C/2&&i.x!==x-C/2||(l=i.y>y&&i.y<b),l},jc=function(i,o,u){var l,p=u,f=p.x,y=p.y,b=p.rx,x=p.ry;if(o===to.HORIZONTAL){var P=f-Math.sqrt(b*b-(i.y-y)*(i.y-y)*b*b/(x*x)),C=f+Math.sqrt(b*b-(i.y-y)*(i.y-y)*b*b/(x*x));l={x:Math.abs(P-i.x)<Math.abs(C-i.x)?P:C,y:i.y}}else if(o===to.VERTICAL){var W=y-Math.sqrt(x*x-(i.x-f)*(i.x-f)*x*x/(b*b)),K=y+Math.sqrt(x*x-(i.x-f)*(i.x-f)*x*x/(b*b)),pe=Math.abs(W-i.y)<Math.abs(K-i.y)?W:K;l={x:i.x,y:pe}}return l},Cc=function(i,o,u){for(var l,p=u.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],b=0;b<p.length;b++)y.push({start:p[b],end:p[(b+1)%p.length]});return y.forEach(function(x){var P=x.start,C=x.end,W=P,K=C;P.x>C.x&&(W=C,K=P);var pe={x:i.x,y:i.y};if(W.x===K.x&&o===to.HORIZONTAL&&(pe={x:W.x,y:i.y}),W.y===K.y&&o===to.VERTICAL&&(pe={x:i.x,y:W.y}),W.x!==K.x&&W.y!==K.y){var Oe=(K.y-W.y)/(K.x-W.x),Ne=(W.x*K.y-K.x*W.y)/(W.x-K.x);o===to.HORIZONTAL?pe={x:(i.y-Ne)/Oe,y:i.y}:o===to.VERTICAL&&(pe={x:i.x,y:Oe*i.x+Ne})}if(su(pe,P,C)){var Je=Ki(pe.x,pe.y,i.x,i.y);Je<f&&(f=Je,l=pe)}}),l},xs=function(i,o,u,l){var p=i.x,f=i.y;return o.x>i.x?p=i.x+u/2:o.x<i.x&&(p=i.x-u/2),o.y>i.y?f=i.y+l/2:o.y<i.y&&(f=i.y-l/2),{x:p,y:f}},Ss=function(i){var o=i.rows,u=i.style,l=i.rowsLength,p=i.className,f=document.createElement("div");f.style.fontSize=u.fontSize,f.style.width=u.width,f.className=p,f.style.lineHeight=u.lineHeight,f.style.padding=u.padding,u.fontFamily&&(f.style.fontFamily=u.fontFamily),l>1?o.forEach(function(b){var x=document.createElement("div");x.textContent=b,f.appendChild(x)}):f.textContent=o,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},Bl=function(i){var o=i.rows,u=i.rowsLength,l=i.fontSize,p=0;return o&&o.forEach(function(f){var y=Kn(f);p=y>p?y:p}),{width:Math.ceil(p/2)*l+l/4,height:u*(l+2)+l/4}},ju=function(i){return ws(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},Wo=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Dc=1e3,Ic=999,Cu=function(){return++Dc};function Wd(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Ri(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Wd(Object(u),!0).forEach(function(l){xa(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Wd(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function zo(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Vp(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function xa(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Ln(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Hf=(Nt=function(){function i(l,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,i),xa(this,"id",""),zo(this,"type",Ld,this),zo(this,"sourceNodeId",Ll,this),zo(this,"targetNodeId",kc,this),zo(this,"startPoint",Vf,this),zo(this,"endPoint",Fd,this),zo(this,"text",cu,this),zo(this,"properties",$d,this),zo(this,"points",Ga,this),zo(this,"pointsList",ll,this),zo(this,"isSelected",Wf,this),zo(this,"isHovered",Lp,this),zo(this,"isHitable",Fp,this),zo(this,"draggable",$p,this),zo(this,"visible",Bd,this),xa(this,"virtual",!1),zo(this,"isAnimation",Ud,this),zo(this,"isShowAdjustPoint",Gd,this),xa(this,"graphModel",void 0),zo(this,"zIndex",Vd,this),xa(this,"BaseType",eo.EDGE),xa(this,"modelType",_r.EDGE),zo(this,"state",Bp,this),xa(this,"additionStateData",void 0),xa(this,"sourceAnchorId",""),xa(this,"targetAnchorId",""),xa(this,"menu",void 0),xa(this,"customTextPosition",!1),zo(this,"style",Up,this),zo(this,"arrowConfig",Gp,this),this.graphModel=p,this.initEdgeData(l),this.setAttributes()}var o,u;return o=i,u=[{key:"initEdgeData",value:function(l){if(l.properties||(l.properties={}),!l.id){var p=this.graphModel.idGenerator,f=p&&p(l.type),y=this.createId();l.id=y||f||Ua()}this.arrowConfig.markerEnd="url(#marker-end-".concat(l.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(l.id,")");var b=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=b,_i(this,ve(l)),this.graphModel.overlapMode===po.INCREASE&&(this.zIndex=l.zIndex||Cu()),this.setAnchors(),this.initPoints(),this.formatText(l)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ri(Ri({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ri({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var l=this.graphModel.theme.edgeText;return ho(l)}},{key:"getEdgeAnimationStyle",value:function(){var l=this.graphModel.theme.edgeAnimation;return ho(l)}},{key:"getArrowStyle",value:function(){var l=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?p.stroke:l.stroke;return Ri(Ri({},l),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var l=this.graphModel.theme.outline;return ho(l)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var l,p;return(l=this.graphModel)===null||l===void 0||(p=l.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var l,p;return(l=this.graphModel)===null||l===void 0||(p=l.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(l,p,f){var y,b,x=ki(l);return f&&(y=_s(x,function(P){return P.id===f}))||x.forEach(function(P){var C=nt(P,p);(b===void 0||C<b)&&(b=C,y=P)}),y}},{key:"getEndAnchor",value:function(l,p){var f,y,b=this,x=ki(l);return p&&(f=_s(x,function(P){return P.id===p}))||x.forEach(function(P){var C=nt(P,b.startPoint);(y===void 0||C<y)&&(y=C,f=P)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var l=this.text,p=l.x,f=l.y,y=l.value,b={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(b.text={x:p,y:f,value:y}),this.graphModel.overlapMode===po.INCREASE&&(b.zIndex=this.zIndex),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(l,p){this.properties[l]=Wo(p),this.setAttributes()}},{key:"deleteProperty",value:function(l){delete this.properties[l],this.setAttributes()}},{key:"setProperties",value:function(l){this.properties=Ri(Ri({},Object(c.I)(this.properties)),Wo(l)),this.setAttributes()}},{key:"changeEdgeId",value:function(l){var p=this.arrowConfig,f=p.markerEnd,y=p.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(l,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(l,")")),this.id=l}},{key:"setStyle",value:function(l,p){this.style=Ri(Ri({},this.style),{},xa({},l,Wo(p)))}},{key:"setStyles",value:function(l){this.style=Ri(Ri({},this.style),Wo(l))}},{key:"updateStyles",value:function(l){this.style=Ri({},Wo(l))}},{key:"formatText",value:function(l){var p=this.textPosition,f=p.x,y=p.y;l.text&&typeof l.text!="string"?Object.prototype.toString.call(l.text)==="[object Object]"&&(this.text={x:l.text.x||f,y:l.text.y||y,value:l.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:l.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var l=this.textPosition,p=l.x,f=l.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(l,p){if(this.text){var f=this.text,y=f.x,b=f.y,x=f.value,P=f.draggable,C=f.editable;this.text={value:x,draggable:P,x:y+l,y:b+p,editable:C}}}},{key:"setText",value:function(l){l&&_i(this.text,l)}},{key:"updateText",value:function(l){this.text=Ri(Ri({},Object(c.I)(this.text)),{},{value:l})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var l=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!l)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:l.x,y:l.y}),this.sourceAnchorId||(this.sourceAnchorId=l.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=l}},{key:"setHovered",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=l}},{key:"setHitable",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=l}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(l,p){this.state=l,this.additionStateData=p}},{key:"updateStartPoint",value:function(l){this.startPoint=l}},{key:"moveStartPoint",value:function(l,p){this.startPoint.x+=l,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(l){this.endPoint=l}},{key:"moveEndPoint",value:function(l,p){this.endPoint.x+=l,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=l}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(l){_i(this,l)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(l){var p=l.startPoint,f=l.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],u&&Vp(o.prototype,u),i}(),Ld=Ln(Nt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ll=Ln(Nt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),kc=Ln(Nt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Vf=Ln(Nt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fd=Ln(Nt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cu=Ln(Nt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),$d=Ln(Nt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ga=Ln(Nt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ll=Ln(Nt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wf=Ln(Nt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lp=Ln(Nt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fp=Ln(Nt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$p=Ln(Nt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bd=Ln(Nt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ud=Ln(Nt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gd=Ln(Nt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vd=Ln(Nt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bp=Ln(Nt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Up=Ln(Nt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Gp=Ln(Nt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Ln(Nt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Nt.prototype,"sourceNode"),Nt.prototype),Ln(Nt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Nt.prototype,"targetNode"),Nt.prototype),Ln(Nt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Nt.prototype,"textPosition"),Nt.prototype),Ln(Nt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setProperty"),Nt.prototype),Ln(Nt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"deleteProperty"),Nt.prototype),Ln(Nt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setProperties"),Nt.prototype),Ln(Nt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"changeEdgeId"),Nt.prototype),Ln(Nt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setStyle"),Nt.prototype),Ln(Nt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setStyles"),Nt.prototype),Ln(Nt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateStyles"),Nt.prototype),Ln(Nt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"formatText"),Nt.prototype),Ln(Nt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"resetTextPosition"),Nt.prototype),Ln(Nt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"moveText"),Nt.prototype),Ln(Nt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setText"),Nt.prototype),Ln(Nt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateText"),Nt.prototype),Ln(Nt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setAnchors"),Nt.prototype),Ln(Nt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setSelected"),Nt.prototype),Ln(Nt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setHovered"),Nt.prototype),Ln(Nt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setHitable"),Nt.prototype),Ln(Nt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"openEdgeAnimation"),Nt.prototype),Ln(Nt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"closeEdgeAnimation"),Nt.prototype),Ln(Nt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setElementState"),Nt.prototype),Ln(Nt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateStartPoint"),Nt.prototype),Ln(Nt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"moveStartPoint"),Nt.prototype),Ln(Nt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateEndPoint"),Nt.prototype),Ln(Nt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"moveEndPoint"),Nt.prototype),Ln(Nt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setZIndex"),Nt.prototype),Ln(Nt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"initPoints"),Nt.prototype),Ln(Nt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateAttributes"),Nt.prototype),Ln(Nt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"getAdjustStart"),Nt.prototype),Ln(Nt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"getAdjustEnd"),Nt.prototype),Ln(Nt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateAfterAdjustStartAndEnd"),Nt.prototype),Nt),Ul=Hf;function Xf(i){return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Xf(i)}function Wp(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function As(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Wp(Object(u),!0).forEach(function(l){ji(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Wp(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function zp(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Va(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Ts(){return Ts=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=Gl(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},Ts.apply(this,arguments)}function Gl(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=fu(i))!==null;);return i}function Wa(i,o){return Wa=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Wa(i,o)}function Hp(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=fu(i);if(o){var p=fu(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return zd(this,u)}}function zd(i,o){if(o&&(Xf(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sl(i)}function sl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fu(i){return fu=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},fu(i)}function ji(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Un,_o,bi=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Wa(f,y)})(p,i);var o,u,l=Hp(p);function p(){var f;zp(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return ji(sl(f=l.call.apply(l,[this].concat(b))),"modelType",_r.LINE_EDGE),f}return o=p,(u=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return As(As({},Ts(fu(p.prototype),"getEdgeStyle",this).call(this)),ho(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Va(o.prototype,u),p}(Ul);function Zi(i){return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Zi(i)}function sv(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return Xp(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Xp(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xp(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function cl(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function vr(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?cl(Object(u),!0).forEach(function(l){bo(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):cl(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Yp(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Ji(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ho(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Sa(){return Sa=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=cv(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},Sa.apply(this,arguments)}function cv(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yr(i))!==null;);return i}function Lc(i,o){return Lc=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Lc(i,o)}function du(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Yr(i);if(o){var p=Yr(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Hd(this,u)}}function Hd(i,o){if(o&&(Zi(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Du(i)}function Du(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yr(i){return Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yr(i)}function bo(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function fi(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Fc=(Un=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Lc(f,y)})(p,i);var o,u,l=du(p);function p(){var f;Ji(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return bo(Du(f=l.call.apply(l,[this].concat(b))),"modelType",_r.POLYLINE_EDGE),bo(Du(f),"draggingPointList",void 0),Yp(Du(f),"dbClickPosition",_o,Du(f)),f}return o=p,(u=[{key:"initEdgeData",value:function(f){this.offset=30,Sa(Yr(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return vr(vr({},Sa(Yr(p.prototype),"getEdgeStyle",this).call(this)),ho(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var b=this.dbClickPosition;return{x:b.x,y:b.y}}var x=so(this.points),P=sv(Io(x),2),C=P[0],W=P[1];return{x:(C.x+W.x)/2,y:(C.y+W.y)/2}}},{key:"getAfterAnchor",value:function(f,y,b){var x,P;return b.forEach(function(C){var W;f===to.HORIZONTAL?W=Math.abs(y.y-C.y):f===to.VERTICAL&&(W=Math.abs(y.x-C.x)),(!P||P>W)&&(P=W,x=C)}),x}},{key:"getCrossPoint",value:function(f,y,b){var x;return f===to.HORIZONTAL?x={x:b.x,y:y.y}:f===to.VERTICAL&&(x={x:y.x,y:b.y}),x}},{key:"removeCrossPoints",value:function(f,y,b){var x=b.map(function(Qe){return Qe});if(f===1){var P=x[f],C=x[y],W=x[f-1];if(qr(W,P,this.sourceNode)){if(Eo(P,C,this.sourceNode)){var K=jo(P,C,this.sourceNode);K&&(x[f]=K,x.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(Qe){(Qe.x===W.x&&Qe.x===P.x||Qe.y===W.y&&Qe.y===P.y)&&Ki(Qe.x,Qe.y,P.x,P.y)<Ki(W.x,W.y,P.x,P.y)&&(x[f-1]=Qe)})}if(y===b.length-2){var pe=x[f],Oe=x[y],Ne=x[y+1];if(qr(Oe,Ne,this.targetNode)){if(Eo(pe,Oe,this.targetNode)){var Je=jo(pe,Oe,this.targetNode);Je&&(x[y]=Je,x.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(Qe){(Qe.x===Ne.x&&Qe.x===Oe.x||Qe.y===Ne.y&&Qe.y===Oe.y)&&Ki(Qe.x,Qe.y,Oe.x,Oe.y)<Ki(Ne.x,Ne.y,Oe.x,Oe.y)&&(x[y+1]=Qe)})}return x}},{key:"getDraggingPoints",value:function(f,y,b,x,P){var C=P.map(function(pe){return pe}),W=this.getAfterAnchor(f,b,x),K=this.getCrossPoint(f,b,W);return y==="start"?(C.unshift(K),C.unshift(W)):(C.push(K),C.push(W)),C}},{key:"updateCrossPoints",value:function(f){var y=f.map(function($t){return $t}),b=f[0],x=f[1],P=f[y.length-2],C=f[y.length-1],W=this.sourceNode,K=this.targetNode,pe=W.modelType,Oe=K.modelType,Ne=vo(b,x),Je=y[0];switch(pe){case _r.RECT_NODE:W.radius!==0&&(Os(b,W)||(Je=Rc(b,Ne,W)));break;case _r.CIRCLE_NODE:Je=$l(b,Ne,W);break;case _r.ELLIPSE_NODE:Je=jc(b,Ne,W);break;case _r.DIAMOND_NODE:case _r.POLYGON_NODE:Je=Cc(b,Ne,W)}Je&&(y[0]=Je);var Qe=vo(P,C),mt=y[y.length-1];switch(Oe){case _r.RECT_NODE:K.radius!==0&&(Os(C,K)||(mt=Rc(C,Qe,K)));break;case _r.CIRCLE_NODE:mt=$l(C,Qe,K);break;case _r.ELLIPSE_NODE:mt=jc(C,Qe,K);break;case _r.DIAMOND_NODE:case _r.POLYGON_NODE:mt=Cc(C,Qe,K)}return mt&&(y[y.length-1]=mt),y}},{key:"getData",value:function(){var f=Sa(Yr(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(b){return{x:b.x,y:b.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=lr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(P){P.x+=f,P.y+=y});var b=this.pointsList[0];this.startPoint=Object.assign({},b);var x=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},x),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var b=f.start,x=f.end,P=f.startIndex,C=f.endIndex,W=f.direction,K=this.pointsList,pe=K;return W===to.HORIZONTAL?(K[P]={x:b.x,y:b.y+y.y},K[C]={x:x.x,y:x.y+y.y},pe=this.pointsList.map(function(Oe){return Oe})):W===to.VERTICAL&&(K[P]={x:b.x+y.x,y:b.y},K[C]={x:x.x+y.x,y:x.y},pe=this.pointsList.map(function(Oe){return Oe})),this.updatePointsAfterDrag(pe),this.draggingPointList=pe,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},K[P]),end:Object.assign({},K[C]),startIndex:P,endIndex:C,direction:W}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var b=f.start,x=f.end,P=f.startIndex,C=f.endIndex,W=f.direction,K=this.pointsList;if(W===to.HORIZONTAL){K[P]={x:b.x,y:b.y+y.y},K[C]={x:x.x,y:x.y+y.y};var pe=this.pointsList.map(function(sn){return sn});if(P!==0&&C!==this.pointsList.length-1&&(pe=this.removeCrossPoints(P,C,pe)),P===0){var Oe={x:b.x,y:b.y+y.y};if(!Oa(Oe,this.sourceNode)){var Ne=this.sourceNode.anchors;pe=this.getDraggingPoints(W,"start",Oe,Ne,pe)}}if(C===this.pointsList.length-1){var Je={x:x.x,y:x.y+y.y};if(!Oa(Je,this.targetNode)){var Qe=this.targetNode.anchors;pe=this.getDraggingPoints(W,"end",Je,Qe,pe)}}this.updatePointsAfterDrag(pe),this.draggingPointList=pe}else if(W===to.VERTICAL){K[P]={x:b.x+y.x,y:b.y},K[C]={x:x.x+y.x,y:x.y};var mt=this.pointsList.map(function(sn){return sn});if(P!==0&&C!==this.pointsList.length-1&&(mt=this.removeCrossPoints(P,C,mt)),P===0){var $t={x:b.x+y.x,y:b.y};if(!Oa($t,this.sourceNode)){var hn=this.sourceNode.anchors;mt=this.getDraggingPoints(W,"start",$t,hn,mt)}}if(C===this.pointsList.length-1){var dn={x:x.x+y.x,y:x.y};if(!Oa(dn,this.targetNode)){var zn=this.targetNode.anchors;mt=this.getDraggingPoints(W,"end",dn,zn,mt)}}this.updatePointsAfterDrag(mt),this.draggingPointList=mt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},K[P]),end:Object.assign({},K[C]),startIndex:P,endIndex:C,direction:W}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Ro(so(this.points));this.pointsList=f.map(function(x){return x}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var b=f[f.length-1];this.endPoint=Object.assign({},b)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(b){return"".concat(b.x,",").concat(b.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,b=f.endPoint,x=f.sourceNode,P=f.targetNode,C=lr({x:y.x,y:y.y},{x:b.x,y:b.y},x,P,this.offset||0);this.pointsList=C,this.initPoints()}}])&&Ho(o.prototype,u),p}(Ul),_o=fi(Un.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi(Un.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"initPoints"),Un.prototype),fi(Un.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePoints"),Un.prototype),fi(Un.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateStartPoint"),Un.prototype),fi(Un.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"moveStartPoint"),Un.prototype),fi(Un.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateEndPoint"),Un.prototype),fi(Un.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"moveEndPoint"),Un.prototype),fi(Un.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePointsList"),Un.prototype),fi(Un.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendStart"),Un.prototype),fi(Un.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendSimple"),Un.prototype),fi(Un.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppend"),Un.prototype),fi(Un.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendEnd"),Un.prototype),fi(Un.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePointsAfterDrag"),Un.prototype),fi(Un.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"getAdjustStart"),Un.prototype),fi(Un.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"getAdjustEnd"),Un.prototype),fi(Un.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateAfterAdjustStartAndEnd"),Un.prototype),Un),L=function(i){var o=i.start,u=i.end,l=i.offset,p=i.verticalLength,f=i.type,y={leftX:0,leftY:0,rightX:0,rightY:0},b=Math.atan((u.y-o.y)/(u.x-o.x)),x=Math.atan(l/p),P=Math.sqrt(p*p+l*l);return f==="start"?u.x>=o.x?(y.leftX=o.x+P*Math.sin(b+x),y.leftY=o.y-P*Math.cos(b+x),y.rightX=o.x-P*Math.sin(b-x),y.rightY=o.y+P*Math.cos(b-x)):(y.leftX=o.x-P*Math.sin(b+x),y.leftY=o.y+P*Math.cos(b+x),y.rightX=o.x+P*Math.sin(b-x),y.rightY=o.y-P*Math.cos(b-x)):f==="end"&&(u.x>=o.x?(y.leftX=u.x+P*Math.sin(b-x),y.leftY=u.y-P*Math.cos(b-x),y.rightX=u.x-P*Math.sin(b+x),y.rightY=u.y+P*Math.cos(b+x)):(y.leftX=u.x-P*Math.sin(b-x),y.leftY=u.y+P*Math.cos(b-x),y.rightX=u.x+P*Math.sin(b+x),y.rightY=u.y-P*Math.cos(b+x))),y},oe={x:1,y:0,z:0};function _e(i,o,u,l,p){for(var f=function(Oe){if(Oe<0||Oe>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-Oe,3)+3*o.x*Oe*Math.pow(1-Oe,2)+3*u.x*Math.pow(Oe,2)*(1-Oe)+l.x*Math.pow(Oe,3),y:i.y*Math.pow(1-Oe,3)+3*o.y*Oe*Math.pow(1-Oe,2)+3*u.y*Math.pow(Oe,2)*(1-Oe)+l.y*Math.pow(Oe,3)}},y=0,b=2,x=l.x,P=l.y,C=l;y<p&&b<50;){var W=C=f(1-b/100),K=W.x,pe=W.y;y=Ki(x,P,K,pe),b++}return C}function tt(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function pt(i){return l=function(f,y){return f.x*y.y-f.y*y.x}(o=oe,u=i),p=Math.acos(function(f,y){var b=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(x,P,C){return x+P*b[C]})}(tt(o),tt(u))),l>=0?p:-p;var o,u,l,p}function Ze(i){return i*(180/Math.PI)}function st(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Pt(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?st(Object(u),!0).forEach(function(l){Ct(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):st(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Ct(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Rt(i){return function(o){if(Array.isArray(o))return kt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Bt(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(i){return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ct(i)}function Gt(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||Bt(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bt(i,o){if(i){if(typeof i=="string")return kt(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?kt(i,o):void 0}}function kt(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}var bt=function(i,o){var u;switch(i.type){case"line":default:u=new bi(i,o);break;case"polyline":u=new Fc(i,o)}return u},We=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ut=function(i){var o=[],u={};return i.forEach(function(l){var p="".concat(l.x,"-").concat(l.y);l.id=p,u[p]=l}),Object.keys(u).forEach(function(l){o.push(u[l])}),o},Lt=function(i,o){var u=[i,{x:i.x,y:o.y},o];return ut(u)},Kt=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},xt=function(i,o){var u=Math.abs(i.x-o.centerX),l=Math.abs(i.y-o.centerY);return u/o.width>l/o.height?to.HORIZONTAL:to.VERTICAL},Zt=function(i,o,u){return xt(u,o)===to.HORIZONTAL?{x:u.x>i.centerX?i.maxX:i.minX,y:u.y}:{x:u.x,y:u.y>i.centerY?i.maxY:i.minY}},At=function(i,o){var u=Math.min(i.minX,o.minX),l=Math.min(i.minY,o.minY),p=Math.max(i.maxX,o.maxX),f=Math.max(i.maxY,o.maxY);return{centerX:(u+p)/2,centerY:(l+f)/2,minX:u,minY:l,maxX:p,maxY:f,height:f-l,width:p-u}},Vt=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,u=[],l=[];i.forEach(function(C){u.push(C.x),l.push(C.y)});var p=Math.min.apply(Math,u),f=Math.max.apply(Math,u),y=Math.min.apply(Math,l),b=Math.max.apply(Math,l),x=f-p,P=b-y;return o&&(x+=o,P+=o),{centerX:(p+f)/2,centerY:(y+b)/2,maxX:f,maxY:b,minX:p,minY:y,x:(p+f)/2,y:(y+b)/2,height:P,width:x}},wt=function(i){var o=i.minX,u=i.minY,l=i.maxX,p=i.maxY;return[{x:o,y:u},{x:l,y:u},{x:l,y:p},{x:o,y:p}]},Xt=function(i,o){var u=i.x,l=i.y;return u<o.minX||u>o.maxX||l<o.minY||l>o.maxY},Tn=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},Vn=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},Dt=function(i,o){return Tn(i,o.x).concat(Vn(i,o.y))},Tt=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},Et=function(i,o){var u=0;return o.forEach(function(l){l&&(i.x===l.x&&(u+=-2),i.y===l.y&&(u+=-2))}),u},Rn=function(i,o,u,l,p){return Tt(i,o)+Tt(i,u)+Et(i,[o,u,l,p])},er=function i(o,u,l,p,f){f||(f=0),o.unshift(u[p]),l[p]&&l[p]!==p&&f<=100&&i(o,u,l,l[p],f+1)},ln=function(i,o){var u=i.indexOf(o);u>-1&&i.splice(u,1)},Jn=function(i,o,u,l){var p=o.x-i.x,f=o.y-i.y,y=l.x-u.x,b=l.y-u.y,x=(-f*(i.x-u.x)+p*(i.y-u.y))/(-y*f+p*b),P=(y*(i.y-u.y)-b*(i.x-u.x))/(-y*f+p*b);return x>=0&&x<=1&&P>=0&&P<=1},Gn=function(i,o,u){if(u.width===0&&u.height===0)return!1;var l=Gt(wt(u),4),p=l[0],f=l[1],y=l[2],b=l[3];return Jn(i,o,p,f)||Jn(i,o,p,b)||Jn(i,o,f,y)||Jn(i,o,y,b)},tr=function(i,o,u,l){var p=[];return i.forEach(function(f){f!==o&&(f.x!==o.x&&f.y!==o.y||Gn(f,o,u)||Gn(f,o,l)||p.push(f))}),ut(p)},yr=function(i,o,u,l,p,f,y){var b=[],x=[o],P={},C={},W={};C[o.id]=0,W[o.id]=Rn(o,u,o);var K={};i.forEach(function(Ne){K[Ne.id]=Ne});for(var pe=function(){var Ne=void 0,Je=1/0;if(x.forEach(function(mt){W[mt.id]<Je&&(Je=W[mt.id],Ne=mt)}),Ne===u){var Qe=[];return er(Qe,K,P,u.id),{v:Qe}}ln(x,Ne),b.push(Ne),tr(i,Ne,l,p).forEach(function(mt){if(b.indexOf(mt)===-1){x.indexOf(mt)===-1&&x.push(mt);var $t=W[Ne.id]+Tt(Ne,mt);C[mt.id]&&$t>=C[mt.id]||(P[mt.id]=Ne.id,C[mt.id]=$t,W[mt.id]=C[mt.id]+Rn(mt,u,o,f,y))}})};x.length;){var Oe=pe();if(ct(Oe)==="object")return Oe.v}return[o,u]},wo=function(i){return Ni(i)},Ro=function(i){for(var o=1;o<i.length-1;){var u=i[o-1],l=i[o],p=i[o+1];u.x===l.x&&l.x===p.x||u.y===l.y&&l.y===p.y?i.splice(o,1):o++}return i},lr=function(i,o,u,l,p){var f=wo(u),y=wo(l),b=Kt(f,p),x=Kt(y,p),P=Zt(b,f,i),C=Zt(x,y,o);if(We(b,x)){var W=Xo(i,o,P,C);return[i,P].concat(Rt(W),[C,o])}var K=Vt([P,C]),pe=At(b,K),Oe=At(x,K),Ne=[];Ne=(Ne=Ne.concat(wt(pe))).concat(wt(Oe));var Je={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[K,pe,Oe].forEach(function(mt){Ne=Ne.concat(Dt(mt,Je).filter(function($t){return Xt($t,b)&&Xt($t,x)}))}),[{x:P.x,y:C.y},{x:C.x,y:P.y}].forEach(function(mt){Xt(mt,b)&&Xt(mt,x)&&Ne.push(mt)}),Ne.unshift(P),Ne.push(C),Ne=ut(Ne);var Qe=yr(Ne,P,C,f,y,i,o);return Qe.unshift(i),Qe.push(o),Qe.length>2&&(Qe=Ro(Qe)),ut(Qe)},Io=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var u=i[0],l=i[1],p=Ki(u.x,u.y,l.x,l.y),f=1;f<i.length-1;f++){var y=i[f],b=i[f+1],x=Ki(y.x,y.y,b.x,b.y);x>p&&(p=x,u=y,l=b)}o=[u,l]}return o},qr=function(i,o,u){var l=Oa(i,u),p=Oa(o,u);return l&&p},Eo=function(i,o,u){var l=Oa(i,u),p=Oa(o,u);return!(l&&p)&&(l||p)},jo=function(i,o,u){for(var l,p,f=Ni(u),y=wt(f),b=0;b<y.length;b++)Jn(i,o,y[b],y[(b+1)%y.length])&&(p=[y[b],y[(b+1)%y.length]]);return p&&(l=function(x,P,C,W){var K=(P.y-x.y)*(W.x-C.x)-(x.x-P.x)*(C.y-W.y);if(K===0)return!1;var pe=((P.x-x.x)*(W.x-C.x)*(C.y-x.y)+(P.y-x.y)*(W.x-C.x)*x.x-(W.y-C.y)*(P.x-x.x)*C.x)/K,Oe=-((P.y-x.y)*(W.y-C.y)*(C.x-x.x)+(P.x-x.x)*(W.y-C.y)*x.y-(W.x-C.x)*(P.y-x.y)*C.y)/K;return(pe-x.x)*(pe-P.x)<=0&&(Oe-x.y)*(Oe-P.y)<=0&&(pe-C.x)*(pe-W.x)<=0&&(Oe-C.y)*(Oe-W.y)<=0&&{x:pe,y:Oe}}(i,o,p[0],p[1])),l},vo=function(i,o){var u;return i.x===o.x?u=to.VERTICAL:i.y===o.y&&(u=to.HORIZONTAL),u},so=function(i){var o=i.split(" "),u=[];return o&&o.forEach(function(l){var p=Gt(l.split(","),2),f=p[0],y=p[1];u.push({x:Number(f),y:Number(y)})}),u},Xo=function(i,o,u,l){var p=[];if(vo(i,u)===vo(o,l))i.y===u.y?(p.push({x:u.x,y:(u.y+l.y)/2}),p.push({x:l.x,y:(u.y+l.y)/2})):(p.push({x:(u.x+l.x)/2,y:u.y}),p.push({x:(u.x+l.x)/2,y:l.y}));else{var f={x:u.x,y:l.y},y=su(f,i,u),b=su(f,o,l);if(y||b)f={x:l.x,y:u.y};else{var x=yo(f,i,u),P=yo(f,o,l);x&&P&&(f={x:l.x,y:u.y})}p.push(f)}return p},yo=function(i,o,u){return i.x===o.x&&i.x===u.x||i.y===o.y&&i.y===u.y},Kn=function(i){if(!i)return 0;for(var o=0,u=0;u<i.length;u++){var l=i.charCodeAt(u);i.match(/[A-Z]/)?o+=1.5:o+=l>=1&&l<=126||l>=65376&&l<=65439?1:2}return o},Qo=null,Ar=function(i,o){Qo||(Qo=document.createElement("canvas"));var u=Qo.getContext("2d");return u.font=o,u.measureText(i).width},Nn=function(i){var o,u=i.start,l=i.end;if(u.x===l.x&&u.y===l.y)o="";else{var p={start:u,end:l,offset:10,verticalLength:5},f=L(Pt(Pt({},p),{},{type:"start"})),y=L(Pt(Pt({},p),{},{type:"end"}));o="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},sr=function(i){var o=i.start,u=i.end,l=i.sourceNode,p=i.targetNode,f=i.offset,y=Ni(l),b=Ni(p),x=Kt(y,f),P=Kt(b,f);return{sNext:Zt(x,y,o),ePre:Zt(P,b,u)}},Wn=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[no(o[0]),no(o[1]),no(o[2]),no(o[3])]},no=function(i){var o=Gt(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},Aa=function(i,o){var u=Gt(i,4);return[_e(u[0],u[1],u[2],u[3],o),i[3]]},Iu=function(i,o){for(var u,l=i.x,p=i.y,f=so(o),y=Number.MAX_SAFE_INTEGER,b=[],x=0;x<f.length;x++)b.push({start:f[x],end:f[(x+1)%f.length]});if(b.forEach(function(K){var pe=K.start,Oe=K.end;if(pe.x===Oe.x){var Ne={x:pe.x,y:p};if(su(Ne,pe,Oe)){var Je=Math.abs(pe.x-l);Je<y&&(y=Je,u=Ne)}}else if(pe.y===Oe.y){var Qe={x:l,y:pe.y};if(su(Qe,pe,Oe)){var mt=Math.abs(pe.y-p);mt<y&&(y=mt,u=Qe)}}}),!u){var P=b[0],C=P.start,W=P.end;u={x:C.x+(W.x-C.x)/2,y:C.y+(W.y-C.y)/2}}return u},ve=function(i){return La(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},nt=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function qe(i,o){return typeof o!="function"?function(u,l,p){return Object.assign({type:i.edgeType},p)}:function(u,l,p){var f=o(u,l,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:i.edgeType}}}r(208);var en=function(){};function pr(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function ae(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var J=function(){function i(l){var p=this,f=l.onDragStart,y=f===void 0?en:f,b=l.onDragging,x=b===void 0?en:b,P=l.onDragEnd,C=P===void 0?en:P,W=l.eventType,K=W===void 0?"":W,pe=l.eventCenter,Oe=pe===void 0?null:pe,Ne=l.step,Je=Ne===void 0?1:Ne,Qe=l.isStopPropagation,mt=Qe===void 0||Qe,$t=l.model,hn=$t===void 0?null:$t,dn=l.data,zn=dn===void 0?null:dn;(function(sn,Cn){if(!(sn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,i),ae(this,"onDragStart",void 0),ae(this,"onDragging",void 0),ae(this,"onDragEnd",void 0),ae(this,"step",void 0),ae(this,"isStopPropagation",void 0),ae(this,"isDragging",!1),ae(this,"isStartDragging",!1),ae(this,"startX",0),ae(this,"startY",0),ae(this,"sumDeltaX",0),ae(this,"sumDeltaY",0),ae(this,"eventType",void 0),ae(this,"eventCenter",void 0),ae(this,"model",void 0),ae(this,"data",void 0),ae(this,"startTime",void 0),ae(this,"handleMouseDown",function(sn){var Cn,_n,Mr,Cr=(Cn=window)===null||Cn===void 0?void 0:Cn.document;if(sn.button===0){p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging=!0,p.startX=sn.clientX,p.startY=sn.clientY,Cr.addEventListener("mousemove",p.handleMouseMove,!1),Cr.addEventListener("mouseup",p.handleMouseUp,!1);var ur=(_n=p.model)===null||_n===void 0?void 0:_n.getData();(Mr=p.eventCenter)===null||Mr===void 0||Mr.emit(kn["".concat(p.eventType,"_MOUSEDOWN")],{e:sn,data:p.data||ur}),p.startTime=new Date().getTime()}}),ae(this,"handleMouseMove",function(sn){if(p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=sn.clientX-p.startX,p.sumDeltaY+=sn.clientY-p.startY,p.startX=sn.clientX,p.startY=sn.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var Cn,_n=p.sumDeltaX%p.step,Mr=p.sumDeltaY%p.step,Cr=p.sumDeltaX-_n,ur=p.sumDeltaY-Mr;p.sumDeltaX=_n,p.sumDeltaY=Mr;var Gr,ai=(Cn=p.model)===null||Cn===void 0?void 0:Cn.getData();p.isDragging||((Gr=p.eventCenter)===null||Gr===void 0||Gr.emit(kn["".concat(p.eventType,"_DRAGSTART")],{e:sn,data:p.data||ai}),p.onDragStart({event:sn})),p.isDragging=!0,Promise.resolve().then(function(){var ui,sa;p.onDragging({deltaX:Cr,deltaY:ur,event:sn}),(ui=p.eventCenter)===null||ui===void 0||ui.emit(kn["".concat(p.eventType,"_MOUSEMOVE")],{e:sn,data:p.data||ai}),(sa=p.eventCenter)===null||sa===void 0||sa.emit(kn["".concat(p.eventType,"_DRAG")],{e:sn,data:p.data||ai})})}}),ae(this,"handleMouseUp",function(sn){var Cn=window.document;p.isStartDragging=!1,p.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var _n,Mr,Cr;Cn.removeEventListener("mousemove",p.handleMouseMove,!1),Cn.removeEventListener("mouseup",p.handleMouseUp,!1);var ur=(_n=p.model)===null||_n===void 0?void 0:_n.getData();(Mr=p.eventCenter)===null||Mr===void 0||Mr.emit(kn["".concat(p.eventType,"_MOUSEUP")],{e:sn,data:p.data||ur}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:sn}),(Cr=p.eventCenter)===null||Cr===void 0||Cr.emit(kn["".concat(p.eventType,"_DROP")],{e:sn,data:p.data||ur}))})}),ae(this,"cancelDrag",function(){var sn,Cn=(sn=window)===null||sn===void 0?void 0:sn.document;Cn.removeEventListener("mousemove",p.handleMouseMove,!1),Cn.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=y,this.onDragging=x,this.onDragEnd=C,this.step=Je,this.isStopPropagation=mt,this.eventType=K,this.eventCenter=Oe,this.model=hn,this.data=zn}var o,u;return o=i,(u=[{key:"setStep",value:function(l){this.step=l}},{key:"setModel",value:function(l){this.model=l}}])&&pr(o.prototype,u),i}();function Ae(i){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ae(i)}function Be(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ze(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Pe(i,o,u){return o&&ze(i.prototype,o),u&&ze(i,u),i}function Te(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&d(i,o)}function De(i){var o=Ye();return function(){var u,l=m(i);if(o){var p=m(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return ce(this,u)}}function ce(i,o){if(o&&(Ae(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(i)}function we(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function se(i){var o=typeof Map=="function"?new Map:void 0;return se=function(u){if(u===null||(l=u,Function.toString.call(l).indexOf("[native code]")===-1))return u;var l;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(u))return o.get(u);o.set(u,p)}function p(){return Fe(u,arguments,m(this).constructor)}return p.prototype=Object.create(u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,u)},se(i)}function Fe(i,o,u){return Fe=Ye()?Reflect.construct:function(l,p,f){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(l,y));return f&&d(b,f.prototype),b},Fe.apply(null,arguments)}function Ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(i,o){return d=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},d(i,o)}function m(i){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},m(i)}function w(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function R(i,o){return i instanceof Z&&o instanceof Z}var G=function(i){Te(u,i);var o=De(u);function u(l,p,f){var y;return Be(this,u),w(we(y=o.call(this,3)),"x",void 0),w(we(y),"y",void 0),w(we(y),"z",void 0),y[0]=l,y[1]=p,y[2]=f,y.x=l,y.y=p,y.z=f,Object.setPrototypeOf(we(y),u.prototype),y}return Pe(u,[{key:"add",value:function(l){if(R(this,l))return new Z(this.x+l.x,this.y+l.y);var p=this.z+l.z;return new fe((this.x+l.x)/p,(this.y+l.y)/p)}},{key:"subtract",value:function(l){if(R(this,l))return new Z(this.x-l.x,this.y-l.y);var p=this.z-l.z;return p===0?new Z(this.x-l.x,this.y-l.y):new fe((this.x-l.x)/p,(this.y-l.y)/p)}}]),u}(se(Array)),Z=function(i){Te(u,i);var o=De(u);function u(l,p,f){var y;return Be(this,u),y=o.call(this,l,p,f??0),Object.setPrototypeOf(we(y),u.prototype),y}return Pe(u,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(l){var p=this;return l.reduce(function(f,y,b){return f+y*p[b]})}},{key:"cross",value:function(l){return new u(this.y*l.z-this.z*l.y,this.z*l.x-this.x*l.z,this.x*l.y-this.y*l.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var l=this.getLength();return new u(this.x/l,this.y/l)}},{key:"crossZ",value:function(l){return this.x*l.y-this.y*l.x}},{key:"angle",value:function(l){var p=this.crossZ(l),f=Math.acos(this.normalize().dot(l.normalize()));return p>=0?f:-f}}]),u}(G),fe=function(i){Te(u,i);var o=De(u);function u(l,p){var f;return Be(this,u),f=o.call(this,l,p,1),Object.setPrototypeOf(we(f),u.prototype),f}return Pe(u,[{key:"toString",value:function(){return"Point"}}]),u}(G);r(67),r(218);function be(i){return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},be(i)}function Ie(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||_t(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ht(i){return function(o){if(Array.isArray(o))return Ut(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||_t(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _t(i,o){if(i){if(typeof i=="string")return Ut(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Ut(i,o):void 0}}function Ut(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function Sn(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function wn(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Xn(i,o,u){return o&&wn(i.prototype,o),u&&wn(i,u),i}function Mt(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Bn(i,o)}function Jt(i){var o=kr();return function(){var u,l=Qn(i);if(o){var p=Qn(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return cr(this,u)}}function cr(i,o){if(o&&(be(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mn(i)}function mn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function or(i){var o=typeof Map=="function"?new Map:void 0;return or=function(u){if(u===null||(l=u,Function.toString.call(l).indexOf("[native code]")===-1))return u;var l;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(u))return o.get(u);o.set(u,p)}function p(){return nr(u,arguments,Qn(this).constructor)}return p.prototype=Object.create(u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Bn(p,u)},or(i)}function nr(i,o,u){return nr=kr()?Reflect.construct:function(l,p,f){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(l,y));return f&&Bn(b,f.prototype),b},nr.apply(null,arguments)}function kr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bn(i,o){return Bn=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Bn(i,o)}function Qn(i){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qn(i)}function Lo(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var ot,Lu,di,fl,Vl,Yf,Xd,$c,Ms,fv,dv,Yd,qp,Ps=function(i){Mt(u,i);var o=Jt(u);function u(){var l;Sn(this,u);for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];return Lo(mn(l=o.call(this,f.length)),"rows",void 0),Lo(mn(l),"columns",void 0),l.fill(new Array(3)),f.forEach(function(b,x){l[x]=b}),l.columns=f[0].length,l.rows=f.length,Object.setPrototypeOf(mn(l),u.prototype),l}return Xn(u,[{key:"getRow",value:function(l){return this[l]}},{key:"getColumn",value:function(l){return ht(this.map(function(p){return p[l]}))}},{key:"transpose",value:function(){for(var l=[],p=0;p<this.columns;p++)l.push(this.getColumn(p));return nr(u,l)}},{key:"cross",value:function(l){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===l.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),b=function(P){var C=l.getColumn(P);p[f][P]=y.reduce(function(W,K,pe){return W+K*C[pe]},0)},x=0;x<l.columns;x++)b(x);return nr(u,ht(p))}},{key:"to2D",value:function(){return this.map(function(l){return[l[0],l[1]]})}},{key:"toPoints",value:function(){return this.map(function(l){return new fe(l[0],l[1])})}},{key:"toString",value:function(){var l=Ie(this[0],2),p=l[0],f=l[1],y=Ie(this[1],2),b=y[0],x=y[1],P=Ie(this[2],2),C=P[0],W=P[1];return"matrix(".concat(p," ").concat(f," ").concat(b," ").concat(x," ").concat(C," ").concat(W,")")}},{key:"translate",value:function(l,p){return this.cross(new ks(l,p))}},{key:"rotate",value:function(l){return this.cross(new qd(l))}},{key:"scale",value:function(l,p){return this.cross(new pv(l,p))}}]),u}(or(Array)),qd=function(i){Mt(u,i);var o=Jt(u);function u(l){var p;return Sn(this,u),p=o.call(this,new Z(+Math.cos(l).toFixed(2),+Math.sin(l).toFixed(2),0),new Z(-Math.sin(l).toFixed(2),+Math.cos(l).toFixed(2),0),new Z(0,0,1)),Object.setPrototypeOf(mn(p),u.prototype),p}return Xn(u,[{key:"inverse",value:function(){return this.transpose()}}]),u}(Ps),pv=function(i){Mt(u,i);var o=Jt(u);function u(l,p){var f;return Sn(this,u),Lo(mn(f=o.call(this,new Z(l,0,0),new Z(0,p,0),new Z(0,0,1))),"sx",void 0),Lo(mn(f),"sy",void 0),f.sx=l,f.sy=p,Object.setPrototypeOf(mn(f),u.prototype),f}return Xn(u,[{key:"inverse",value:function(){return new u(1/this.sx,1/this.sy)}}]),u}(Ps),ks=function(i){Mt(u,i);var o=Jt(u);function u(l,p){var f;return Sn(this,u),Lo(mn(f=o.call(this,new Z(1,0,0),new Z(0,1,0),new Z(l,p,1))),"tx",void 0),Lo(mn(f),"ty",void 0),f.tx=l,f.ty=p,Object.setPrototypeOf(mn(f),u.prototype),f}return Xn(u,[{key:"inverse",value:function(){return new u(-this.tx,-this.ty)}}]),u}(Ps),Kd={node:!1,edge:!1},CP={node:!0,edge:!0};function fw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function cy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?fw(Object(u),!0).forEach(function(l){Wl(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):fw(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Kp(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||dw(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zp(i){return function(o){if(Array.isArray(o))return Mg(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||dw(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dw(i,o){if(i){if(typeof i=="string")return Mg(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Mg(i,o):void 0}}function Mg(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function fy(i){return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fy(i)}function dl(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function DP(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Wl(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Yn(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var pw,hw=200,vw=(ot=function(){function i(l){(function(pe,Oe){if(!(pe instanceof Oe))throw new TypeError("Cannot call a class as a function")})(this,i),Wl(this,"rootEl",void 0),dl(this,"width",Lu,this),dl(this,"height",di,this),Wl(this,"theme",void 0),Wl(this,"eventCenter",void 0),Wl(this,"modelMap",new Map),Wl(this,"topElement",void 0),Wl(this,"animation",void 0),Wl(this,"idGenerator",void 0),Wl(this,"edgeGenerator",void 0),Wl(this,"nodeMoveRules",[]),Wl(this,"customTrajectory",void 0),dl(this,"edgeType",fl,this),dl(this,"nodes",Vl,this),dl(this,"edges",Yf,this),dl(this,"overlapMode",Xd,this),dl(this,"background",$c,this),dl(this,"transformModel",Ms,this),dl(this,"editConfigModel",fv,this),dl(this,"gridSize",dv,this),dl(this,"partial",Yd,this),dl(this,"fakerNode",qp,this);var p,f=l.container,y=l.background,b=y===void 0?{}:y,x=l.grid,P=l.idGenerator,C=l.edgeGenerator,W=l.animation,K=l.customTrajectory;this.background=b,fy(x)==="object"&&(this.gridSize=x.size),this.rootEl=f,this.editConfigModel=new Sf(l),this.eventCenter=new Oc,this.transformModel=new Sd(this.eventCenter,l),this.theme=hs(l.style),this.edgeType=l.edgeType||"polyline",this.width=l.width,this.height=l.height,this.animation=(p=W)&&typeof p!="boolean"?ol(ho(Kd),p):ho(p===!0?CP:Kd),this.partial=l.partial,this.overlapMode=l.overlapMode||0,this.idGenerator=P,this.customTrajectory=K,this.edgeGenerator=qe(this,C),this.width=l.width||this.rootEl.getBoundingClientRect().width,this.height=l.height||this.rootEl.getBoundingClientRect().height,this.flowId=Ua()}var o,u;return o=i,u=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(l,p,f){return l[p.id]={index:f,model:p},l},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(l,p,f){return l[p.id]={index:f,model:p},l},{})}},{key:"modelsMap",get:function(){return[].concat(Zp(this.nodes),Zp(this.edges)).reduce(function(l,p){return l[p.id]=p,l},{})}},{key:"sortElements",get:function(){var l=[];this.nodes.forEach(function(P){return l.push(P)}),this.edges.forEach(function(P){return l.push(P)}),l=l.sort(function(P,C){return P.zIndex-C.zIndex});for(var p=[],f=[-200,-200],y=[this.width+hw,this.height+hw],b=0;b<l.length;b++){var x=l[b];x.visible&&(!this.partial||x.isSelected||this.isElementInArea(x,f,y,!1,!1))&&p.push(x)}return p}},{key:"textEditElement",get:function(){var l=this.nodes.find(function(f){return f.state===Ur.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===Ur.TEXT_EDIT});return l||p}},{key:"selectElements",get:function(){var l=new Map;return this.nodes.forEach(function(p){p.isSelected&&l.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&l.set(p.id,p)}),l}},{key:"selectNodes",get:function(){var l=[];return this.nodes.forEach(function(p){p.isSelected&&l.push(p)}),l}},{key:"getAreaElement",value:function(l,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4],x=[],P=[];this.nodes.forEach(function(K){return P.push(K)}),this.edges.forEach(function(K){return P.push(K)});for(var C=0;C<P.length;C++){var W=P[C];b&&!W.visible||!this.isElementInArea(W,l,p,f,y)||x.push(W)}return x}},{key:"getModel",value:function(l){return this.modelMap.get(l)}},{key:"getNodeModelById",value:function(l){var p;return this.fakerNode&&l===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[l])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(l){var p=l.x,f=l.y,y=this.rootEl.getBoundingClientRect(),b={x:p-y.left,y:f-y.top},x=Kp(this.transformModel.HtmlPointToCanvasPoint([b.x,b.y]),2);return{domOverlayPosition:b,canvasOverlayPosition:{x:x[0],y:x[1]}}}},{key:"isElementInArea",value:function(l,p,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(l.BaseType===eo.NODE){for(var x=Ni(l=l),P=x.minX,C=x.minY,W=x.maxX,K=x.maxY,pe=[{x:P,y:C},{x:W,y:C},{x:W,y:K},{x:P,y:K}],Oe=b,Ne=0;Ne<pe.length;Ne++){var Je=pe[Ne],Qe=Je.x,mt=Je.y,$t=this.transformModel.CanvasPointToHtmlPoint([Qe,mt]),hn=Kp($t,2);if(Qe=hn[0],mt=hn[1],Ff([Qe,mt],p,f)!==b){Oe=!b;break}}return Oe}if(l.BaseType===eo.EDGE){var dn=l=l,zn=dn.startPoint,sn=dn.endPoint,Cn=this.transformModel.CanvasPointToHtmlPoint([zn.x,zn.y]),_n=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),Mr=Ff(Cn,p,f),Cr=Ff(_n,p,f);return y?Mr&&Cr:Mr||Cr}return!1}},{key:"graphDataToModel",value:function(l){var p=this;if(this.width&&this.height||this.resize(),!l)return this.nodes=[],void(this.edges=[]);l.nodes?this.nodes=bf(l.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],l.edges?this.edges=bf(l.edges,function(f){var y=p.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var l=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&l.push(y)});var p=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&p.push(y)}),{nodes:p,edges:l}}},{key:"modelToHistoryData",value:function(){for(var l=!1,p=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){l=!0;break}p.push(y.getHistoryData())}if(l)return!1;for(var b=!1,x=[],P=0;P<this.edges.length;P++){var C=this.edges[P];if(C.isDragging){b=!0;break}x.push(C.getHistoryData())}return!b&&{nodes:p,edges:x}}},{key:"getEdgeModelById",value:function(l){var p;return(p=this.edgesMap[l])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(l){return this.modelsMap[l]}},{key:"getNodeEdges",value:function(l){for(var p=[],f=0;f<this.edges.length;f++){var y=this.edges[f],b=this.edges[f].sourceNodeId===l,x=this.edges[f].targetNodeId===l;(b||x)&&p.push(y)}return p}},{key:"getSelectElements",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(y){if(y.BaseType===eo.NODE&&f.nodes.push(y.getData()),y.BaseType===eo.EDGE){var b=y.getData(),x=p.get(b.sourceNodeId)&&p.get(b.targetNodeId);(l||x)&&f.edges.push(b)}}),f}},{key:"updateAttributes",value:function(l,p){this.getElement(l).updateAttributes(p)}},{key:"changeNodeId",value:function(l,p){return p||(p=Ua()),this.nodesMap[p]?"":this.nodesMap[l]?(this.edges.forEach(function(f){f.sourceNodeId===l&&(f.sourceNodeId=p),f.targetNodeId===l&&(f.targetNodeId=p)}),this.nodesMap[l].model.id=p,this.nodesMap[p]=this.nodesMap[l],p):""}},{key:"changeEdgeId",value:function(l,p){return p||(p=Ua()),this.edgesMap[p]?"":this.edgesMap[l]?(this.edges.forEach(function(f){f.id===l&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(l){this.fakerNode=l}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(l,p){return this.modelMap.set(l,p)}},{key:"toFront",value:function(l){var p,f,y,b=((p=this.nodesMap[l])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[l])===null||f===void 0?void 0:f.model);b&&(this.overlapMode===po.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),b.setZIndex(9999),this.topElement=b),this.overlapMode===po.INCREASE&&this.setElementZIndex(l,"top"))}},{key:"setElementZIndex",value:function(l,p){var f,y,b,x=((f=this.nodesMap[l])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[l])===null||y===void 0?void 0:y.model);x&&(typeof p=="number"&&(b=p),p==="top"&&(b=Cu()),p==="bottom"&&(b=--Ic),x.setZIndex(b))}},{key:"deleteNode",value:function(l){var p=this.nodesMap[l].model.getData();this.deleteEdgeBySource(l),this.deleteEdgeByTarget(l),this.nodes.splice(this.nodesMap[l].index,1),this.eventCenter.emit(kn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(l){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=Wo(l);y.id&&this.nodesMap[l.id]&&delete y.id;var b=this.getModelAfterSnapToGrid(y);this.nodes.push(b);var x=b.getData(),P={data:x};return f&&(P.e=f),this.eventCenter.emit(p,P),b}},{key:"getModelAfterSnapToGrid",value:function(l){var p=this.getModel(l.type);if(!p)throw new Error("找不到".concat(l.type,"对应的节点，请确认是否已注册此类型节点。"));var f=l.x,y=l.y;return f&&y&&(l.x=uu(f,this.gridSize),l.y=uu(y,this.gridSize),fy(l.text)==="object"&&(l.text.x+=l.x-f,l.text.y+=l.y-y)),new p(l,this)}},{key:"cloneNode",value:function(l){var p=this.getNodeModelById(l),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),p.setSelected(!1),y.getData()}},{key:"moveNode",value:function(l,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=this.nodesMap[l];if(b){var x=b.model,P=x.getMoveDistance(p,f,y),C=Kp(P,2);p=C[0],f=C[1],this.moveEdge(l,p,f)}}},{key:"moveNode2Coordinate",value:function(l,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=this.nodesMap[l];if(b){var x=b.model,P=x.x,C=x.y,W=p-P,K=f-C;this.moveNode(l,W,K,y)}}},{key:"editText",value:function(l){this.setElementStateById(l,Ur.TEXT_EDIT)}},{key:"addEdge",value:function(l){var p=Wo(l),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var b=new y(cy(cy({},p),{},{type:f}),this),x=b.getData();return this.edges.push(b),this.eventCenter.emit(kn.EDGE_ADD,{data:x}),b}},{key:"moveEdge",value:function(l,p,f){for(var y=0;y<this.edges.length;y++){var b=this.edges[y],x=b.textPosition,P=x.x,C=x.y,W=this.edges[y].sourceNodeId===l,K=this.edges[y].targetNodeId===l;W&&b.moveStartPoint(p,f),K&&b.moveEndPoint(p,f),(W||K)&&this.handleEdgeTextMove(b,P,C)}}},{key:"handleEdgeTextMove",value:function(l,p,f){var y;if(l.customTextPosition===!0)l.resetTextPosition();else if(l.modelType===_r.POLYLINE_EDGE&&(y=l.text)!==null&&y!==void 0&&y.value){var b=l.text,x=Iu(b,l.points);l.moveText(x.x-b.x,x.y-b.y)}else{var P=l.textPosition,C=P.x,W=P.y;l.moveText(C-p,W-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(l,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===l&&this.edges[f].targetNodeId===p){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(kn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(l){if(this.edgesMap[l]){var p=this.edgesMap[l].index,f=this.edgesMap[l].model.getData();this.edges.splice(p,1),this.eventCenter.emit(kn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(l){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===l){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(kn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(l){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===l){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(kn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(l,p,f){this.nodes.forEach(function(y){y.id===l?y.setElementState(p,f):y.setElementState(Ur.DEFAULT)}),this.edges.forEach(function(y){y.id===l?y.setElementState(p,f):y.setElementState(Ur.DEFAULT)})}},{key:"updateText",value:function(l,p){this.nodes.forEach(function(f){f.id===l&&f.updateText(p)}),this.edges.forEach(function(f){f.id===l&&f.updateText(p)})}},{key:"selectNodeById",value:function(l){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.nodesMap[l])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(l){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.edgesMap[l])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(l){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(l);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var l;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===po.DEFAULT&&((l=this.topElement)===null||l===void 0||l.setZIndex())}},{key:"moveNodes",value:function(l,p,f){for(var y=this,b=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=l.reduce(function(dn,zn){var sn=y.nodesMap[zn].model.getMoveDistance(p,f,b);return dn[zn]=sn,dn},{}),P=0;P<this.edges.length;P++){var C=this.edges[P],W=C.textPosition,K=W.x,pe=W.y,Oe=x[C.sourceNodeId],Ne=x[C.targetNodeId],Je=void 0,Qe=void 0;if(Oe&&Ne&&C.modelType===_r.POLYLINE_EDGE){var mt=Kp(Oe,2);Je=mt[0],Qe=mt[1],C.updatePointsList(Je,Qe)}else{if(Oe){var $t=Kp(Oe,2);Je=$t[0],Qe=$t[1],C.moveStartPoint(Je,Qe)}if(Ne){var hn=Kp(Ne,2);Je=hn[0],Qe=hn[1],C.moveEndPoint(Je,Qe)}}(Oe||Ne)&&this.handleEdgeTextMove(C,K,pe)}}},{key:"addNodeMoveRules",value:function(l){this.nodeMoveRules.includes(l)||this.nodeMoveRules.push(l)}},{key:"setDefaultEdgeType",value:function(l){this.edgeType=l}},{key:"changeNodeType",value:function(l,p){var f=this.getNodeModelById(l);if(f){var y=f.getData();y.type=p;var b=this.getModel(p);if(!b)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var x=new b(y,this);this.nodes.splice(this.nodesMap[l].index,1,x),this.getNodeEdges(l).forEach(function(P){if(P.sourceNodeId===l){var C=xs(x,P.startPoint,x.width,x.height);P.updateStartPoint(C)}if(P.targetNodeId===l){var W=xs(x,P.endPoint,x.width,x.height);P.updateEndPoint(W)}})}}},{key:"changeEdgeType",value:function(l,p){var f=this.getEdgeModelById(l);if(f&&f.type!==p){var y=f.getData();y.type=p;var b=this.getModel(p);if(!b)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var x=new b(y,this);this.edges.splice(this.edgesMap[l].index,1,x)}}},{key:"getNodeIncomingEdge",value:function(l){var p=[];return this.edges.forEach(function(f){f.targetNodeId===l&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(l){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===l&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(l){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===l&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(l){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===l&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(l){var p=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===l&&f.push(p.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(l){var p=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===l&&f.push(p.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(l){this.theme=hs(cy(cy({},this.theme),l))}},{key:"resize",value:function(l,p){this.width=l||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var l=this.nodes,p=[],f=[];l.forEach(function(W){var K=W.x,pe=W.y,Oe=W.width,Ne=W.height,Je=W.getNodeStyle().strokeWidth,Qe=Je===void 0?0:Je,mt=K+Oe/2+Qe,$t=K-Oe/2-Qe,hn=pe+Ne/2+Qe,dn=pe-Ne/2-Qe;p=p.concat([mt,$t].filter(function(zn){return!Number.isNaN(zn)})),f=f.concat([hn,dn].filter(function(zn){return!Number.isNaN(zn)}))});var y=Math.min.apply(Math,Zp(p)),b=Math.max.apply(Math,Zp(p)),x=Math.min.apply(Math,Zp(f)),P=b-y||0,C=Math.max.apply(Math,Zp(f))-x||0;return{virtualRectWidth:P,virtualRectHeight:C,virtualRectCenterPositionX:y+P/2,virtualRectCenterPositionY:x+C/2}}},{key:"translateCenter",value:function(){var l=this.nodes,p=this.width,f=this.height,y=this.rootEl,b=this.transformModel;if(l.length){var x=p||y.clientWidth,P=f||y.clientHeight,C=this.getVirtualRectSize(),W=C.virtualRectCenterPositionX,K=C.virtualRectCenterPositionY;b.focusOn(W,K,x,P)}}},{key:"fitView",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,b=this.height,x=this.rootEl,P=this.transformModel;if(f.length){var C=y||x.clientWidth,W=b||x.clientHeight,K=this.getVirtualRectSize(),pe=K.virtualRectWidth,Oe=K.virtualRectHeight,Ne=K.virtualRectCenterPositionX,Je=K.virtualRectCenterPositionY,Qe=(pe+p)/C,mt=(Oe+l)/W,$t=0;$t=1/Math.max(Qe,mt);var hn=[C/2,W/2];P.zoom($t,hn),P.focusOn(Ne,Je,C,W)}}},{key:"openEdgeAnimation",value:function(l){this.getEdgeModelById(l).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(l){this.getEdgeModelById(l).closeEdgeAnimation()}}],u&&DP(o.prototype,u),i}(),Lu=Yn(ot.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),di=Yn(ot.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fl=Yn(ot.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vl=Yn(ot.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yf=Yn(ot.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xd=Yn(ot.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return po.DEFAULT}}),$c=Yn(ot.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ms=Yn(ot.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fv=Yn(ot.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dv=Yn(ot.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Yd=Yn(ot.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qp=Yn(ot.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yn(ot.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"nodesMap"),ot.prototype),Yn(ot.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"edgesMap"),ot.prototype),Yn(ot.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"modelsMap"),ot.prototype),Yn(ot.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"sortElements"),ot.prototype),Yn(ot.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"textEditElement"),ot.prototype),Yn(ot.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"selectElements"),ot.prototype),Yn(ot.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"selectNodes"),ot.prototype),Yn(ot.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setFakerNode"),ot.prototype),Yn(ot.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"removeFakerNode"),ot.prototype),Yn(ot.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setModel"),ot.prototype),Yn(ot.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"toFront"),ot.prototype),Yn(ot.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setElementZIndex"),ot.prototype),Yn(ot.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteNode"),ot.prototype),Yn(ot.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"addNode"),ot.prototype),Yn(ot.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"cloneNode"),ot.prototype),Yn(ot.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNode"),ot.prototype),Yn(ot.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNode2Coordinate"),ot.prototype),Yn(ot.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"editText"),ot.prototype),Yn(ot.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"addEdge"),ot.prototype),Yn(ot.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveEdge"),ot.prototype),Yn(ot.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeBySourceAndTarget"),ot.prototype),Yn(ot.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeById"),ot.prototype),Yn(ot.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeBySource"),ot.prototype),Yn(ot.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeByTarget"),ot.prototype),Yn(ot.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setElementStateById"),ot.prototype),Yn(ot.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"updateText"),ot.prototype),Yn(ot.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectNodeById"),ot.prototype),Yn(ot.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectEdgeById"),ot.prototype),Yn(ot.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectElementById"),ot.prototype),Yn(ot.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"clearSelectElements"),ot.prototype),Yn(ot.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNodes"),ot.prototype),Yn(ot.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setDefaultEdgeType"),ot.prototype),Yn(ot.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"changeNodeType"),ot.prototype),Yn(ot.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"changeEdgeType"),ot.prototype),Yn(ot.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeIncomingEdge"),ot.prototype),Yn(ot.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeOutgoingEdge"),ot.prototype),Yn(ot.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getAnchorIncomingEdge"),ot.prototype),Yn(ot.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getAnchorOutcomingEdge"),ot.prototype),Yn(ot.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeIncomingNode"),ot.prototype),Yn(ot.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeOutgoingNode"),ot.prototype),Yn(ot.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setTheme"),ot.prototype),Yn(ot.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"resize"),ot.prototype),Yn(ot.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"clearData"),ot.prototype),Yn(ot.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"translateCenter"),ot.prototype),Yn(ot.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"fitView"),ot.prototype),Yn(ot.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"openEdgeAnimation"),ot.prototype),Yn(ot.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"closeEdgeAnimation"),ot.prototype),ot),IP=vw;function Pg(i){return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Pg(i)}function kg(){return kg=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},kg.apply(this,arguments)}function LP(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Ng(i,o){return Ng=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Ng(i,o)}function FP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=dy(i);if(o){var p=dy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return $P(this,u)}}function $P(i,o){if(o&&(Pg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ns(i)}function Ns(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function dy(i){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},dy(i)}function Bc(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var yw,BP=Yl(pw=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Ng(f,y)})(p,i);var o,u,l=FP(p);function p(f){var y;(function(C,W){if(!(C instanceof W))throw new TypeError("Cannot call a class as a function")})(this,p),Bc(Ns(y=l.call(this)),"stepDrag",void 0),Bc(Ns(y),"stepScrollX",0),Bc(Ns(y),"stepScrollY",0),Bc(Ns(y),"onDragging",function(C){var W=C.deltaX,K=C.deltaY;y.setState({isDragging:!0});var pe=y.props.graphModel,Oe=pe.transformModel;pe.editConfigModel.stopMoveGraph!==!0&&Oe.translate(W,K)}),Bc(Ns(y),"onDragEnd",function(){y.setState({isDragging:!1})}),Bc(Ns(y),"zoomHandler",function(C){var W=y.props,K=W.graphModel,pe=K.editConfigModel,Oe=K.transformModel,Ne=K.gridSize,Je=W.graphModel,Qe=C.deltaX,mt=C.deltaY;if(pe.stopScrollGraph||C.ctrlKey===!0){if(!pe.stopZoomGraph){C.preventDefault();var $t=Je.getPointByClient({x:C.clientX,y:C.clientY}).canvasOverlayPosition,hn=$t.x,dn=$t.y;Oe.zoom(C.deltaY<0,[hn,dn])}}else{if(C.preventDefault(),y.stepScrollX+=Qe,y.stepScrollY+=mt,Math.abs(y.stepScrollX)>=Ne){var zn=y.stepScrollX%Ne,sn=y.stepScrollX-zn;Oe.translate(-sn*Oe.SCALE_X,0),y.stepScrollX=zn}if(Math.abs(y.stepScrollY)>=Ne){var Cn=y.stepScrollY%Ne,_n=y.stepScrollY-Cn;Oe.translate(0,-_n*Oe.SCALE_Y),y.stepScrollY=Cn}}}),Bc(Ns(y),"clickHandler",function(C){if(C.target.getAttribute("name")==="canvas-overlay"){var W=y.props.graphModel;W.selectElements.size>0&&W.clearSelectElements(),W.eventCenter.emit(kn.BLANK_CLICK,{e:C})}}),Bc(Ns(y),"handleContextMenu",function(C){if(C.target.getAttribute("name")==="canvas-overlay"){C.preventDefault();var W=y.props.graphModel,K=W.getPointByClient({x:C.clientX,y:C.clientY});W.eventCenter.emit(kn.BLANK_CONTEXTMENU,{e:C,position:K})}}),Bc(Ns(y),"mouseDownHandler",function(C){var W=y.props.graphModel,K=W.eventCenter,pe=W.editConfigModel,Oe=W.transformModel.SCALE_X,Ne=W.gridSize,Je=C.target,Qe=!pe.adjustEdge&&!pe.adjustNodePosition;(Je.getAttribute("name")==="canvas-overlay"||Qe)&&(pe.stopMoveGraph!==!0?(y.stepDrag.setStep(Ne*Oe),y.stepDrag.handleMouseDown(C)):K.emit(kn.BLANK_MOUSEDOWN,{e:C}),y.clickHandler(C))});var b=f.graphModel,x=b.gridSize,P=b.eventCenter;return y.stepDrag=new J({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:x,eventType:"BLANK",isStopPropagation:!1,eventCenter:P,model:null}),y.state={isDragging:!1},y}return o=p,(u=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,b=y.children,x=y.dnd,P=this.state.isDragging;return Object(Le.g)("svg",kg({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:P?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},x.eventMap()),Object(Le.g)("g",{transform:f},b))}}])&&LP(o.prototype,u),p}(Le.a))||pw;function Rg(i){return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Rg(i)}function UP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function GP(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function jg(i,o){return jg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},jg(i,o)}function VP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=py(i);if(o){var p=py(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return WP(this,u)}}function WP(i,o){if(o&&(Rg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},py(i)}var zP=Yl(yw=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&jg(f,y)})(p,i);var o,u,l=VP(p);function p(){return UP(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,b=f.graphModel,x=y.getTools().map(function(P){return Object(Le.g)(P,{graphModel:b,logicFlow:y.instance})});return y.components=x,x}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,b=f.graphModel,x=document.querySelector("#ToolOverlay_".concat(b.flowId)),P=y.getInstance();P.components.forEach(function(C){return C(P,x)}),P.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Le.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&GP(o.prototype,u),p}(Le.a))||yw;function Cg(i){return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Cg(i)}function HP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function XP(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Dg(i,o){return Dg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Dg(i,o)}function YP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=hy(i);if(o){var p=hy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return qP(this,u)}}function qP(i,o){if(o&&(Cg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}var mw,KP=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Dg(f,y)})(p,i);var o,u,l=YP(p);function p(){return HP(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"render",value:function(){var f=this.props.background;return Object(Le.g)("div",{className:"lf-background"},Object(Le.g)("div",{style:f,className:"lf-background-area"}))}}])&&XP(o.prototype,u),p}(Le.a);function Ig(i){return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ig(i)}function ZP(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function JP(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Lg(i,o){return Lg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Lg(i,o)}function QP(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=vy(i);if(o){var p=vy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return ek(this,u)}}function ek(i,o){if(o&&(Ig(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gw(i)}function gw(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function vy(i){return vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},vy(i)}function tk(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var _w=Yl(mw=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Lg(f,y)})(p,i);var o,u,l=QP(p);function p(){var f;ZP(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return tk(gw(f=l.call.apply(l,[this].concat(b))),"id",Ua()),f}return o=p,(u=[{key:"renderDot",value:function(){var f=this.props,y=f.config,b=y.color,x=y.thickness,P=x===void 0?2:x,C=f.size,W=f.visible,K=Math.min(Math.max(2,P),C/2),pe=1;return W||(pe=0),Object(Le.g)("rect",{width:K,height:K,rx:K/2,ry:K/2,fill:b,opacity:pe})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,b=y.color,x=y.thickness,P=x===void 0?1:x,C=f.size,W=f.visible,K=Math.min(Math.max(1,P),C/2),pe="M ".concat(C," 0 H0 M0 0 V0 ").concat(C),Oe=1;return W||(Oe=0),Object(Le.g)("path",{d:pe,stroke:b,strokeWidth:K,opacity:Oe})}},{key:"render",value:function(){var f=this.props,y=f.type,b=f.size,x=f.graphModel.transformModel,P=[x.SCALE_X,x.SKEW_Y,x.SKEW_X,x.SCALE_Y,x.TRANSLATE_X,x.TRANSLATE_Y].join(","),C="matrix(".concat(P,")");return Object(Le.g)("div",{className:"lf-grid"},Object(Le.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Le.g)("defs",null,Object(Le.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:C,x:"0",y:"0",width:b,height:b},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object(Le.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&JP(o.prototype,u),p}(Le.a))||mw;_w.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Fg(i){return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Fg(i)}function nk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return bw(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return bw(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}var ww,Jp=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(u){var l=nk(u,2),p=l[0],f=l[1];(p==="style"||Fg(f)!=="object")&&(o[p]=f)}),Object(Le.g)("line",o)};function $g(i){return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$g(i)}function Ew(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function yy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Ew(Object(u),!0).forEach(function(l){rk(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Ew(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function rk(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function ok(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ik(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Bg(i,o){return Bg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Bg(i,o)}function ak(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=my(i);if(o){var p=my(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return uk(this,u)}}function uk(i,o){if(o&&($g(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}var Ow,lk=Yl(ww=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Bg(f,y)})(p,i);var o,u,l=ak(p);function p(){return ok(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,b=f.isShowHorizontal,x=f.isShowVertical,P=f.getStyle(),C=y.x,W=C===void 0?0:C,K=y.y,pe=K===void 0?0:K,Oe=yy(yy({x1:-1e5,y1:pe,x2:1e5,y2:pe},P),{},{stroke:b?P.stroke:"none"}),Ne=yy(yy({x1:W,y1:-1e5,x2:W,y2:1e5},P),{},{stroke:x?P.stroke:"none"});return Object(Le.g)("g",{className:"lf-snapline"},Object(Le.g)(Jp,Oe),Object(Le.g)(Jp,Ne))}}])&&ik(o.prototype,u),p}(Le.a))||ww;function Ug(i){return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ug(i)}function sk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return xw(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return xw(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function qf(i){var o=i.x,u=i.y,l=i.width,p=i.height,f=i.className,y=i.radius,b=o-l/2,x=u-p/2,P={};return Object.entries(i).forEach(function(C){var W=sk(C,2),K=W[0],pe=W[1];Ug(pe)!=="object"&&(P[K]=pe)}),P.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(P.rx=y,P.ry=y),P.x=b,P.y=x,Object(Le.g)("rect",P)}function Gg(i){return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gg(i)}function Qp(){return Qp=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Qp.apply(this,arguments)}function Sw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Aw(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Sw(Object(u),!0).forEach(function(l){ck(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Sw(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function ck(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function fk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function dk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Vg(i,o){return Vg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Vg(i,o)}function pk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=gy(i);if(o){var p=gy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return hk(this,u)}}function hk(i,o){if(o&&(Gg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function gy(i){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},gy(i)}qf.defaultProps={className:"",radius:""};var Tw,vk=Yl(Ow=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Vg(f,y)})(p,i);var o,u,l=pk(p);function p(){return fk(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,b=f.editConfigModel,x=b.hoverOutline,P=b.nodeSelectedOutline,C=[];return y.forEach(function(W){if(W.isHovered||W.isSelected){var K=W.isHovered,pe=W.isSelected,Oe=W.x,Ne=W.y,Je=W.width,Qe=W.height;if(P&&pe||x&&K){var mt=W.getOutlineStyle(),$t={};if(Object.keys(mt).forEach(function(dn){dn!=="hover"&&($t[dn]=mt[dn])}),K){var hn=mt.hover;$t=Aw(Aw({},$t),hn)}C.push(Object(Le.g)(qf,Qp({transform:W.transform,className:"lf-outline-node",x:Oe,y:Ne,width:Je+10,height:Qe+10},$t)))}}}),C}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,b=f.editConfigModel,x=b.edgeSelectedOutline,P=b.hoverOutline,C=[],W=0;W<y.length;W++){var K=y[W];(x&&K.isSelected||P&&K.isHovered)&&(K.modelType===_r.LINE_EDGE?C.push(this.getLineOutline(K)):K.modelType===_r.POLYLINE_EDGE?C.push(this.getPolylineOutline(K)):K.modelType===_r.BEZIER_EDGE&&C.push(this.getBezierOutline(K)))}return C}},{key:"getLineOutline",value:function(f){var y=f.startPoint,b=f.endPoint,x=(y.x+b.x)/2,P=(y.y+b.y)/2,C=Math.abs(y.x-b.x)+10,W=Math.abs(y.y-b.y)+10,K=f.getOutlineStyle();return Object(Le.g)(qf,Qp({className:"lf-outline-edge",x,y:P,width:C,height:W},K))}},{key:"getPolylineOutline",value:function(f){var y=f.points,b=so(y),x=Vt(b,8),P=x.x,C=x.y,W=x.width,K=x.height,pe=f.getOutlineStyle();return Object(Le.g)(qf,Qp({className:"lf-outline",x:P,y:C,width:W,height:K},pe))}},{key:"getBezierOutline",value:function(f){var y=f.path,b=Wn(y),x=Vt(b,8),P=x.x,C=x.y,W=x.width,K=x.height,pe=f.getOutlineStyle();return Object(Le.g)(qf,Qp({className:"lf-outline",x:P,y:C,width:W,height:K},pe))}},{key:"render",value:function(){return Object(Le.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&dk(o.prototype,u),p}(Le.a))||Ow;function Wg(i){return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Wg(i)}function yk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return Mw(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Mw(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function eh(i){var o=i.x,u=o===void 0?0:o,l=i.y,p=l===void 0?0:l,f=i.r,y=f===void 0?4:f,b=i.className,x={cx:u,cy:p,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(P){var C=yk(P,2),W=C[0],K=C[1];Wg(K)!=="object"&&(x[W]=K)}),x.className=b?"lf-basic-shape ".concat(b):"lf-basic-shape",Object(Le.g)("circle",x)}function zg(i){return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},zg(i)}function mk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return Pw(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Pw(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function hv(){return hv=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},hv.apply(this,arguments)}function kw(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Nw(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Rw(i,o,u){return o&&Nw(i.prototype,o),u&&Nw(i,u),i}function jw(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Hg(i,o)}function Hg(i,o){return Hg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Hg(i,o)}function Cw(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=by(i);if(o){var p=by(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return gk(this,u)}}function gk(i,o){if(o&&(zg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _y(i)}function _y(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function by(i){return by=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},by(i)}function Xg(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Dw,Iw=function(i){jw(u,i);var o=Cw(u);function u(){var l;return kw(this,u),Xg(_y(l=o.call(this)),"dragHandler",void 0),Xg(_y(l),"onDragging",function(p){var f=p.event,y=l.props,b=y.graphModel,x=y.bezierModel,P=y.type,C=b.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,W=C.x,K=C.y;x.updateAdjustAnchor({x:W,y:K},P),b.eventCenter.emit(kn.EDGE_ADJUST,{data:x.getData()})}),Xg(_y(l),"onDragEnd",function(){l.props.bezierModel.isDragging=!1}),l.dragHandler=new J({onDragging:l.onDragging,onDragEnd:l.onDragEnd}),l}return Rw(u,[{key:"render",value:function(){var l=this,p=this.props.position,f=p.x,y=p.y,b=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Le.g)(eh,hv({className:"lf-bezier-adjust-anchor",x:f,y},b,{onMouseDown:function(x){l.dragHandler.handleMouseDown(x)}}))}}]),u}(Le.a),_k=Yl(Tw=function(i){jw(u,i);var o=Cw(u);function u(){return kw(this,u),o.apply(this,arguments)}return Rw(u,[{key:"getBezierAdjust",value:function(l,p){var f=l.path,y=l.id,b=mk(Wn(f),4),x=b[0],P=b[1],C=b[2],W=b[3],K=l.getEdgeStyle().adjustLine,pe=[];return pe.push(Object(Le.g)(Jp,hv({x1:x.x,y1:x.y,x2:P.x,y2:P.y},K))),pe.push(Object(Le.g)(Iw,{position:P,bezierModel:l,graphModel:p,key:"".concat(y,"_ePre"),type:"sNext"})),pe.push(Object(Le.g)(Jp,hv({x1:W.x,y1:W.y,x2:C.x,y2:C.y},K))),pe.push(Object(Le.g)(Iw,{position:C,bezierModel:l,graphModel:p,key:"".concat(y,"_sNext"),type:"ePre"})),pe}},{key:"selectedBezierEdge",value:function(){for(var l=this.props.graphModel,p=l.edges,f=[],y=0;y<p.length;y++){var b=p[y];b.isSelected&&b.modelType===_r.BEZIER_EDGE&&b.draggable&&f.push(this.getBezierAdjust(b,l))}return f}},{key:"render",value:function(){return Object(Le.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),u}(Le.a))||Tw;function Yg(i){return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Yg(i)}function bk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function wk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function qg(i,o){return qg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},qg(i,o)}function Ek(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=wy(i);if(o){var p=wy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Ok(this,u)}}function Ok(i,o){if(o&&(Yg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function wy(i){return wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},wy(i)}var Lw,xk=Yl(Dw=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&qg(f,y)})(p,i);var o,u,l=Ek(p);function p(){return bk(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object(Le.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Le.g)("g",{transform:f},y))}}])&&wk(o.prototype,u),p}(Le.a))||Dw;function Kg(i){return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kg(i)}function Zg(){return Zg=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Zg.apply(this,arguments)}function Sk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ak(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Jg(i,o){return Jg=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Jg(i,o)}function Tk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Ey(i);if(o){var p=Ey(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Mk(this,u)}}function Mk(i,o){if(o&&(Kg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Ey(i){return Ey=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ey(i)}var Pk=Yl(Lw=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Jg(f,y)})(p,i);var o,u,l=Tk(p);function p(){return Sk(this,p),l.apply(this,arguments)}return o=p,u=[{key:"getComponent",value:function(f,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",x=this.props.getView,P=x(f.type);return Object(Le.g)(P,{key:f.id,model:f,graphModel:y,overlay:b})}},{key:"render",value:function(){var f=this,y=this.props,b=y.graphModel,x=y.tool,P=y.options,C=y.dnd,W=y.snaplineModel,K={};P.width&&(K.width="".concat(b.width,"px")),P.height&&(K.height="".concat(b.height,"px"));var pe=P.grid,Oe=b.fakerNode,Ne=b.editConfigModel.adjustEdge;return Object(Le.g)("div",{className:"lf-graph","flow-id":b.flowId,style:K},Object(Le.g)(BP,{graphModel:b,dnd:C},Object(Le.g)("g",{className:"lf-base"},bf(b.sortElements,function(Je){return f.getComponent(Je,b)})),Oe?this.getComponent(Oe,b):""),Object(Le.g)(xk,{graphModel:b},Object(Le.g)(vk,{graphModel:b}),Ne?Object(Le.g)(_k,{graphModel:b}):"",P.snapline!==!1?Object(Le.g)(lk,{snaplineModel:W}):""),Object(Le.g)(zP,{graphModel:b,tool:x}),P.background&&Object(Le.g)(KP,{background:P.background}),P.grid&&Object(Le.g)(_w,Zg({},pe,{graphModel:b})))}}],u&&Ak(o.prototype,u),p}(Le.a))||Lw,kk=Pk;function Fw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Oy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Fw(Object(u),!0).forEach(function(l){Uc(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Fw(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Nk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Uc(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Rk=function(){function i(l){var p=this;(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,i),Uc(this,"nodeConfig",void 0),Uc(this,"lf",void 0),Uc(this,"fakerNode",void 0),Uc(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),Uc(this,"dragEnter",function(y){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(Oy(Oy({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),Uc(this,"onDragOver",function(y){if(y.preventDefault(),p.fakerNode){var b=p.clientToLocalPoint({x:y.clientX,y:y.clientY}),x=b.x,P=b.y;p.fakerNode.moveTo(x,P);var C=p.fakerNode.getData();p.lf.setNodeSnapLine(C),p.lf.graphModel.eventCenter.emit(kn.NODE_DND_DRAG,{data:C})}return!1}),Uc(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),Uc(this,"onDrop",function(y){p.lf.graphModel&&y&&p.nodeConfig&&(p.lf.addNode(Oy(Oy({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY})),kn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=l.lf;this.lf=f}var o,u;return o=i,(u=[{key:"clientToLocalPoint",value:function(l){var p=l.x,f=l.y,y=Ml(this.lf.options,["grid","size"]),b=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,x=b.x,P=b.y;return{x:uu(x,y),y:uu(P,y)}}},{key:"startDrag",value:function(l){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=l,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&Nk(o.prototype,u),i}();function $w(i){var o=i.container,u=i.grid,l=i.width,p=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof l=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return u&&(i.grid=ol({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},u)),ol({},Uw,i)}var Qr,Bw,Uw={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function Qg(i){return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qg(i)}function e_(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return Gw(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Gw(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gw(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function Vw(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function xy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Vw(Object(u),!0).forEach(function(l){Ww(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):Vw(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function jk(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Ck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Dk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function vv(){return vv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=Ik(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},vv.apply(this,arguments)}function Ik(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Kf(i))!==null;);return i}function t_(i,o){return t_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},t_(i,o)}function Lk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Kf(i);if(o){var p=Kf(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Fk(this,u)}}function Fk(i,o){if(o&&(Qg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sy(i)}function Sy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kf(i){return Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Kf(i)}function Ww(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function zl(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var n_=(Qr=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&t_(f,y)})(p,i);var o,u,l=Lk(p);function p(){var f;Ck(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Ww(Sy(f=l.call.apply(l,[this].concat(b))),"modelType",_r.BEZIER_EDGE),jk(Sy(f),"path",Bw,Sy(f)),f}return o=p,(u=[{key:"initEdgeData",value:function(f){this.offset=100,vv(Kf(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return xy(xy({},vv(Kf(p.prototype),"getEdgeStyle",this).call(this)),ho(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(b){var x=b.x,P=b.y;f+=x,y+=P}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=vv(Kf(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(b){return{x:b.x,y:b.y}});return xy(xy({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return sr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=e_(f,4),b=y[0],x=y[1],P=y[2],C=y[3];return"M ".concat(b.x," ").concat(b.y,`
    C `).concat(x.x," ").concat(x.y,`,
    `).concat(P.x," ").concat(P.y,`,
    `).concat(C.x," ").concat(C.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,b=f.ePre;this.updatePath(y,b)}},{key:"updatePath",value:function(f,y){f=ho(f),y=ho(y);var b={x:this.startPoint.x,y:this.startPoint.y},x={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var P=this.getControls();f=P.sNext,y=P.ePre}this.pointsList=[b,f,y,x],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var b=e_(this.pointsList,3),x=b[1],P=b[2];x.x+=f,x.y+=y,this.updatePath(x,P)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var b=e_(this.pointsList,3),x=b[1],P=b[2];P.x+=f,P.y+=y,this.updatePath(x,P)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,b=f.endPoint,x=f.sourceNode,P=f.targetNode,C=sr({start:y,end:b,sourceNode:x,targetNode:P,offset:this.offset}),W=C.sNext,K=C.ePre;this.pointsList=[y,W,K,b],this.initPoints()}}])&&Dk(o.prototype,u),p}(Ul),Bw=zl(Qr.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zl(Qr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"initPoints"),Qr.prototype),zl(Qr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"updatePoints"),Qr.prototype),zl(Qr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"updateStartPoint"),Qr.prototype),zl(Qr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"updateEndPoint"),Qr.prototype),zl(Qr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"moveStartPoint"),Qr.prototype),zl(Qr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"moveEndPoint"),Qr.prototype),zl(Qr.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"updateAdjustAnchor"),Qr.prototype),zl(Qr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"getAdjustStart"),Qr.prototype),zl(Qr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"getAdjustEnd"),Qr.prototype),zl(Qr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Qr.prototype,"updateAfterAdjustStartAndEnd"),Qr.prototype),Qr),tn,zw,Hw,Xw,Yw,qw,Kw,Zw,Jw,Qw,eE,tE,nE,rE,oE,iE,aE,uE,lE,sE,cE,fE,dE,$k=function(i){return i==null};function Bk(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||pE(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function r_(i){return r_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r_(i)}function pE(i,o){if(i){if(typeof i=="string")return hE(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?hE(i,o):void 0}}function hE(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function vE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function za(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?vE(Object(u),!0).forEach(function(l){pu(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):vE(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function pi(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Uk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function pu(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Er(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Gc,yE,Vc=(tn=function(){function i(l,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,i),pu(this,"id",""),pi(this,"type",zw,this),pi(this,"x",Hw,this),pi(this,"y",Xw,this),pi(this,"text",Yw,this),pi(this,"properties",qw,this),pi(this,"_width",Kw,this),pi(this,"_height",Zw,this),pi(this,"anchorsOffset",Jw,this),pi(this,"isSelected",Qw,this),pi(this,"isHovered",eE,this),pi(this,"isShowAnchor",tE,this),pi(this,"isDragging",nE,this),pi(this,"isHitable",rE,this),pi(this,"draggable",oE,this),pi(this,"visible",iE,this),pi(this,"enableRotate",aE,this),pu(this,"virtual",!1),pu(this,"graphModel",void 0),pi(this,"zIndex",uE,this),pi(this,"state",lE,this),pi(this,"autoToFront",sE,this),pi(this,"style",cE,this),pi(this,"transform",fE,this),pi(this,"_rotate",dE,this),pu(this,"BaseType",eo.NODE),pu(this,"modelType",_r.NODE),pu(this,"additionStateData",void 0),pu(this,"targetRules",[]),pu(this,"sourceRules",[]),pu(this,"moveRules",[]),pu(this,"hasSetTargetRules",!1),pu(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(l),this.setAttributes()}var o,u;return o=i,u=[{key:"width",get:function(){return this._width},set:function(l){this._width=l}},{key:"height",get:function(){return this._height},set:function(l){this._height=l}},{key:"rotate",get:function(){return this._rotate},set:function(l){this._rotate=l;var p=this.x,f=p===void 0?0:p,y=this.y,b=y===void 0?0:y;this.transform=new ks(-f,-b).rotate(l).translate(f,b).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(l){if(l.properties||(l.properties={}),!l.id){var p=this.graphModel.idGenerator,f=p&&p(l.type),y=this.createId();l.id=y||f||Ua()}this.formatText(l),_i(this,function(b){return La(b,["id","type","x","y","text","properties","virtual","rotate"])}(l)),this.graphModel.overlapMode===po.INCREASE&&(this.zIndex=l.zIndex||Cu())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(l){l.text||(l.text={value:"",x:l.x,y:l.y,draggable:!1,editable:!0}),l.text&&typeof l.text=="string"?l.text={value:l.text,x:l.x,y:l.y,draggable:!1,editable:!0}:l.text&&l.text.editable===void 0&&(l.text.editable=!0)}},{key:"getData",value:function(){var l=this.text,p=l.x,f=l.y,y=l.value,b=this.properties;Object(c.x)(b)&&(b=Object(c.I)(b));var x={id:this.id,type:this.type,x:this.x,y:this.y,properties:b};return this.rotate&&(x.rotate=this.rotate),this.graphModel.overlapMode===po.INCREASE&&(x.zIndex=this.zIndex),y&&(x.text={x:p,y:f,value:y}),x}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return za(za({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var l=this.graphModel.theme.nodeText;return ho(l)}},{key:"getRotateControlStyle",value:function(){var l=this.graphModel.theme.rotateControl;return ho(l)}},{key:"getAnchorStyle",value:function(l){var p=this.graphModel.theme.anchor;return ho(p)}},{key:"getAnchorLineStyle",value:function(l){var p=this.graphModel.theme.anchorLine;return ho(p)}},{key:"getOutlineStyle",value:function(){var l=this.graphModel.theme.outline;return ho(l)}},{key:"isAllowConnectedAsSource",value:function(l,p,f,y){var b=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var x,P=!0,C=0;C<b.length;C++){var W=b[C];if(!W.validate.call(this,this,l,p,f,y)){P=!1,x=W.message;break}}return{isAllPass:P,msg:x}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(l,p,f,y){var b=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var x,P=!0,C=0;C<b.length;C++){var W=b[C];if(!W.validate.call(this,l,this,p,f,y)){P=!1,x=W.message;break}}return{isAllPass:P,msg:x}}},{key:"isAllowMoveNode",value:function(l,p){var f,y=!0,b=!0,x=function(W,K){var pe=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!pe){if(Array.isArray(W)||(pe=pE(W))||K&&W&&typeof W.length=="number"){pe&&(W=pe);var Oe=0,Ne=function(){};return{s:Ne,n:function(){return Oe>=W.length?{done:!0}:{done:!1,value:W[Oe++]}},e:function($t){throw $t},f:Ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Je,Qe=!0,mt=!1;return{s:function(){pe=pe.call(W)},n:function(){var $t=pe.next();return Qe=$t.done,$t},e:function($t){mt=!0,Je=$t},f:function(){try{Qe||pe.return==null||pe.return()}finally{if(mt)throw Je}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(x.s();!(f=x.n()).done;){var P=(0,f.value)(this,l,p);if(!P)return!1;if(r_(P)==="object"){var C=P;if(C.x===!1&&C.y===!1)return!1;y=y&&C.x,b=b&&C.y}}}catch(W){x.e(W)}finally{x.f()}return{x:y,y:b}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var l=this.anchorsOffset,p=this.id,f=this.x,y=this.y;return l&&l.length>0?l.map(function(b,x){return b.length?(b=b,{id:"".concat(p,"_").concat(x),x:f+b[0],y:y+b[1]}):za(za({},b=b),{},{x:f+b.x,y:y+b.y,id:b.id||"".concat(p,"_").concat(x)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(l){return function(p,f){for(var y,b=ki(f),x=Number.MAX_SAFE_INTEGER,P=0;P<b.length;P++){var C=Ki(p.x,p.y,b[P].x,b[P].y);C<x&&(x=C,y={index:P,anchor:ul(ul({},b[P]),{},{x:b[P].x,y:b[P].y,id:b[P].id})})}return y}(l,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var l=this.getAnchorsByOffset(),p=this.x,f=this.y,y=this.rotate;return l.forEach(function(b){var x=b.x,P=b.y,C=Bk(new Ps([x,P,1]).translate(-p,-f).rotate(y).translate(p,f)[0],2),W=C[0],K=C[1];b.x=W,b.y=K}),l}},{key:"getAnchorInfo",value:function(l){if(!$k(l))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===l)return f}}},{key:"addNodeMoveRules",value:function(l){this.moveRules.includes(l)||this.moveRules.push(l)}},{key:"move",value:function(l,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,b=!1;if(f)y=!0,b=!0;else{var x=this.isAllowMoveNode(l,p);typeof x=="boolean"?(y=x,b=x):(y=x.x,b=x.y)}if(y){var P=this.x+l;this.x=P,this.text&&this.moveText(l,0)}if(b){var C=this.y+p;this.y=C,this.text&&this.moveText(0,p)}return y||b}},{key:"getMoveDistance",value:function(l,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,b=!1,x=0,P=0;if(f)y=!0,b=!0;else{var C=this.isAllowMoveNode(l,p);typeof C=="boolean"?(y=C,b=C):(y=C.x,b=C.y)}if(y&&l){var W=this.x+l;this.x=W,this.text&&this.moveText(l,0),x=l}if(b&&p){var K=this.y+p;this.y=K,this.text&&this.moveText(0,p),P=p}return[x,P]}},{key:"moveTo",value:function(l,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=l-this.x,b=p-this.y;return!(!f&&!this.isAllowMoveNode(y,b)||(this.text&&this.text&&this.moveText(y,b),this.x=l,this.y=p,0))}},{key:"moveText",value:function(l,p){var f=this.text,y=f.x,b=f.y,x=f.value,P=f.draggable,C=f.editable;this.text={value:x,editable:C,draggable:P,x:y+l,y:b+p}}},{key:"updateText",value:function(l){this.text=za(za({},Object(c.I)(this.text)),{},{value:l})}},{key:"setSelected",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=l}},{key:"setHovered",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=l,this.setIsShowAnchor(l)}},{key:"setIsShowAnchor",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=l}},{key:"setEnableRotate",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=l}},{key:"setHitable",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=l}},{key:"setElementState",value:function(l,p){this.state=l,this.additionStateData=p}},{key:"setProperty",value:function(l,p){this.properties=za(za({},Object(c.I)(this.properties)),{},pu({},l,Wo(p))),this.setAttributes()}},{key:"setProperties",value:function(l){this.properties=za(za({},Object(c.I)(this.properties)),Wo(l)),this.setAttributes()}},{key:"deleteProperty",value:function(l){delete this.properties[l],this.setAttributes()}},{key:"setStyle",value:function(l,p){this.style=za(za({},this.style),{},pu({},l,Wo(p)))}},{key:"setStyles",value:function(l){this.style=za(za({},this.style),Wo(l))}},{key:"updateStyles",value:function(l){this.style=za({},Wo(l))}},{key:"setZIndex",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=l}},{key:"updateAttributes",value:function(l){_i(this,l)}}],u&&Uk(o.prototype,u),i}(),zw=Er(tn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Hw=Er(tn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xw=Er(tn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yw=Er(tn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),qw=Er(tn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Kw=Er(tn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Zw=Er(tn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Jw=Er(tn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qw=Er(tn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eE=Er(tn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tE=Er(tn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nE=Er(tn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rE=Er(tn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oE=Er(tn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),iE=Er(tn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),aE=Er(tn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uE=Er(tn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lE=Er(tn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),sE=Er(tn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cE=Er(tn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),fE=Er(tn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dE=Er(tn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Er(tn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"incoming"),tn.prototype),Er(tn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"outgoing"),tn.prototype),Er(tn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"addNodeMoveRules"),tn.prototype),Er(tn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"move"),tn.prototype),Er(tn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"getMoveDistance"),tn.prototype),Er(tn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"moveTo"),tn.prototype),Er(tn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"moveText"),tn.prototype),Er(tn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"updateText"),tn.prototype),Er(tn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setSelected"),tn.prototype),Er(tn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setHovered"),tn.prototype),Er(tn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setIsShowAnchor"),tn.prototype),Er(tn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setEnableRotate"),tn.prototype),Er(tn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setHitable"),tn.prototype),Er(tn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setElementState"),tn.prototype),Er(tn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setProperty"),tn.prototype),Er(tn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setProperties"),tn.prototype),Er(tn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"deleteProperty"),tn.prototype),Er(tn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setStyle"),tn.prototype),Er(tn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setStyles"),tn.prototype),Er(tn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"updateStyles"),tn.prototype),Er(tn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"setZIndex"),tn.prototype),Er(tn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(tn.prototype,"updateAttributes"),tn.prototype),tn);function o_(i){return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o_(i)}function mE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function gE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?mE(Object(u),!0).forEach(function(l){_E(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):mE(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Gk(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Vk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Wk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function i_(){return i_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=zk(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},i_.apply(this,arguments)}function zk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=th(i))!==null;);return i}function a_(i,o){return a_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},a_(i,o)}function Hk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=th(i);if(o){var p=th(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Xk(this,u)}}function Xk(i,o){if(o&&(o_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ay(i)}function Ay(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function th(i){return th=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},th(i)}function _E(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function u_(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Ta,bE,wE,l_=(Gc=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a_(f,y)})(p,i);var o,u,l=Hk(p);function p(){var f;Vk(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return _E(Ay(f=l.call.apply(l,[this].concat(b))),"modelType",_r.CIRCLE_NODE),Gk(Ay(f),"r",yE,Ay(f)),f}return o=p,(u=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=i_(th(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return gE(gE({},f),ho(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.r;return[{x:f,y:y-b,id:"".concat(this.id,"_0")},{x:f+b,y,id:"".concat(this.id,"_1")},{x:f,y:y+b,id:"".concat(this.id,"_2")},{x:f-b,y,id:"".concat(this.id,"_3")}]}}])&&Wk(o.prototype,u),p}(Vc),yE=u_(Gc.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),u_(Gc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Gc.prototype,"width"),Gc.prototype),u_(Gc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Gc.prototype,"height"),Gc.prototype),Gc);r(129);function s_(i){return s_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},s_(i)}function c_(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return EE(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return EE(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function EE(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function OE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function xE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?OE(Object(u),!0).forEach(function(l){AE(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):OE(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function SE(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Yk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function qk(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function f_(){return f_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=Kk(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},f_.apply(this,arguments)}function Kk(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=rh(i))!==null;);return i}function d_(i,o){return d_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},d_(i,o)}function Zk(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=rh(i);if(o){var p=rh(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Jk(this,u)}}function Jk(i,o){if(o&&(s_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nh(i)}function nh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function rh(i){return rh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},rh(i)}function AE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function oh(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var Rs,TE,ME,p_=(Ta=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&d_(f,y)})(p,i);var o,u,l=Zk(p);function p(){var f;Yk(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return AE(nh(f=l.call.apply(l,[this].concat(b))),"modelType",_r.DIAMOND_NODE),SE(nh(f),"rx",bE,nh(f)),SE(nh(f),"ry",wE,nh(f)),f}return o=p,(u=[{key:"getNodeStyle",value:function(){var f=f_(rh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return xE(xE({},f),ho(y))}},{key:"points",get:function(){var f=this.x,y=this.y,b=this.rx,x=this.ry;return[[f,y-x],[f+b,y],[f,y+x],[f-b,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=c_(b,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=c_(b,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,b){var x=c_(y,2);return{x:x[0],y:x[1],id:"".concat(f.id,"_").concat(b)}})}}])&&qk(o.prototype,u),p}(Vc),bE=oh(Ta.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),wE=oh(Ta.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),oh(Ta.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Ta.prototype,"points"),Ta.prototype),oh(Ta.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ta.prototype,"pointsPosition"),Ta.prototype),oh(Ta.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ta.prototype,"width"),Ta.prototype),oh(Ta.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ta.prototype,"height"),Ta.prototype),Ta);function h_(i){return h_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h_(i)}function PE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function kE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?PE(Object(u),!0).forEach(function(l){RE(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):PE(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function NE(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function Qk(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function eN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function v_(){return v_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=tN(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},v_.apply(this,arguments)}function tN(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ah(i))!==null;);return i}function y_(i,o){return y_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},y_(i,o)}function nN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=ah(i);if(o){var p=ah(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return rN(this,u)}}function rN(i,o){if(o&&(h_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ih(i)}function ih(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ah(i){return ah=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ah(i)}function RE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Ty(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var pl,jE,m_=(Rs=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&y_(f,y)})(p,i);var o,u,l=nN(p);function p(){var f;Qk(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return RE(ih(f=l.call.apply(l,[this].concat(b))),"modelType",_r.ELLIPSE_NODE),NE(ih(f),"rx",TE,ih(f)),NE(ih(f),"ry",ME,ih(f)),f}return o=p,(u=[{key:"getNodeStyle",value:function(){var f=v_(ah(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return kE(kE({},f),ho(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.rx,x=this.ry;return[{x:f,y:y-x,id:"".concat(this.id,"_0")},{x:f+b,y,id:"".concat(this.id,"_1")},{x:f,y:y+x,id:"".concat(this.id,"_2")},{x:f-b,y,id:"".concat(this.id,"_3")}]}}])&&eN(o.prototype,u),p}(Vc),TE=Ty(Rs.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),ME=Ty(Rs.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Ty(Rs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Rs.prototype,"width"),Rs.prototype),Ty(Rs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Rs.prototype,"height"),Rs.prototype),Rs);function g_(i){return g_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},g_(i)}function __(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return CE(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return CE(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function CE(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function DE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function IE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?DE(Object(u),!0).forEach(function(l){LE(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):DE(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function oN(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function iN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function aN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function b_(){return b_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=uN(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},b_.apply(this,arguments)}function uN(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=uh(i))!==null;);return i}function w_(i,o){return w_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},w_(i,o)}function lN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=uh(i);if(o){var p=uh(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return sN(this,u)}}function sN(i,o){if(o&&(g_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return My(i)}function My(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function uh(i){return uh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},uh(i)}function LE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function Py(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var E_,FE,O_=(pl=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&w_(f,y)})(p,i);var o,u,l=lN(p);function p(){var f;iN(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return LE(My(f=l.call.apply(l,[this].concat(b))),"modelType",_r.POLYGON_NODE),oN(My(f),"points",jE,My(f)),f}return o=p,(u=[{key:"getNodeStyle",value:function(){var f=b_(uh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return IE(IE({},f),ho(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return this.points.map(function(P){return{x:P[0]+f-b/2,y:P[1]+y-x/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=__(b,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=__(b,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,b=this.y,x=this.width,P=this.height;return this.points.map(function(C,W){var K=__(C,2),pe=K[0],Oe=K[1];return{x:y+pe-x/2,y:b+Oe-P/2,id:"".concat(f.id,"_").concat(W)}})}}])&&aN(o.prototype,u),p}(Vc),jE=Py(pl.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Py(pl.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(pl.prototype,"pointsPosition"),pl.prototype),Py(pl.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(pl.prototype,"width"),pl.prototype),Py(pl.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(pl.prototype,"height"),pl.prototype),pl);function x_(i){return x_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},x_(i)}function $E(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function BE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?$E(Object(u),!0).forEach(function(l){UE(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):$E(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function cN(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function fN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function dN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function S_(){return S_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=pN(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},S_.apply(this,arguments)}function pN(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=lh(i))!==null;);return i}function A_(i,o){return A_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},A_(i,o)}function hN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=lh(i);if(o){var p=lh(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return vN(this,u)}}function vN(i,o){if(o&&(x_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ky(i)}function ky(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function lh(i){return lh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},lh(i)}function UE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Zf,T_=(E_=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&A_(f,y)})(p,i);var o,u,l=hN(p);function p(){var f;fN(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return UE(ky(f=l.call.apply(l,[this].concat(b))),"modelType",_r.RECT_NODE),cN(ky(f),"radius",FE,ky(f)),f}return o=p,(u=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+b/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-b/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=S_(lh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return BE(BE({},f),ho(y))}}])&&dN(o.prototype,u),p}(Vc),FE=function(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}(E_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E_);function M_(i){return M_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},M_(i)}function GE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function VE(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?GE(Object(u),!0).forEach(function(l){zE(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):GE(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function yN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function mN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function P_(){return P_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,u){var l=gN(i,o);if(l){var p=Object.getOwnPropertyDescriptor(l,o);return p.get?p.get.call(arguments.length<3?i:u):p.value}},P_.apply(this,arguments)}function gN(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=sh(i))!==null;);return i}function k_(i,o){return k_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},k_(i,o)}function _N(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=sh(i);if(o){var p=sh(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return bN(this,u)}}function bN(i,o){if(o&&(M_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WE(i)}function WE(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function sh(i){return sh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},sh(i)}function zE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function HE(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var N_=(Zf=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&k_(f,y)})(p,i);var o,u,l=_N(p);function p(){var f;yN(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return zE(WE(f=l.call.apply(l,[this].concat(b))),"modelType",_r.TEXT_NODE),f}return o=p,(u=[{key:"getTextStyle",value:function(){var f=P_(sh(p.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return VE(VE({},f),ho(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return Bl({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return Bl({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&mN(o.prototype,u),p}(Vc),HE(Zf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Zf.prototype,"width"),Zf.prototype),HE(Zf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Zf.prototype,"height"),Zf.prototype),Zf);function R_(i){return R_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},R_(i)}function wN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function EN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function j_(i,o){return j_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},j_(i,o)}function ON(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Ny(i);if(o){var p=Ny(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return xN(this,u)}}function xN(i,o){if(o&&(R_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XE(i)}function XE(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ny(i){return Ny=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ny(i)}function SN(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Hl,YE,qE,KE,C_=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&j_(f,y)})(p,i);var o,u,l=ON(p);function p(){var f;wN(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return SN(XE(f=l.call.apply(l,[this].concat(b))),"modelType",_r.HTML_NODE),f}return o=p,(u=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+b/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-b/2,y,id:"".concat(this.id,"_3")}]}}])&&EN(o.prototype,u),p}(Vc);function ZE(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function D_(i,o,u,l){u&&Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0})}function AN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function JE(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function yv(i,o,u,l,p){var f={};return Object.keys(l).forEach(function(y){f[y]=l[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=u.slice().reverse().reduce(function(y,b){return b(i,o,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,o,f),f=null),f}var QE=(Hl=function(){function i(l){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),JE(this,"graphModel",void 0),D_(this,"isShowHorizontal",YE,this),D_(this,"isShowVertical",qE,this),D_(this,"position",KE,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=l}var o,u;return o=i,u=[{key:"getStyle",value:function(){return function(l){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?ZE(Object(f),!0).forEach(function(y){JE(l,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(f)):ZE(Object(f)).forEach(function(y){Object.defineProperty(l,y,Object.getOwnPropertyDescriptor(f,y))})}return l}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(l,p){for(var f=l.x,y=l.y,b=!1,x=!1,P=0;P<p.length;P++){var C=p[P];if(C.id!==l.id&&(f===C.x&&(b=!0),y===C.y&&(x=!0),b&&x))break}return{isShowVertical:b,isShowHorizontal:x,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(l,p){var f,y,b=!1,x=l.id;if(x){var P=this.graphModel.fakerNode;if(P&&P.id===x)y=Ni(P);else{var C=this.graphModel.getNodeModelById(x);y=Ni(C)}}for(var W=0;W<p.length;W++){var K=p[W];if(K.id!==l.id){var pe=Ni(K);if(pe.minY===y.minY||pe.maxY===y.minY){b=!0,f=y.minY;break}if(pe.minY===y.maxY||pe.maxY===y.maxY){b=!0,f=y.maxY;break}}}return _i({isShowHorizontal:b,position:{y:f}})}},{key:"getVerticalSnapline",value:function(l,p){var f,y,b=!1,x=l.id;if(x){var P=this.graphModel.fakerNode;if(P&&P.id===x)y=Ni(P);else{var C=this.graphModel.getNodeModelById(x);y=Ni(C)}}for(var W=0;W<p.length;W++){var K=p[W];if(K.id!==l.id){var pe=Ni(K);if(pe.minX===y.minX||pe.maxX===y.minX){b=!0,f=y.minX;break}if(pe.minX===y.maxX||pe.maxX===y.maxX){b=!0,f=y.maxX;break}}}return _i({isShowVertical:b,position:{x:f}})}},{key:"getSnapLinePosition",value:function(l,p){var f=this.getCenterSnapLine(l,p),y=f.isShowHorizontal,b=f.isShowVertical;if(!y){var x=this.getHorizontalSnapline(l,p);x.isShowHorizontal&&(f.isShowHorizontal=x.isShowHorizontal,f.position.y=x.position.y)}if(!b){var P=this.getVerticalSnapline(l,p);P.isShowVertical&&(f.isShowVertical=P.isShowVertical,f.position.x=P.position.x)}return f}},{key:"setSnaplineInfo",value:function(l){var p=l.isShowHorizontal,f=l.isShowVertical,y=l.position;this.position=y,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(l){var p=this.graphModel.nodes,f=this.getSnapLinePosition(l,p);this.setSnaplineInfo(f)}}],u&&AN(o.prototype,u),i}(),YE=yv(Hl.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qE=yv(Hl.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KE=yv(Hl.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yv(Hl.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(Hl.prototype,"clearSnapline"),Hl.prototype),yv(Hl.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(Hl.prototype,"setNodeSnapLine"),Hl.prototype),Hl),mv=new Map,eO=function(i){var o=Ua(),u=window.requestAnimationFrame(function l(){if(i(),mv.get(o)){var p=window.requestAnimationFrame(l);mv.set(o,p)}});return mv.set(o,u),o},Ry=function(i){var o=mv.get(i);o&&(window.cancelAnimationFrame(o),mv.delete(i))};function I_(i){return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},I_(i)}function gv(){return gv=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},gv.apply(this,arguments)}function tO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function _v(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?tO(Object(u),!0).forEach(function(l){Cs(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):tO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function TN(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return nO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function MN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function L_(i,o){return L_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},L_(i,o)}function PN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=jy(i);if(o){var p=jy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return kN(this,u)}}function kN(i,o){if(o&&(I_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return js(i)}function js(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jy(i){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jy(i)}function Cs(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var NN=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&L_(f,y)})(p,i);var o,u,l=PN(p);function p(){var f;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,p),Cs(js(f=l.call(this)),"preTargetNode",void 0),Cs(js(f),"sourceRuleResults",void 0),Cs(js(f),"targetRuleResults",void 0),Cs(js(f),"dragHandler",void 0),Cs(js(f),"t",void 0),Cs(js(f),"onDragStart",function(y){var b=y.event,x=f.props,P=x.anchorData,C=x.nodeModel,W=x.graphModel;W.overlapMode,W.selectNodeById(C.id),C.autoToFront&&W.toFront(C.id),W.eventCenter.emit(kn.ANCHOR_DRAGSTART,{data:P,e:b,nodeModel:C}),f.setState({startX:P.x,startY:P.y,endX:P.x,endY:P.y})}),Cs(js(f),"onDragging",function(y){var b=y.event,x=f.props,P=x.graphModel,C=x.nodeModel,W=x.anchorData,K=P.transformModel,pe=P.eventCenter,Oe=P.width,Ne=P.height,Je=P.editConfigModel,Qe=Je.autoExpand,mt=Je.stopMoveGraph,$t=b.clientX,hn=b.clientY,dn=P.getPointByClient({x:$t,y:hn}),zn=dn.domOverlayPosition,sn=zn.x,Cn=zn.y,_n=dn.canvasOverlayPosition,Mr=_n.x,Cr=_n.y;f.t&&Ry(f.t);var ur=[];sn<10?ur=[10,0]:sn+10>Oe?ur=[-10,0]:Cn<10?ur=[0,10]:Cn+10>Ne&&(ur=[0,-10]),f.setState({endX:Mr,endY:Cr,dragging:!0}),f.moveAnchorEnd(Mr,Cr),ur.length>0&&!mt&&Qe&&(f.t=eO(function(){var Gr=TN(ur,2),ai=Gr[0],ui=Gr[1];K.translate(ai,ui);var sa=f.state,Bu=sa.endX,Uu=sa.endY;f.setState({endX:Bu-ai,endY:Uu-ui}),f.moveAnchorEnd(Bu-ai,Uu-ui)})),pe.emit(kn.ANCHOR_DRAG,{data:W,e:b,nodeModel:C})}),Cs(js(f),"onDragEnd",function(y){var b=y.event;f.t&&Ry(f.t);var x=f.checkEnd(b);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var P=f.props,C=P.graphModel,W=P.nodeModel,K=P.anchorData;C.eventCenter.emit(kn.ANCHOR_DRAGEND,{data:K,e:b,nodeModel:W,edgeModel:x})}),Cs(js(f),"checkEnd",function(y){var b=f.props,x=b.graphModel,P=b.nodeModel,C=b.anchorData,W=C.x,K=C.y,pe=C.id,Oe=(x.edgeType,f.state),Ne=Oe.endX,Je=Oe.endY,Qe=Oe.dragging,mt=Fl({x:Ne,y:Je},x);if(f.preTargetNode&&f.preTargetNode.state!==Ur.DEFAULT&&f.preTargetNode.setElementState(Ur.DEFAULT),Qe&&mt&&mt.node){var $t=mt.node,hn=mt.anchor.id,dn="".concat(P.id,"_").concat($t.id,"_").concat(hn,"_").concat(pe),zn=f.sourceRuleResults.get(dn)||{},sn=zn.isAllPass,Cn=zn.msg,_n=f.targetRuleResults.get(dn)||{},Mr=_n.isAllPass,Cr=_n.msg;if(sn&&Mr){$t.setElementState(Ur.DEFAULT);var ur=x.edgeGenerator(P.getData(),x.getNodeModelById(mt.node.id).getData()),Gr=x.addEdge(_v(_v({},ur),{},{sourceNodeId:P.id,sourceAnchorId:pe,startPoint:{x:W,y:K},targetNodeId:mt.node.id,targetAnchorId:mt.anchor.id,endPoint:{x:mt.anchor.x,y:mt.anchor.y}})),ai=f.props.anchorData;return x.eventCenter.emit(kn.ANCHOR_DROP,{data:ai,e:y,nodeModel:P,edgeModel:Gr}),Gr}var ui=$t.getData();return x.eventCenter.emit(kn.CONNECTION_NOT_ALLOWED,{data:ui,msg:Cr||Cn||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new J({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return o=p,(u=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,b=f.style,x=f.node.getAnchorShape(y);if(x)return x;var P=y.x,C=y.y,W=_v(_v({},b),b.hover);return Object(Le.g)("g",null,Object(Le.g)(eh,gv({className:"lf-node-anchor-hover"},W,{x:P,y:C})),Object(Le.g)(eh,gv({className:"lf-node-anchor"},b,{x:P,y:C})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,b=y.getAnchorIncomingEdge,x=y.getAnchorOutcomingEdge,P=f.anchorData.id;return{incomingEdgeList:b(P),outcomingEdgeList:x(P)}}},{key:"moveAnchorEnd",value:function(f,y){var b=this.props,x=b.graphModel,P=b.nodeModel,C=b.anchorData,W=Fl({x:f,y},x);if(W){var K=W.node,pe=W.anchor.id;if(this.preTargetNode&&this.preTargetNode!==W.node&&this.preTargetNode.setElementState(Ur.DEFAULT),C.id===pe)return;this.preTargetNode=K;var Oe="".concat(P.id,"_").concat(K.id,"_").concat(pe,"_").concat(C.id);if(!this.targetRuleResults.has(Oe)){var Ne=W.anchor,Je=P.isAllowConnectedAsSource(K,C,Ne),Qe=K.isAllowConnectedAsTarget(P,C,Ne);this.sourceRuleResults.set(Oe,ju(Je)),this.targetRuleResults.set(Oe,ju(Qe))}var mt=this.sourceRuleResults.get(Oe).isAllPass,$t=this.targetRuleResults.get(Oe).isAllPass;mt&&$t?K.setElementState(Ur.ALLOW_CONNECT):K.setElementState(Ur.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Ur.DEFAULT&&this.preTargetNode.setElementState(Ur.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,b=f.startY,x=f.endX,P=f.endY;return Ki(y,b,x,P)>10}},{key:"render",value:function(){var f=this,y=this.state,b=y.startX,x=y.startY,P=y.endX,C=y.endY,W=this.props,K=W.anchorData.edgeAddable,pe=W.edgeStyle;return Object(Le.g)("g",{className:"lf-anchor"},Object(Le.g)("g",{onMouseDown:function(Oe){K!==!1&&f.dragHandler.handleMouseDown(Oe)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(_v({sourcePoint:{x:b,y:x},targetPoint:{x:P,y:C}},pe)):Object(Le.g)(Jp,gv({x1:b,y1:x,x2:P,y2:C},pe,{"pointer-events":"none"}))))}}])&&MN(o.prototype,u),p}(Le.a);function rO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function RN(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?rO(Object(u),!0).forEach(function(l){jN(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):rO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function jN(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function F_(i){return F_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},F_(i)}function CN(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return oO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return oO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function iO(i){var o=i.x,u=o===void 0?0:o,l=i.y,p=l===void 0?0:l,f=i.value,y=i.fontSize,b=i.fill,x=b===void 0?"currentColor":b,P=i.overflowMode,C=P===void 0?"default":P,W=i.textWidth,K=W===void 0?"":W,pe=i.model,Oe={textAnchor:"middle","dominant-baseline":"middle",x:u,y:p,fill:x};if(Object.entries(i).forEach(function(hn){var dn=CN(hn,2),zn=dn[0],sn=dn[1];F_(sn)!=="object"&&(Oe[zn]=sn)}),f){var Ne=String(f).split(/[\r\n]/g),Je=Ne.length;if(C!=="default"){var Qe=pe.BaseType,mt=pe.modelType;if(Qe===eo.NODE&&mt!==_r.TEXT_NODE||Qe===eo.EDGE&&K)return function(hn){var dn=hn.value,zn=hn.fontSize,sn=hn.model,Cn=hn.fontFamily,_n=Cn===void 0?"":Cn,Mr=hn.lineHeight,Cr=hn.wrapPadding,ur=Cr===void 0?"0, 0":Cr,Gr=hn.overflowMode,ai=hn.x,ui=hn.y,sa=sn.width,Bu=sn.textHeight,Uu=hn.textWidth||sa,Ls=String(dn).split(/[\r\n]/g),tp=Ls.length,om=Ss({rows:Ls,style:{fontSize:"".concat(zn,"px"),width:"".concat(Uu,"px"),fontFamily:_n,lineHeight:Mr,padding:ur},rowsLength:tp,className:"lf-get-text-height"}),np=sn.height>om?sn.height:om;Bu&&(np=Bu);var ed=Gr==="ellipsis";return ed&&(np=zn+2),Object(Le.g)("g",null,Object(Le.g)("foreignObject",{width:Uu,height:np,x:ai-Uu/2,y:ui-np/2},Object(Le.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:np,width:Uu,padding:ur}},Object(Le.g)("div",{className:ed?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:ed?Ls.join(""):"",style:RN({},hn)},Ls.map(function(td){return Object(Le.g)("div",{className:"lf-node-text--auto-wrap-inner"},td)})))))}(i)}if(Je>1){var $t=Ne.map(function(hn,dn){var zn=(dn-(Je-1)/2)*(y+2);return Object(Le.g)("tspan",{className:"lf-text-tspan",x:u,y:p+zn},hn)});return Object(Le.g)("text",Oe,$t)}return Object(Le.g)("text",Oe,f)}}function $_(i){return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$_(i)}function B_(){return B_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},B_.apply(this,arguments)}function DN(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return aO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return aO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function IN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function U_(i,o){return U_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},U_(i,o)}function LN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Cy(i);if(o){var p=Cy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return FN(this,u)}}function FN(i,o){if(o&&($_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jf(i)}function Jf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cy(i){return Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cy(i)}function Zd(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var uO=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&U_(f,y)})(p,i);var o,u,l=LN(p);function p(f){var y;(function(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")})(this,p),Zd(Jf(y=l.call(this)),"dragHandler",void 0),Zd(Jf(y),"sumDeltaX",0),Zd(Jf(y),"sumDeltaY",0),Zd(Jf(y),"stepDrag",void 0),Zd(Jf(y),"onDragging",function(x){var P=x.deltaX,C=x.deltaY,W=y.props,K=W.model,pe=DN(W.graphModel.transformModel.fixDeltaXY(P,C),2),Oe=pe[0],Ne=pe[1];K.moveText(Oe,Ne)}),Zd(Jf(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(Ur.TEXT_EDIT)}),Zd(Jf(y),"mouseDownHandle",function(x){var P=y.props,C=P.draggable,W=P.model,K=P.graphModel.editConfigModel.nodeTextDraggable;(C||K)&&(y.stepDrag.model=W,y.stepDrag.handleMouseDown(x))}),f.model;var b=f.draggable;return y.stepDrag=new J({onDragging:y.onDragging,step:1,isStopPropagation:b}),y}return o=p,(u=[{key:"getShape",value:function(){var f=this.props,y=f.model,b=f.graphModel,x=y.text,P=b.editConfigModel,C=x.value,W=x.x,K=x.y,pe=x.editable,Oe=x.draggable,Ne={x:W,y:K,className:"",value:C};pe?Ne.className="lf-element-text":Oe||P.nodeTextDraggable?Ne.className="lf-text-draggable":Ne.className="lf-text-disabled";var Je=y.getTextStyle();return Object(Le.g)(iO,B_({},Ne,Je,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Le.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&IN(o.prototype,u),p}(Le.a),$N=Ml(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,lO=r(130);function G_(i){return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},G_(i)}function V_(){return V_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},V_.apply(this,arguments)}function BN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function W_(i,o){return W_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},W_(i,o)}function UN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Dy(i);if(o){var p=Dy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return GN(this,u)}}function GN(i,o){if(o&&(G_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ch(i)}function ch(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dy(i){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dy(i)}function bv(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var VN=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&W_(f,y)})(p,i);var o,u,l=UN(p);function p(f){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),bv(ch(y=l.call(this,f)),"style",{}),bv(ch(y),"defaultAngle",void 0),bv(ch(y),"normal",void 0),bv(ch(y),"stepperDrag",void 0),bv(ch(y),"onDragging",function(b){var x,P=b.event,C=y.props,W=C.graphModel,K=C.nodeModel,pe=C.eventCenter,Oe=W.selectNodes,Ne=K.x,Je=K.y,Qe=P.clientX,mt=P.clientY,$t=W.getPointByClient({x:Qe,y:mt}).canvasOverlayPosition,hn=$t.x,dn=$t.y,zn=new Z(hn-Ne,dn-Je),sn=((x=y.normal)===null||x===void 0?void 0:x.angle(zn))-y.defaultAngle,Cn=new ks(-Ne,-Je).rotate(sn).translate(Ne,Je).toString();K.transform=Cn,K.rotate=sn;var _n=Object(lO.map)(Oe,function(Cr){return Cr.id});_n.indexOf(K.id)===-1&&(_n=[K.id]);var Mr=Object(lO.reduce)(_n,function(Cr,ur){var Gr=W.getNodeModelById(ur);return Cr[ur]=Gr==null?void 0:Gr.getMoveDistance(0,0,!1),Cr},{});_n.forEach(function(Cr){W.getNodeEdges(Cr).forEach(function(ur){if(Mr[ur.sourceNodeId]){var Gr=W.getNodeModelById(ur.sourceNodeId).anchors.find(function(ui){return ui.id===ur.sourceAnchorId});ur.updateStartPoint(Gr)}if(Mr[ur.targetNodeId]){var ai=W.getNodeModelById(ur.targetNodeId).anchors.find(function(ui){return ui.id===ur.targetAnchorId});ur.updateEndPoint(ai)}})}),pe.emit(kn.NODE_ROTATE,{e:P,nodeModel:K})}),y.style=f.style,y.stepperDrag=new J({onDragging:y.onDragging}),y}return o=p,(u=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,b=y.x,x=y.y,P=b+y.width/2+20,C=x-y.height/2-20;return this.normal=new Z(1,0),this.defaultAngle=this.normal.angle(new Z(P-b,C-x)),y.defaultAngle=this.defaultAngle,Object(Le.g)("g",{className:"lf-rotate-control"},Object(Le.g)("g",{onMouseDown:function(W){f.stepperDrag.handleMouseDown(W)}},Object(Le.g)(eh,V_({},this.style,{cx:P,cy:C}))))}}])&&BN(o.prototype,u),p}(Le.a);function z_(i){return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z_(i)}var WN=["className"];function Iy(){return Iy=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Iy.apply(this,arguments)}function zN(i,o){if(i==null)return{};var u,l,p=function(y,b){if(y==null)return{};var x,P,C={},W=Object.keys(y);for(P=0;P<W.length;P++)x=W[P],b.indexOf(x)>=0||(C[x]=y[x]);return C}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(l=0;l<f.length;l++)u=f[l],o.indexOf(u)>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(p[u]=i[u])}return p}function Ly(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return sO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return sO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function cO(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function H_(i,o){return H_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},H_(i,o)}function HN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Fy(i);if(o){var p=Fy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return XN(this,u)}}function XN(i,o){if(o&&(z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fi(i)}function Fi(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Fy(i){return Fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Fy(i)}function Qi(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Wc=function(i){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&H_(y,b)})(f,i);var o,u,l,p=HN(f);function f(y){var b;(function(K,pe){if(!(K instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,f),Qi(Fi(b=p.call(this)),"t",void 0),Qi(Fi(b),"moveOffset",void 0),Qi(Fi(b),"stepDrag",void 0),Qi(Fi(b),"contextMenuTime",void 0),Qi(Fi(b),"mouseUpDrag",void 0),Qi(Fi(b),"startTime",void 0),Qi(Fi(b),"clickTimer",void 0),Qi(Fi(b),"modelDisposer",void 0),Qi(Fi(b),"onDragStart",function(K){var pe=K.event,Oe=pe.clientX,Ne=pe.clientY,Je=b.props,Qe=Je.model,mt=Je.graphModel.getPointByClient({x:Oe,y:Ne}).canvasOverlayPosition,$t=mt.x,hn=mt.y;b.moveOffset={x:Qe.x-$t,y:Qe.y-hn}}),Qi(Fi(b),"onDragging",function(K){var pe=K.event,Oe=b.props,Ne=Oe.model,Je=Oe.graphModel,Qe=Je.editConfigModel,mt=Qe.stopMoveGraph,$t=Qe.autoExpand,hn=Je.transformModel,dn=Je.selectNodes,zn=Je.width,sn=Je.height,Cn=Je.gridSize;Ne.isDragging=!0;var _n=pe.clientX,Mr=pe.clientY,Cr=Je.getPointByClient({x:_n,y:Mr}).canvasOverlayPosition,ur=Cr.x,Gr=Cr.y,ai=Ly(hn.CanvasPointToHtmlPoint([ur,Gr]),2),ui=ai[0],sa=ai[1];if(ur+=b.moveOffset.x,Gr+=b.moveOffset.y,ur=uu(ur,Cn),Gr=uu(Gr,Cn),zn&&sn){if(!$t||mt||!(ui<0||sa<0||ui>zn||sa>sn)){var Bu=Ly(hn.CanvasPointToHtmlPoint([ur-Ne.width/2,Gr-Ne.height/2]),2),Uu=Bu[0],Ls=Bu[1],tp=Ly(hn.CanvasPointToHtmlPoint([ur+Ne.width/2,Gr+Ne.height/2]),2),om=tp[0],np=tp[1],ed=Math.max(Cn,20),td=[];Uu<0?td=[ed,0]:om>Je.width?td=[-ed,0]:Ls<0?td=[0,ed]:np>Je.height&&(td=[0,-ed]),b.t&&Ry(b.t);var kj=new ks(-ur,-Gr).rotate(Ne.rotate).translate(ur,Gr).toString();Ne.transform=kj;var im=dn.map(function(am){return am.id});im.indexOf(Ne.id)===-1&&(im=[Ne.id]),td.length>0&&!mt&&$t?b.t=eO(function(){var am=Ly(td,2),WO=am[0],zO=am[1];hn.translate(WO,zO);var Nj=-WO/hn.SCALE_X,Rj=-zO/hn.SCALE_X;Je.moveNodes(im,Nj,Rj)}):Je.moveNodes(im,ur-Ne.x,Gr-Ne.y)}}else Je.moveNode2Coordinate(Ne.id,ur,Gr)}),Qi(Fi(b),"onDragEnd",function(){b.t&&Ry(b.t),b.props.model.isDragging=!1}),Qi(Fi(b),"handleMouseUp",function(){var K=b.props.model;b.mouseUpDrag=K.isDragging}),Qi(Fi(b),"handleClick",function(K){var pe=b.mouseUpDrag===!1;if(b.startTime){var Oe=b.props,Ne=Oe.model,Je=Oe.graphModel;if(pe){var Qe={data:Ne.getData(),e:K,position:Je.getPointByClient({x:K.clientX,y:K.clientY}),isSelected:!1,isMultiple:!1},mt=K.button===2,$t=K.detail===2;if(!mt){var hn=Je.editConfigModel,dn=$f(K,hn);Qe.isMultiple=dn,Ne.isSelected&&!$t&&dn?(Qe.isSelected=!1,Ne.setSelected(!1)):(Je.selectNodeById(Ne.id,dn),Qe.isSelected=!0,b.toFront()),$t?(hn.nodeTextEdit&&Ne.text.editable&&(Ne.setSelected(!1),Je.setElementStateById(Ne.id,Ur.TEXT_EDIT)),Je.eventCenter.emit(kn.NODE_DBCLICK,Qe)):(Je.eventCenter.emit(kn.ELEMENT_CLICK,Qe),Je.eventCenter.emit(kn.NODE_CLICK,Qe))}}}}),Qi(Fi(b),"handleContextMenu",function(K){K.preventDefault();var pe=b.props,Oe=pe.model,Ne=pe.graphModel,Je=Oe.getData(),Qe=Ne.getPointByClient({x:K.clientX,y:K.clientY});Ne.setElementStateById(Oe.id,Ur.SHOW_MENU,Qe.domOverlayPosition),Oe.isSelected||Ne.selectNodeById(Oe.id),Ne.eventCenter.emit(kn.NODE_CONTEXTMENU,{data:Je,e:K,position:Qe}),b.toFront()}),Qi(Fi(b),"handleMouseDown",function(K){var pe=b.props,Oe=pe.model,Ne=pe.graphModel;b.startTime=new Date().getTime(),Ne.editConfigModel.adjustNodePosition&&Oe.draggable&&b.stepDrag&&b.stepDrag.handleMouseDown(K)}),Qi(Fi(b),"setHoverON",function(K){var pe=b.props,Oe=pe.model,Ne=pe.graphModel;if(!Oe.isHovered){var Je=Oe.getData();Oe.setHovered(!0),Ne.eventCenter.emit(kn.NODE_MOUSEENTER,{data:Je,e:K})}}),Qi(Fi(b),"setHoverOFF",function(K){var pe=b.props,Oe=pe.model,Ne=pe.graphModel,Je=Oe.getData();Oe.isHovered&&(Oe.setHovered(!1),Ne.eventCenter.emit(kn.NODE_MOUSELEAVE,{data:Je,e:K}))}),Qi(Fi(b),"onMouseOut",function(K){$N&&b.setHoverOFF(K)});var x=y.graphModel,P=x.gridSize,C=x.eventCenter,W=y.model;return b.stepDrag=new J({onDragStart:b.onDragStart,onDragging:b.onDragging,onDragEnd:b.onDragEnd,step:P,eventType:"NODE",isStopPropagation:!1,eventCenter:C,model:W}),b.modelDisposer=Object(c.F)(function(){return b.props},function(K){K&&K.model&&b.stepDrag.setModel(K.model)}),b}return o=f,l=[{key:"getModel",value:function(y){return y}}],(u=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,b=this.props,x=b.model,P=b.graphModel,C=x.isSelected,W=x.isHitable,K=x.isDragging,pe=x.isShowAnchor;return W&&(C||pe)&&!K?bf(x.anchors,function(Oe,Ne){var Je=x.getAnchorLineStyle(Oe),Qe=x.getAnchorStyle(Oe);return Object(Le.g)(NN,{anchorData:Oe,node:y,style:Qe,edgeStyle:Je,anchorIndex:Ne,nodeModel:x,graphModel:P,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,b=y.model,x=y.graphModel,P=b.isSelected,C=b.isHitable,W=b.enableRotate,K=b.isHovered,pe=b.getRotateControlStyle().style;if(C&&(P||K)&&W)return Object(Le.g)(VN,{graphModel:x,nodeModel:b,eventCenter:x.eventCenter,style:pe})}},{key:"getText",value:function(){var y=this.props,b=y.model,x=y.graphModel;if(b.state===Ur.TEXT_EDIT)return"";if(b.text){var P=x.editConfigModel,C=!1;return(b.text.draggable||P.nodeTextDraggable)&&(C=!0),Object(Le.g)(uO,{editable:P.nodeTextEdit&&b.text.editable,model:b,graphModel:x,draggable:C})}}},{key:"getStateClassName",value:function(){var y=this.props.model,b=y.state,x=y.isDragging,P=y.isSelected,C="lf-node";switch(b){case Ur.ALLOW_CONNECT:C+=" lf-node-allow";break;case Ur.NOT_ALLOW_CONNECT:C+=" lf-node-not-allow";break;default:C+=" lf-node-default"}return x&&(C+=" lf-isDragging"),P&&(C+=" lf-node-selected"),C}},{key:"toFront",value:function(){var y=this.props,b=y.model,x=y.graphModel;b.autoToFront&&x.toFront(b.id)}},{key:"render",value:function(){var y,b=this.props,x=b.model,P=b.graphModel,C=P.editConfigModel,W=C.hideAnchors,K=C.adjustNodePosition,pe=C.allowRotation,Oe=P.gridSize,Ne=P.transformModel.SCALE_X,Je=x.isHitable,Qe=x.draggable,mt=x.transform,$t=x.getOuterGAttributes(),hn=$t.className,dn=hn===void 0?"":hn,zn=zN($t,WN),sn=Object(Le.g)("g",{className:"lf-node-content"},Object(Le.g)("g",{transform:mt},this.getShape(),this.getText(),pe&&this.getRotateControl()),!W&&this.getAnchors());return Je?(K&&Qe&&this.stepDrag.setStep(Oe*Ne),y=Object(Le.g)("g",Iy({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},zn),sn)):y=Object(Le.g)("g",Iy({className:"".concat(this.getStateClassName()," ").concat(dn)},zn),sn),y}}])&&cO(o.prototype,u),l&&cO(o,l),f}(Le.a);function X_(i){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X_(i)}function Y_(){return Y_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Y_.apply(this,arguments)}function YN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function qN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function q_(i,o){return q_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},q_(i,o)}function KN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=$y(i);if(o){var p=$y(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return ZN(this,u)}}function ZN(i,o){if(o&&(X_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function $y(i){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$y(i)}var K_=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&q_(f,y)})(p,i);var o,u,l=KN(p);function p(){return YN(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Le.g)(qf,Y_({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&qN(o.prototype,u),p}(Wc);function Z_(i){return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Z_(i)}function J_(){return J_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},J_.apply(this,arguments)}function JN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function QN(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Q_(i,o){return Q_=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Q_(i,o)}function eR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=By(i);if(o){var p=By(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return tR(this,u)}}function tR(i,o){if(o&&(Z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var eb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Q_(f,y)})(p,i);var o,u,l=eR(p);function p(){return JN(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.r,P=f.getNodeStyle();return Object(Le.g)(eh,J_({},P,{x:y,y:b,r:x}))}}])&&QN(o.prototype,u),p}(Wc);function tb(i){return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},tb(i)}function nR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return fO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return fO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function dO(i){var o=i.points,u=i.className,l={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(p){var f=nR(p,2),y=f[0],b=f[1];tb(b)!=="object"&&(l[y]=b)}),l.className=u?"lf-basic-shape ".concat(u):"lf-basic-shape",l.points=o.map(function(p){return p.join(",")}).join(" "),Object(Le.g)("polygon",l)}function nb(i){return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},nb(i)}function rb(){return rb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},rb.apply(this,arguments)}function rR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function oR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function ob(i,o){return ob=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},ob(i,o)}function iR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Uy(i);if(o){var p=Uy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return aR(this,u)}}function aR(i,o){if(o&&(nb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}var ib=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&ob(f,y)})(p,i);var o,u,l=iR(p);function p(){return rR(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.width,P=f.height,C=f.points,W=f.getNodeStyle(),K={transform:"matrix(1 0 0 1 ".concat(y-x/2," ").concat(b-P/2,")")};return Object(Le.g)("g",K,Object(Le.g)(dO,rb({},W,{points:C,x:y,y:b})))}}])&&oR(o.prototype,u),p}(Wc);function ab(i){return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ab(i)}function ub(){return ub=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},ub.apply(this,arguments)}function uR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function lR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function lb(i,o){return lb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},lb(i,o)}function sR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Gy(i);if(o){var p=Gy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return cR(this,u)}}function cR(i,o){if(o&&(ab(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}var sb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&lb(f,y)})(p,i);var o,u,l=sR(p);function p(){return uR(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Le.g)("g",null,Object(Le.g)(dO,ub({},y,{points:f.points,x:f.x,y:f.y})))}}])&&lR(o.prototype,u),p}(Wc);function cb(i){return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},cb(i)}function fR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return pO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return pO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function dR(i){var o=i.x,u=o===void 0?0:o,l=i.y,p=l===void 0?0:l,f=i.rx,y=f===void 0?4:f,b=i.ry,x=b===void 0?4:b,P=i.className,C={cx:u,cy:p,rx:y,ry:x,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(W){var K=fR(W,2),pe=K[0],Oe=K[1];cb(Oe)!=="object"&&(C[pe]=Oe)}),C.className=P?"lf-basic-shape ".concat(P):"lf-basic-shape",Object(Le.g)("ellipse",C)}function fb(i){return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fb(i)}function db(){return db=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},db.apply(this,arguments)}function pR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function pb(i,o){return pb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},pb(i,o)}function vR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Vy(i);if(o){var p=Vy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return yR(this,u)}}function yR(i,o){if(o&&(fb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Vy(i){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vy(i)}var hb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&pb(f,y)})(p,i);var o,u,l=vR(p);function p(){return pR(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Le.g)(dR,db({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&hR(o.prototype,u),p}(Wc);function vb(i){return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},vb(i)}function hO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function vO(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?hO(Object(u),!0).forEach(function(l){mR(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):hO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function mR(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function gR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _R(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function yb(i,o){return yb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},yb(i,o)}function bR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Wy(i);if(o){var p=Wy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return wR(this,u)}}function wR(i,o){if(o&&(vb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}var mb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&yb(f,y)})(p,i);var o,u,l=bR(p);function p(){return gR(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),b=f.width,x=f.height,P=f.x,C=f.y,W=vO(vO({},y.background),{},{x:P,y:C-1,width:b,height:x});return Object(Le.g)(qf,W)}},{key:"getShape",value:function(){return Object(Le.g)("g",null,this.getBackground())}}])&&_R(o.prototype,u),p}(Wc);function gb(i){return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},gb(i)}function _b(){return _b=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},_b.apply(this,arguments)}function ER(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function OR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function bb(i,o){return bb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},bb(i,o)}function xR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=zy(i);if(o){var p=zy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return SR(this,u)}}function SR(i,o){if(o&&(gb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wv(i)}function wv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function zy(i){return zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zy(i)}function Hy(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var wb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&bb(f,y)})(p,i);var o,u,l=xR(p);function p(){var f;ER(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Hy(wv(f=l.call.apply(l,[this].concat(b))),"ref",void 0),Hy(wv(f),"currentProperties",void 0),Hy(wv(f),"preProperties",void 0),Hy(wv(f),"setRef",function(P){f.ref=P}),f}return o=p,(u=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.height,P=f.width,C=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Le.g)("foreignObject",_b({},C,{x:y-P/2,y:b-x/2,width:P,height:x,ref:this.setRef}))}}])&&OR(o.prototype,u),p}(Wc);function Eb(i){return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Eb(i)}function Ob(){return Ob=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Ob.apply(this,arguments)}function yO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Jd(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?yO(Object(u),!0).forEach(function(l){Ab(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):yO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function AR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function xb(i,o){return xb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},xb(i,o)}function TR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Xy(i);if(o){var p=Xy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return MR(this,u)}}function MR(i,o){if(o&&(Eb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sb(i)}function Sb(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xy(i){return Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xy(i)}function Ab(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var PR=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&xb(f,y)})(p,i);var o,u,l=TR(p);function p(f){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),Ab(Sb(y=l.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),Ab(Sb(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return o=p,(u=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),b=f.text,x=f.width,P=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(P=Jd(Jd({},P),y.hover.background)),b&&b.value&&P.fill!=="transparent"){var C,W=y.fontSize,K=y.overflowMode,pe=y.lineHeight,Oe=y.wrapPadding,Ne=y.textWidth,Je=b.value,Qe=b.x,mt=b.y,$t=String(Je).split(/[\r\n]/g),hn=$t.length;if(K==="autoWrap"&&Ne){var dn=Ss({rows:$t,style:{fontSize:"".concat(W,"px"),width:"".concat(Ne,"px"),lineHeight:pe,padding:Oe},rowsLength:hn,className:"lf-get-text-height"});C=Jd(Jd({},P),{},{x:Qe-1,y:mt-1,width:Ne,height:dn})}else{$t&&$t.forEach(function(Mr){Kn(Mr)});var zn=Bl({rows:$t,fontSize:W,rowsLength:hn}),sn=zn.width,Cn=zn.height;if(K==="ellipsis"&&(sn=Ne||x,Cn=W+2),typeof P.wrapPadding=="string"){var _n=P.wrapPadding.split(",").filter(function(Mr){return Mr.trim()}).map(function(Mr){return parseFloat(Mr.trim())});_n.length>0&&_n.length<=4&&(_n.length===1?_n=[_n[0],_n[0],_n[0],_n[0]]:_n.length===2?_n=[_n[0],_n[1],_n[0],_n[1]]:_n.length===3&&(_n=[_n[0],_n[1],_n[2],_n[1]]),sn+=_n[1]+_n[3],Cn+=_n[0]+_n[2],Qe+=(_n[1]-_n[3])/2,mt+=(_n[2]-_n[0])/2)}C=Jd(Jd({},P),{},{x:Qe-1,y:mt-1,width:sn,height:Cn})}return Object(Le.g)(qf,C)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,b=y.value,x=y.x,P=y.y;if(b){var C=Jd({x,y:P,className:"lf-element-text",value:b},f.getTextStyle());return Object(Le.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Le.g)(iO,Ob({},C,{model:f})))}}}])&&AR(o.prototype,u),p}(uO);function Tb(i){return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Tb(i)}var Ds,kR=["text","sourceAnchorId","targetAnchorId"];function mO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function zc(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?mO(Object(u),!0).forEach(function(l){$u(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):mO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function NR(i,o){if(i==null)return{};var u,l,p=function(y,b){if(y==null)return{};var x,P,C={},W=Object.keys(y);for(P=0;P<W.length;P++)x=W[P],b.indexOf(x)>=0||(C[x]=y[x]);return C}(i,o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(l=0;l<f.length;l++)u=f[l],o.indexOf(u)>=0||Object.prototype.propertyIsEnumerable.call(i,u)&&(p[u]=i[u])}return p}function RR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return gO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return gO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function jR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Mb(i,o){return Mb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Mb(i,o)}function CR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Yy(i);if(o){var p=Yy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return DR(this,u)}}function DR(i,o){if(o&&(Tb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fu(i)}function Fu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}function $u(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(Ds||(Ds={}));var _O=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Mb(f,y)})(p,i);var o,u,l=CR(p);function p(f){var y;(function(C,W){if(!(C instanceof W))throw new TypeError("Cannot call a class as a function")})(this,p),$u(Fu(y=l.call(this)),"stepDragData",void 0),$u(Fu(y),"stepDrag",void 0),$u(Fu(y),"oldEdge",void 0),$u(Fu(y),"preTargetNode",void 0),$u(Fu(y),"targetRuleResults",void 0),$u(Fu(y),"sourceRuleResults",void 0),$u(Fu(y),"handleMouseDown",function(C){y.stepDrag&&y.stepDrag.handleMouseDown(C)}),$u(Fu(y),"onDragStart",function(){var C=y.props,W=C.x,K=C.y,pe=C.edgeModel,Oe=pe.startPoint,Ne=pe.endPoint,Je=pe.pointsList;y.oldEdge={startPoint:Oe,endPoint:Ne,pointsList:Je},y.setState({endX:W,endY:K,dragging:!0})}),$u(Fu(y),"onDragging",function(C){var W=C.deltaX,K=C.deltaY,pe=y.state,Oe=pe.endX,Ne=pe.endY,Je=y.props,Qe=Je.graphModel,mt=Je.type,$t=Qe.transformModel,hn=Qe.editConfigModel,dn=RR($t.moveCanvasPointByHtml([Oe,Ne],W,K),2),zn=dn[0],sn=dn[1];y.setState({endX:zn,endY:sn,dragging:!0});var Cn=y.props.edgeModel,_n=Fl({x:Oe,y:Ne},Qe);if(_n&&_n.node&&y.isAllowAdjust(_n).pass){var Mr,Cr=Cn.startPoint,ur=Cn.endPoint,Gr=Cn.sourceNode,ai=Cn.targetNode;mt===Ds.SOURCE?Mr={startPoint:{x:_n.anchor.x,y:_n.anchor.y},endPoint:{x:ur.x,y:ur.y},sourceNode:_n.node,targetNode:ai}:mt===Ds.TARGET&&(Mr={startPoint:{x:Cr.x,y:Cr.y},endPoint:{x:_n.anchor.x,y:_n.anchor.y},sourceNode:Gr,targetNode:_n.node}),Cn.updateAfterAdjustStartAndEnd(Mr)}else mt===Ds.SOURCE?Cn.updateStartPoint({x:zn,y:sn}):mt===Ds.TARGET&&Cn.updateEndPoint({x:zn,y:sn});Cn.text.value&&hn.adjustEdge&&Cn.setText(Object.assign({},Cn.text,Cn.textPosition))}),$u(Fu(y),"onDragEnd",function(C){var W=C.event;try{var K;y.setState({dragging:!1});var pe=y.props,Oe=pe.graphModel,Ne=pe.edgeModel,Je=pe.type,Qe=y.state,mt=Qe.endX,$t=Qe.endY,hn=Qe.dragging,dn=Fl({x:mt,y:$t},Oe);if(!hn)return;var zn,sn=!1;if(dn&&dn.node){var Cn=y.isAllowAdjust(dn),_n=Cn.pass,Mr=Cn.msg,Cr=Cn.newTargetNode;if(_n){var ur=Ne.getData(),Gr=ur.text,ai=ur.sourceAnchorId,ui=ai===void 0?"":ai,sa=ur.targetAnchorId;zn=zc(zc({sourceAnchorId:ui,targetAnchorId:sa===void 0?"":sa},NR(ur,kR)),{},{text:(Gr==null?void 0:Gr.value)||""}),Je===Ds.SOURCE?(zn=zc(zc({},Oe.edgeGenerator(Oe.getNodeModelById(dn.node.id).getData(),Oe.getNodeModelById(Ne.targetNodeId).getData(),zn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:Ne.targetNodeId,endPoint:zc({},Ne.endPoint)}),Ne.sourceNodeId===dn.node.id&&Ne.sourceAnchorId===dn.anchor.id&&(sn=!0)):Je===Ds.TARGET&&(zn=zc(zc({},Oe.edgeGenerator(Oe.getNodeModelById(Ne.sourceNodeId).getData(),Oe.getNodeModelById(dn.node.id).getData(),zn)),{},{sourceNodeId:Ne.sourceNodeId,startPoint:zc({},Ne.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),Ne.targetNodeId===dn.node.id&&Ne.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var Bu=Cr.getData();Oe.eventCenter.emit(kn.CONNECTION_NOT_ALLOWED,{data:Bu,msg:Mr})}}else sn=!0;if(sn)y.recoveryEdge();else{var Uu=Ne.getData();Oe.deleteEdgeById(Ne.id);var Ls=Oe.addEdge(zc({},zn));Oe.eventCenter.emit(kn.EDGE_EXCHANGE_NODE,{data:{newEdge:Ls.getData(),oldEdge:Uu}})}(K=y.preTargetNode)===null||K===void 0||K.setElementState(Ur.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(kn.ADJUST_POINT_DRAGEND,{e:W,data:y.stepDragData})}}),$u(Fu(y),"recoveryEdge",function(){var C=y.props.edgeModel,W=y.oldEdge,K=W.startPoint,pe=W.endPoint,Oe=W.pointsList;C.updateStartPoint(K),C.updateEndPoint(pe),C.modelType!==_r.LINE_EDGE&&(C.pointsList=Oe,C.initPoints())}),$u(Fu(y),"getAdjustPointStyle",function(){var C=y.props,W=C.graphModel.theme;return C.edgeModel,W.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var b=f.type,x=f.edgeModel,P=f.graphModel.eventCenter;return y.stepDragData={type:b,edgeData:x.getData()},y.stepDrag=new J({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:P,data:y.stepDragData}),y}return o=p,(u=[{key:"isAllowAdjust",value:function(f){var y=this.props,b=y.edgeModel,x=b.id,P=b.sourceNode,C=b.targetNode,W=b.sourceAnchorId,K=b.targetAnchorId,pe=y.type,Oe=null,Ne=null,Je=null,Qe=null;if(pe===Ds.SOURCE?(Oe=f.node,Ne=C,Je=f.anchor,Qe=C.getAnchorInfo(K)):(Oe=P,Ne=f.node,Qe=f.anchor,Je=P.getAnchorInfo(W)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Ur.DEFAULT),this.preTargetNode=f.node,Qe.id===Je.id)return{pass:!1,msg:"",newTargetNode:Ne};var mt="".concat(Oe.id,"_").concat(Ne.id,"_").concat(Je.id,"_").concat(Qe.id);if(!this.targetRuleResults.has(mt)){var $t=Oe.isAllowConnectedAsSource(Ne,Je,Qe,x),hn=Ne.isAllowConnectedAsTarget(Oe,Je,Qe,x);this.sourceRuleResults.set(mt,ju($t)),this.targetRuleResults.set(mt,ju(hn))}var dn=this.sourceRuleResults.get(mt),zn=dn.isAllPass,sn=dn.msg,Cn=this.targetRuleResults.get(mt),_n=Cn.isAllPass,Mr=Cn.msg,Cr=zn&&_n?Ur.ALLOW_CONNECT:Ur.NOT_ALLOW_CONNECT;return pe===Ds.SOURCE?Oe.setElementState(Cr):Ne.setElementState(Cr),{pass:zn&&_n,msg:Mr||sn,newTargetNode:Ne}}},{key:"render",value:function(){var f=this.props,y=f.x,b=f.y,x=f.getAdjustPointShape,P=f.edgeModel,C=this.state.dragging;return Object(Le.g)("g",{pointerEvents:C?"none":"",onMouseDown:this.handleMouseDown},C?"":x(y,b,P))}}])&&jR(o.prototype,u),p}(Le.a);function Pb(i){return Pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Pb(i)}function Ev(){return Ev=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Ev.apply(this,arguments)}function IR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return bO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return bO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function LR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function FR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function kb(i,o){return kb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},kb(i,o)}function $R(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=qy(i);if(o){var p=qy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return BR(this,u)}}function BR(i,o){if(o&&(Pb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xl(i)}function Xl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qy(i){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qy(i)}function Is(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Ov=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&kb(f,y)})(p,i);var o,u,l=$R(p);function p(){var f;LR(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Is(Xl(f=l.call.apply(l,[this].concat(b))),"startTime",void 0),Is(Xl(f),"contextMenuTime",void 0),Is(Xl(f),"clickTimer",void 0),Is(Xl(f),"textRef",Object(Le.f)()),Is(Xl(f),"handleHover",function(P,C){var W=f.props,K=W.model,pe=W.graphModel.eventCenter;K.setHovered(P);var Oe=P?kn.EDGE_MOUSEENTER:kn.EDGE_MOUSELEAVE,Ne=K.getData();pe.emit(Oe,{data:Ne,e:C})}),Is(Xl(f),"setHoverON",function(P){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,P))}),Is(Xl(f),"setHoverOFF",function(P){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,P))}),Is(Xl(f),"handleContextMenu",function(P){P.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var C=f.props,W=C.model,K=C.graphModel,pe=K.getPointByClient({x:P.clientX,y:P.clientY});K.setElementStateById(W.id,Ur.SHOW_MENU,pe.domOverlayPosition),f.toFront(),W.isSelected||K.selectEdgeById(W.id);var Oe=W==null?void 0:W.getData();K.eventCenter.emit(kn.EDGE_CONTEXTMENU,{data:Oe,e:P,position:pe})}),Is(Xl(f),"handleMouseDown",function(P){P.stopPropagation(),f.startTime=new Date().getTime()}),Is(Xl(f),"handleMouseUp",function(P){if(f.startTime&&!(new Date().getTime()-f.startTime>200||P.button===2)){var C=P.detail===2,W=f.props,K=W.model,pe=W.graphModel,Oe=K==null?void 0:K.getData(),Ne=pe.getPointByClient({x:P.clientX,y:P.clientY});if(C){var Je=pe.editConfigModel,Qe=pe.textEditElement;if(Qe&&Qe.id===K.id&&pe.setElementStateById(K.id,Ur.DEFAULT),Je.edgeTextEdit&&K.text.editable&&pe.setElementStateById(K.id,Ur.TEXT_EDIT),K.modelType===_r.POLYLINE_EDGE){var mt=K,$t=pe.getPointByClient({x:P.x,y:P.y}).canvasOverlayPosition,hn=$t.x,dn=$t.y,zn=Iu({x:hn,y:dn},mt.points);mt.dbClickPosition=zn}pe.eventCenter.emit(kn.EDGE_DBCLICK,{data:Oe,e:P,position:Ne})}else pe.eventCenter.emit(kn.ELEMENT_CLICK,{data:Oe,e:P,position:Ne}),pe.eventCenter.emit(kn.EDGE_CLICK,{data:Oe,e:P,position:Ne});var sn=pe.editConfigModel;pe.selectEdgeById(K.id,$f(P,sn)),f.toFront()}}),f}return o=p,(u=[{key:"getShape",value:function(){return Object(Le.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,b=f.graphModel;if(y.state===Ur.TEXT_EDIT)return null;var x=!1,P=b.editConfigModel;return(y.text.draggable||P.edgeTextDraggable)&&(x=!0),Object(Le.g)(PR,{ref:this.textRef,editable:P.edgeTextEdit&&y.text.editable,model:y,graphModel:b,draggable:x})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=f.isSelected;return{start:y,end:b,hover:this.state.hover,isSelected:x}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,b=f.getArrowStyle(),x=b.refY,P=x===void 0?0:x,C=b.refX,W=C===void 0?2:C,K=IR(this.getLastTwoPoints(),2),pe=K[0],Oe=K[1],Ne="auto";return pe!==null&&Oe!==null&&(Ne=Ze(pt({x:Oe.x-pe.x,y:Oe.y-pe.y,z:0}))),Object(Le.g)("g",null,Object(Le.g)("defs",null,Object(Le.g)("marker",{id:"marker-start-".concat(y),refX:-W,refY:P,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Le.g)("marker",{id:"marker-end-".concat(y),refX:W,refY:P,overflow:"visible",orient:Ne,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Le.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,b=f.strokeWidth,x=f.offset,P=f.verticalLength;return Object(Le.g)("path",{stroke:y,fill:y,strokeWidth:b,transform:"rotate(180)",d:"M 0 0 L ".concat(x," -").concat(P," L ").concat(x," ").concat(P," Z")})}},{key:"getAdjustPointShape",value:function(f,y,b){var x=b.getAdjustPointStyle();return Object(Le.g)(eh,Ev({className:"lf-edge-adjust-point"},x,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,b=f.graphModel,x=y.getAdjustStart(),P=y.getAdjustEnd();return Object(Le.g)("g",null,Object(Le.g)(_O,Ev({type:"SOURCE"},x,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:b})),Object(Le.g)(_O,Ev({type:"TARGET"},P,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:b})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Le.g)("g",null)}},{key:"getAppend",value:function(){return Object(Le.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,b=f.model;y.toFront(b.id)}},{key:"render",value:function(){var f=this.props,y=f.model,b=y.isSelected,x=y.isHitable,P=y.isShowAdjustPoint;return f.graphModel.animation,Object(Le.g)("g",null,Object(Le.g)("g",{className:["lf-edge",!x&&"pointer-none",b&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),P&&b?this.getAdjustPoints():"")}}])&&FR(o.prototype,u),p}(Le.a);function Nb(i){return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Nb(i)}function UR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return wO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return wO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}var xv=function(i){var o={d:""};return Object.entries(i).forEach(function(u){var l=UR(u,2),p=l[0],f=l[1],y=Nb(f);p!=="style"&&y==="object"||(o[p]=f)}),Object(Le.g)("path",o)};function Rb(i){return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Rb(i)}function jb(){return jb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},jb.apply(this,arguments)}function GR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function VR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Cb(i,o){return Cb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Cb(i,o)}function WR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Ky(i);if(o){var p=Ky(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return zR(this,u)}}function zR(i,o){if(o&&(Rb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Ky(i){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ky(i)}var Db=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Cb(f,y)})(p,i);var o,u,l=WR(p);function p(){return GR(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=f.isAnimation,P=f.arrowConfig,C=f.getEdgeStyle(),W=f.getEdgeAnimationStyle(),K=W.strokeDasharray,pe=W.stroke,Oe=W.strokeDashoffset,Ne=W.animationName,Je=W.animationDuration,Qe=W.animationIterationCount,mt=W.animationTimingFunction,$t=W.animationDirection;return Object(Le.g)(Jp,jb({},C,{x1:y.x,y1:y.y,x2:b.x,y2:b.y},P,x?{strokeDasharray:K,stroke:pe,style:{strokeDashoffset:Oe,animationName:Ne,animationDuration:Je,animationIterationCount:Qe,animationTimingFunction:mt,animationDirection:$t}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=Nn({start:y,end:b}),P=x.d,C=x.strokeWidth,W=x.fill,K=x.strokeDasharray,pe=x.stroke;return Object(Le.g)(xv,{d:P,fill:W,strokeWidth:C,stroke:pe,strokeDasharray:K})}}])&&VR(o.prototype,u),p}(Ov);function Ib(i){return Ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ib(i)}function HR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return EO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return EO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function EO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}var XR=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(u){var l=HR(u,2),p=l[0],f=l[1];(p==="style"||Ib(f)!=="object")&&(o[p]=f)}),Object(Le.g)("polyline",o)};function Lb(i){return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Lb(i)}function OO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Zy(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?OO(Object(u),!0).forEach(function(l){Xc(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):OO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function Fb(){return Fb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Fb.apply(this,arguments)}function YR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return xO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return xO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function qR(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function $b(i,o){return $b=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},$b(i,o)}function KR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Jy(i);if(o){var p=Jy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return ZR(this,u)}}function ZR(i,o){if(o&&(Lb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hc(i)}function Hc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jy(i){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jy(i)}function Xc(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Bb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&$b(f,y)})(p,i);var o,u,l=KR(p);function p(){var f;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,p),Xc(Hc(f=l.call(this)),"drag",void 0),Xc(Hc(f),"isDragging",void 0),Xc(Hc(f),"isShowAdjustPointTemp",void 0),Xc(Hc(f),"appendInfo",void 0),Xc(Hc(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),Xc(Hc(f),"onDragging",function(y){var b=y.deltaX,x=y.deltaY,P=f.props,C=P.model,W=P.graphModel;f.isDragging=!0;var K=W.transformModel,pe=W.editConfigModel,Oe=YR(K.fixDeltaXY(b,x),2),Ne=Oe[0],Je=Oe[1],Qe=C,mt=pe.adjustEdgeMiddle;f.appendInfo=mt?Qe.dragAppendSimple(f.appendInfo,{x:Ne,y:Je}):Qe.dragAppend(f.appendInfo,{x:Ne,y:Je})}),Xc(Hc(f),"onDragEnd",function(){var y=f.props,b=y.model,x=y.graphModel.eventCenter,P=b;P.dragAppendEnd(),f.isDragging=!1,P.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,x.emit(kn.EDGE_ADJUST,{data:P.getData()})}),Xc(Hc(f),"beforeDragStart",function(y,b){b.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=b}),f.drag=new J({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return o=p,(u=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,b=f.isAnimation,x=f.arrowConfig,P=f.getEdgeStyle(),C=f.getEdgeAnimationStyle(),W=C.strokeDasharray,K=C.stroke,pe=C.strokeDashoffset,Oe=C.animationName,Ne=C.animationDuration,Je=C.animationIterationCount,Qe=C.animationTimingFunction,mt=C.animationDirection;return Object(Le.g)(XR,Fb({points:y},P,x,b?{strokeDasharray:W,stroke:K,style:{strokeDashoffset:pe,animationName:Oe,animationDuration:Ne,animationIterationCount:Je,animationTimingFunction:Qe,animationDirection:mt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,b=f.isSelected,x={start:null,end:null,hover:this.state.hover,isSelected:b},P=so(y);return P.length>=2&&(x.start=P[P.length-2],x.end=P[P.length-1]),x}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=so(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,b=f.start,x=f.end;if(b.x===x.x&&b.y===x.y)y="";else{var P={start:b,end:x,offset:10,verticalLength:5},C=L(Zy(Zy({},P),{},{type:"start"})),W=L(Zy(Zy({},P),{},{type:"end"}));y="M".concat(C.leftX," ").concat(C.leftY,` 
      L`).concat(C.rightX," ").concat(C.rightY,` 
      L`).concat(W.rightX," ").concat(W.rightY,`
      L`).concat(W.leftX," ").concat(W.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),b=y.d,x=y.strokeWidth,P=y.fill,C=y.strokeDasharray,W=y.stroke;return Object(Le.g)(xv,{d:b,fill:P,strokeWidth:x,stroke:W,strokeDasharray:C})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,b=y.model,x=y.graphModel,P=b.pointsList,C=b.draggable,W=[],K=P.length,pe=function(Ne){var Je="lf-polyline-append",Qe={start:{x:P[Ne].x,y:P[Ne].y},end:{x:P[Ne+1].x,y:P[Ne+1].y},startIndex:Ne,endIndex:Ne+1,direction:"",dragAble:!0},mt=Object(Le.g)("g",{className:Je},f.getAppendShape(Qe)),$t=x.editConfigModel,hn=$t.adjustEdge,dn=$t.adjustEdgeMiddle;if(hn&&C){var zn=Qe.startIndex,sn=Qe.endIndex,Cn=dn&&(zn===0||sn===K-1);Qe.dragAble=!Cn,Qe.start.x===Qe.end.x?(Qe.dragAble&&(Je+="-ew-resize"),Qe.direction=to.VERTICAL):Qe.start.y===Qe.end.y&&(Qe.dragAble&&(Je+="-ns-resize"),Qe.direction=to.HORIZONTAL),mt=Object(Le.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(_n){return f.beforeDragStart(_n,Qe)}},Object(Le.g)("g",{className:Je},f.getAppendShape(Qe)))}W.push(mt)},Oe=0;Oe<K-1;Oe++)pe(Oe);return Object(Le.g)("g",null,W)}}])&&qR(o.prototype,u),p}(Ov);function Ub(i){return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ub(i)}function JR(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return SO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return SO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function Gb(){return Gb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l])}return i},Gb.apply(this,arguments)}function QR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ej(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Vb(i,o){return Vb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Vb(i,o)}function tj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=Qy(i);if(o){var p=Qy(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return nj(this,u)}}function nj(i,o){if(o&&(Ub(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function Qy(i){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qy(i)}var Wb=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Vb(f,y)})(p,i);var o,u,l=tj(p);function p(){return QR(this,p),l.apply(this,arguments)}return o=p,(u=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),b=f.path,x=f.isAnimation,P=f.arrowConfig,C=f.getEdgeAnimationStyle(),W=C.strokeDasharray,K=C.stroke,pe=C.strokeDashoffset,Oe=C.animationName,Ne=C.animationDuration,Je=C.animationIterationCount,Qe=C.animationTimingFunction,mt=C.animationDirection;return Object(Le.g)(xv,Gb({d:b},y,P,x?{strokeDasharray:W,stroke:K,style:{strokeDashoffset:pe,animationName:Oe,animationDuration:Ne,animationIterationCount:Je,animationTimingFunction:Qe,animationDirection:mt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Le.g)(xv,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,b=f.isSelected,x=f.getArrowStyle().offset,P=f.pointsList.map(function(W){return{x:W.x,y:W.y}}),C=JR(Aa(P,x),2);return{start:C[0],end:C[1],hover:y,isSelected:b}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,b=f.pointsList.map(function(x){return{x:x.x,y:x.y}});return Aa(b,y)}}])&&ej(o.prototype,u),p}(Ov);function zb(i){return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},zb(i)}function AO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function rj(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}function oj(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function ij(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Hb(i,o){return Hb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Hb(i,o)}function aj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=em(i);if(o){var p=em(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return uj(this,u)}}function uj(i,o){if(o&&(zb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(i)}function em(i){return em=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},em(i)}var lj=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Hb(f,y)})(p,i);var o,u,l=aj(p);function p(){return oj(this,p),l.apply(this,arguments)}return o=p,u=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,b=f.style,x=y.start,P=y.end,C={start:x,end:P,offset:b.offset,verticalLength:b.verticalLength,type:"end"},W=L(C),K=W.leftX,pe=W.leftY,Oe=W.rightX,Ne=W.rightY;return function(Je){for(var Qe=1;Qe<arguments.length;Qe++){var mt=arguments[Qe]!=null?arguments[Qe]:{};Qe%2?AO(Object(mt),!0).forEach(function($t){rj(Je,$t,mt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Je,Object.getOwnPropertyDescriptors(mt)):AO(Object(mt)).forEach(function($t){Object.defineProperty(Je,$t,Object.getOwnPropertyDescriptor(mt,$t))})}return Je}({d:"M".concat(K," ").concat(pe," L").concat(P.x," ").concat(P.y," L").concat(Oe," ").concat(Ne," z")},b)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,b=f.strokeWidth,x=f.stroke,P=f.fill;return Object(Le.g)(xv,{d:y,fill:P,strokeWidth:b,stroke:x})}},{key:"render",value:function(){return Object(Le.g)("g",{className:"lf-arrow"},this.getShape())}}],u&&ij(o.prototype,u),p}(Le.a),TO=function(i,o){return yt(i,o)},sj=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},Xb=function(){return Pn.a.Date.now()},cj=Math.max,fj=Math.min,dj=function(i,o,u){var l,p,f,y,b,x,P=0,C=!1,W=!1,K=!0;if(typeof i!="function")throw new TypeError("Expected a function");function pe($t){var hn=l,dn=p;return l=p=void 0,P=$t,y=i.apply(dn,hn)}function Oe($t){return P=$t,b=setTimeout(Je,o),C?pe($t):y}function Ne($t){var hn=$t-x;return x===void 0||hn>=o||hn<0||W&&$t-P>=f}function Je(){var $t=Xb();if(Ne($t))return Qe($t);b=setTimeout(Je,function(hn){var dn=o-(hn-x);return W?fj(dn,f-(hn-P)):dn}($t))}function Qe($t){return b=void 0,K&&l?pe($t):(l=p=void 0,y)}function mt(){var $t=Xb(),hn=Ne($t);if(l=arguments,p=this,x=$t,hn){if(b===void 0)return Oe(x);if(W)return clearTimeout(b),b=setTimeout(Je,o),pe(x)}return b===void 0&&(b=setTimeout(Je,o)),y}return o=Nu(o)||0,Tr(u)&&(C=!!u.leading,f=(W="maxWait"in u)?cj(Nu(u.maxWait)||0,o):f,K="trailing"in u?!!u.trailing:K),mt.cancel=function(){b!==void 0&&clearTimeout(b),P=0,l=x=p=b=void 0},mt.flush=function(){return b===void 0?y:Qe(Xb())},mt},pj=r(172);function hj(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Qf(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var MO,PO,kO,vj=function(){function i(l){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,i),Qf(this,"undos",[]),Qf(this,"redos",[]),Qf(this,"callbacks",[]),Qf(this,"stopWatch",null),Qf(this,"curData",null),Qf(this,"maxSize",50),Qf(this,"waitTime",100),Qf(this,"eventCenter",void 0),this.eventCenter=l}var o,u;return o=i,(u=[{key:"add",value:function(l){TO(sj(this.undos),l)||(this.undos.push(l),TO(this.curData,l)||(this.redos=[]),this.eventCenter.emit(kn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var l=this.undos.pop();this.redos.push(l);var p=this.undos.pop();return this.curData=ho(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var l=this.redos.pop();return this.curData=ho(l),l}}},{key:"watch",value:function(l){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(l.modelToGraphData()),this.stopWatch=Object(pj.a)(l,dj(function(){var f=l.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&hj(o.prototype,u),i}();function Yb(i){return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Yb(i)}function yj(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||function(u,l){if(u){if(typeof u=="string")return NO(u,l);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return NO(u,l)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function NO(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function RO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Qd(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?RO(Object(u),!0).forEach(function(l){ep(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):RO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function jO(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function qb(i,o){return qb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},qb(i,o)}function mj(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=tm(i);if(o){var p=tm(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return gj(this,u)}}function gj(i,o){if(o&&(Yb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fh(i)}function fh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tm(i){return tm=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tm(i)}function ep(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var CO,DO,IO,Kb=Yl((kO=PO=function(i){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&qb(y,b)})(f,i);var o,u,l,p=mj(f);function f(){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,f),ep(fh(y=p.call(this)),"ref",Object(Le.f)()),ep(fh(y),"__prevText",{type:"",text:"",id:""}),ep(fh(y),"keyupHandler",function(b){var x=y.props.graphModel.textEditElement;b.key==="Enter"&&b.altKey&&x.setElementState(0)}),ep(fh(y),"inputHandler",function(b){var x=b.target.innerText,P=y.props.graphModel.textEditElement;y.__prevText={type:P.type,text:x.replace(/(\r\n)+$|(\n)+$/,""),id:P.id}}),ep(fh(y),"keydownHandler",function(b){b.stopPropagation()}),y.state={style:{left:0,top:0}},y}return o=f,l=[{key:"getDerivedStateFromProps",value:function(y){var b,x=y.graphModel,P=x.transformModel,C=x.theme,W=C.inputText,K=x.textEditElement;if(K){var pe;if((pe=K.text)===null||pe===void 0||!pe.value)if(K.BaseType===eo.EDGE){var Oe=(K=K).text,Ne=K.textPosition,Je=Ne.x,Qe=Ne.y;Oe.x=Je,Oe.y=Qe,K.setText(Oe)}else K=K;var mt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(K.BaseType===eo.EDGE){var $t=C.edgeText,hn=$t.overflowMode,dn=$t.lineHeight,zn=$t.wrapPadding,sn=$t.textWidth;sn&&hn==="autoWrap"&&(b=Qd(Qd({},mt),{},{width:sn,minWidth:sn,lineHeight:dn,padding:zn}))}else if(K.BaseType===eo.NODE){var Cn=C.nodeText,_n=Cn.overflowMode,Mr=Cn.lineHeight,Cr=Cn.wrapPadding,ur=Cn.textWidth,Gr=K,ai=Gr.width,ui=Gr.modelType,sa=Gr.textWidth||ur||ai;(ui!==_r.TEXT_NODE&&_n==="autoWrap"||ui===_r.TEXT_NODE&&ur)&&(b=Qd(Qd({},mt),{},{width:sa,minWidth:sa,lineHeight:Mr,padding:Cr}))}var Bu=K.text,Uu=Bu.x,Ls=Bu.y,tp=yj(P.CanvasPointToHtmlPoint([Uu,Ls]),2);return{style:Qd(Qd({left:tp[0],top:tp[1]},b),W)}}}}],(u=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var b=this.__prevText,x=b.text,P=b.id;y.updateText(P,x),y.eventCenter.emit(kn.TEXT_UPDATE,Qd({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var b=document.createRange();b.selectNodeContents(y),b.collapse(!1);var x=window.getSelection();x.removeAllRanges(),x.addRange(b)}}},{key:"render",value:function(){var y,b=this.props.graphModel.textEditElement,x=this.state.style;return b?Object(Le.g)("div",{contentEditable:!0,className:"lf-text-input",style:x,ref:this.ref,key:b.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=b.text)===null||y===void 0?void 0:y.value):null}}])&&jO(o.prototype,u),l&&jO(o,l),f}(Le.a),ep(PO,"toolName","textEdit"),MO=kO))||MO,_j=function(i){return i.modelType===_r.LINE_EDGE?function(o){var u=o.startPoint,l=o.endPoint,p=(u.x+l.x)/2,f=(u.y+l.y)/2,y=Math.abs(u.x-l.x)+10,b=Math.abs(u.y-l.y)+10;return{x:p-y/2,y:f-b/2,x1:p+y/2,y1:f+b/2}}(i):i.modelType===_r.POLYLINE_EDGE?function(o){var u=o.points,l=so(u),p=Vt(l,8),f=p.x,y=p.y,b=p.width,x=p.height;return{x:f-b/2,y:y-x/2,x1:f+b/2,y1:y+x/2}}(i):i.modelType===_r.BEZIER_EDGE?function(o){var u=o.path,l=Wn(u),p=Vt(l,8),f=p.x,y=p.y,b=p.width,x=p.height;return{x:f-b/2,y:y-x/2,x1:f+b/2,y1:y+x/2}}(i):void 0};function Zb(i){return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Zb(i)}function LO(i,o){return function(u){if(Array.isArray(u))return u}(i)||function(u,l){var p=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(p!=null){var f,y,b=[],x=!0,P=!1;try{for(p=p.call(u);!(x=(f=p.next()).done)&&(b.push(f.value),!l||b.length!==l);x=!0);}catch(C){P=!0,y=C}finally{try{x||p.return==null||p.return()}finally{if(P)throw y}}return b}}(i,o)||FO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bj(i){return function(o){if(Array.isArray(o))return Jb(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||FO(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function FO(i,o){if(i){if(typeof i=="string")return Jb(i,o);var u=Object.prototype.toString.call(i).slice(8,-1);return u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set"?Array.from(i):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Jb(i,o):void 0}}function Jb(i,o){(o==null||o>i.length)&&(o=i.length);for(var u=0,l=new Array(o);u<o;u++)l[u]=i[u];return l}function wj(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function Qb(i,o){return Qb=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},Qb(i,o)}function Ej(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,l=nm(i);if(o){var p=nm(this).constructor;u=Reflect.construct(l,arguments,p)}else u=l.apply(this,arguments);return Oj(this,u)}}function Oj(i,o){if(o&&(Zb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dh(i)}function dh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function nm(i){return nm=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},nm(i)}function ph(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var e0=Yl((IO=DO=function(i){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Qb(f,y)})(p,i);var o,u,l=Ej(p);function p(f){var y;(function(C,W){if(!(C instanceof W))throw new TypeError("Cannot call a class as a function")})(this,p),ph(dh(y=l.call(this)),"stepDrag",void 0),ph(dh(y),"handleMouseDown",function(C){y.stepDrag.handleMouseDown(C)}),ph(dh(y),"handleWheelEvent",function(C){var W,K;C.preventDefault();var pe=C.deltaX,Oe=C.deltaY,Ne=C.clientX,Je=C.clientY,Qe=C.ctrlKey,mt=new WheelEvent("wheel",{deltaX:pe,deltaY:Oe,clientX:Ne,clientY:Je,ctrlKey:Qe});(W=y.props.logicFlow.container)===null||W===void 0||(K=W.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||K===void 0||K.dispatchEvent(mt)}),ph(dh(y),"onDragging",function(C){var W=C.deltaX,K=C.deltaY,pe=y.props.graphModel,Oe=pe.getSelectElements(!0);pe.moveNodes(Oe.nodes.map(function(Ne){return Ne.id}),W,K)}),ph(dh(y),"handleContextMenu",function(C){C.preventDefault();var W=y.props,K=W.graphModel,pe=W.graphModel,Oe=pe.eventCenter,Ne=pe.selectElements,Je=K.getPointByClient({x:C.clientX,y:C.clientY}),Qe={nodes:[],edges:[]};bj(Ne.values()).forEach(function(mt){mt.BaseType===eo.NODE&&Qe.nodes.push(mt.getData()),mt.BaseType===eo.EDGE&&Qe.edges.push(mt.getData())}),Oe.emit(kn.SELECTION_CONTEXTMENU,{data:Qe,e:C,position:Je})});var b=f.graphModel,x=b.gridSize,P=b.eventCenter;return y.stepDrag=new J({onDragging:y.onDragging,step:x,eventType:"SELECTION",eventCenter:P}),y}return o=p,(u=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,b=f.transformModel;if(!(y.size<=1)){var x=Number.MAX_SAFE_INTEGER,P=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,W=Number.MIN_SAFE_INTEGER;y.forEach(function(Ne){var Je={x:0,y:0,x1:0,y1:0};Ne.BaseType===eo.NODE&&(Je=function(Qe){var mt=Qe.x,$t=Qe.y,hn=Qe.width,dn=Qe.height;return{x:mt-hn/2,y:$t-dn/2,x1:mt+hn/2,y1:$t+dn/2}}(Ne)),Ne.BaseType===eo.EDGE&&(Je=_j(Ne)),x=Math.min(x,Je.x),P=Math.min(P,Je.y),C=Math.max(C,Je.x1),W=Math.max(W,Je.y1)});var K=LO(b.CanvasPointToHtmlPoint([x,P]),2);x=K[0],P=K[1];var pe=LO(b.CanvasPointToHtmlPoint([C,W]),2);C=pe[0],W=pe[1];var Oe={left:"".concat(x-10,"px"),top:"".concat(P-10,"px"),width:"".concat(C-x+20,"px"),height:"".concat(W-P+20,"px")};return Object(Le.g)("div",{className:"lf-multiple-select",style:Oe,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&wj(o.prototype,u),p}(Le.a),ph(DO,"toolName","multipleSelect"),CO=IO))||CO;function xj(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function rm(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var Sj=function(){function i(l){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,i),rm(this,"tools",void 0),rm(this,"components",void 0),rm(this,"toolMap",new Map),rm(this,"instance",void 0),this.instance=l,this.isDisabledTool(Kb.toolName)||this.registerTool(Kb.toolName,Kb),this.isDisabledTool(e0.toolName)||this.registerTool(e0.toolName,e0);var p=l.graphModel;p.eventCenter.on("".concat(kn.GRAPH_TRANSFORM,",").concat(kn.NODE_CLICK,",").concat(kn.BLANK_CLICK," "),function(){var f=p.textEditElement,y=p.editConfigModel,b=y.edgeTextEdit,x=y.nodeTextEdit;(b||x)&&f&&p.textEditElement.setElementState(Ur.DEFAULT)})}var o,u;return o=i,(u=[{key:"isDisabledTool",value:function(l){return this.instance.options.disabledTools.indexOf(l)!==-1}},{key:"registerTool",value:function(l,p){this.toolMap.set(l,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&xj(o.prototype,u),i}(),Aj=r(173),Tj=r.n(Aj);function Mj(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function t0(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var $O=function(){function i(l){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,i),t0(this,"mousetrap",void 0),t0(this,"options",void 0),t0(this,"target",void 0),l.keyboard||(l.keyboard={enabled:!1}),this.options=l;var p=l.lf;this.target=p.container,this.mousetrap=new Tj.a(this.target),l.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var o,u;return o=i,(u=[{key:"initShortcuts",value:function(){var l=this,p=this.options.keyboard.shortcuts;if(p)if(Zr(p))p.forEach(function(x){var P=x.keys,C=x.callback,W=x.action;return l.on(P,C,W)});else{var f=p.keys,y=p.callback,b=p.action;this.on(f,y,b)}}},{key:"on",value:function(l,p,f){this.mousetrap.bind(this.getKeys(l),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(l,p){this.mousetrap.unbind(this.getKeys(l),p)}},{key:"enable",value:function(l){(this.disabled||l)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(l){var p=this;return(Array.isArray(l)?l:[l]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(l){return l.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Mj(o.prototype,u),i}(),Pj=$O,Yc=null;function BO(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function UO(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(u){u.x+=o,u.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var hh=40,n0=40;function r0(i){return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r0(i)}function GO(i,o){var u=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),u.push.apply(u,l)}return u}function Sv(i){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?GO(Object(u),!0).forEach(function(l){ei(i,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):GO(Object(u)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(u,l))})}return i}function VO(i,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function ei(i,o,u){return o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i}var o0=Symbol("plugin register by Logicflow.use"),i0=function(){function i(p){var f,y,b=this;(function(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")})(this,i),ei(this,"container",void 0),ei(this,"width",void 0),ei(this,"height",void 0),ei(this,"graphModel",void 0),ei(this,"history",void 0),ei(this,"viewMap",new Map),ei(this,"tool",void 0),ei(this,"keyboard",void 0),ei(this,"dnd",void 0),ei(this,"options",void 0),ei(this,"snaplineModel",void 0),ei(this,"components",[]),ei(this,"plugins",void 0),ei(this,"extension",{}),ei(this,"adapterIn",void 0),ei(this,"adapterOut",void 0),ei(this,"getView",function(x){return b.viewMap.get(x)}),p=$w(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new IP(Sv({},p)),this.tool=new Sj(this),this.history=new vj(this.graphModel.eventCenter),this.dnd=new Rk({lf:this}),this.keyboard=new Pj({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new QE(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(x){var P=x.data;y.setNodeSnapLine(P)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(x,P){var C=x.keyboard,W=C.options.keyboard;C.on(["cmd + c","ctrl + c"],function(){if(n0=hh,!W.enabled||P.textEditElement)return!0;var K=x.options.guards,pe=P.getSelectElements(!1);return K&&K.beforeClone&&!K.beforeClone(pe)||pe.nodes.length===0&&pe.edges.length===0?(Yc=null,!0):((Yc=pe).nodes.forEach(function(Oe){return BO(Oe,hh)}),Yc.edges.forEach(function(Oe){return UO(Oe,hh)}),!1)}),C.on(["cmd + v","ctrl + v"],function(){if(!W.enabled||P.textEditElement)return!0;if(Yc&&(Yc.nodes||Yc.edges)){x.clearSelectElements();var K=x.addElements(Yc,n0);if(!K)return!0;K.nodes.forEach(function(pe){return x.selectElementById(pe.id,!0)}),K.edges.forEach(function(pe){return x.selectElementById(pe.id,!0)}),Yc.nodes.forEach(function(pe){return BO(pe,hh)}),Yc.edges.forEach(function(pe){return UO(pe,hh)}),n0+=hh}return!1}),C.on(["cmd + z","ctrl + z"],function(){return!W.enabled||!!P.textEditElement||(x.undo(),!1)}),C.on(["cmd + y","ctrl + y"],function(){return!W.enabled||!!P.textEditElement||(x.redo(),!1)}),C.on(["backspace"],function(){if(!W.enabled||P.textEditElement)return!0;var K=P.getSelectElements(!0);return x.clearSelectElements(),K.edges.forEach(function(pe){return x.deleteEdge(pe.id)}),K.nodes.forEach(function(pe){return x.deleteNode(pe.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var o,u,l;return o=i,u=[{key:"register",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var b={BaseEdge:Ov,BaseEdgeModel:Hf,BaseNode:Wc,BaseNodeModel:Vc,RectNode:K_,RectNodeModel:T_,CircleNode:eb,CircleNodeModel:l_,PolygonNode:ib,PolygonNodeModel:O_,TextNode:mb,TextNodeModel:N_,LineEdge:Db,LineEdgeModel:bi,DiamondNode:sb,DiamondNodeModel:p_,PolylineEdge:Bb,PolylineEdgeModel:Fc,BezierEdge:Wb,BezierEdgeModel:n_,EllipseNode:hb,EllipseNodeModel:m_,HtmlNode:wb,HtmlNodeModel:C_,h:Le.g,type:p};this.viewMap.forEach(function(K){var pe=K.extendKey;pe&&(b[pe]=K)}),this.graphModel.modelMap.forEach(function(K){var pe=K.extendKey;pe&&(b[pe]=K)});var x=f(b),P=x.view,C=x.model,W=P;y&&!W.isObervered&&(W.isObervered=!0,W=En(W)),this.setView(p,W),this.graphModel.setModel(p,C)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=En(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){p.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:K_,model:T_,type:"rect"}),this.registerElement({type:"circle",view:eb,model:l_}),this.registerElement({type:"polygon",view:ib,model:O_}),this.registerElement({type:"line",view:Db,model:bi}),this.registerElement({type:"polyline",view:Bb,model:Fc}),this.registerElement({type:"bezier",view:Wb,model:n_}),this.registerElement({type:"text",view:mb,model:N_}),this.registerElement({type:"ellipse",view:hb,model:m_}),this.registerElement({type:"diamond",view:sb,model:p_}),this.registerElement({type:"html",view:wb,model:C_})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&y&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,y=p.coordinate,b=p.id;if(!y){var x=this.getNodeModelById(b);x&&(y=x.getData());var P=this.getEdgeModelById(b);P&&(y=P.textPosition)}var C=y,W=C.x,K=C.y;f.focusOn(W,K,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,y,b,x=this.getModelById(p);return!!x&&(y=(b=(ei(f={},eo.NODE,this.deleteNode),ei(f,eo.EDGE,this.deleteEdge),f)[x.BaseType])===null||b===void 0?void 0:b.call(this,p))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,y)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var y=f.getData(),b=this.options.guards,x=!b||!b.beforeDelete||b.beforeDelete(y);return x&&this.graphModel.deleteNode(p),x}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,y=this.graphModel.edgesMap[p];if(!y)return!1;var b=y.model.getData(),x=!f||!f.beforeDelete||f.beforeDelete(b);return x&&this.graphModel.deleteEdgeById(p),x}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,y=p.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,y=p.sourceNodeId,b=p.targetNodeId;if(y&&b){var x=[];return f.forEach(function(W){W.sourceNodeId===y&&W.targetNodeId===b&&x.push(W)}),x}if(y){var P=[];return f.forEach(function(W){W.sourceNodeId===y&&P.push(W)}),P}if(b){var C=[];return f.forEach(function(W){W.targetNodeId===b&&C.push(W)}),C}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.setProperties(Wo(f))}},{key:"deleteProperty",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,y=p.nodes,b=p.edges,x={},P={nodes:[],edges:[]},C=0;C<y.length;C++){var W=y[C],K=W.id,pe=this.addNode(W);if(!pe)return;K&&(x[K]=pe.id),P.nodes.push(pe)}return b.forEach(function(Oe){var Ne=Oe.sourceNodeId,Je=Oe.targetNodeId;x[Ne]&&(Ne=x[Ne]),x[Je]&&(Je=x[Je]);var Qe=f.graphModel.addEdge(Sv(Sv({},Oe),{},{sourceNodeId:Ne,targetNodeId:Je}));P.edges.push(Qe)}),P}},{key:"getAreaElement",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],b=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,y,b,x).map(function(P){return P.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),b=0;b<f;b++)y[b]=arguments[b];return this.adapterOut.apply(this,[p].concat(y))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,y=f.editConfigModel,b=f.transformModel;y.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&b.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=Wo(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=Wo(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,y=p.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=(p=this.plugins)!==null&&p!==void 0?p:i.extensions;b.forEach(function(x){var P=null,C=null;x[o0]?(P=x.extension,C=x.props):P=x;var W=P.pluginName||P.name;y.indexOf(W)===-1&&f.installPlugin(P,C)})}},{key:"installPlugin",value:function(p,f){if(r0(p)==="object"){var y=p.install,b=p.render;return y&&y.call(p,this,i),b&&this.components.push(b.bind(p)),void(this.extension[p.pluginName]=p)}var x=p,P=new x({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:f});P.render&&this.components.push(P.render.bind(P)),this.extension[x.pluginName]=P}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var y=new f(Sv(Sv({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(Wo(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Le.j)(Object(Le.g)(kk,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(kn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],l=[{key:"use",value:function(p,f){var y,b,x=p.pluginName;x||(x=p.name);var P=(y=this.extensions.get(x))===null||y===void 0?void 0:y.extension;P&&P.destroy&&P.destroy(),this.extensions.set(x,(ei(b={},o0,o0),ei(b,"extension",p),ei(b,"props",f),b))}}],u&&VO(o.prototype,u),l&&VO(o,l),i}();function Yl(i){return En(i)}ei(i0,"extensions",new Map),a.default=i0}])})})($0,$0.exports);var cn=$0.exports;const iG=DC(cn);var aG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),uG=(globalThis==null?void 0:globalThis._ids)||new aG;function Zh(){return uG.next()}var RM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){RM(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Zh()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){RM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var jM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Tm=globalThis&&globalThis.__assign||function(){return Tm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tm.apply(this,arguments)};(function(e){jM(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Zh()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){jM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return cn.h("g",{},v,cn.h("circle",Tm(Tm({},a),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var CM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cv=globalThis&&globalThis.__assign||function(){return Cv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cv.apply(this,arguments)};(function(e){CM(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+Zh()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){CM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.points,h=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(a-s/2)+" "+(r-c/2)+")"},cn.h("polygon",Cv(Cv({},h),{x:a,y:r,points:v})),cn.h("path",Cv({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},h)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var DM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Mm=globalThis&&globalThis.__assign||function(){return Mm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Mm.apply(this,arguments)};(function(e){DM(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Zh()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){DM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:a-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Mm(Mm({},h),{x:a-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var IM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),B0=globalThis&&globalThis.__assign||function(){return B0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},B0.apply(this,arguments)};(function(e){IM(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Zh()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){IM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:a-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",B0({x:a-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},h)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var LM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){LM(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+Zh()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){LM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var Tx={width:40,height:40},Mx={width:40,height:40},Px={width:40,height:40},kx={width:100,height:80},Nx={width:100,height:80},lG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),sG=(globalThis==null?void 0:globalThis._ids)||new lG;function Rx(){return sG.next()}function FM(e){return Object.prototype.toString.call(e)}function cG(e){return"  ".repeat(e)}function Pm(e){var t=e;return FM(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Pm(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=Pm(n)})),t}function fG(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Pm(e)).replace(/"/g,"'")}return t}var vh=`	
`;function mm(e,t,n){var a=cG(n),r="";if(t==="#text")return vh+a+e;if(t==="#cdata-section")return vh+a+"<![CDATA["+e+"]]>";if(t==="#comment")return vh+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+fG(e)+'"';if(Array.isArray(e))e.forEach(function(h){r+=mm(h,t,n+1)});else if(FM(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":vh+a)+"<"+t,s.forEach(function(h){h.charAt(0)==="-"?c+=mm(e[h],h,n+1):v+=mm(e[h],h,n+1)}),r+=c+(v!==""?">"+v+(vh+a)+"</"+t+">":" />")}else r+=vh+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function dG(e){var t="";for(var n in e)t+=mm(e[n],n,0);return t}var Ya=function(){};Ya.ObjTree=function(){return this};Ya.ObjTree.VERSION="0.23";Ya.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Ya.ObjTree.prototype.attr_prefix="-";Ya.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};Ya.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var s=this,c=n,v=a.onComplete;a.onComplete=function(_){var E;_&&_.responseXML&&_.responseXML.documentElement&&(E=s.parseDOM(_.responseXML.documentElement)),c(E,_),v&&v(_)}}else a.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};Ya.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};Ya.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h==3||h==4||h==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}}else n===null&&(n={});return n}};Ya.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};Ya.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};Ya.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};Ya.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};Ya.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};Ya.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var pG=function(e){return new Ya.ObjTree().parseXML(e)},hG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),U0=globalThis&&globalThis.__assign||function(){return U0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},U0.apply(this,arguments)},cg=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},Gs;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(Gs||(Gs={}));var $M=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],jx=["properties","startPoint","endPoint","pointsList"];function Cx(e){var t=e?jx.concat(e):jx;return function(n){function a(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var v=cg(c,2),h=v[0],g=v[1];typeof g!="object"?h.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(h)?s[h]=g:s["-"+h]=g:t.includes(h)?s["-"+h]=a(g):s[h]=a(g)}),s)}return a(n)}}function km(e){var t={};return Object.entries(e).forEach(function(n){var a=cg(n,2),r=a[0],s=a[1];r.indexOf("-")===0?t[r.substring(1)]=Pm(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=km(s):Array.isArray(s)?t[r]=s.map(function(c){return km(c)}):t[r]=s}),t}function vG(e,t,n){var a=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var h=Cx(n)(s.properties);Object.assign(v,h)}a.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,h=a.get(s.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(s.id):h["bpmn:incoming"]=[h["bpmn:incoming"],s.id]:h["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var _=Cx(n)(s.properties);Object.assign(g,_)}return g});t.edges.forEach(function(s){var c=a.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[Gs.FLOW]=r}function yG(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,s=100,c=80,v=n.x,h=n.y,g=sd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}function mG(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===Gs.FLOW){var v=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=_G(c,v)}else{var h=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(gG(c,h,s))}}})}return{nodes:t,edges:n}}function gG(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=Dx(v,n,c);a.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=Dx(r,n,e);a.push(s)}return a}function Dx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=sd.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(E){var O=cg(E,2),S=O[0],k=O[1];$M.indexOf(S)===-1&&(v||(v={}),v[S]=k)}),v&&(v=km(v));var h;if(s&&(h={x:a,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];h.x=Number(g["-x"])+Number(g["-width"])/2,h.y=Number(g["-y"])+Number(g["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:a,y:r,properties:v};return h&&(_.text=h),_}function _G(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(Ix(s,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Ix(a,e))}return n}function Ix(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(h){s<h.length&&(s=h.length)}),n={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(h){var g=cg(h,2),_=g[0],E=g[1];$M.indexOf(_)===-1&&(c||(c={}),c[_]=E)}),c&&(c=km(c));var v={id:t["-id"],type:Gs.FLOW,pointsList:e["di:waypoint"].map(function(h){return{x:Number(h["-x"]),y:Number(h["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var sd=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,s){var c=U0({},n.processAttributes);vG(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};yG(v,r);var h=n.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":h};return g},this.adapterIn=function(r){if(r)return mG(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Rx()},this.definitionAttributes={"-id":"Definitions_"+Rx(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();sd.shapeConfigMap.set(Gs.START,{width:Tx.width,height:Tx.height});sd.shapeConfigMap.set(Gs.END,{width:Mx.width,height:Mx.height});sd.shapeConfigMap.set(Gs.GATEWAY,{width:Px.width,height:Px.height});sd.shapeConfigMap.set(Gs.SYSTEM,{width:kx.width,height:kx.height});sd.shapeConfigMap.set(Gs.USER,{width:Nx.width,height:Nx.height});(function(e){hG(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(s){var c=pG(s);return a.adapterIn(c)},a.adapterXmlOut=function(s,c){var v=a.adapterOut(s,c);return dG(v)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(sd);var bG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),wG=(globalThis==null?void 0:globalThis._ids)||new bG;function EG(){return wG.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Lx=globalThis&&globalThis.__assign||function(){return Lx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lx.apply(this,arguments)},OG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Fx=globalThis&&globalThis.__assign||function(){return Fx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fx.apply(this,arguments)},xG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var $x=globalThis&&globalThis.__assign||function(){return $x=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$x.apply(this,arguments)},SG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Bx=globalThis&&globalThis.__assign||function(){return Bx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Bx.apply(this,arguments)},AG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Ux=globalThis&&globalThis.__assign||function(){return Ux=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ux.apply(this,arguments)},TG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Gx=globalThis&&globalThis.__assign||function(){return Gx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Gx.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Vx=globalThis&&globalThis.__assign||function(){return Vx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vx.apply(this,arguments)},MG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var B1,hi,BM,ip,Wx,UM,GM,VM,U1,G0,V0,W0={},WM=[],PG=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,fg=Array.isArray;function Zc(e,t){for(var n in t)e[n]=t[n];return e}function G1(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Dv(e,t,n){var a,r,s,c={};for(s in t)s=="key"?a=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?B1.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]==null&&(c[s]=e.defaultProps[s]);return gm(e,c,a,r,null)}function gm(e,t,n,a,r){var s={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++BM,__i:-1,__u:0};return r==null&&hi.vnode!=null&&hi.vnode(s),s}function V1(e){return e.children}function Mh(e,t){this.props=e,this.context=t}function $h(e,t){if(t==null)return e.__?$h(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?$h(e):null}function zM(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return zM(e)}}function zx(e){(!e.__d&&(e.__d=!0)&&ip.push(e)&&!Nm.__r++||Wx!=hi.debounceRendering)&&((Wx=hi.debounceRendering)||UM)(Nm)}function Nm(){for(var e,t,n,a,r,s,c,v=1;ip.length;)ip.length>v&&ip.sort(GM),e=ip.shift(),v=ip.length,e.__d&&(n=void 0,r=(a=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Zc({},a)).__v=a.__v+1,hi.vnode&&hi.vnode(n),YM(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[r]:null,s,r??$h(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,RG(s,n,c),n.__e!=r&&zM(n)));Nm.__r=0}function HM(e,t,n,a,r,s,c,v,h,g,_){var E,O,S,k,M,j,I=a&&a.__k||WM,N=t.length;for(h=kG(n,t,I,h,N),E=0;E<N;E++)(S=n.__k[E])!=null&&(O=S.__i==-1?W0:I[S.__i]||W0,S.__i=E,j=YM(e,S,O,r,s,c,v,h,g,_),k=S.__e,S.ref&&O.ref!=S.ref&&(O.ref&&W1(O.ref,null,S),_.push(S.ref,S.__c||k,S)),M==null&&k!=null&&(M=k),4&S.__u||O.__k===S.__k?h=XM(S,h,e):typeof S.type=="function"&&j!==void 0?h=j:k&&(h=k.nextSibling),S.__u&=-7);return n.__e=M,h}function kG(e,t,n,a,r){var s,c,v,h,g,_=n.length,E=_,O=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=s+O,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?gm(null,c,null,null,null):fg(c)?gm(V1,{children:c},null,null,null):c.constructor==null&&c.__b>0?gm(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=NG(c,n,h,E))!=-1&&(E--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>_?O--:r<_&&O++),typeof c.type!="function"&&(c.__u|=4)):g!=h&&(g==h-1?O--:g==h+1?O++:(g>h?O--:O++,c.__u|=4))):e.__k[s]=null;if(E)for(s=0;s<_;s++)(v=n[s])!=null&&!(2&v.__u)&&(v.__e==a&&(a=$h(v)),KM(v,v));return a}function XM(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=XM(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=$h(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function NG(e,t,n,a){var r,s,c=e.key,v=e.type,h=t[n];if(h===null&&e.key==null||h&&c==h.key&&v==h.type&&!(2&h.__u))return n;if(a>(h!=null&&!(2&h.__u)?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((h=t[r])&&!(2&h.__u)&&c==h.key&&v==h.type)return r;r--}if(s<t.length){if((h=t[s])&&!(2&h.__u)&&c==h.key&&v==h.type)return s;s++}}return-1}function Hx(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||PG.test(t)?n:n+"px"}function cm(e,t,n,a,r){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Hx(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||Hx(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(VM,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?a?n.u=a.u:(n.u=U1,e.addEventListener(t,s?V0:G0,s)):e.removeEventListener(t,s?V0:G0,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Xx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=U1++;else if(t.t<n.u)return;return n(hi.event?hi.event(t):t)}}}function YM(e,t,n,a,r,s,c,v,h,g){var _,E,O,S,k,M,j,I,N,B,q,ee,Y,Q,z,D,V,X=t.type;if(t.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),s=[v=t.__e=n.__e]),(_=hi.__b)&&_(t);e:if(typeof X=="function")try{if(I=t.props,N="prototype"in X&&X.prototype.render,B=(_=X.contextType)&&a[_.__c],q=_?B?B.props.value:_.__:a,n.__c?j=(E=t.__c=n.__c).__=E.__E:(N?t.__c=E=new X(I,q):(t.__c=E=new Mh(I,q),E.constructor=X,E.render=CG),B&&B.sub(E),E.props=I,E.state||(E.state={}),E.context=q,E.__n=a,O=E.__d=!0,E.__h=[],E._sb=[]),N&&E.__s==null&&(E.__s=E.state),N&&X.getDerivedStateFromProps!=null&&(E.__s==E.state&&(E.__s=Zc({},E.__s)),Zc(E.__s,X.getDerivedStateFromProps(I,E.__s))),S=E.props,k=E.state,E.__v=t,O)N&&X.getDerivedStateFromProps==null&&E.componentWillMount!=null&&E.componentWillMount(),N&&E.componentDidMount!=null&&E.__h.push(E.componentDidMount);else{if(N&&X.getDerivedStateFromProps==null&&I!==S&&E.componentWillReceiveProps!=null&&E.componentWillReceiveProps(I,q),!E.__e&&E.shouldComponentUpdate!=null&&E.shouldComponentUpdate(I,E.__s,q)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(E.props=I,E.state=E.__s,E.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(H){H&&(H.__=t)}),ee=0;ee<E._sb.length;ee++)E.__h.push(E._sb[ee]);E._sb=[],E.__h.length&&c.push(E);break e}E.componentWillUpdate!=null&&E.componentWillUpdate(I,E.__s,q),N&&E.componentDidUpdate!=null&&E.__h.push(function(){E.componentDidUpdate(S,k,M)})}if(E.context=q,E.props=I,E.__P=e,E.__e=!1,Y=hi.__r,Q=0,N){for(E.state=E.__s,E.__d=!1,Y&&Y(t),_=E.render(E.props,E.state,E.context),z=0;z<E._sb.length;z++)E.__h.push(E._sb[z]);E._sb=[]}else do E.__d=!1,Y&&Y(t),_=E.render(E.props,E.state,E.context),E.state=E.__s;while(E.__d&&++Q<25);E.state=E.__s,E.getChildContext!=null&&(a=Zc(Zc({},a),E.getChildContext())),N&&!O&&E.getSnapshotBeforeUpdate!=null&&(M=E.getSnapshotBeforeUpdate(S,k)),D=_,_!=null&&_.type===V1&&_.key==null&&(D=qM(_.props.children)),v=HM(e,fg(D)?D:[D],t,n,a,r,s,c,v,h,g),E.base=t.__e,t.__u&=-161,E.__h.length&&c.push(E),j&&(E.__E=E.__=null)}catch(H){if(t.__v=null,h||s!=null)if(H.then){for(t.__u|=h?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else for(V=s.length;V--;)G1(s[V]);else t.__e=n.__e,t.__k=n.__k;hi.__e(H,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=jG(n.__e,t,n,a,r,s,c,h,g);return(_=hi.diffed)&&_(t),128&t.__u?void 0:v}function RG(e,t,n){for(var a=0;a<n.length;a++)W1(n[a],n[++a],n[++a]);hi.__c&&hi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){hi.__e(s,r.__v)}})}function qM(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:fg(e)?e.map(qM):Zc({},e)}function jG(e,t,n,a,r,s,c,v,h){var g,_,E,O,S,k,M,j=n.props,I=t.props,N=t.type;if(N=="svg"?r="http://www.w3.org/2000/svg":N=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((S=s[g])&&"setAttribute"in S==!!N&&(N?S.localName==N:S.nodeType==3)){e=S,s[g]=null;break}}if(e==null){if(N==null)return document.createTextNode(I);e=document.createElementNS(r,N,I.is&&I),v&&(hi.__m&&hi.__m(t,s),v=!1),s=null}if(N==null)j===I||v&&e.data==I||(e.data=I);else{if(s=s&&B1.call(e.childNodes),j=n.props||W0,!v&&s!=null)for(j={},g=0;g<e.attributes.length;g++)j[(S=e.attributes[g]).name]=S.value;for(g in j)if(S=j[g],g!="children"){if(g=="dangerouslySetInnerHTML")E=S;else if(!(g in I)){if(g=="value"&&"defaultValue"in I||g=="checked"&&"defaultChecked"in I)continue;cm(e,g,null,S,r)}}for(g in I)S=I[g],g=="children"?O=S:g=="dangerouslySetInnerHTML"?_=S:g=="value"?k=S:g=="checked"?M=S:v&&typeof S!="function"||j[g]===S||cm(e,g,S,j[g],r);if(_)v||E&&(_.__html==E.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(E&&(e.innerHTML=""),HM(t.type=="template"?e.content:e,fg(O)?O:[O],t,n,a,N=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&$h(n,0),v,h),s!=null)for(g=s.length;g--;)G1(s[g]);v||(g="value",N=="progress"&&k==null?e.removeAttribute("value"):k!=null&&(k!==e[g]||N=="progress"&&!k||N=="option"&&k!=j[g])&&cm(e,g,k,j[g],r),g="checked",M!=null&&M!=e[g]&&cm(e,g,M,j[g],r))}return e}function W1(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){hi.__e(r,n)}}function KM(e,t,n){var a,r;if(hi.unmount&&hi.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||W1(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(s){hi.__e(s,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&KM(a[r],t,n||typeof e.type!="function");n||G1(e.__e),e.__c=e.__=e.__e=void 0}function CG(e,t,n){return this.constructor(e,n)}B1=WM.slice,hi={__e:function(e,t,n,a){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},BM=0,Mh.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Zc({},this.state),typeof e=="function"&&(e=e(Zc({},n),this.props)),e&&Zc(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),zx(this))},Mh.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),zx(this))},Mh.prototype.render=V1,ip=[],UM=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,GM=function(e,t){return e.__v.__b-t.__v.__b},Nm.__r=0,VM=/(PointerCapture)$|Capture$/i,U1=0,G0=Xx(!1),V0=Xx(!0);var Iv=globalThis&&globalThis.__assign||function(){return Iv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Iv.apply(this,arguments)};function z1(e){var t=e.x,n=e.y,a=e.width,r=e.height,s=e.radius,c=e.className,v=t-a/2,h=n-r/2,g=Iv(Iv({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:h});return cn.h("rect",Iv({},g))}z1.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Sh;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Sh||(Sh={}));var DG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),ap=globalThis&&globalThis.__assign||function(){return ap=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ap.apply(this,arguments)},IG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},LG=cn.LogicFlowUtil.StepDrag,FG=function(e){DG(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel,h=v.x,g=v.y;a.nodeModel.x=h+s/2,a.nodeModel.y=g+c/2,a.nodeModel.moveText(s/2,c/2)},a.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,h=r.width,g=r.height,_=r.PCTResizeInfo,E=r.pct,O=E===void 0?1:E,S=r.freezeWidth,k=S===void 0?!1:S,M=r.freezeHeight,j=M===void 0?!1:M,I={width:h,height:g,deltaX:c,deltaY:v};if(_){var N=4,B=0,q=0;switch(s){case 0:q=(c*-1-v)/N;break;case 1:q=(c-v)/N;break;case 2:q=(c+v)/N;break;case 3:q=(c*-1+v)/N;break}q!==0&&(B=Math.round(q/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+B,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+B,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var ee=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),Y=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(s){case 0:c=h-ee,v=g-Y;break;case 1:c=ee-h,v=g-Y;break;case 2:c=ee-h,v=Y-g;break;case 3:c=h-ee,v=Y-g;break}return I.width=ee,I.height=Y,I.deltaX=c/O,I.deltaY=v/O,I}switch(s){case 0:I.width=k?h:h-c*O,I.height=j?g:g-v*O;break;case 1:I.width=k?h:h+c*O,I.height=j?g:g-v*O;break;case 2:I.width=k?h:h+c*O,I.height=j?g:g+v*O;break;case 3:I.width=k?h:h-c*O,I.height=j?g:g+v*O;break}return I},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,s=r.id,c=r.anchors,v=a.getNodeEdges(s);v.sourceEdges.forEach(function(h){var g=c.find(function(_){return _.id===h.sourceAnchorId});h.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(h){var g=c.find(function(_){return _.id===h.targetAnchorId});h.updateEndPoint({x:g.x,y:g.y})})},a.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel,h=v.id,g=v.x,_=v.y,E=v.width,O=v.height,S=v.radius,k=v.PCTResizeInfo,M=a.nodeModel,j=M.minWidth,I=M.minHeight,N=M.maxWidth,B=M.maxHeight,q=a.index,ee=j===N,Y=I===B,Q=a.getResize({index:q,deltaX:s,deltaY:c,width:E,height:O,PCTResizeInfo:k,pct:1,freezeWidth:ee,freezeHeight:Y});if(Q.width<j||Q.width>N||Q.height<I||Q.height>B){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:ee?0:Q.deltaX,deltaY:Y?0:Q.deltaY}),a.nodeModel.width=Q.width,a.nodeModel.height=Q.height,a.nodeModel.setProperties({nodeSize:{width:Q.width,height:Q.height}}),a.getNodeEdges(h);var z={x:g,y:_,width:E,height:O,radius:S},D={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:S};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:z,afterNode:D})},a.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel,h=v.id,g=v.rx,_=v.ry,E=v.x,O=v.y,S=v.PCTResizeInfo,k=a.index,M=a.nodeModel,j=M.minWidth,I=M.minHeight,N=M.maxWidth,B=M.maxHeight,q=j===N,ee=I===B,Y=g,Q=_,z=a.getResize({index:k,deltaX:s,deltaY:c,width:Y,height:Q,PCTResizeInfo:S,pct:1/2,freezeWidth:q,freezeHeight:ee});if(z.width<j/2||z.width>N/2||z.height<I/2||z.height>B/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:q?0:z.deltaX,deltaY:ee?0:z.deltaY}),a.nodeModel.rx=z.width,a.nodeModel.ry=z.height,a.nodeModel.setProperties({nodeSize:{rx:z.width,ry:z.height}}),a.getNodeEdges(h);var D={x:E,y:O},V={rx:z.width,ry:z.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:ap(ap({},D),{rx:g,ry:_}),afterNode:V})},a.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel;v.id;var h=v.rx,g=v.ry,_=v.x,E=v.y,O=v.PCTResizeInfo,S=a.index,k=a.nodeModel,M=k.minWidth,j=k.minHeight,I=k.maxWidth,N=k.maxHeight,B=M===I,q=j===N,ee=h,Y=g,Q=a.getResize({index:S,deltaX:s,deltaY:c,width:ee,height:Y,PCTResizeInfo:O,pct:1/2,freezeWidth:B,freezeHeight:q});if(Q.width<M/2||Q.width>I/2||Q.height<j/2||Q.height>N/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:B?0:Q.deltaX,deltaY:q?0:Q.deltaY}),a.nodeModel.rx=Q.width,a.nodeModel.ry=Q.height,a.nodeModel.setProperties({nodeSize:{rx:Q.width,ry:Q.height}});var z={x:_,y:E,rx:h,ry:g},D={rx:Q.width,ry:Q.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:z,afterNode:D})},a.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=a.nodeModel,h=v.id,g=v.modelType,_=v.type,E=ap({id:h,modelType:g,type:_},s),O=ap({id:h,modelType:g,type:_},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:E,newNodeSize:O})},a.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,h=a.graphModel.transformModel,g=a.nodeModel.modelType;s=IG(h.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===Sh.RECT_NODE||g===Sh.HTML_NODE?a.updateRect({deltaX:c,deltaY:v}):g===Sh.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:v}):g===Sh.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:v})},a.onDragEnd=function(){var r=a.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(a.nodeModel.x/s),v=s*Math.round(a.nodeModel.y/s);a.nodeModel.moveTo(c,v),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new LG({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,s=[],c=[],v=0;v<r.length;v++){var h=r[v];h.sourceNodeId===n?s.push(h):r[v].targetNodeId===n&&c.push(h)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Dv("g",{className:"lf-resize-control-"+s},Dv(z1,ap({className:"lf-node-control"},{x:a,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(Mh),$G=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rm=globalThis&&globalThis.__assign||function(){return Rm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rm.apply(this,arguments)},dg=function(e){$G(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,s=a.x,c=a.y,v=a.width,h=a.height,g={minX:s-v/2,minY:c-h/2,maxX:s+v/2,maxY:c+h/2},_=g.minX,E=g.minY,O=g.maxX,S=g.maxY,k=[{x:_,y:E},{x:O,y:E},{x:O,y:S},{x:_,y:S}];return k.map(function(M,j){return Dv(FG,Rm({index:j},M,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Dv(z1,Rm({fill:"none"},v,{x:a,y:r,width:s,height:c}))},t.prototype.render=function(){return Dv("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(Mh),ZM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),BG=function(e){ZM(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),UG=function(e){ZM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(dg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(cn.RectNode),JM={type:"rect",view:UG,model:BG},QM=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){QM(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){QM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(dg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var z0=globalThis&&globalThis.__assign||function(){return z0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},z0.apply(this,arguments)};function GG(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,h=v===void 0?"transparent":v,g=e.stroke,_=g===void 0?"#000":g,E=e.points,O=e.className,S=O===void 0?"lf-basic-shape":O,k={fill:h,fillOpacity:n,strokeWidth:r,stroke:_,strokeOpacity:c,points:"",className:S};return k.points=E.map(function(M){return M.join(",")}).join(" "),cn.h("polygon",z0({},k))}var e2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),H0=globalThis&&globalThis.__assign||function(){return H0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},H0.apply(this,arguments)};(function(e){e2(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){e2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(dg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(GG,H0({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var t2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),VG=function(e){t2(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),WG=function(e){t2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return cn.h(dg,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),n2={type:"html",view:WG,model:VG},r2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),jm=globalThis&&globalThis.__assign||function(){return jm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jm.apply(this,arguments)},zG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},HG=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zG(arguments[t]));return e},Yx=500,qx=300,XG=-1e4;(function(e){r2(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Yx,n.unfoldedHight=qx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Yx,this.height=qx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=XG,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=a.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var h=a.childrenLastFoldStatus[s];h!==void 0&&h!==c.isFolded&&c.foldGroup(h)}a.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(s,c){var v=s.id,h=s.sourceNodeId,g=s.targetNodeId,_=s.startPoint,E=s.endPoint,O=s.type,S=s.text,k=s.getProperties(),M={id:v+"__"+c,sourceNodeId:h,targetNodeId:g,startPoint:_,endPoint:E,type:O,properties:k,text:S==null?void 0:S.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var j=r.graphModel.group.getNodeGroup(g);j||(j=r.graphModel.getNodeModelById(g));var I=r.graphModel.group.getNodeGroup(h);I||(I=r.graphModel.getNodeModelById(h)),n&&s.visible!==!1&&(r.children.has(h)||r.id===h?(M.startPoint=void 0,M.sourceNodeId=r.id):(M.endPoint=void 0,M.targetNodeId=r.id),(j.id!==r.id||I.id!==r.id)&&r.createVirtualEdge(M),s.visible=!1),!n&&s.visible===!1&&(j&&j.isGroup&&j.isFolded?(M.targetNodeId=j.id,M.endPoint=void 0,r.createVirtualEdge(M)):I&&I.isGroup&&I.isFolded?(M.sourceNodeId=I.id,M.startPoint=void 0,r.createVirtualEdge(M)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,s=n.x2,c=n.y2;return a>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&a.children.push(s)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=HG(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(JM.model);(function(e){r2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,h=n.properties;if(!h.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),E=a+g+8,O=r+g+8;return cn.h("rect",jm(jm({},_),{width:E,height:O,x:s-E/2,y:c-O/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(JM.view);var Kx=globalThis&&globalThis.__assign||function(){return Kx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Kx.apply(this,arguments)};globalThis&&globalThis.__rest;var YG=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();var Zx=globalThis&&globalThis.__assign||function(){return Zx=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Zx.apply(this,arguments)};globalThis&&globalThis.__values;var Jx=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Lv=globalThis&&globalThis.__assign||function(){return Lv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lv.apply(this,arguments)};function qG(e){var t=function(a){Jx(r,a);function r(s,c){var v=this;s.id||(s.id="Flow_"+EG());var h=Lv(Lv(Lv({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=h,v=a.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(a){Jx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}qG();globalThis&&globalThis.__read;var Qx={width:40,height:40},eS={width:40,height:40},tS={width:100,height:80},Cm={width:100,height:80},nS={width:100,height:80},rS={width:100,height:80},oS={width:100,height:80},iS={width:100,height:80},aS={width:100,height:80},uS={width:100,height:80},qa=function(){};qa.ObjTree=function(){return this};qa.ObjTree.VERSION="0.23";qa.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;qa.ObjTree.prototype.attr_prefix="-";qa.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};qa.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var s=this,c=n,v=a.onComplete;a.onComplete=function(_){var E;_&&_.responseXML&&_.responseXML.documentElement&&(E=s.parseDOM(_.responseXML.documentElement)),c(E,_),v&&v(_)}}else a.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};qa.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};qa.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h===3||h===4||h===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}}else n===null&&(n={});return n}};qa.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};qa.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};qa.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};qa.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};qa.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};qa.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var KG=function(e){return new qa.ObjTree().parseXML(e)};function o2(e){return Object.prototype.toString.call(e)}function lS(e){return"  ".repeat(e)}function Dm(e){return o2(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Dm(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Dm(t)}):e}function ZG(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Dm(e)).replace(/"/g,"'")}return t}var sS=`	
`;function _m(e,t,n){var a=lS(n),r="",s=sS+a;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+ZG(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return _m(g,t,n+1)}).join("");else if(o2(e)==="[object Object]"){var c=Object.keys(e),v="",h=e["-json"]?sS+lS(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=_m(e[g],g,n+1):h+=_m(e[g],g,n+1)}),r+=v+(h!==""?">"+h+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function JG(e){var t="";for(var n in e)t+=_m(e[n],n,0);return t}var QG=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),X0=globalThis&&globalThis.__assign||function(){return X0=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},X0.apply(this,arguments)},cS=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},H1=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jh=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},Ph=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Jh(arguments[t]));return e},Ha;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(Ha||(Ha={}));var i2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],e7=["properties","startPoint","endPoint","pointsList"],Im={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},a2=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],s=r.in,c=r.out;s&&(e[a].in=s),c&&(e[a].out=c)}else e[a]=t[a]}),e},yl={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=yl[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=yl[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=yl[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=yl[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,s,c=e,v=t["-id"],h="",g="";try{for(var _=H1(Object.keys(t)),E=_.next();!E.done;E=_.next()){var O=E.value;O.includes("bpmn:")&&(r=Jh(O.split(":"),2),h=r[1],g=(s=t[O])===null||s===void 0?void 0:s["#text"])}}catch(S){n={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":h,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function t7(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,s=new Set(Ph(e7,n||[])),c={in:new Set(Ph(Im.in,(a==null?void 0:a.in)||[])),out:new Set(Ph(Im.out,(a==null?void 0:a.out)||[]))};return yl=a2(yl,r),function(v){var h=v.nodes,g=v.edges;function _(E,O){var S,k,M;if((E==null?void 0:E.flag)!==1){var j;if((j=yl[E.type])&&j.out){var I=j.out(E),N=Object.keys(I);N.length>0&&N.forEach(function(V){E[V]=I[V]})}E!=null&&E.children&&(E.children=E.children.map(function(V){var X=h.find(function(H){return H.id===V})||g.find(function(H){return H.id===V});return X||{}}));var B={};if(typeof E=="string")return E;if(Array.isArray(E))return E.map(function(V){return _(V,"")}).filter(function(V){return V!=null});try{for(var q=H1(Object.entries(E)),ee=q.next();!ee.done;ee=q.next()){var Y=Jh(ee.value,2),Q=Y[0],z=Y[1];if(((M=z)===null||M===void 0?void 0:M.flag)===1)return;var D=[O,Q].filter(function(V){return V}).join(".");c.out.has(D)||(typeof z!="object"?Q.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(Q)?B[Q]=z:B["-"+Q]=z:s.has(D)?B["-"+Q]=_(z,D):B[Q]=_(z,D))}}catch(V){S={error:V}}finally{try{ee&&!ee.done&&(k=q.return)&&k.call(q)}finally{if(S)throw S.error}}return B}}return _(v,"")}}function Lm(e){var t,n,a={};try{for(var r=H1(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Jh(s.value,2),v=c[0],h=c[1];v.indexOf("-")===0?a[v.substring(1)]=Dm(h):typeof h=="string"?a[v]=h:Object.prototype.toString.call(h)==="[object Object]"?a[v]=Lm(h):Array.isArray(h)?a[v]=h.map(function(g){return Lm(g)}):a[v]=h}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function n7(e,t,n){var a,r=new Map,s=t7(n)(t);s.nodes.forEach(function(v){var h=v["-id"],g=v["-type"],_=v.text,E=v.children,O=cS(v,["-id","-type","text","children"]),S={"-id":h};_!=null&&_["-value"]&&(S["-name"]=_["-value"]),O["-json"]&&(S["-json"]=O["-json"]),O["-properties"]&&Object.assign(S,O["-properties"]),E&&(S.children=E),e[g]||(e[g]=[]),e[g].push(S),r.set(h,S)});var c=s.edges.map(function(v){var h=v["-id"];v["-type"];var g=v["-sourceNodeId"],_=v["-targetNodeId"],E=v.text,O=cS(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),S=r.get(_);S["bpmn:incoming"]||(S["bpmn:incoming"]=[]),S["bpmn:incoming"].push(h);var k={"-id":h,"-sourceRef":g,"-targetRef":_};return E!=null&&E["-value"]&&(k["-name"]=E["-value"]),O["-json"]&&(k["-json"]=O["-json"]),O["-properties"]&&Object.assign(k,O["-properties"]),k});return t.edges.forEach(function(v){var h=v.sourceNodeId,g=v.id,_=r.get(h);_["bpmn:outgoing"]||(_["bpmn:outgoing"]=[]),_["bpmn:outgoing"].push(g)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(v){var h={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(M){var j,I=r.get(M["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(B){I[B]&&I[B].forEach(function(q){h[B].add(q)})});var N=(j=e[M["-type"]])===null||j===void 0?void 0:j.findIndex(function(B){return B["-id"]===M["-id"]});N>=0&&e[M["-type"]].splice(N,1),r.delete(M["-id"]),v[M["-type"]]||(v[M["-type"]]=[]),v[M["-type"]].push(I)});var _=h["bpmn:incoming"],E=h["bpmn:outgoing"];E.forEach(function(M){_.has(M)&&g.push(M)});for(var O=function(M){var j=c.findIndex(function(I){return I["-id"]===g[M]});j>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[j]),c.splice(j,1)):M++,S=M},S,k=0;k<g.length;)O(k),k=S;delete v.children}),e[Ha.FLOW]=c,e}function r7(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,s=100,c=80,v=n.x,h=n.y,g=yu.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}var o7=["bpmn:incoming","bpmn:outgoing"];function i7(e,t){var n=[],a=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,h={in:new Set(Ph(Im.in,(v==null?void 0:v.in)||[])),out:new Set(Ph(Im.out,(v==null?void 0:v.out)||[]))};yl=a2(yl,c);var g=e["bpmn:definitions"];if(g){var _=g["bpmn:process"];(function(O,S){S.forEach(function(k){try{Object.keys(O).forEach(function(M){try{k(M)}catch(j){console.error(j)}})}catch(M){console.error(M)}})})(_,[function(O){function S(M){M["-children"]||(M["-children"]=[]),Object.keys(M).forEach(function(j){var I;j.indexOf("bpmn:")===0&&!o7.includes(j)&&(_[j]||(_[j]=[]),!Array.isArray(_[j])&&(_[j]=[_[j]]),Array.isArray(M[j])?(I=_[j]).push.apply(I,Ph(M[j])):_[j].push(M[j]),Array.isArray(M[j])?M[j].forEach(function(N){!j.includes("Flow")&&M["-children"].push(N["-id"])}):!j.includes("Flow")&&M["-children"].push(M[j]["-id"]),delete M[j])})}if(O==="bpmn:subProcess"){var k=_[O];Array.isArray(k)?k.forEach(function(M){O==="bpmn:subProcess"&&S(M)}):S(k)}},function(O){var S=function(M){Object.keys(M).forEach(function(j){var I,N;if(j.includes("bpmn:")){var B={};yl[j]&&yl[j].in?(B=(N=(I=yl[j]).in)===null||N===void 0?void 0:N.call(I,j,ie.cloneDeep(M[j])),delete M[j]):k(M[j]);var q=void 0;(q=Reflect.ownKeys(B)).length>0&&q.forEach(function(ee){Reflect.set(M,ee,B[ee])})}})};function k(M){r.set(M["-id"],M),Array.isArray(M)?M.forEach(function(j){k(j)}):typeof M=="object"&&S(M)}k(_[O])},function(O){if(O.indexOf("bpmn:")===0){var S=_[O];if(O==="bpmn:sequenceFlow"){var k=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=u7(S,k)}else{var M=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var j=_[O],I=function(N){var B=N["-attachedToRef"],q=r.get(B);q["-boundaryEvents"]||(q["-boundaryEvents"]=[]),q["-boundaryEvents"].push(N["-id"])};Array.isArray(j)?j.forEach(function(N){I(N)}):I(j)}n=n.concat(a7(S,M,O))}}}])}var E=function(O,S,k){Object.keys(O).forEach(function(M){var j=k?k+"."+M:M;S.has(j)?delete O[M]:typeof O[M]=="object"&&E(O[M],S,j)})};return n.forEach(function(O){var S,k;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var M=(k=t==null?void 0:t.mapping)===null||k===void 0?void 0:k.in,j=O.type;M[j]&&(O.type=M[j])}E(O,h.in,"")}),a.forEach(function(O){var S,k;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var M=(k=t==null?void 0:t.mapping)===null||k===void 0?void 0:k.in,j=O.type;M[j]&&(O.type=M[j])}E(O,h.in,"")}),{nodes:n,edges:a}}function a7(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=fS(v,n,c);a.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=fS(r,n,e);a.push(s)}return a}function fS(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=yu.shapeConfigMap.get(t);v&&(a+=v.width/2,r+=v.height/2);var h={};Object.entries(n).forEach(function(O){var S=Jh(O,2),k=S[0],M=S[1];i2.includes(k)||(h[k]=M)}),h=Lm(h);var g;if(c&&(g={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(_["-x"])+Number(_["-width"])/2,g.y=Number(_["-y"])+Number(_["-height"])/2}var E={id:e["-bpmnElement"],type:t,x:a,y:r,properties:h};return s&&(E.children=s),g&&(E.text=g),E}function u7(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(dS(s,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(dS(a,e))}return n}function dS(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var _=Jh(g,2),E=_[0],O=_[1];i2.includes(E)||(c[E]=O)}),c=Lm(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),h={id:t["-id"],type:Ha.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var yu=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,s){var c,v,h=X0({},n.processAttributes);n7(h,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":h["-id"]};r7(g,r);var _=n.definitionAttributes;_["bpmn:process"]=h,_["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var E={"bpmn:definitions":_};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var O=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,S=function(k){Array.isArray(k)&&k.forEach(function(M){return S(M)}),typeof k=="object"&&Object.keys(k).forEach(function(M){var j;(j=O[M])?(k[j]=ie.cloneDeep(k[M]),delete k[M],S(k[j])):S(k[M])})};S(E)}return E},this.adapterIn=function(r,s){if(r)return i7(r,s)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();yu.shapeConfigMap.set(Ha.START,{width:Qx.width,height:Qx.height});yu.shapeConfigMap.set(Ha.END,{width:eS.width,height:eS.height});yu.shapeConfigMap.set(Ha.INTERMEDIATE_CATCH,{width:Cm.width,height:Cm.height});yu.shapeConfigMap.set(Ha.INTERMEDIATE_THROW,{width:Cm.width,height:Cm.height});yu.shapeConfigMap.set(Ha.BOUNDARY,{width:tS.width,height:tS.height});yu.shapeConfigMap.set(Ha.PARALLEL_GATEWAY,{width:nS.width,height:nS.height});yu.shapeConfigMap.set(Ha.INCLUSIVE_GATEWAY,{width:rS.width,height:rS.height});yu.shapeConfigMap.set(Ha.EXCLUSIVE_GATEWAY,{width:oS.width,height:oS.height});yu.shapeConfigMap.set(Ha.SYSTEM,{width:iS.width,height:iS.height});yu.shapeConfigMap.set(Ha.USER,{width:aS.width,height:aS.height});yu.shapeConfigMap.set(Ha.SUBPROCESS,{width:uS.width,height:uS.height});(function(e){QG(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var v=KG(c);return a.adapterIn(v,a.props)},a.adapterXmlOut=function(c){var v=a.adapterOut(c,a.props);return JG(v)};var r=n.lf,s=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=s,a}return t.pluginName="BPMNAdapter",t})(yu);var pS=globalThis&&globalThis.__assign||function(){return pS=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pS.apply(this,arguments)};globalThis&&globalThis.__read;var hS;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(hS||(hS={}));var l7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var s7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var c7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var u2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ah=globalThis&&globalThis.__assign||function(){return Ah=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ah.apply(this,arguments)},Fv=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},f7={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function d7(e){for(var t=e,n=1;n<t.length-1;){var a=Fv(t[n-1],2),r=a[0],s=a[1],c=Fv(t[n],2),v=c[0],h=c[1],g=Fv(t[n+1],2),_=g[0],E=g[1];r===v&&v===_||s===h&&h===E?t.splice(n,1):n++}return t}function p7(e,t,n,a){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,s[0]+=a):t==="lb"&&(r[0]+=a,s[1]+=a),[r,s];case"tr":return t==="tl"?(r[1]+=a,s[0]-=a):t==="rb"&&(r[0]-=a,s[1]+=a),[r,s];case"bl":return t==="br"?(r[1]-=a,s[0]+=a):t==="lt"&&(r[0]+=a,s[1]-=a),[r,s];case"br":return t==="bl"?(r[1]-=a,s[0]-=a):t==="rt"&&(r[0]-=a,s[1]-=a),[r,s];default:return[]}}function h7(e,t,n,a){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,h=""+s+c,g=f7[h]||"-",_="L "+e[0]+" "+e[1];if(g==="-")_+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var E=Fv(p7(t,h,g,v),2),O=E[0],S=E[1];O&&S&&(_+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+S[0]+" "+S[1],r=Fv(S,2),t[0]=r[0],t[1]=r[1])}return _}function v7(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];a+=h7(r,s,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){u2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,h=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),_=d7(a.split(" ").map(function(S){return S.split(",").map(function(k){return+k})})),E=v7(_,v),O=Ah(Ah(Ah({style:r?g:{}},h),s),{fill:"none"});return cn.h("path",Ah({d:E},O))},t})(cn.PolylineEdge);(function(e){u2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var y7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var vS=globalThis&&globalThis.__assign||function(){return vS=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vS.apply(this,arguments)},yS=globalThis&&globalThis.__assign||function(){return yS=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yS.apply(this,arguments)},m7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let pg=!1;const Fm=p1({});function l2(e,t,n,a,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),pg&&(Fm[e]=IC(Dr({render:()=>Fh(LC,{to:n},[Fh(t,s(a,r))]),provide:()=>({getNode:()=>a,getGraph:()=>r})})))}function s2(e){pg&&delete Fm[e]}function $m(){return pg}function g7(){return pg=!0,Dr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Fm).forEach(n=>{n.startsWith(e.flowId)&&t.push(Fm[n])}),Fh(ni,{},t.map(n=>Fh(n)))}}})}class Gi extends n2.view{constructor(n,a){super(n);ca(this,"isMounted");ca(this,"r");ca(this,"component");ca(this,"app");ca(this,"root");ca(this,"VueNode");ca(this,"up_node_field_dict");if(this.component=a,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const c=n.graphModel.nodes.filter(v=>v.type===n.model.type).filter(v=>v.properties.stepName===n.model.properties.stepName);c.length-1>0&&r(c.length-1)}function r(s){var h;const c=s,v=n.model.properties.stepName+c;(h=n.graphModel.nodes)!=null&&h.some(g=>g.properties.stepName===v.trim())?r(c+1):n.model.properties.stepName=v}n.model.properties.config=FC[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var a,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:nn("views.applicationWorkflow.variable.global"),type:"global",children:((r=(a=this.props.model.properties)==null?void 0:a.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,a){if(!this.up_node_field_dict||!a){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,a)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,a){const r=Object.values(this.get_up_node_field_dict(n,a)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:a,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if($m())l2(this.targetId(),this.component,n,a,r);else{this.r=Fh(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=QA({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r}}}),this.app.use($C,{locale:BC}),this.app.use(UC),this.app.use(GC),this.app.use(JA);for(const[c,v]of Object.entries(VC))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){$m()&&s2(this.targetId()),this.unmountVueComponent()}}class Vi extends n2.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=JA.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const h=c[v];if(h.id===s)return!0;if(n(h.id,s))return!0}return!1},a={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!n(r.id,s.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==ti.Base&&(this.type!==ti.Start&&c.push({x:n-r/2+10,y:s?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?a:a-15,id:`${t}_right`,type:"right"})),c}}let _7=class extends Gi{constructor(t){super(t,oG)}};const b7={type:"ai-chat-node",model:Vi,view:_7},w7=Object.freeze(Object.defineProperty({__proto__:null,default:b7},Symbol.toStringTag,{value:"Module"})),wi=Dr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const a=e,r=n,s=Oo({set:_=>{r("update:modelValue",_)},get:()=>a.modelValue}),c=St([]),v=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0);function h(_){_&&(c.value=a.global?a.nodeModel.get_up_node_field_list(!1,!0).filter(E=>E.value==="global"):a.nodeModel.get_up_node_field_list(!1,!0))}return t({validate:()=>{const _=a.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(nn("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(nn("views.applicationWorkflow.variable.ReferencingError"));const E=s.value[0],O=s.value[1],S=_.find(k=>k.value===E);return S?S.children.some(k=>k.value===O)?Promise.resolve(""):(s.value=[],Promise.reject(nn("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(nn("views.applicationWorkflow.variable.NoReferencing")))}}),$o(()=>{c.value=a.global?a.nodeModel.get_up_node_field_list(!1,!0).filter(_=>_.value==="global"):a.nodeModel.get_up_node_field_list(!1,!0)}),(_,E)=>{const O=ue("el-cascader");return rt(),Yt(O,WC({onWheel:v,teleported:!1,options:c.value,onVisibleChange:h},_.$attrs,{modelValue:s.value,"onUpdate:modelValue":E[0]||(E[0]=S=>s.value=S),separator:" > "}),{default:U(({node:S,data:k})=>[ge("span",{class:"flex align-center",onWheel:v},[(rt(),Yt(Oh(Hr(xh)(`${k.type}-icon`)),{class:"mr-8",size:18})),It(Ve(k.label),1)],32)]),_:1},16,["options","modelValue"])}}}),E7={class:"title-decoration-1 mb-8"},O7={class:"flex align-center"},x7={class:"mr-4"},S7=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t={question_reference_address:["start-node","question"],api_input_field_list:[],user_input_field_list:[],document_list:["start-node","document"],image_list:["start-node","image"],audio_list:["start-node","audio"]},{params:{id:n}}=xl.config.globalProperties.$route,a=St(),r=Oo({get:()=>(v.nodeModel.properties.node_data||at.set(v.nodeModel.properties,"node_data",t),v.nodeModel.properties.node_data),set:g=>{at.set(v.nodeModel.properties,"node_data",g)}});function s(g,_){const E=`${g}_list`;_?v.nodeModel.properties.node_data[E]||at.set(v.nodeModel.properties.node_data,E,[]):delete v.nodeModel.properties.node_data[E]}const c=()=>{if(!v.nodeModel.properties.node_data.application_id){at.set(v.nodeModel.properties,"status",500);return}ha.getApplicationById(n,v.nodeModel.properties.node_data.application_id).then(g=>{const _=v.nodeModel.properties.node_data.api_input_field_list,E=v.nodeModel.properties.node_data.user_input_field_list;if(vm(g.data.type)){const O=g.data.work_flow.nodes[0].properties.node_data,S=g.data.work_flow.nodes[0].properties.api_input_field_list,k=g.data.work_flow.nodes[0].properties.user_input_field_list,M=S.map(B=>{const q=_.find(ee=>ee.variable==B.variable);return q?{...B,value:q.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});at.set(v.nodeModel.properties.node_data,"api_input_field_list",M);const j=k.map(B=>{const q=E.find(ee=>ee.field==B.field);return q?{...B,value:q.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});at.set(v.nodeModel.properties.node_data,"user_input_field_list",j);const I=O.file_upload_enable,N=O.file_upload_setting;I?(s("document",N.document),s("image",N.image),s("audio",N.audio)):["document_list","image_list","audio_list"].forEach(B=>{delete v.nodeModel.properties.node_data[B]}),at.set(v.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{at.set(v.nodeModel.properties,"status",500)})},v=e,h=()=>{var g;return(g=a.value)==null?void 0:g.validate().catch(_=>Promise.reject({node:v.nodeModel,errMessage:_}))};return $o(()=>{c(),at.set(v.nodeModel,"validate",h)}),(g,_)=>{const E=ue("el-form-item"),O=ue("AppIcon"),S=ue("el-tooltip"),k=ue("el-switch"),M=ue("el-form"),j=ue("el-card");return rt(),Yt(Ui,{nodeModel:g.nodeModel},{default:U(()=>[ge("h5",E7,Ve(g.$t("views.applicationWorkflow.nodeSetting")),1),F(j,{shadow:"never",class:"card-never"},{default:U(()=>[F(M,{onSubmit:_[6]||(_[6]=xn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:a},{default:U(()=>[F(E,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"question_reference_address",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(wi,{ref_key:"applicationNodeFormRef",ref:a,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.question_reference_address,"onUpdate:modelValue":_[0]||(_[0]=I=>r.value.question_reference_address=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("document_list")||"document_list"in r.value?(rt(),Yt(E,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"document_list",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:U(()=>[F(wi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.document_list,"onUpdate:modelValue":_[1]||(_[1]=I=>r.value.document_list=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):fr("",!0),r.value.hasOwnProperty("image_list")||"image_list"in r.value?(rt(),Yt(E,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"image_list",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:U(()=>[F(wi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.image_list,"onUpdate:modelValue":_[2]||(_[2]=I=>r.value.image_list=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):fr("",!0),r.value.hasOwnProperty("audio_list")||"audio_list"in r.value?(rt(),Yt(E,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:U(()=>[F(wi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audio_list,"onUpdate:modelValue":_[3]||(_[3]=I=>r.value.audio_list=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):fr("",!0),(rt(!0),Dn(ni,null,Bi(r.value.api_input_field_list,(I,N)=>(rt(),Dn("div",{key:"api-input-"+N},[F(E,{label:I.variable,prop:"api_input_field_list."+N+".value",rules:[{required:I.is_required,message:`${g.$t("common.inputPlaceholder")}${I.variable}`,trigger:"blur"}]},{default:U(()=>[F(wi,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[N].value,"onUpdate:modelValue":B=>r.value.api_input_field_list[N].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(rt(!0),Dn(ni,null,Bi(r.value.user_input_field_list,(I,N)=>(rt(),Dn("div",{key:"user-input-"+N},[F(E,{label:I.label,prop:"user_input_field_list."+N+".value",rules:[{required:I.required,message:`${g.$t("common.inputPlaceholder")}${I.label}`,trigger:"blur"}]},{default:U(()=>[F(wi,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[N].value,"onUpdate:modelValue":B=>r.value.user_input_field_list[N].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),F(E,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[5]||(_[5]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",O7,[ge("div",x7,[ge("span",null,Ve(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(S,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(k,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":_[4]||(_[4]=I=>r.value.is_result=I)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class A7 extends Gi{constructor(t){super(t,S7)}}const T7={type:"application-node",model:Vi,view:A7},M7=Object.freeze(Object.defineProperty({__proto__:null,default:T7},Symbol.toStringTag,{value:"Module"})),P7={class:"dialog-footer"},k7=Dr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=St(),s=St(!1),c=St(!1),v=St({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),h=p1({name:[{required:!0,message:nn("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:nn("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:nn("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=St(!1);d1(g,S=>{S||(v.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const _=S=>{S&&(v.value=at.cloneDeep(S),c.value=!0),g.value=!0},E=()=>{g.value=!1,c.value=!1},O=async S=>{S&&await S.validate(k=>{k&&a("refresh",v.value)})};return t({open:_,close:E}),(S,k)=>{const M=ue("el-input"),j=ue("el-form-item"),I=ue("el-switch"),N=ue("el-form"),B=ue("el-button"),q=ue("el-dialog");return rt(),Yt(q,{title:c.value?S.$t("views.template.templateForm.title.editParam"):S.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":k[8]||(k[8]=ee=>g.value=ee),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":E,"append-to-body":""},{footer:U(()=>[ge("span",P7,[F(B,{onClick:k[6]||(k[6]=xn(ee=>g.value=!1,["prevent"]))},{default:U(()=>[It(Ve(S.$t("common.cancel")),1)]),_:1}),F(B,{type:"primary",onClick:k[7]||(k[7]=ee=>O(r.value)),loading:s.value},{default:U(()=>[It(Ve(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(N,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:v.value,"require-asterisk-position":"right"},{default:U(()=>[F(j,{label:S.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:U(()=>[F(M,{modelValue:v.value.variable,"onUpdate:modelValue":k[0]||(k[0]=ee=>v.value.variable=ee),placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:k[1]||(k[1]=ee=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),F(j,{label:S.$t("dynamicsForm.paramForm.required.label"),onClick:k[3]||(k[3]=xn(()=>{},["prevent"]))},{default:U(()=>[F(I,{size:"small",modelValue:v.value.is_required,"onUpdate:modelValue":k[2]||(k[2]=ee=>v.value.is_required=ee)},null,8,["modelValue"])]),_:1},8,["label"]),F(j,{label:S.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.is_required,message:S.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:U(()=>[F(M,{modelValue:v.value.default_value,"onUpdate:modelValue":k[4]||(k[4]=ee=>v.value.default_value=ee),placeholder:S.$t("dynamicsForm.default.placeholder"),onBlur:k[5]||(k[5]=ee=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),N7={class:"flex-between mb-16"},R7={class:"lighter"},j7={class:"mr-4"},C7=Dr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=St(),a=St(null),r=St(),s=St([]);function c(_,E){typeof E<"u"&&(a.value=E),r.value.open(_)}function v(_){s.value.splice(_,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function h(_){for(let O=0;O<s.value.length;O++)if(s.value[O].variable===_.variable&&a.value!==O){da(nn("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}let E=t.nodeModel.properties.user_input_field_list;for(let O=0;O<E.length;O++)if(E[O].field===_.variable){da(nn("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}a.value!==null?s.value.splice(a.value,1,_):s.value.push(_),a.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const E=n.value.$el.querySelector(".el-table__body-wrapper tbody");E&&h1.create(E,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const S=[...s.value],[k]=S.splice(O.oldIndex,1);S.splice(O.newIndex,0,k),s.value=S,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return $o(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(_=>_.assignment_method==="api_input").forEach(_=>{s.value.push(_)}),at.set(t.nodeModel.properties,"api_input_field_list",s)}),(_,E)=>{var ee;const O=ue("Plus"),S=ue("el-icon"),k=ue("el-button"),M=ue("el-table-column"),j=ue("el-switch"),I=ue("EditPen"),N=ue("el-tooltip"),B=ue("Delete"),q=ue("el-table");return rt(),Dn(ni,null,[ge("div",N7,[ge("h5",R7,Ve(_.$t("views.template.templateForm.title.apiParamPassing")),1),F(k,{link:"",type:"primary",onClick:E[0]||(E[0]=Y=>c())},{default:U(()=>[F(S,{class:"mr-4"},{default:U(()=>[F(O)]),_:1}),It(" "+Ve(_.$t("common.add")),1)]),_:1})]),((ee=t.nodeModel.properties.api_input_field_list)==null?void 0:ee.length)>0?(rt(),Yt(q,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[F(M,{prop:"variable",label:_.$t("dynamicsForm.paramForm.field.label")},null,8,["label"]),F(M,{prop:"default_value",label:_.$t("dynamicsForm.default.label")},null,8,["label"]),F(M,{label:_.$t("common.required")},{default:U(({row:Y})=>[ge("div",{onClick:E[1]||(E[1]=xn(()=>{},["stop"]))},[F(j,{disabled:"",size:"small",modelValue:Y.is_required,"onUpdate:modelValue":Q=>Y.is_required=Q},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(M,{label:_.$t("common.operation"),align:"left",width:"90"},{default:U(({row:Y,$index:Q})=>[ge("span",j7,[F(N,{effect:"dark",content:_.$t("common.modify"),placement:"top"},{default:U(()=>[F(k,{type:"primary",text:"",onClick:xn(z=>c(Y,Q),["stop"])},{default:U(()=>[F(S,null,{default:U(()=>[F(I)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(N,{effect:"dark",content:_.$t("common.delete"),placement:"top"},{default:U(()=>[F(k,{type:"primary",text:"",onClick:z=>v(Q)},{default:U(()=>[F(S,null,{default:U(()=>[F(B)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):fr("",!0),F(k7,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:h},null,512)],64)}}}),D7={class:"dialog-footer"},I7=Dr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=St(),s=St(!1),c=St({title:nn("chat.userInput")}),v=p1({title:[{required:!0,message:nn("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),h=St(!1),g=O=>{O&&(c.value=at.cloneDeep(O)),h.value=!0},_=()=>{h.value=!1},E=async O=>{O&&await O.validate(S=>{S&&a("refresh",c.value)})};return t({open:g,close:_}),(O,S)=>{const k=ue("el-input"),M=ue("el-form-item"),j=ue("el-form"),I=ue("el-button"),N=ue("el-dialog");return rt(),Yt(N,{title:O.$t("common.setting"),modelValue:h.value,"onUpdate:modelValue":S[4]||(S[4]=B=>h.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:U(()=>[ge("span",D7,[F(I,{onClick:S[2]||(S[2]=xn(B=>h.value=!1,["prevent"]))},{default:U(()=>[It(Ve(O.$t("common.cancel")),1)]),_:1}),F(I,{type:"primary",onClick:S[3]||(S[3]=B=>E(r.value)),loading:s.value},{default:U(()=>[It(Ve(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:U(()=>[F(M,{label:O.$t("common.title"),prop:"title"},{default:U(()=>[F(k,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=B=>c.value.title=B),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=B=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),L7={class:"flex-between mb-16"},F7=["title"],$7={class:"ml-4"},B7=["title"],U7={key:0},G7=["title"],V7={key:1},W7=["title"],z7=["title"],H7={class:"mr-4"},X7=Dr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=St(),a=St(),r=St(),s=St([]),c=St({title:nn("chat.userInput")});function v(k,M){a.value.open(k,M)}function h(){r.value.open(c.value)}function g(k){s.value.splice(k,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function _(k,M){for(let I=0;I<s.value.length;I++)if(s.value[I].field===k.field&&M!==I){da(nn("views.applicationWorkflow.tip.paramErrorMessage")+k.field);return}let j=t.nodeModel.properties.api_input_field_list;for(let I=0;I<j.length;I++)if(j[I].variable===k.field){da(nn("views.applicationWorkflow.tip.paramErrorMessage")+k.field);return}M!==null?s.value.splice(M,1,k):s.value.push(k),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function E(k){c.value=k,r.value.close()}const O=k=>{var M;if(k.input_type==="PasswordInput")return"******";if(k.default_value){const j=(M=k.option_list)==null?void 0:M.filter(I=>k.default_value.indexOf(I.value)>-1).map(I=>I.label).join(",");return j||k.default_value}if(k.default_value!==void 0)return k.default_value};function S(){if(!n.value)return;const M=n.value.$el.querySelector(".el-table__body-wrapper tbody");M&&h1.create(M,{animation:150,ghostClass:"ghost-row",onEnd:j=>{if(j.oldIndex===void 0||j.newIndex===void 0)return;const I=[...s.value],[N]=I.splice(j.oldIndex,1);I.splice(j.newIndex,0,N),s.value=I,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return $o(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(k=>k.assignment_method==="user_input").forEach(k=>{s.value.push(k)}),s.value.forEach((k,M)=>{switch(k.label=k.label||k.name,k.field=k.field||k.variable,k.required=k.required||k.is_required,k.type){case"input":k.input_type="TextInput";break;case"select":k.input_type="SingleSelect";break;case"date":k.input_type="DatePicker";break}}),at.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),at.set(t.nodeModel.properties,"user_input_config",c),S()}),(k,M)=>{var X;const j=ue("Setting"),I=ue("el-icon"),N=ue("el-button"),B=ue("Plus"),q=ue("el-table-column"),ee=ue("el-tag"),Y=ue("el-switch"),Q=ue("EditPen"),z=ue("el-tooltip"),D=ue("Delete"),V=ue("el-table");return rt(),Dn(ni,null,[ge("div",L7,[ge("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},Ve(c.value.title),9,F7),ge("div",null,[F(N,{type:"primary",link:"",onClick:h},{default:U(()=>[F(I,null,{default:U(()=>[F(j)]),_:1})]),_:1}),ge("span",$7,[F(N,{link:"",type:"primary",onClick:M[0]||(M[0]=H=>v())},{default:U(()=>[F(I,{class:"mr-4"},{default:U(()=>[F(B)]),_:1}),It(" "+Ve(k.$t("common.add")),1)]),_:1})])])]),((X=t.nodeModel.properties.user_input_field_list)==null?void 0:X.length)>0?(rt(),Yt(V,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[F(q,{prop:"field",label:k.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:H})=>[ge("span",{title:H.field,class:"ellipsis-1"},Ve(H.field),9,B7)]),_:1},8,["label"]),F(q,{prop:"label",label:k.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:H})=>[H.label&&H.label.input_type==="TooltipLabel"?(rt(),Dn("span",U7,[ge("span",{title:H.label.label,class:"ellipsis-1"},Ve(H.label.label),9,G7)])):(rt(),Dn("span",V7,[ge("span",{title:H.label,class:"ellipsis-1"},Ve(H.label),9,W7)]))]),_:1},8,["label"]),F(q,{label:k.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:U(({row:H})=>[H.input_type==="TextInput"?(rt(),Yt(ee,{key:0,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):fr("",!0),H.input_type==="PasswordInput"?(rt(),Yt(ee,{key:1,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):fr("",!0),H.input_type==="Slider"?(rt(),Yt(ee,{key:2,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):fr("",!0),H.input_type==="SwitchInput"?(rt(),Yt(ee,{key:3,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):fr("",!0),H.input_type==="SingleSelect"?(rt(),Yt(ee,{key:4,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):fr("",!0),H.input_type==="MultiSelect"?(rt(),Yt(ee,{key:5,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):fr("",!0),H.input_type==="RadioCard"?(rt(),Yt(ee,{key:6,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):fr("",!0),H.input_type==="DatePicker"?(rt(),Yt(ee,{key:7,type:"info",class:"info-tag"},{default:U(()=>[It(Ve(k.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):fr("",!0)]),_:1},8,["label"]),F(q,{prop:"default_value",label:k.$t("dynamicsForm.default.label")},{default:U(({row:H})=>[ge("span",{title:H.default_value,class:"ellipsis-1"},Ve(O(H)),9,z7)]),_:1},8,["label"]),F(q,{label:k.$t("common.required")},{default:U(({row:H})=>[ge("div",{onClick:M[1]||(M[1]=xn(()=>{},["stop"]))},[F(Y,{disabled:"",size:"small",modelValue:H.required,"onUpdate:modelValue":de=>H.required=de},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(q,{label:k.$t("common.operation"),align:"left",width:"90"},{default:U(({row:H,$index:de})=>[ge("span",H7,[F(z,{effect:"dark",content:k.$t("common.modify"),placement:"top"},{default:U(()=>[F(N,{type:"primary",text:"",onClick:xn(Ce=>v(H,de),["stop"])},{default:U(()=>[F(I,null,{default:U(()=>[F(Q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(z,{effect:"dark",content:k.$t("common.delete"),placement:"top"},{default:U(()=>[F(N,{type:"primary",text:"",onClick:Ce=>g(de)},{default:U(()=>[F(I,null,{default:U(()=>[F(D)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):fr("",!0),F(MD,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:_},null,512),F(I7,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:E},null,512)],64)}}}),Y7="/ui/assets/icon_file-doc-e47b0d94.svg",q7="/ui/assets/icon_file-image-b904fbaa.svg",K7="/ui/assets/icon_file-audio-4b01d312.svg",Z7={class:"flex-between"},J7={class:"flex align-center"},Q7={class:"line-height-22 mt-4"},e9={class:"flex-between"},t9={class:"flex align-center"},n9={class:"line-height-22 mt-4"},r9={class:"flex-between"},o9={class:"flex align-center"},i9={class:"line-height-22 mt-4"},a9={class:"dialog-footer"},u9=Dr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,s=St(!1),c=St(!1),v=St(),h=St({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1});function g(O){s.value=!0,P0(()=>{h.value={...h.value,...O}})}function _(){s.value=!1}async function E(){const O=v.value;O&&await O.validate().then(()=>{a("refresh",h.value),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:g}),(O,S)=>{const k=ue("el-slider"),M=ue("el-form-item"),j=ue("el-text"),I=ue("el-checkbox"),N=ue("el-card"),B=ue("el-form"),q=ue("el-button"),ee=ue("el-dialog");return rt(),Yt(ee,{title:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":S[12]||(S[12]=Y=>s.value=Y),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":"",width:"600"},{footer:U(()=>[ge("span",a9,[F(q,{onClick:xn(_,["prevent"])},{default:U(()=>[It(Ve(O.$t("common.cancel")),1)]),_:1}),F(q,{type:"primary",onClick:S[11]||(S[11]=Y=>E()),loading:c.value},{default:U(()=>[It(Ve(O.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(B,{"label-position":"top",ref_key:"fieldFormRef",ref:v,model:h.value,"require-asterisk-position":"right"},{default:U(()=>[F(M,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:U(()=>[F(k,{modelValue:h.value.maxFiles,"onUpdate:modelValue":S[0]||(S[0]=Y=>h.value.maxFiles=Y),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),F(M,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:U(()=>[F(k,{modelValue:h.value.fileLimit,"onUpdate:modelValue":S[1]||(S[1]=Y=>h.value.fileLimit=Y),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),F(M,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:U(()=>[F(N,{shadow:"hover",class:rd(["card-checkbox cursor w-full mb-8",h.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[4]||(S[4]=xn(Y=>h.value.document=!h.value.document,["stop"]))},{default:U(()=>[ge("div",Z7,[ge("div",J7,[S[13]||(S[13]=ge("img",{class:"mr-12",src:Y7,alt:""},null,-1)),ge("div",null,[ge("p",Q7,Ve(O.$t("common.fileUpload.document"))+"（TXT、MD、DOCX、HTML、CSV、XLSX、XLS、PDF） ",1),F(j,{class:"color-secondary"},{default:U(()=>[It(Ve(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})])]),F(I,{modelValue:h.value.document,"onUpdate:modelValue":S[2]||(S[2]=Y=>h.value.document=Y),onChange:S[3]||(S[3]=Y=>h.value.document=!h.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),F(N,{shadow:"hover",class:rd(["card-checkbox cursor w-full mb-8",h.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[7]||(S[7]=xn(Y=>h.value.image=!h.value.image,["stop"]))},{default:U(()=>[ge("div",e9,[ge("div",t9,[S[14]||(S[14]=ge("img",{class:"mr-12",src:q7,alt:""},null,-1)),ge("div",null,[ge("p",n9,Ve(O.$t("common.fileUpload.image"))+"（JPG、JPEG、PNG、GIF） ",1),F(j,{class:"color-secondary"},{default:U(()=>[It(Ve(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})])]),F(I,{modelValue:h.value.image,"onUpdate:modelValue":S[5]||(S[5]=Y=>h.value.image=Y),onChange:S[6]||(S[6]=Y=>h.value.image=!h.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),F(N,{shadow:"hover",class:rd(["card-checkbox cursor w-full mb-8",h.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[10]||(S[10]=xn(Y=>h.value.audio=!h.value.audio,["stop"]))},{default:U(()=>[ge("div",r9,[ge("div",o9,[S[15]||(S[15]=ge("img",{class:"mr-12",src:K7,alt:""},null,-1)),ge("div",null,[ge("p",i9,Ve(O.$t("common.fileUpload.audio"))+"（MP3、WAV、OGG、ACC、M4A） ",1),F(j,{class:"color-secondary"},{default:U(()=>[It(Ve(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})])]),F(I,{modelValue:h.value.audio,"onUpdate:modelValue":S[8]||(S[8]=Y=>h.value.audio=Y),onChange:S[9]||(S[9]=Y=>h.value.audio=!h.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),l9={class:"flex-between"},s9={class:"flex align-center"},c9={class:"mr-4"},f9={class:"flex-between"},d9={class:"mr-4"},p9={class:"flex"},h9={class:"flex-between"},v9={class:"mr-4"},y9={class:"flex"},m9={class:"w-full"},g9={class:"flex-between w-full"},_9=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=xl.config.globalProperties.$route,n=e,a=St(null),r=St(null),s=St(),c=St(),v=St(),h=St(),g={name:"",desc:"",prologue:nn("views.application.applicationForm.form.defaultPrologue")},_=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0);function E(D){at.set(n.nodeModel.properties.node_data,"prologue",D)}const O=Oo({get:()=>(n.nodeModel.properties.node_data||at.set(n.nodeModel.properties,"node_data",g),n.nodeModel.properties.node_data),set:D=>{at.set(n.nodeModel.properties,"node_data",D)}}),S=St(),k=()=>{var D;return O.value.tts_model_enable&&!O.value.tts_model_id&&O.value.tts_type==="TTS"?Promise.reject({node:n.nodeModel,errMessage:nn("views.application.applicationForm.form.voicePlay.requiredMessage")}):O.value.stt_model_enable&&!O.value.stt_model_id?Promise.reject({node:n.nodeModel,errMessage:nn("views.application.applicationForm.form.voiceInput.requiredMessage")}):(D=S.value)==null?void 0:D.validate().catch(V=>Promise.reject({node:n.nodeModel,errMessage:V}))};function M(){ha.getApplicationSTTModel(t).then(D=>{a.value=at.groupBy(D==null?void 0:D.data,"provider")})}function j(){ha.getApplicationTTSModel(t).then(D=>{r.value=at.groupBy(D==null?void 0:D.data,"provider")})}function I(){var D;O.value.tts_model_id?(D=s.value)==null||D.reset_default(O.value.tts_model_id,t):ee({})}function N(){O.value.tts_model_enable||(O.value.tts_model_id="",O.value.tts_type="BROWSER")}function B(){O.value.stt_model_enable||(O.value.stt_model_id="")}const q=()=>{var V;const D=O.value.tts_model_id;if(!D){lp(nn("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(V=s.value)==null||V.open(D,t,O.value.tts_model_params_setting)},ee=D=>{O.value.tts_model_params_setting=D},Y=()=>{const D={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1};O.value.file_upload_enable&&(O.value.file_upload_setting=O.value.file_upload_setting||D),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},Q=()=>{var D;(D=h.value)==null||D.open(O.value.file_upload_setting)},z=D=>{O.value.file_upload_setting=D};return $o(()=>{at.set(n.nodeModel,"validate",k),n.nodeModel.properties.node_data.tts_type||at.set(n.nodeModel.properties.node_data,"tts_type","BROWSER"),j(),M()}),(D,V)=>{const X=ue("el-input"),H=ue("el-form-item"),de=ue("MdEditorMagnify"),Ce=ue("AppIcon"),Me=ue("el-tooltip"),He=ue("Setting"),$e=ue("el-icon"),ke=ue("el-button"),le=ue("el-switch"),he=ue("el-checkbox"),Se=ue("ModelSelect"),Ke=ue("el-radio"),Ge=ue("el-radio-group"),et=ue("Operation"),gt=ue("el-form");return rt(),Yt(Ui,{nodeModel:D.nodeModel},{default:U(()=>[F(gt,{onSubmit:V[13]||(V[13]=xn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:U(()=>[F(H,{label:D.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Hr(nn)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(X,{modelValue:O.value.name,"onUpdate:modelValue":V[0]||(V[0]=dt=>O.value.name=dt),maxlength:"64",placeholder:Hr(nn)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:V[1]||(V[1]=dt=>{var zt;return O.value.name=(zt=O.value.name)==null?void 0:zt.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),F(H,{label:D.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:U(()=>[F(X,{modelValue:O.value.desc,"onUpdate:modelValue":V[2]||(V[2]=dt=>O.value.desc=dt),placeholder:D.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),F(H,{label:D.$t("views.application.applicationForm.form.prologue")},{default:U(()=>[F(de,{onWheel:_,title:D.$t("views.application.applicationForm.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":V[3]||(V[3]=dt=>O.value.prologue=dt),style:{height:"150px"},onSubmitDialog:E},null,8,["title","modelValue"])]),_:1},8,["label"]),F(H,null,{label:U(()=>[ge("div",l9,[ge("div",s9,[ge("span",c9,Ve(D.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),F(Me,{effect:"dark",content:D.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:U(()=>[F(Ce,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),ge("div",null,[O.value.file_upload_enable?(rt(),Yt(ke,{key:0,type:"primary",link:"",onClick:Q,class:"mr-4"},{default:U(()=>[F($e,{class:"mr-4"},{default:U(()=>[F(He)]),_:1})]),_:1})):fr("",!0),F(le,{size:"small",modelValue:O.value.file_upload_enable,"onUpdate:modelValue":V[4]||(V[4]=dt=>O.value.file_upload_enable=dt),onChange:Y},null,8,["modelValue"])])])]),_:1}),F(X7,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":D.nodeModel},null,8,["node-model"]),F(C7,{ref_key:"ApiInputFieldTableFef",ref:v,"node-model":D.nodeModel},null,8,["node-model"]),F(H,null,{label:U(()=>[ge("div",f9,[ge("span",d9,Ve(D.$t("views.application.applicationForm.form.voiceInput.label")),1),ge("div",p9,[O.value.stt_model_enable?(rt(),Yt(he,{key:0,modelValue:O.value.stt_autosend,"onUpdate:modelValue":V[5]||(V[5]=dt=>O.value.stt_autosend=dt)},{default:U(()=>[It(Ve(D.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):fr("",!0),F(le,{class:"ml-8",size:"small",modelValue:O.value.stt_model_enable,"onUpdate:modelValue":V[6]||(V[6]=dt=>O.value.stt_model_enable=dt),onChange:B},null,8,["modelValue"])])])]),default:U(()=>[hu(F(Se,{onWheel:_,modelValue:O.value.stt_model_id,"onUpdate:modelValue":V[7]||(V[7]=dt=>O.value.stt_model_id=dt),placeholder:D.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:a.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[Ih,O.value.stt_model_enable]])]),_:1}),F(H,null,{label:U(()=>[ge("div",h9,[ge("span",v9,Ve(D.$t("views.application.applicationForm.form.voicePlay.label")),1),ge("div",y9,[O.value.tts_model_enable?(rt(),Yt(he,{key:0,modelValue:O.value.tts_autoplay,"onUpdate:modelValue":V[8]||(V[8]=dt=>O.value.tts_autoplay=dt)},{default:U(()=>[It(Ve(D.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):fr("",!0),F(le,{class:"ml-8",size:"small",modelValue:O.value.tts_model_enable,"onUpdate:modelValue":V[9]||(V[9]=dt=>O.value.tts_model_enable=dt),onChange:N},null,8,["modelValue"])])])]),default:U(()=>[ge("div",m9,[hu(F(Ge,{modelValue:O.value.tts_type,"onUpdate:modelValue":V[10]||(V[10]=dt=>O.value.tts_type=dt)},{default:U(()=>[F(Ke,{label:D.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),F(Ke,{label:D.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Ih,O.value.tts_model_enable]])]),ge("div",g9,[O.value.tts_type==="TTS"&&O.value.tts_model_enable?(rt(),Yt(Se,{key:0,onWheel:_,modelValue:O.value.tts_model_id,"onUpdate:modelValue":V[11]||(V[11]=dt=>O.value.tts_model_id=dt),placeholder:D.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:V[12]||(V[12]=dt=>I()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):fr("",!0),O.value.tts_type==="TTS"&&O.value.tts_model_enable?(rt(),Yt(ke,{key:1,onClick:q,disabled:!O.value.tts_model_id,class:"ml-8"},{default:U(()=>[F($e,null,{default:U(()=>[F($e,null,{default:U(()=>[F(et)]),_:1})]),_:1})]),_:1},8,["disabled"])):fr("",!0)])]),_:1})]),_:1},8,["model"]),F(nT,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:ee},null,512),F(u9,{ref_key:"FileUploadSettingDialogRef",ref:h,"node-model":D.nodeModel,onRefresh:z},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const b9=ty(_9,[["__scopeId","data-v-d6ff9b29"]]);class w9 extends Gi{constructor(t){super(t,b9)}}class E9 extends Vi{constructor(t,n){super(t,n)}get_width(){return 600}}const O9={type:"base-node",model:E9,view:w9},x9=Object.freeze(Object.defineProperty({__proto__:null,default:O9},Symbol.toStringTag,{value:"Module"})),S9={class:"flex-between lighter"},A9={key:0,class:"info"},T9={key:0,class:"mt-8"},M9=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:jv(),type:"IF",condition:"and"},{conditions:[],id:jv(),type:"ELSE",condition:"and"}]},a=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),r=(k,M,j)=>{const N=at.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(B=>B.id===M.id?{...B,height:k.height,index:j}:B);at.set(t.nodeModel.properties,"branch_condition_list",N),_(t.nodeModel.properties.node_data.branch,!0)},s=Oo({get:()=>(t.nodeModel.properties.node_data||(at.set(t.nodeModel.properties,"node_data",n),_(n.branch,!0)),t.nodeModel.properties.node_data),set:k=>{at.set(t.nodeModel.properties,"node_data",k)}}),c=St(),v=St(),h=()=>{var M;const k=[(M=c.value)==null?void 0:M.validate(),...v.value.map(j=>j.validate())];return Promise.all(k).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};function g(){const k=at.cloneDeep(t.nodeModel.properties.node_data.branch),M={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(k.length-1),id:jv(),condition:"and"};k.splice(k.length-1,0,M),_(k,!0),at.set(t.nodeModel.properties.node_data,"branch",k)}function _(k,M){const j=at.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),I=k.map((N,B)=>{const q=j.find(ee=>ee.id===N.id);if(q)return{index:B,height:q.height,id:N.id};if(M)return{index:B,height:12,id:N.id}}).filter(N=>N);at.set(t.nodeModel.properties,"branch_condition_list",I),t.nodeModel.refreshBranch()}function E(k){const M=at.cloneDeep(t.nodeModel.properties.node_data.branch);M[k].conditions.push({field:[],compare:"",value:""}),at.set(t.nodeModel.properties.node_data,"branch",M)}function O(k,M){const j=at.cloneDeep(t.nodeModel.properties.node_data.branch);if(j[k].conditions.splice(M,1),j[k].conditions.length===0){const N=j.splice(k,1).map(B=>t.nodeModel.id+"_"+B.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(B=>N.includes(B.sourceAnchorId)).map(B=>B.id)),_(j,!1),j.forEach((B,q)=>{B.type==="ELSE IF "+(q+1)&&(B.type="ELSE IF "+q)})}at.set(t.nodeModel.properties.node_data,"branch",j)}function S(k,M,j){if(k==="is_null"||k==="is_not_null"){const I=at.cloneDeep(t.nodeModel.properties.node_data.branch);I[M].conditions[j].value=1,at.set(t.nodeModel.properties.node_data,"branch",I)}}return $o(()=>{at.set(t.nodeModel,"validate",h)}),(k,M)=>{const j=ue("el-option"),I=ue("el-select"),N=ue("el-form-item"),B=ue("el-col"),q=ue("el-input"),ee=ue("Delete"),Y=ue("el-icon"),Q=ue("el-button"),z=ue("el-row"),D=ue("Plus"),V=ue("el-card"),X=ue("el-form"),H=Lh("resize");return rt(),Yt(Ui,{nodeModel:k.nodeModel},{default:U(()=>[F(X,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:M[0]||(M[0]=xn(()=>{},["prevent"]))},{default:U(()=>[(rt(!0),Dn(ni,null,Bi(s.value.branch,(de,Ce)=>hu((rt(),Yt(V,{key:de.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:U(()=>[ge("div",S9,[It(Ve(de.type)+" ",1),de.conditions.length>1?(rt(),Dn("div",A9,[ge("span",null,Ve(k.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),F(I,{teleported:!1,modelValue:de.condition,"onUpdate:modelValue":Me=>de.condition=Me,size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[F(j,{label:k.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),F(j,{label:k.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),ge("span",null,Ve(k.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):fr("",!0)]),Ce!==s.value.branch.length-1?(rt(),Dn("div",T9,[(rt(!0),Dn(ni,null,Bi(de.conditions,(Me,He)=>(rt(),Yt(z,{key:He,gutter:8},{default:U(()=>[F(B,{span:11},{default:U(()=>[F(N,{prop:"branch."+Ce+".conditions."+He+".field",rules:{type:"array",required:!0,message:k.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[F(wi,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:k.nodeModel,class:"w-full",placeholder:k.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Me.field,"onUpdate:modelValue":$e=>Me.field=$e},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),F(B,{span:6},{default:U(()=>[F(N,{prop:"branch."+Ce+".conditions."+He+".compare",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:U(()=>[F(I,{onWheel:a,teleported:!1,modelValue:Me.compare,"onUpdate:modelValue":$e=>Me.compare=$e,placeholder:k.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:$e=>S($e,Ce,He)},{default:U(()=>[(rt(!0),Dn(ni,null,Bi(Hr(zC),($e,ke)=>(rt(),Yt(j,{key:ke,label:$e.label,value:$e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),F(B,{span:6},{default:U(()=>[Me.compare!=="is_null"&&Me.compare!=="is_not_null"?(rt(),Yt(N,{key:0,prop:"branch."+Ce+".conditions."+He+".value",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:U(()=>[F(q,{modelValue:Me.value,"onUpdate:modelValue":$e=>Me.value=$e,placeholder:k.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):fr("",!0)]),_:2},1024),F(B,{span:1},{default:U(()=>[F(Q,{disabled:Ce===0&&He===0,link:"",type:"info",class:"mt-4",onClick:$e=>O(Ce,He)},{default:U(()=>[F(Y,null,{default:U(()=>[F(ee)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):fr("",!0),Ce!==s.value.branch.length-1?(rt(),Yt(Q,{key:1,link:"",type:"primary",onClick:Me=>E(Ce)},{default:U(()=>[F(Y,{class:"mr-4"},{default:U(()=>[F(D)]),_:1}),It(" "+Ve(k.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):fr("",!0)]),_:2},1024)),[[H,Me=>r(Me,de,Ce)]])),128)),F(Q,{link:"",type:"primary",onClick:g},{default:U(()=>[F(Y,{class:"mr-4"},{default:U(()=>[F(D)]),_:1}),It(" "+Ve(k.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class P9 extends Gi{constructor(t){super(t,M9)}}const k9=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class N9 extends Vi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],E=k9(c,g);h.push({x:n+r/2-10,y:v?a-s/2+75+E+_.height/2:a-15,id:`${t}_${_.id}_right`,type:"right"})}return h}}const R9={type:"condition-node",model:N9,view:P9},j9=Object.freeze(Object.defineProperty({__proto__:null,default:R9},Symbol.toStringTag,{value:"Module"})),C9={class:"title-decoration-1 mb-8"},D9=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={document_list:["start-node","document"]},a=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",n),t.nodeModel.properties.node_data),set:r=>{at.set(t.nodeModel.properties,"node_data",r)}});return(r,s)=>{const c=ue("el-form-item"),v=ue("el-form"),h=ue("el-card");return rt(),Yt(Ui,{nodeModel:r.nodeModel},{default:U(()=>[ge("h5",C9,Ve(r.$t("views.applicationWorkflow.nodeSetting")),1),F(h,{shadow:"never",class:"card-never"},{default:U(()=>[F(v,{onSubmit:s[1]||(s[1]=xn(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:U(()=>[F(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:U(()=>[F(wi,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:a.value.document_list,"onUpdate:modelValue":s[0]||(s[0]=g=>a.value.document_list=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let I9=class extends Gi{constructor(t){super(t,D9)}};const L9={type:"document-extract-node",model:Vi,view:I9},F9=Object.freeze(Object.defineProperty({__proto__:null,default:L9},Symbol.toStringTag,{value:"Module"})),$9={class:"dialog-footer"},B9=Dr({__name:"AddFormCollect",props:{title:{default:nn("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=St(!1),s=St(),c=St({}),v=St(!1),h=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},_=()=>{var E;(E=s.value)==null||E.validate().then(()=>{var O;a.addFormField((O=s.value)==null?void 0:O.getData()),g()})};return t({close:g,open:h}),(E,O)=>{const S=ue("el-button"),k=ue("el-dialog");return rt(),Yt(k,{title:E.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=M=>r.value=M),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:U(()=>[ge("span",$9,[F(S,{onClick:O[1]||(O[1]=xn(M=>r.value=!1,["prevent"]))},{default:U(()=>[It(Ve(E.$t("common.cancel")),1)]),_:1}),F(S,{type:"primary",onClick:O[2]||(O[2]=M=>_()),loading:v.value},{default:U(()=>[It(Ve(E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(eT,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=M=>c.value=M),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),U9={class:"dialog-footer"},G9=Dr({__name:"EditFormCollect",props:{title:{default:nn("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=St(!1),s=St(),c=St({}),v=St(0),h=St(!1),g=(O,S)=>{r.value=!0,c.value=O,v.value=S},_=()=>{r.value=!1,c.value={}},E=()=>{var O;(O=s.value)==null||O.validate().then(()=>{var S;a.editFormField((S=s.value)==null?void 0:S.getData(),v.value),_()})};return t({close:_,open:g}),(O,S)=>{const k=ue("el-button"),M=ue("el-dialog");return rt(),Yt(M,{title:O.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=j=>r.value=j),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:U(()=>[ge("span",U9,[F(k,{onClick:S[1]||(S[1]=xn(j=>r.value=!1,["prevent"]))},{default:U(()=>[It(Ve(O.$t("common.cancel")),1)]),_:1}),F(k,{type:"primary",onClick:S[2]||(S[2]=j=>E()),loading:h.value},{default:U(()=>[It(Ve(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(eT,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=j=>c.value=j),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),V9={class:"title-decoration-1 mb-8"},W9={class:"flex align-center"},z9={class:"mr-4"},H9={class:"flex-between"},X9={class:"lighter"},Y9=["title"],q9={key:0},K9=["title"],Z9={key:1},J9=["title"],Q9=["title"],eV={class:"mr-4"},tV=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=St(),a=St(),r=(N,B)=>{const q=S.value.form_field_list.map((ee,Y)=>B===Y?at.cloneDeep(N):at.cloneDeep(ee));S.value.form_field_list=q,c()},s=N=>{if(S.value.form_field_list.some(B=>B.field===N.field)){da(nn("views.applicationWorkflow.tip.paramErrorMessage")+N.field);return}S.value.form_field_list=at.cloneDeep([...S.value.form_field_list,N]),c()},c=()=>{const N=[{label:nn("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...S.value.form_field_list.map(B=>({value:B.field,label:typeof B.label=="string"?B.label:B.label.label}))];at.set(t.nodeModel.properties.config,"fields",N),t.nodeModel.clear_next_node_field(!1),I()},v=St(),h=St(),g=()=>{var N;(N=v.value)==null||N.open()},_=(N,B)=>{var q;(q=h.value)==null||q.open(at.cloneDeep(N),B)},E=N=>{S.value.form_field_list=S.value.form_field_list.filter(B=>B.field!==N.field),c()},O=St({is_result:!0,form_content_format:`${nn("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${nn("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),S=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",O.value),t.nodeModel.properties.node_data),set:N=>{at.set(t.nodeModel.properties,"node_data",N)}}),k=N=>{var B;if(N.default_value){const q=(B=N.option_list)==null?void 0:B.filter(ee=>N.default_value.indexOf(ee.value)>-1).map(ee=>ee.label).join(",");return q||N.default_value}if(N.default_value!==void 0)return N.default_value},M=()=>{var N;return(N=n.value)==null?void 0:N.validate()};function j(N){at.set(t.nodeModel.properties.node_data,"form_content_format",N)}function I(){if(!a.value)return;const B=a.value.$el.querySelector(".el-table__body-wrapper tbody");B&&h1.create(B,{animation:150,ghostClass:"ghost-row",onEnd:q=>{if(q.oldIndex===void 0||q.newIndex===void 0)return;const ee=[...S.value.form_field_list],[Y]=ee.splice(q.oldIndex,1);ee.splice(q.newIndex,0,Y),S.value.form_field_list=ee,c()}})}return $o(()=>{at.set(t.nodeModel,"validate",M),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(N,B)=>{const q=ue("AppIcon"),ee=ue("el-tooltip"),Y=ue("MdEditorMagnify"),Q=ue("el-form-item"),z=ue("Plus"),D=ue("el-icon"),V=ue("el-button"),X=ue("el-table-column"),H=ue("el-tag"),de=ue("el-switch"),Ce=ue("EditPen"),Me=ue("Delete"),He=ue("el-table"),$e=ue("el-form"),ke=ue("el-card");return rt(),Yt(Ui,{nodeModel:N.nodeModel},{default:U(()=>[ge("h5",V9,Ve(N.$t("views.applicationWorkflow.nodeSetting")),1),F(ke,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F($e,{onSubmit:B[4]||(B[4]=xn(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:U(()=>[F(Q,{label:N.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:U(()=>[ge("div",W9,[ge("div",z9,[ge("span",null,[It(Ve(N.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),B[5]||(B[5]=ge("span",{class:"danger"},"*",-1))])]),F(ee,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:U(()=>[F(q,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Y,{title:N.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:S.value.form_content_format,"onUpdate:modelValue":B[0]||(B[0]=le=>S.value.form_content_format=le),style:{height:"150px"},onSubmitDialog:j},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(Q,{label:N.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:B[3]||(B[3]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",H9,[ge("h5",X9,Ve(N.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),F(V,{link:"",type:"primary",onClick:B[1]||(B[1]=le=>g())},{default:U(()=>[F(D,{class:"mr-4"},{default:U(()=>[F(z)]),_:1}),It(" "+Ve(N.$t("common.add")),1)]),_:1})])]),default:U(()=>[S.value.form_field_list.length>0?(rt(),Yt(He,{key:0,class:"border",data:S.value.form_field_list,ref_key:"tableRef",ref:a,"row-key":"field"},{default:U(()=>[F(X,{prop:"field",label:N.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:le})=>[ge("span",{title:le.field,class:"ellipsis-1"},Ve(le.field),9,Y9)]),_:1},8,["label"]),F(X,{prop:"label",label:N.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:le})=>[le.label&&le.label.input_type==="TooltipLabel"?(rt(),Dn("span",q9,[ge("span",{title:le.label.label,class:"ellipsis-1"},Ve(le.label.label),9,K9)])):(rt(),Dn("span",Z9,[ge("span",{title:le.label,class:"ellipsis-1"},Ve(le.label),9,J9)]))]),_:1},8,["label"]),F(X,{label:N.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:U(({row:le})=>[F(H,{type:"info",class:"info-tag"},{default:U(()=>{var he;return[It(Ve((he=Hr(HC).find(Se=>Se.value===le.input_type))==null?void 0:he.label),1)]}),_:2},1024)]),_:1},8,["label"]),F(X,{prop:"default_value",label:N.$t("dynamicsForm.default.label")},{default:U(({row:le})=>[ge("span",{title:le.default_value,class:"ellipsis-1"},Ve(k(le)),9,Q9)]),_:1},8,["label"]),F(X,{label:N.$t("common.required"),width:"85"},{default:U(({row:le})=>[ge("div",{onClick:B[2]||(B[2]=xn(()=>{},["stop"]))},[F(de,{disabled:"",size:"small",modelValue:le.required,"onUpdate:modelValue":he=>le.required=he},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(X,{label:N.$t("common.operation"),align:"left",width:"90"},{default:U(({row:le,$index:he})=>[ge("span",eV,[F(ee,{effect:"dark",content:N.$t("common.modify"),placement:"top"},{default:U(()=>[F(V,{type:"primary",text:"",onClick:xn(Se=>_(le,he),["stop"])},{default:U(()=>[F(D,null,{default:U(()=>[F(Ce)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(ee,{effect:"dark",content:N.$t("common.delete"),placement:"top"},{default:U(()=>[F(V,{type:"primary",text:"",onClick:Se=>E(le)},{default:U(()=>[F(D,null,{default:U(()=>[F(Me)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):fr("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(B9,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),F(G9,{ref_key:"editFormCollectRef",ref:h,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class nV extends Gi{constructor(t){super(t,tV)}}const rV={type:"form-node",model:Vi,view:nV},oV=Object.freeze(Object.defineProperty({__proto__:null,default:rV},Symbol.toStringTag,{value:"Module"})),iV={class:"title-decoration-1 mb-16"},aV={class:"lighter mb-8"},uV={key:0},lV={class:"flex-between"},sV={class:"flex"},cV={class:"flex"},fV={key:0,class:"danger"},dV={class:"flex align-center"},pV={class:"mr-4"},hV=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=St(),{params:{id:a}}=xl.config.globalProperties.$route,r={input_field_list:[],is_result:!1},s=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:g=>{at.set(t.nodeModel.properties,"node_data",g)}}),c=St(),v=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},h=()=>{if(!t.nodeModel.properties.node_data.function_lib_id){at.set(t.nodeModel.properties,"status",500);return}ha.getFunctionLib(a,t.nodeModel.properties.node_data.function_lib_id).then(g=>{const _=t.nodeModel.properties.node_data.input_field_list,E=g.data.input_field_list.map(O=>{const S=_.find(k=>k.name==O.name);return S&&S.source==O.source?{...O,value:JSON.parse(JSON.stringify(S.value))}:{...O,value:O.source=="reference"?[]:""}});at.set(t.nodeModel.properties.node_data,"input_field_list",E),at.set(t.nodeModel.properties,"status",g.data.is_active?200:500)}).catch(g=>{at.set(t.nodeModel.properties,"status",500)})};return $o(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&yp(t.nodeModel)&&at.set(t.nodeModel.properties.node_data,"is_result",!0),h(),at.set(t.nodeModel,"validate",v)}),(g,_)=>{const E=ue("auto-tooltip"),O=ue("el-tag"),S=ue("el-input"),k=ue("el-form-item"),M=ue("el-text"),j=ue("el-card"),I=ue("AppIcon"),N=ue("el-tooltip"),B=ue("el-switch"),q=ue("el-form");return rt(),Yt(Ui,{nodeModel:g.nodeModel},{default:U(()=>[ge("h5",iV,Ve(g.$t("views.applicationWorkflow.nodeSetting")),1),ge("h5",aV,Ve(g.$t("common.param.inputParam")),1),F(q,{onSubmit:_[2]||(_[2]=xn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[F(j,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var ee;return[((ee=s.value.input_field_list)==null?void 0:ee.length)>0?(rt(),Dn("div",uV,[(rt(!0),Dn(ni,null,Bi(s.value.input_field_list,(Y,Q)=>(rt(),Yt(k,{key:Y.name,label:Y.name,prop:"input_field_list."+Q+".value",rules:{required:Y.is_required,message:Y.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[ge("div",lV,[ge("div",sV,[ge("span",cV,[F(E,{content:Y.name,style:{"max-width":"130px"}},{default:U(()=>[It(Ve(Y.name),1)]),_:2},1032,["content"]),Y.is_required?(rt(),Dn("span",fV,"*")):fr("",!0)]),F(O,{type:"info",class:"info-tag ml-4"},{default:U(()=>[It(Ve(Y.type),1)]),_:2},1024)])])]),default:U(()=>[Y.source==="reference"?(rt(),Yt(wi,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Y.value,"onUpdate:modelValue":z=>Y.value=z},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(rt(),Yt(S,{key:1,modelValue:Y.value,"onUpdate:modelValue":z=>Y.value=z,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(rt(),Yt(M,{key:1,type:"info"},{default:U(()=>[It(Ve(g.$t("common.noData")),1)]),_:1}))]}),_:1}),F(k,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[1]||(_[1]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",dV,[ge("div",pV,[ge("span",null,Ve(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(N,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(I,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(B,{size:"small",modelValue:s.value.is_result,"onUpdate:modelValue":_[0]||(_[0]=ee=>s.value.is_result=ee)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class vV extends Gi{constructor(t){super(t,hV)}}const yV={type:"function-lib-node",model:Vi,view:vV},mV=Object.freeze(Object.defineProperty({__proto__:null,default:yV},Symbol.toStringTag,{value:"Module"})),gV={class:"title-decoration-1 mb-16"},_V={class:"flex-between"},bV={class:"lighter mb-8"},wV={key:0},EV={class:"flex-between"},OV={class:"flex"},xV={class:"flex"},SV={key:0,class:"danger"},AV={class:"lighter mb-8"},TV={key:0,class:"mb-8"},MV={class:"flex align-center"},PV={class:"mr-4"},kV=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=M=>M.ctrlKey===!0?(M.preventDefault(),!0):(M.stopPropagation(),!0),a=St(),r=St(),s={code:"",input_field_list:[],is_result:!1},c=St(null),v=St(!1),h=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:M=>{at.set(t.nodeModel.properties,"node_data",M)}}),g=St(),_=()=>{var M;return(M=g.value)==null?void 0:M.validate().catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};function E(M){at.set(t.nodeModel.properties.node_data,"code",M)}function O(M,j){typeof j<"u"&&(c.value=j),a.value.open(M)}function S(M){const j=at.cloneDeep(t.nodeModel.properties.node_data.input_field_list);j.splice(M,1),at.set(t.nodeModel.properties.node_data,"input_field_list",j)}function k(M){const j=at.cloneDeep(t.nodeModel.properties.node_data.input_field_list),I={...M,value:M.source==="reference"?[]:""};c.value!==null?j.splice(c.value,1,I):j.push(I),at.set(t.nodeModel.properties.node_data,"input_field_list",j),c.value=null}return $o(()=>{var M;typeof((M=t.nodeModel.properties.node_data)==null?void 0:M.is_result)>"u"&&yp(t.nodeModel)&&at.set(t.nodeModel.properties.node_data,"is_result",!0),at.set(t.nodeModel,"validate",_),setTimeout(()=>{v.value=!0},100)}),(M,j)=>{const I=ue("Plus"),N=ue("el-icon"),B=ue("el-button"),q=ue("auto-tooltip"),ee=ue("el-tag"),Y=ue("EditPen"),Q=ue("Delete"),z=ue("el-input"),D=ue("el-form-item"),V=ue("el-text"),X=ue("el-card"),H=ue("CodemirrorEditor"),de=ue("AppIcon"),Ce=ue("el-tooltip"),Me=ue("el-switch"),He=ue("el-form");return rt(),Yt(Ui,{nodeModel:M.nodeModel},{default:U(()=>[ge("h5",gV,Ve(M.$t("views.applicationWorkflow.nodeSetting")),1),ge("div",_V,[ge("h5",bV,Ve(M.$t("common.param.inputParam")),1),F(B,{link:"",type:"primary",onClick:j[0]||(j[0]=$e=>O())},{default:U(()=>[F(N,{class:"mr-4"},{default:U(()=>[F(I)]),_:1}),It(" "+Ve(M.$t("common.add")),1)]),_:1})]),F(He,{onSubmit:j[4]||(j[4]=xn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:h.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[F(X,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var $e;return[(($e=h.value.input_field_list)==null?void 0:$e.length)>0?(rt(),Dn("div",wV,[(rt(!0),Dn(ni,null,Bi(h.value.input_field_list,(ke,le)=>(rt(),Yt(D,{key:le,label:ke.name,prop:"input_field_list."+le+".value",rules:{required:ke.is_required,message:ke.source==="reference"?M.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):M.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[ge("div",EV,[ge("div",OV,[ge("span",xV,[F(q,{content:ke.name,style:{"max-width":"130px"}},{default:U(()=>[It(Ve(ke.name),1)]),_:2},1032,["content"]),ke.is_required?(rt(),Dn("span",SV,"*")):fr("",!0)]),F(ee,{type:"info",class:"info-tag ml-4"},{default:U(()=>[It(Ve(ke.type),1)]),_:2},1024)]),ge("div",null,[F(B,{text:"",onClick:xn(he=>O(ke,le),["stop"])},{default:U(()=>[F(N,null,{default:U(()=>[F(Y)]),_:1})]),_:2},1032,["onClick"]),F(B,{text:"",onClick:he=>S(le),style:{"margin-left":"4px !important"}},{default:U(()=>[F(N,null,{default:U(()=>[F(Q)]),_:1})]),_:2},1032,["onClick"])])])]),default:U(()=>[ke.source==="reference"?(rt(),Yt(wi,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:M.nodeModel,class:"w-full",placeholder:M.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:ke.value,"onUpdate:modelValue":he=>ke.value=he,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(rt(),Yt(z,{key:1,modelValue:ke.value,"onUpdate:modelValue":he=>ke.value=he,placeholder:M.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(rt(),Yt(V,{key:1,type:"info"},{default:U(()=>[It(Ve(M.$t("common.noData")),1)]),_:1}))]}),_:1}),ge("h5",AV,Ve(M.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(rt(),Dn("div",TV,[F(H,{title:M.$t("views.functionLib.functionForm.form.param.code"),modelValue:h.value.code,"onUpdate:modelValue":j[1]||(j[1]=$e=>h.value.code=$e),onWheel:n,style:{height:"130px !important"},onSubmitDialog:E},null,8,["title","modelValue"])])):fr("",!0),F(D,{label:M.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:j[3]||(j[3]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",MV,[ge("div",PV,[ge("span",null,Ve(M.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(Ce,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(M.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(de,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Me,{size:"small",modelValue:h.value.is_result,"onUpdate:modelValue":j[2]||(j[2]=$e=>h.value.is_result=$e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),F(PD,{ref_key:"FieldFormDialogRef",ref:a,onRefresh:k},null,512)]),_:1},8,["nodeModel"])}}});class NV extends Gi{constructor(t){super(t,kV)}}const RV={type:"function-node",model:Vi,view:NV},jV=Object.freeze(Object.defineProperty({__proto__:null,default:RV},Symbol.toStringTag,{value:"Module"})),CV={class:"title-decoration-1 mb-8"},DV={class:"flex-between w-full"},IV={class:"flex align-center"},LV={class:"mr-4"},FV={class:"flex align-center"},$V={class:"mr-4"},BV={class:"flex align-center"},UV={class:"mr-4"},GV=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=nf(),{params:{id:n}}=xl.config.globalProperties.$route,a=e,r=St(null),s=St(),c=St(),v=()=>{var N;return(N=c.value)==null?void 0:N.validate().catch(B=>Promise.reject({node:a.nodeModel,errMessage:B}))},h=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),_={model_id:"",system:"",prompt:`{{${nn("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},E=Oo({get:()=>(a.nodeModel.properties.node_data||at.set(a.nodeModel.properties,"node_data",_),a.nodeModel.properties.node_data),set:N=>{at.set(a.nodeModel.properties,"node_data",N)}});function O(){n?ha.getApplicationTTIModel(n).then(N=>{r.value=at.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{r.value=at.groupBy(N==null?void 0:N.data,"provider")})}const S=()=>{var N;E.value.model_id?(N=s.value)==null||N.reset_default(E.value.model_id,n):M({})},k=N=>{var B;N&&((B=s.value)==null||B.open(N,n,E.value.model_params_setting))};function M(N){at.set(a.nodeModel.properties.node_data,"model_params_setting",N)}function j(N){at.set(a.nodeModel.properties.node_data,"prompt",N)}function I(N){at.set(a.nodeModel.properties.node_data,"negative_prompt",N)}return $o(()=>{O(),at.set(a.nodeModel,"validate",v)}),(N,B)=>{const q=ue("Setting"),ee=ue("el-icon"),Y=ue("el-button"),Q=ue("ModelSelect"),z=ue("el-form-item"),D=ue("AppIcon"),V=ue("el-tooltip"),X=ue("MdEditorMagnify"),H=ue("el-switch"),de=ue("el-form"),Ce=ue("el-card");return rt(),Yt(Ui,{"node-model":N.nodeModel},{default:U(()=>[ge("h5",CV,Ve(N.$t("views.applicationWorkflow.nodeSetting")),1),F(Ce,{shadow:"never",class:"card-never"},{default:U(()=>[F(de,{onSubmit:B[6]||(B[6]=xn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(z,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[ge("div",DV,[ge("div",null,[ge("span",null,[It(Ve(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),B[7]||(B[7]=ge("span",{class:"danger"},"*",-1))])]),F(Y,{disabled:!E.value.model_id,type:"primary",link:"",onClick:B[0]||(B[0]=Me=>k(E.value.model_id)),onRefreshForm:M},{default:U(()=>[F(ee,null,{default:U(()=>[F(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(Q,{onChange:S,onWheel:h,teleported:!1,modelValue:E.value.model_id,"onUpdate:modelValue":B[1]||(B[1]=Me=>E.value.model_id=Me),placeholder:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[ge("div",IV,[ge("div",LV,[ge("span",null,[It(Ve(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),B[8]||(B[8]=ge("span",{class:"danger"},"*",-1))])]),F(V,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:U(()=>[F(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(X,{onWheel:h,title:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:E.value.prompt,"onUpdate:modelValue":B[2]||(B[2]=Me=>E.value.prompt=Me),style:{height:"150px"},onSubmitDialog:j},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[ge("div",FV,[ge("div",$V,[ge("span",null,Ve(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),F(V,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:U(()=>[F(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(X,{onWheel:h,title:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:E.value.negative_prompt,"onUpdate:modelValue":B[3]||(B[3]=Me=>E.value.negative_prompt=Me),placeholder:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:I},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[5]||(B[5]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",BV,[ge("div",UV,[ge("span",null,Ve(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(V,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(H,{size:"small",modelValue:E.value.is_result,"onUpdate:modelValue":B[4]||(B[4]=Me=>E.value.is_result=Me)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(Qm,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:M},null,512)]),_:1},8,["node-model"])}}});let VV=class extends Gi{constructor(t){super(t,GV)}};const WV={type:"image-generate-node",model:Vi,view:VV},zV=Object.freeze(Object.defineProperty({__proto__:null,default:WV},Symbol.toStringTag,{value:"Module"})),HV={class:"title-decoration-1 mb-8"},XV={class:"flex-between w-full"},YV={class:"flex align-center"},qV={class:"mr-4"},KV={class:"flex-between"},ZV={class:"flex align-center"},JV={class:"mr-4"},QV=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=nf(),{params:{id:n}}=xl.config.globalProperties.$route,a=e,r=St(null),s=St(),c=St(),v=St(),h=()=>{var N;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(N=c.value)==null?void 0:N.validate()]).catch(B=>Promise.reject({node:a.nodeModel,errMessage:B}))},g=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),E={model_id:"",system:"",prompt:`{{${nn("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},O=Oo({get:()=>(a.nodeModel.properties.node_data||at.set(a.nodeModel.properties,"node_data",E),a.nodeModel.properties.node_data),set:N=>{at.set(a.nodeModel.properties,"node_data",N)}});function S(){n?ha.getApplicationImageModel(n).then(N=>{r.value=at.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{r.value=at.groupBy(N==null?void 0:N.data,"provider")})}function k(N){at.set(a.nodeModel.properties.node_data,"system",N)}function M(N){at.set(a.nodeModel.properties.node_data,"prompt",N)}const j=N=>{var B;N&&((B=s.value)==null||B.open(N,n,O.value.model_params_setting))};function I(N){at.set(a.nodeModel.properties.node_data,"model_params_setting",N)}return $o(()=>{S(),at.set(a.nodeModel,"validate",h)}),(N,B)=>{const q=ue("Setting"),ee=ue("el-icon"),Y=ue("el-button"),Q=ue("ModelSelect"),z=ue("el-form-item"),D=ue("MdEditorMagnify"),V=ue("AppIcon"),X=ue("el-tooltip"),H=ue("el-option"),de=ue("el-select"),Ce=ue("el-input-number"),Me=ue("el-switch"),He=ue("el-form"),$e=ue("el-card");return rt(),Yt(Ui,{"node-model":N.nodeModel},{default:U(()=>[ge("h5",HV,Ve(N.$t("views.applicationWorkflow.nodeSetting")),1),F($e,{shadow:"never",class:"card-never"},{default:U(()=>[F(He,{onSubmit:B[9]||(B[9]=xn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(z,{label:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[ge("div",XV,[ge("div",null,[ge("span",null,[It(Ve(Hr(nn)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),B[10]||(B[10]=ge("span",{class:"danger"},"*",-1))])]),F(Y,{disabled:!O.value.model_id,type:"primary",link:"",onClick:B[0]||(B[0]=ke=>j(O.value.model_id)),onRefreshForm:I},{default:U(()=>[F(ee,null,{default:U(()=>[F(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(Q,{onWheel:g,teleported:!1,modelValue:O.value.model_id,"onUpdate:modelValue":B[1]||(B[1]=ke=>O.value.model_id=ke),placeholder:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value,showFooter:"","model-type":"IMAGE"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(D,{title:N.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=ke=>O.value.system=ke),style:{height:"100px"},onSubmitDialog:k,placeholder:N.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(z,{label:N.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[ge("div",YV,[ge("div",qV,[ge("span",null,[It(Ve(N.$t("views.application.applicationForm.form.prompt.label")),1),B[11]||(B[11]=ge("span",{class:"danger"},"*",-1))])]),F(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(V,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(D,{onWheel:g,title:N.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=ke=>O.value.prompt=ke),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(z,null,{label:U(()=>[ge("div",KV,[ge("div",null,Ve(N.$t("views.application.applicationForm.form.historyRecord.label")),1),F(de,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":B[4]||(B[4]=ke=>O.value.dialogue_type=ke),type:"small",style:{width:"100px"}},{default:U(()=>[F(H,{label:N.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),F(H,{label:N.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[F(Ce,{modelValue:O.value.dialogue_number,"onUpdate:modelValue":B[5]||(B[5]=ke=>O.value.dialogue_number=ke),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),F(z,{label:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),B[12]||(B[12]=ge("span",{class:"danger"},"*",-1))]),default:U(()=>[F(wi,{ref_key:"nodeCascaderRef",ref:v,nodeModel:N.nodeModel,class:"w-full",placeholder:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.image_list,"onUpdate:modelValue":B[6]||(B[6]=ke=>O.value.image_list=ke)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[8]||(B[8]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",ZV,[ge("div",JV,[ge("span",null,Ve(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(V,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Me,{size:"small",modelValue:O.value.is_result,"onUpdate:modelValue":B[7]||(B[7]=ke=>O.value.is_result=ke)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(Qm,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:I},null,512)]),_:1},8,["node-model"])}}});let eW=class extends Gi{constructor(t){super(t,QV)}};const tW={type:"image-understand-node",model:Vi,view:eW},nW=Object.freeze(Object.defineProperty({__proto__:null,default:tW},Symbol.toStringTag,{value:"Module"})),rW={class:"title-decoration-1 mb-8"},oW={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},iW={class:"flex-between"},aW={class:"ml-4"},uW={class:"title-decoration-1 mb-8"},lW={key:0,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},sW={class:"flex-between"},cW={key:0,class:"danger"},fW={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},dW={class:"flex-between"},pW={key:0,class:"danger"},hW=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,vW=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=St(),a=St(!1),r=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),s={mcp_tool:"",mcp_tools:[],mcp_servers:"",mcp_server:"",tool_params:{},tool_form_field:[],params_nested:""};function c(O){at.set(t.nodeModel.properties.node_data,"mcp_servers",O)}function v(){if(!g.value.mcp_servers){da(nn("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(g.value.mcp_servers)}catch{da(nn("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}ha.getMcpTools({mcp_servers:g.value.mcp_servers},a).then(O=>{g.value.mcp_tools=O.data,lp(nn("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess"))})}function h(){var S,k,M,j;g.value.mcp_server=g.value.mcp_tools.filter(I=>I.name===g.value.mcp_tool)[0].server;const O=g.value.mcp_tools.filter(I=>I.name===g.value.mcp_tool)[0].args_schema;g.value.tool_form_field=[];for(const I in O.properties){let N=O.properties[I].properties;if(N){g.value.params_nested=I;for(const B in N)g.value.tool_form_field.push({field:B,label:{input_type:"TooltipLabel",label:B,attrs:{tooltip:N[B].description},props_info:{}},input_type:"TextInput",source:"referencing",required:((S=O.properties[I].required)==null?void 0:S.indexOf(B))!==-1,props_info:{rules:[{required:((k=O.properties[I].required)==null?void 0:k.indexOf(B))!==-1,message:nn("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}else g.value.params_nested="",g.value.tool_form_field.push({field:I,label:{input_type:"TooltipLabel",label:I,attrs:{tooltip:O.properties[I].description},props_info:{}},input_type:"TextInput",source:"referencing",required:((M=O.required)==null?void 0:M.indexOf(I))!==-1,props_info:{rules:[{required:((j=O.required)==null?void 0:j.indexOf(I))!==-1,message:nn("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}g.value.params_nested?g.value.tool_params={[g.value.params_nested]:{}}:g.value.tool_params={}}const g=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:O=>{at.set(t.nodeModel.properties,"node_data",O)}}),_=St(),E=async()=>{if(n.value){const O=g.value.tool_form_field.filter(S=>S.required).map(S=>S.label.label);if(O.length>0){for(const S of O)if(g.value.params_nested){if(!g.value.tool_params[g.value.params_nested][S])return Promise.reject({node:t.nodeModel,errMessage:S+nn("dynamicsForm.tip.requiredMessage")})}else if(!g.value.tool_params[S])return Promise.reject({node:t.nodeModel,errMessage:S+nn("dynamicsForm.tip.requiredMessage")})}}if(_.value){const O=at.cloneDeep(g.value);if(!O.mcp_servers)return Promise.reject({node:t.nodeModel,errMessage:nn("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!O.mcp_tool)return Promise.reject({node:t.nodeModel,errMessage:nn("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};return $o(()=>{var O;typeof((O=t.nodeModel.properties.node_data)==null?void 0:O.is_result)>"u"&&yp(t.nodeModel)&&at.set(t.nodeModel.properties.node_data,"is_result",!0),at.set(t.nodeModel,"validate",E)}),(O,S)=>{const k=ue("MdEditorMagnify"),M=ue("el-form-item"),j=ue("Plus"),I=ue("el-icon"),N=ue("el-button"),B=ue("AppIcon"),q=ue("el-tooltip"),ee=ue("el-option"),Y=ue("el-select"),Q=ue("el-form"),z=ue("el-input"),D=Lh("loading");return rt(),Yt(Ui,{nodeModel:O.nodeModel},{default:U(()=>[ge("h5",rW,Ve(O.$t("views.applicationWorkflow.nodeSetting")),1),ge("div",oW,[F(Q,{onSubmit:S[3]||(S[3]=xn(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:_,"hide-required-asterisk":""},{default:U(()=>[F(M,{label:"MCP Server Config"},{default:U(()=>[F(k,{onWheel:r,title:"MCP Server Config",modelValue:g.value.mcp_servers,"onUpdate:modelValue":S[0]||(S[0]=V=>g.value.mcp_servers=V),style:{height:"150px"},onSubmitDialog:c,placeholder:hW},null,8,["modelValue"])]),_:1}),F(M,null,{label:U(()=>[ge("div",iW,[ge("span",null,Ve(O.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),F(N,{type:"primary",link:"",onClick:S[1]||(S[1]=V=>v())},{default:U(()=>[F(I,{class:"mr-4"},{default:U(()=>[F(j)]),_:1}),It(" "+Ve(O.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:U(()=>[F(Y,{modelValue:g.value.mcp_tool,"onUpdate:modelValue":S[2]||(S[2]=V=>g.value.mcp_tool=V),onChange:h,filterable:""},{default:U(()=>[(rt(!0),Dn(ni,null,Bi(g.value.mcp_tools,V=>(rt(),Yt(ee,{key:V.value,label:V.name,value:V.name,class:"flex align-center"},{default:U(()=>[F(q,{effect:"dark",content:V.description,placement:"top-start","popper-class":"max-w-350"},{default:U(()=>[F(B,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),ge("span",aW,Ve(V.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),ge("h5",uW,Ve(O.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),g.value.tool_params[g.value.params_nested]?(rt(),Dn("div",lW,[g.value.mcp_tool?hu((rt(),Yt(Q,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[5]||(S[5]=xn(()=>{},["prevent"]))},{default:U(()=>[(rt(!0),Dn(ni,null,Bi(g.value.tool_form_field,V=>(rt(),Yt(M,{key:V.field,required:V.required},{label:U(()=>[ge("div",sW,[ge("div",null,[F(qO,{label:V.label.label,tooltip:V.label.attrs.tooltip},null,8,["label","tooltip"]),V.required?(rt(),Dn("span",cW,"*")):fr("",!0)]),F(Y,{teleported:!1,modelValue:V.source,"onUpdate:modelValue":X=>V.source=X,size:"small",style:{width:"85px"},onChange:S[4]||(S[4]=X=>g.value.tool_params[g.value.params_nested]={})},{default:U(()=>[F(ee,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(ee,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[V.source==="custom"?(rt(),Yt(z,{key:0,modelValue:g.value.tool_params[g.value.params_nested][V.label.label],"onUpdate:modelValue":X=>g.value.tool_params[g.value.params_nested][V.label.label]=X},null,8,["modelValue","onUpdate:modelValue"])):(rt(),Yt(wi,{key:1,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[g.value.params_nested][V.label.label],"onUpdate:modelValue":X=>g.value.tool_params[g.value.params_nested][V.label.label]=X},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["required"]))),128))]),_:1})),[[D,a.value]]):fr("",!0)])):(rt(),Dn("div",fW,[g.value.mcp_tool?hu((rt(),Yt(Q,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[6]||(S[6]=xn(()=>{},["prevent"]))},{default:U(()=>[(rt(!0),Dn(ni,null,Bi(g.value.tool_form_field,V=>(rt(),Yt(M,{key:V.field,required:V.required},{label:U(()=>[ge("div",dW,[ge("div",null,[F(qO,{label:V.label.label,tooltip:V.label.attrs.tooltip},null,8,["label","tooltip"]),V.required?(rt(),Dn("span",pW,"*")):fr("",!0)]),F(Y,{teleported:!1,modelValue:V.source,"onUpdate:modelValue":X=>V.source=X,size:"small",style:{width:"85px"}},{default:U(()=>[F(ee,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(ee,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[V.source==="custom"?(rt(),Yt(z,{key:0,modelValue:g.value.tool_params[V.label.label],"onUpdate:modelValue":X=>g.value.tool_params[V.label.label]=X},null,8,["modelValue","onUpdate:modelValue"])):(rt(),Yt(wi,{key:1,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[V.label.label],"onUpdate:modelValue":X=>g.value.tool_params[V.label.label]=X},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["required"]))),128))]),_:1})),[[D,a.value]]):fr("",!0)]))]),_:1},8,["nodeModel"])}}});class yW extends Gi{constructor(t){super(t,vW)}}const mW={type:"mcp-node",model:Vi,view:yW},gW=Object.freeze(Object.defineProperty({__proto__:null,default:mW},Symbol.toStringTag,{value:"Module"})),_W={class:"title-decoration-1 mb-8"},bW={class:"flex-between"},wW={class:"flex align-center"},EW={class:"mr-4"},OW={class:"flex align-center"},xW={class:"mr-4"},SW=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=nf(),n=St(),a=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),r=N=>{var B;N?(B=n.value)==null||B.reset_default(N,v):_({})};function s(N){at.set(S.nodeModel.properties.node_data,"prompt",N)}function c(N){at.set(S.nodeModel.properties.node_data,"system",N)}const{params:{id:v}}=xl.config.globalProperties.$route,h=`${nn("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${nn("views.applicationWorkflow.nodes.startNode.label")}.question}}
${nn("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={model_id:"",system:nn("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:h,dialogue_number:1,is_result:!1};function _(N){at.set(S.nodeModel.properties.node_data,"model_params_setting",N)}const E=N=>{var B;N&&((B=n.value)==null||B.open(N,v,O.value.model_params_setting))},O=Oo({get:()=>(S.nodeModel.properties.node_data||at.set(S.nodeModel.properties,"node_data",g),S.nodeModel.properties.node_data),set:N=>{at.set(S.nodeModel.properties,"node_data",N)}}),S=e,k=St(),M=St(null),j=()=>{var N;return(N=k.value)==null?void 0:N.validate().catch(B=>Promise.reject({node:S.nodeModel,errMessage:B}))};function I(){v?ha.getApplicationModel(v).then(N=>{M.value=at.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{M.value=at.groupBy(N==null?void 0:N.data,"provider")})}return $o(()=>{var N;I(),typeof((N=S.nodeModel.properties.node_data)==null?void 0:N.is_result)>"u"&&yp(S.nodeModel)&&at.set(S.nodeModel.properties.node_data,"is_result",!0),at.set(S.nodeModel,"validate",j)}),(N,B)=>{const q=ue("Setting"),ee=ue("el-icon"),Y=ue("el-button"),Q=ue("ModelSelect"),z=ue("el-form-item"),D=ue("MdEditorMagnify"),V=ue("AppIcon"),X=ue("EditPen"),H=ue("el-tooltip"),de=ue("el-input-number"),Ce=ue("el-switch"),Me=ue("el-form"),He=ue("el-card");return rt(),Yt(Ui,{nodeModel:N.nodeModel},{default:U(()=>[ge("h5",_W,Ve(N.$t("views.applicationWorkflow.nodeSetting")),1),F(He,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(Me,{onSubmit:B[7]||(B[7]=xn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:k,"hide-required-asterisk":""},{default:U(()=>[F(z,{label:N.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[ge("div",bW,[ge("div",null,[ge("span",null,[It(Ve(N.$t("views.application.applicationForm.form.aiModel.label")),1),B[8]||(B[8]=ge("span",{class:"danger"},"*",-1))])]),F(Y,{type:"primary",link:"",disabled:!O.value.model_id,onClick:B[0]||(B[0]=$e=>E(O.value.model_id)),onRefreshForm:_},{default:U(()=>[F(ee,null,{default:U(()=>[F(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(Q,{onChange:r,onWheel:a,teleported:!1,modelValue:O.value.model_id,"onUpdate:modelValue":B[1]||(B[1]=$e=>O.value.model_id=$e),placeholder:N.$t("views.application.applicationForm.form.aiModel.placeholder"),options:M.value,onSubmitModel:I,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(D,{title:N.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=$e=>O.value.system=$e),style:{height:"100px"},onSubmitDialog:c,placeholder:N.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(z,{label:N.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:U(()=>[ge("div",wW,[ge("div",EW,[ge("span",null,[It(Ve(N.$t("views.application.applicationForm.form.prompt.label")),1),B[9]||(B[9]=ge("span",{class:"danger"},"*",-1))])]),F(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(V,{iconName:"app-warning",class:"app-warning-icon"}),F(ee,null,{default:U(()=>[F(X)]),_:1})]),_:1})])]),default:U(()=>[F(D,{onWheel:a,title:N.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=$e=>O.value.prompt=$e),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(z,{label:N.$t("views.application.applicationForm.form.historyRecord.label")},{default:U(()=>[F(de,{modelValue:O.value.dialogue_number,"onUpdate:modelValue":B[4]||(B[4]=$e=>O.value.dialogue_number=$e),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),F(z,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[6]||(B[6]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",OW,[ge("div",xW,[ge("span",null,Ve(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(V,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Ce,{size:"small",modelValue:O.value.is_result,"onUpdate:modelValue":B[5]||(B[5]=$e=>O.value.is_result=$e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(Qm,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:_},null,512)]),_:1},8,["nodeModel"])}}});class AW extends Gi{constructor(t){super(t,SW)}}const TW={type:"question-node",model:Vi,view:AW},MW=Object.freeze(Object.defineProperty({__proto__:null,default:TW},Symbol.toStringTag,{value:"Module"})),PW={class:"flex-between"},kW={class:"flex align-center"},NW={class:"mr-4"},RW=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),a={reply_type:"content",content:"",fields:[],is_result:!1},r=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",a),t.nodeModel.properties.node_data),set:g=>{at.set(t.nodeModel.properties,"node_data",g)}});function s(g){at.set(t.nodeModel.properties.node_data,"content",g)}const c=St(),v=St(),h=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))};return $o(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&yp(t.nodeModel)&&at.set(t.nodeModel.properties.node_data,"is_result",!0),at.set(t.nodeModel,"validate",h)}),(g,_)=>{const E=ue("el-option"),O=ue("el-select"),S=ue("MdEditorMagnify"),k=ue("el-form-item"),M=ue("AppIcon"),j=ue("el-tooltip"),I=ue("el-switch"),N=ue("el-form"),B=ue("el-card");return rt(),Yt(Ui,{nodeModel:g.nodeModel},{default:U(()=>[F(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(N,{onSubmit:_[5]||(_[5]=xn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:U(()=>[F(k,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:U(()=>[ge("div",PW,[ge("span",null,Ve(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),F(O,{teleported:!1,modelValue:r.value.reply_type,"onUpdate:modelValue":_[0]||(_[0]=q=>r.value.reply_type=q),size:"small",style:{width:"85px"}},{default:U(()=>[F(E,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(E,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[r.value.reply_type==="content"?(rt(),Yt(S,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":_[1]||(_[1]=q=>r.value.content=q),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(rt(),Yt(wi,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":_[2]||(_[2]=q=>r.value.fields=q)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),F(k,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[4]||(_[4]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",kW,[ge("div",NW,[ge("span",null,Ve(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(j,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(M,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(I,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":_[3]||(_[3]=q=>r.value.is_result=q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class jW extends Gi{constructor(t){super(t,RW)}}const CW={type:"reply-node",model:Vi,view:jW},DW=Object.freeze(Object.defineProperty({__proto__:null,default:CW},Symbol.toStringTag,{value:"Module"})),IW={class:"p-16"},LW={class:"flex align-center"},FW={class:"mr-4"},$W={class:"dialog-footer p-16"},BW=Dr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=St(),s=St({top_n:3,similarity:0,max_paragraph_char_number:5e3}),c=St(!1),v=St(!1);d1(c,_=>{_||(s.value={top_n:3,similarity:0,max_paragraph_char_number:5e3})});const h=_=>{s.value={...s.value,...at.cloneDeep(_)},c.value=!0},g=()=>{var _;(_=r==null?void 0:r.value)==null||_.validate((E,O)=>{E&&(a("refresh",at.cloneDeep(s.value)),c.value=!1)})};return t({open:h}),(_,E)=>{const O=ue("AppIcon"),S=ue("el-tooltip"),k=ue("el-input-number"),M=ue("el-form-item"),j=ue("el-col"),I=ue("el-row"),N=ue("el-slider"),B=ue("el-form"),q=ue("el-scrollbar"),ee=ue("el-button"),Y=ue("el-dialog");return rt(),Yt(Y,{"align-center":"",title:_.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":E[5]||(E[5]=Q=>c.value=Q),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[ge("span",$W,[F(ee,{onClick:E[3]||(E[3]=xn(Q=>c.value=!1,["prevent"]))},{default:U(()=>[It(Ve(_.$t("common.cancel")),1)]),_:1}),F(ee,{type:"primary",onClick:E[4]||(E[4]=Q=>g()),loading:v.value},{default:U(()=>[It(Ve(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[ge("div",null,[F(q,{always:""},{default:U(()=>[ge("div",IW,[F(B,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:U(()=>[F(I,{gutter:20},{default:U(()=>[F(j,{span:12},{default:U(()=>[F(M,null,{label:U(()=>[ge("div",LW,[ge("span",FW,"Score "+Ve(_.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),F(S,{effect:"dark",content:_.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:U(()=>[F(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:U(()=>[F(k,{modelValue:s.value.similarity,"onUpdate:modelValue":E[0]||(E[0]=Q=>s.value.similarity=Q),min:0,max:s.value.search_mode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),F(j,{span:12},{default:U(()=>[F(M,{label:_.$t("views.application.applicationForm.dialog.topReferences")},{default:U(()=>[F(k,{modelValue:s.value.top_n,"onUpdate:modelValue":E[1]||(E[1]=Q=>s.value.top_n=Q),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),F(M,{label:_.$t("views.application.applicationForm.dialog.maxCharacters")},{default:U(()=>[F(N,{modelValue:s.value.max_paragraph_char_number,"onUpdate:modelValue":E[2]||(E[2]=Q=>s.value.max_paragraph_char_number=Q),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}}),UW={class:"flex-between"},GW={class:"flex-between"},VW={class:"w-full"},WW={class:"flex-between"},zW={class:"flex-between"},HW=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=nf(),n=e,a=St(),{params:{id:r}}=xl.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",question_reference_address:[],reranker_setting:{top_n:3,similarity:0,max_paragraph_char_number:5e3}},c=St(null),v=()=>{var I;(I=a.value)==null||I.open(_.value.reranker_setting)},h=I=>{const N=at.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);N.splice(I,1),at.set(n.nodeModel.properties.node_data,"reranker_reference_list",N)},g=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),_=Oo({get:()=>(n.nodeModel.properties.node_data||at.set(n.nodeModel.properties,"node_data",s),n.nodeModel.properties.node_data),set:I=>{at.set(n.nodeModel.properties,"node_data",I)}});function E(I){at.set(n.nodeModel.properties.node_data,"reranker_setting",I)}function O(){r?ha.getApplicationRerankerModel(r).then(I=>{c.value=at.groupBy(I==null?void 0:I.data,"provider")}):t.asyncGetModel({model_type:"RERANKER"}).then(I=>{c.value=at.groupBy(I==null?void 0:I.data,"provider")})}const S=()=>{const I=at.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);I.push([]),at.set(n.nodeModel.properties.node_data,"reranker_reference_list",I)},k=St(),M=St(),j=()=>{var I;return Promise.all([M.value?M.value.validate():Promise.resolve(""),(I=k.value)==null?void 0:I.validate()]).catch(N=>Promise.reject({node:n.nodeModel,errMessage:N}))};return $o(()=>{O(),at.set(n.nodeModel,"validate",j)}),(I,N)=>{const B=ue("Plus"),q=ue("el-icon"),ee=ue("el-button"),Y=ue("el-form-item"),Q=ue("el-col"),z=ue("Delete"),D=ue("el-row"),V=ue("Setting"),X=ue("ModelSelect"),H=ue("el-form"),de=ue("el-card");return rt(),Yt(Ui,{nodeModel:I.nodeModel},{default:U(()=>[F(de,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(H,{onSubmit:N[2]||(N[2]=xn(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:k,"hide-required-asterisk":""},{default:U(()=>[F(Y,{label:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:U(()=>[ge("div",UW,[ge("span",null,[It(Ve(I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),N[3]||(N[3]=ge("span",{class:"danger"},"*",-1))]),F(ee,{onClick:S,link:"",type:"primary"},{default:U(()=>[F(q,{class:"mr-4"},{default:U(()=>[F(B)]),_:1})]),_:1})])]),default:U(()=>[(rt(!0),Dn(ni,null,Bi(_.value.reranker_reference_list,(Ce,Me)=>(rt(),Yt(D,{gutter:8,style:{"margin-bottom":"8px"},key:Me},{default:U(()=>[F(Q,{span:22},{default:U(()=>[F(Y,{prop:"reranker_reference_list."+Me,rules:{type:"array",required:!0,message:I.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[(rt(),Yt(wi,{key:Me,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:_.value.reranker_reference_list[Me],"onUpdate:modelValue":He=>_.value.reranker_reference_list[Me]=He},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),F(Q,{span:1},{default:U(()=>[F(ee,{link:"",type:"info",class:"mt-4",onClick:He=>h(Me)},{default:U(()=>[F(q,null,{default:U(()=>[F(z)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),F(Y,{label:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[ge("div",GW,[ge("span",null,Ve(I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),F(ee,{type:"primary",link:"",onClick:v},{default:U(()=>[F(q,null,{default:U(()=>[F(V)]),_:1})]),_:1})])]),default:U(()=>[ge("div",VW,[F(D,null,{default:U(()=>[F(Q,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(" Score "+Ve(I.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),F(Q,{span:12,class:"lighter"},{default:U(()=>{var Ce;return[It(Ve((Ce=_.value.reranker_setting.similarity)==null?void 0:Ce.toFixed(3)),1)]}),_:1}),F(Q,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(Ve(I.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),F(Q,{span:12,class:"lighter"},{default:U(()=>[It(Ve(_.value.reranker_setting.top_n),1)]),_:1}),F(Q,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(Ve(I.$t("views.applicationWorkflow.nodes.rerankerNode.max_paragraph_char_number")),1)]),_:1}),F(Q,{span:12,class:"lighter"},{default:U(()=>[It(Ve(_.value.reranker_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),F(Y,{label:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:U(()=>[ge("div",WW,[ge("span",null,[It(Ve(I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),N[4]||(N[4]=ge("span",{class:"danger"},"*",-1))])])]),default:U(()=>[F(wi,{ref_key:"nodeCascaderRef",ref:M,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:_.value.question_reference_address,"onUpdate:modelValue":N[0]||(N[0]=Ce=>_.value.question_reference_address=Ce)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(Y,{label:I.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:I.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:U(()=>[ge("div",zW,[ge("span",null,[It(Ve(I.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),N[5]||(N[5]=ge("span",{class:"danger"},"*",-1))])])]),default:U(()=>[F(X,{onWheel:g,teleported:!1,modelValue:_.value.reranker_model_id,"onUpdate:modelValue":N[1]||(N[1]=Ce=>_.value.reranker_model_id=Ce),placeholder:I.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:c.value,onSubmitModel:O,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),F(BW,{ref_key:"ParamSettingDialogRef",ref:a,onRefresh:E},null,512)]),_:1},8,["nodeModel"])}}});const XW=ty(HW,[["__scopeId","data-v-364c376e"]]);class YW extends Gi{constructor(t){super(t,XW)}}const qW={type:"reranker-node",model:Vi,view:YW},KW=Object.freeze(Object.defineProperty({__proto__:null,default:qW},Symbol.toStringTag,{value:"Module"}));var c2=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(c2||{});const ZW={class:"title-decoration-1 mb-8"},JW={class:"flex-between"},QW={class:"w-full"},ez={class:"flex align-center",style:{"line-height":"20px"}},tz=["title"],nz={class:"flex-between"},rz={class:"w-full"},oz=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:a}=nf(),{params:{id:r}}=xl.config.globalProperties.$route,s=e,c=St(),v={dataset_id_list:[],dataset_setting:{top_n:3,similarity:.6,max_paragraph_char_number:5e3,search_mode:"embedding"},question_reference_address:[]},h=Oo({get:()=>(s.nodeModel.properties.node_data||at.set(s.nodeModel.properties,"node_data",v),s.nodeModel.properties.node_data),set:Y=>{at.set(s.nodeModel.properties,"node_data",Y)}}),g=St(),_=St(),E=St(),O=St([]),S=St(!1);function k(Y){at.set(s.nodeModel.properties.node_data,"dataset_setting",Y.dataset_setting)}const M=()=>{var Y;(Y=_.value)==null||Y.open(h.value,"WORK_FLOW")};function j(Y){const Q=s.nodeModel.properties.node_data.dataset_id_list.filter(z=>z!==Y);at.set(s.nodeModel.properties.node_data,"dataset_id_list",Q)}function I(Y){at.set(s.nodeModel.properties.node_data,"dataset_id_list",Y)}function N(){E.value&&E.value.open(h.value.dataset_id_list)}function B(){r?n.asyncGetApplicationDataset(r,S).then(Y=>{O.value=Y.data}):t.asyncGetAllDataset(S).then(Y=>{var Q;O.value=(Q=Y.data)==null?void 0:Q.filter(z=>{var D;return z.user_id===((D=a.userInfo)==null?void 0:D.id)})})}function q(){B()}const ee=()=>{var Y;return Promise.all([c.value.validate(),(Y=g.value)==null?void 0:Y.validate()]).catch(Q=>Promise.reject({node:s.nodeModel,errMessage:Q}))};return $o(()=>{B(),at.set(s.nodeModel,"validate",ee)}),(Y,Q)=>{const z=ue("Plus"),D=ue("el-icon"),V=ue("el-button"),X=ue("el-text"),H=ue("AppAvatar"),de=ue("Close"),Ce=ue("el-form-item"),Me=ue("Setting"),He=ue("el-col"),$e=ue("el-row"),ke=ue("el-form"),le=ue("el-card");return rt(),Yt(Ui,{nodeModel:Y.nodeModel},{default:U(()=>[ge("h5",ZW,Ve(Y.$t("views.applicationWorkflow.nodeSetting")),1),F(le,{shadow:"never",class:"card-never"},{default:U(()=>[F(ke,{onSubmit:Q[1]||(Q[1]=xn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:U(()=>[F(Ce,{label:Y.$t("views.log.selectDataset")},{label:U(()=>[ge("div",JW,[ge("span",null,Ve(Y.$t("views.log.selectDataset")),1),F(V,{type:"primary",link:"",onClick:N},{default:U(()=>[F(D,null,{default:U(()=>[F(z)]),_:1})]),_:1})])]),default:U(()=>{var he;return[ge("div",QW,[((he=h.value.dataset_id_list)==null?void 0:he.length)===0?(rt(),Yt(X,{key:0,type:"info"},{default:U(()=>[It(Ve(Y.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(rt(!0),Dn(ni,{key:1},Bi(h.value.dataset_id_list,(Se,Ke)=>{var Ge,et,gt,dt;return rt(),Dn("div",{key:Ke,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[ge("div",ez,[((Ge=Hr(lm)(O.value,Se,"id"))==null?void 0:Ge.type)==="1"?(rt(),Yt(H,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:U(()=>Q[2]||(Q[2]=[ge("img",{src:XC,style:{width:"58%"},alt:""},null,-1)])),_:1})):((et=Hr(lm)(O.value,Se,"id"))==null?void 0:et.type)==="2"?(rt(),Yt(H,{key:1,class:"mr-8 avatar-purple",shape:"square",size:20,style:{background:"none"}},{default:U(()=>Q[3]||(Q[3]=[ge("img",{src:YC,style:{width:"100%"},alt:""},null,-1)])),_:1})):(rt(),Yt(H,{key:2,class:"mr-8 avatar-blue",shape:"square",size:20},{default:U(()=>Q[4]||(Q[4]=[ge("img",{src:qC,style:{width:"58%"},alt:""},null,-1)])),_:1})),ge("div",{class:"ellipsis",title:(gt=Hr(lm)(O.value,Se,"id"))==null?void 0:gt.name},Ve((dt=Hr(lm)(O.value,Se,"id"))==null?void 0:dt.name),9,tz)]),F(V,{text:"",onClick:zt=>j(Se)},{default:U(()=>[F(D,null,{default:U(()=>[F(de)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),F(Ce,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[ge("div",nz,[ge("span",null,Ve(Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),F(V,{type:"primary",link:"",onClick:M},{default:U(()=>[F(D,null,{default:U(()=>[F(Me)]),_:1})]),_:1})])]),default:U(()=>[ge("div",rz,[F($e,null,{default:U(()=>[F(He,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(Ve(Y.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),F(He,{span:12,class:"lighter"},{default:U(()=>[It(Ve(Y.$t(Hr(c2)[h.value.dataset_setting.search_mode])),1)]),_:1}),F(He,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(Ve(Y.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),F(He,{span:12,class:"lighter"},{default:U(()=>{var he;return[It(Ve((he=h.value.dataset_setting.similarity)==null?void 0:he.toFixed(3)),1)]}),_:1}),F(He,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(Ve(Y.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),F(He,{span:12,class:"lighter"},{default:U(()=>[It(Ve(h.value.dataset_setting.top_n),1)]),_:1}),F(He,{span:12,class:"color-secondary lighter"},{default:U(()=>[It(Ve(Y.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),F(He,{span:12,class:"lighter"},{default:U(()=>[It(Ve(h.value.dataset_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),F(Ce,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(wi,{ref_key:"nodeCascaderRef",ref:c,nodeModel:Y.nodeModel,class:"w-full",placeholder:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.question_reference_address,"onUpdate:modelValue":Q[0]||(Q[0]=he=>h.value.question_reference_address=he)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),F(tD,{ref_key:"ParamSettingDialogRef",ref:_,onRefresh:k},null,512),F(nD,{ref_key:"AddDatasetDialogRef",ref:E,onAddData:I,data:O.value,onRefresh:q,loading:S.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class iz extends Gi{constructor(t){super(t,oz)}}const az={type:"search-dataset-node",model:Vi,view:iz},uz=Object.freeze(Object.defineProperty({__proto__:null,default:az},Symbol.toStringTag,{value:"Module"})),lz={class:"title-decoration-1 mb-8"},sz={class:"flex-between w-full"},cz={class:"flex-between w-full"},fz={class:"flex align-center"},dz={class:"mr-4"},pz=Dr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=nf(),{params:{id:n}}=xl.config.globalProperties.$route,a=e,r=St(null),s=St(),c=St(),v=()=>{var O;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(O=s.value)==null?void 0:O.validate()]).catch(S=>Promise.reject({node:a.nodeModel,errMessage:S}))},h=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),g={stt_model_id:"",is_result:!0,audio_list:[]},_=Oo({get:()=>(a.nodeModel.properties.node_data||at.set(a.nodeModel.properties,"node_data",g),a.nodeModel.properties.node_data),set:O=>{at.set(a.nodeModel.properties,"node_data",O)}});function E(){n?ha.getApplicationSTTModel(n).then(O=>{r.value=at.groupBy(O==null?void 0:O.data,"provider")}):t.asyncGetModel().then(O=>{r.value=at.groupBy(O==null?void 0:O.data,"provider")})}return $o(()=>{E(),at.set(a.nodeModel,"validate",v)}),(O,S)=>{const k=ue("ModelSelect"),M=ue("el-form-item"),j=ue("AppIcon"),I=ue("el-tooltip"),N=ue("el-switch"),B=ue("el-form"),q=ue("el-card");return rt(),Yt(Ui,{"node-model":O.nodeModel},{default:U(()=>[ge("h5",lz,Ve(O.$t("views.applicationWorkflow.nodeSetting")),1),F(q,{shadow:"never",class:"card-never"},{default:U(()=>[F(B,{onSubmit:S[4]||(S[4]=xn(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:U(()=>[F(M,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:U(()=>[ge("div",sz,[ge("div",null,[ge("span",null,[It(Ve(O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),S[5]||(S[5]=ge("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(k,{onWheel:h,teleported:!1,modelValue:_.value.stt_model_id,"onUpdate:modelValue":S[0]||(S[0]=ee=>_.value.stt_model_id=ee),placeholder:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(M,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:U(()=>[ge("div",cz,[ge("div",null,[ge("span",null,[It(Ve(O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),S[6]||(S[6]=ge("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(wi,{ref_key:"nodeCascaderRef",ref:c,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:_.value.audio_list,"onUpdate:modelValue":S[1]||(S[1]=ee=>_.value.audio_list=ee)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(M,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",fz,[ge("div",dz,[ge("span",null,Ve(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(N,{size:"small",modelValue:_.value.is_result,"onUpdate:modelValue":S[2]||(S[2]=ee=>_.value.is_result=ee)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class hz extends Gi{constructor(t){super(t,pz)}}const vz={type:"speech-to-text-node",model:Vi,view:hz},yz=Object.freeze(Object.defineProperty({__proto__:null,default:vz},Symbol.toStringTag,{value:"Module"})),mz={class:"title-decoration-1 mb-8"},gz=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=St(!1),a=[{label:nn("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:nn("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:nn("chat.chatId"),value:"chat_id"}],r=()=>{const v=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>at.cloneDeep(g.properties.user_input_field_list)).reduce((g,_)=>[...g,..._],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),h=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>at.cloneDeep(g.properties.api_input_field_list)).reduce((g,_)=>[...g,..._],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...v,...h]},s=()=>{const v=r();at.set(t.nodeModel.properties.config,"globalFields",[...a,...v])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let v=at.cloneDeep(t.nodeModel.properties.config.fields);const h=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").filter(_=>_.properties.node_data.file_upload_enable).map(_=>at.cloneDeep(_.properties.node_data.file_upload_setting)).filter(_=>_);if(v=v.filter(_=>_.value!=="image"&&_.value!=="document"&&_.value!=="audio"&&_.value!=="video"),h.length===0){at.set(t.nodeModel.properties.config,"fields",v);return}let g=[];h[0].document&&g.push({label:nn("common.fileUpload.document"),value:"document"}),h[0].image&&g.push({label:nn("common.fileUpload.image"),value:"image"}),h[0].audio&&g.push({label:nn("common.fileUpload.audio"),value:"audio"}),h[0].video&&g.push({label:nn("common.fileUpload.video"),value:"video"}),at.set(t.nodeModel.properties.config,"fields",[...v,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),$o(()=>{s(),c()}),(v,h)=>{const g=ue("AppIcon"),_=ue("el-button"),E=ue("el-tooltip");return rt(),Yt(Ui,{nodeModel:v.nodeModel},{default:U(()=>[ge("h5",mz,Ve(v.$t("views.applicationWorkflow.variable.global")),1),(rt(!0),Dn(ni,null,Bi(v.nodeModel.properties.config.globalFields,(O,S)=>(rt(),Dn("div",{key:S,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:h[0]||(h[0]=k=>n.value=!0),onMouseleave:h[1]||(h[1]=k=>n.value=!1)},[ge("span",null,Ve(O.label)+" "+Ve("{"+O.value+"}"),1),n.value===!0?(rt(),Yt(E,{key:0,effect:"dark",content:v.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[F(_,{link:"",onClick:k=>Hr(ZA)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:U(()=>[F(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):fr("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class _z extends Gi{constructor(t){super(t,gz)}}const bz={type:"start-node",model:Vi,view:_z},wz=Object.freeze(Object.defineProperty({__proto__:null,default:bz},Symbol.toStringTag,{value:"Module"})),Ez={class:"title-decoration-1 mb-8"},Oz={class:"flex-between w-full"},xz={class:"flex-between w-full"},Sz={class:"flex align-center"},Az={class:"mr-4"},Tz=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=St(),{model:n}=nf(),{params:{id:a}}=xl.config.globalProperties.$route,r=e,s=St(null),c=St(),v=St(),h=()=>{var M;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(M=c.value)==null?void 0:M.validate()]).catch(j=>Promise.reject({node:r.nodeModel,errMessage:j}))},g=M=>M.ctrlKey===!0?(M.preventDefault(),!0):(M.stopPropagation(),!0),_={tts_model_id:"",is_result:!0,content_list:[],model_params_setting:{}},E=Oo({get:()=>(r.nodeModel.properties.node_data||at.set(r.nodeModel.properties,"node_data",_),r.nodeModel.properties.node_data),set:M=>{at.set(r.nodeModel.properties,"node_data",M)}});function O(){a?ha.getApplicationTTSModel(a).then(M=>{s.value=at.groupBy(M==null?void 0:M.data,"provider")}):n.asyncGetModel().then(M=>{s.value=at.groupBy(M==null?void 0:M.data,"provider")})}const S=()=>{var j;const M=E.value.tts_model_id;if(!M){lp(nn("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(j=t.value)==null||j.open(M,a,E.value.model_params_setting)},k=M=>{E.value.model_params_setting=M};return $o(()=>{O(),at.set(r.nodeModel,"validate",h)}),(M,j)=>{const I=ue("Setting"),N=ue("el-icon"),B=ue("el-button"),q=ue("ModelSelect"),ee=ue("el-form-item"),Y=ue("AppIcon"),Q=ue("el-tooltip"),z=ue("el-switch"),D=ue("el-form"),V=ue("el-card");return rt(),Yt(Ui,{"node-model":M.nodeModel},{default:U(()=>[ge("h5",Ez,Ve(M.$t("views.applicationWorkflow.nodeSetting")),1),F(V,{shadow:"never",class:"card-never"},{default:U(()=>[F(D,{onSubmit:j[4]||(j[4]=xn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(ee,{label:M.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"tts_model_id",rules:{required:!0,message:M.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:U(()=>[ge("div",Oz,[ge("div",null,[ge("span",null,[It(Ve(M.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),j[5]||(j[5]=ge("span",{class:"danger"},"*",-1))])]),F(B,{type:"primary",link:"",onClick:S,disabled:!E.value.tts_model_id,class:"mr-4"},{default:U(()=>[F(N,null,{default:U(()=>[F(I)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(q,{onWheel:g,teleported:!1,modelValue:E.value.tts_model_id,"onUpdate:modelValue":j[0]||(j[0]=X=>E.value.tts_model_id=X),placeholder:M.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(ee,{prop:"content_list",label:M.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:M.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:U(()=>[ge("div",xz,[ge("div",null,[ge("span",null,[It(Ve(M.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),j[6]||(j[6]=ge("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(wi,{ref_key:"nodeCascaderRef",ref:v,nodeModel:M.nodeModel,class:"w-full",placeholder:M.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:E.value.content_list,"onUpdate:modelValue":j[1]||(j[1]=X=>E.value.content_list=X)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(ee,{label:M.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:j[3]||(j[3]=xn(()=>{},["prevent"]))},{label:U(()=>[ge("div",Sz,[ge("div",Az,[ge("span",null,Ve(M.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(Q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[It(Ve(M.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(z,{size:"small",modelValue:E.value.is_result,"onUpdate:modelValue":j[2]||(j[2]=X=>E.value.is_result=X)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(nT,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:k},null,512)]),_:1},8,["node-model"])}}});class Mz extends Gi{constructor(t){super(t,Tz)}}const Pz={type:"text-to-speech-node",model:Vi,view:Mz},kz=Object.freeze(Object.defineProperty({__proto__:null,default:Pz},Symbol.toStringTag,{value:"Module"})),Nz={class:"flex-between"},Rz={class:"flex-between mb-8"},jz={class:"lighter"},Cz={key:0,class:"flex w-full"},Dz=Dr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],a=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r={variable_list:[{id:jv(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=Oo({get:()=>(t.nodeModel.properties.node_data||at.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:S=>{at.set(t.nodeModel.properties,"node_data",S)}}),c=St(),v=St(),h=St(),g=async()=>{var k;let S=[(k=c.value)==null?void 0:k.validate(),...v.value.map(M=>M.validate())];return h.value&&(S=[...S,...v.value.map(M=>M.validate())]),Promise.all(S).catch(M=>Promise.reject({node:t.nodeModel,errMessage:M}))};function _(){const S=at.cloneDeep(t.nodeModel.properties.node_data.variable_list),k={id:jv(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};S.push(k),at.set(t.nodeModel.properties.node_data,"variable_list",S)}function E(S){const k=at.cloneDeep(t.nodeModel.properties.node_data.variable_list);k.splice(S,1),at.set(t.nodeModel.properties.node_data,"variable_list",k)}function O(S){t.nodeModel.graphModel.nodes.map(k=>{k.id==="start-node"&&k.properties.config.globalFields.forEach(M=>{M.value===S.fields[1]&&(S.name=M.label)})})}return $o(()=>{var S;typeof((S=t.nodeModel.properties.node_data)==null?void 0:S.is_result)>"u"&&yp(t.nodeModel)&&at.set(t.nodeModel.properties.node_data,"is_result",!0),at.set(t.nodeModel,"validate",g)}),(S,k)=>{const M=ue("Delete"),j=ue("el-icon"),I=ue("el-button"),N=ue("el-form-item"),B=ue("el-option"),q=ue("el-select"),ee=ue("el-input"),Y=ue("el-input-number"),Q=ue("CodemirrorEditor"),z=ue("el-card"),D=ue("Plus"),V=ue("el-form");return rt(),Yt(Ui,{nodeModel:S.nodeModel},{default:U(()=>[F(V,{onSubmit:k[0]||(k[0]=xn(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[(rt(!0),Dn(ni,null,Bi(s.value.variable_list,(X,H)=>(rt(),Yt(z,{key:X.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(N,{label:S.$t("views.applicationWorkflow.variable.label")},{label:U(()=>[ge("div",Nz,[ge("div",null,[It(Ve(S.$t("views.applicationWorkflow.variable.label"))+" ",1),k[1]||(k[1]=ge("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(rt(),Yt(I,{key:0,text:"",onClick:de=>E(H)},{default:U(()=>[F(j,null,{default:U(()=>[F(M)]),_:1})]),_:2},1032,["onClick"])):fr("",!0)])]),default:U(()=>[F(wi,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:X.fields,"onUpdate:modelValue":de=>X.fields=de,global:!0,onChange:de=>O(X)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),ge("div",Rz,[ge("span",jz,[It(Ve(S.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),k[2]||(k[2]=ge("span",{class:"danger"},"*",-1))]),F(q,{teleported:!1,modelValue:X.source,"onUpdate:modelValue":de=>X.source=de,size:"small",style:{width:"85px"}},{default:U(()=>[F(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),X.source==="custom"?(rt(),Dn("div",Cz,[F(q,{modelValue:X.type,"onUpdate:modelValue":de=>X.type=de,style:{"max-width":"85px"},class:"mr-8",onChange:de=>s.value.variable_list[H].value=null},{default:U(()=>[(rt(),Dn(ni,null,Bi(n,de=>F(B,{key:de,label:de,value:de},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),X.type==="string"?(rt(),Yt(N,{key:0,prop:"variable_list."+H+".value",rules:{message:Hr(nn)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[F(ee,{modelValue:X.value,"onUpdate:modelValue":de=>X.value=de,placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:a},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):X.type==="num"?(rt(),Yt(N,{key:1,prop:"variable_list."+H+".value",rules:{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[F(Y,{modelValue:X.value,"onUpdate:modelValue":de=>X.value=de},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):X.type==="json"?(rt(),Yt(N,{key:2,class:"w-full",prop:"variable_list."+H+".value",rules:[{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(de,Ce,Me)=>{try{JSON.parse(Ce),Me()}catch{Me(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:U(()=>[F(Q,{title:"JSON",modelValue:X.value,"onUpdate:modelValue":de=>X.value=de,style:{height:"100px",width:"155px"},onSubmitDialog:de=>s.value.variable_list[H].value=de},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):fr("",!0)])):(rt(),Yt(N,{key:1},{default:U(()=>[F(wi,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:h,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:X.reference,"onUpdate:modelValue":de=>X.reference=de},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),F(I,{link:"",type:"primary",onClick:_},{default:U(()=>[F(j,{class:"mr-4"},{default:U(()=>[F(D)]),_:1}),It(" "+Ve(S.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class Iz extends Gi{constructor(t){super(t,Dz)}}const Lz={type:"variable-assign-node",model:Vi,view:Iz},Fz=Object.freeze(Object.defineProperty({__proto__:null,default:Lz},Symbol.toStringTag,{value:"Module"})),mS=Dr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>hu((rt(),Dn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=xn(()=>{},["stop"])),onClick:r[1]||(r[1]=xn(()=>{},["stop"]))},[(rt(),Dn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[ge("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),ge("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Ih,t.model.isHovered]])}});function $z(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const Bz=32,Uz=32;class Gz extends cn.BezierEdge{constructor(){super();ca(this,"isMounted");ca(this,"customLineApp");ca(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");$z(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&($m()?l2(this.targetId(),mS,n,this.props.model,a,(s,c)=>({model:s,graph:c})):(this.customLineApp=QA({render:()=>Fh(mS,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),$m()&&s2(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=Bz,customHeight:s=Uz}=n.getProperties(),{startPoint:c,endPoint:v,path:h,isAnimation:g,arrowConfig:_}=n,E=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:S,strokeDashoffset:k,animationName:M,animationDuration:j,animationIterationCount:I,animationTimingFunction:N,animationDirection:B}=E,q={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},ee=n.getEdgeStyle(),Y={width:r,height:s};return setTimeout(()=>{const Q=document.getElementById(a);Q&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(Q))},0),delete ee.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:h,...ee,..._,...g?{strokeDasharray:O,stroke:S,style:{strokeDashoffset:k,animationName:M,animationDuration:j,animationIterationCount:I,animationTimingFunction:N,animationDirection:B}}:{}}),cn.h("foreignObject",{...q,y:q.y+5,x:q.x+5,style:{}},[cn.h("div",{id:a,style:{...Y},className:"lf-custom-edge-wrapper"})])])}}class Vz extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const Wz={type:"app-edge",view:Gz,model:Vz},zz=Dr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var h;(h=t.lf)==null||h.zoom(!0,[0,0])}function a(){var h;(h=t.lf)==null||h.zoom(!1,[0,0])}function r(){var h,g,_;(h=t.lf)==null||h.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(_=t.lf)==null||_.fitView()}const s=()=>{var h;(h=t.lf)==null||h.extension.dagre.layout()},c=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(h,g)=>{const _=ue("ZoomOut"),E=ue("el-icon"),O=ue("el-tooltip"),S=ue("el-button"),k=ue("ZoomIn"),M=ue("AppIcon"),j=ue("el-divider"),I=ue("el-card");return rt(),Yt(I,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:U(()=>[F(S,{link:"",onClick:a},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:U(()=>[F(E,{size:16,title:h.$t("views.applicationWorkflow.control.zoomOut")},{default:U(()=>[F(_)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:n},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:U(()=>[F(E,{size:16,title:h.$t("views.applicationWorkflow.control.zoomIn")},{default:U(()=>[F(k)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:r},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:U(()=>[F(M,{iconName:"app-fitview",title:h.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(j,{direction:"vertical"}),F(S,{link:"",onClick:c},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:U(()=>[F(M,{style:{"font-size":"16px"},iconName:"app-retract",title:h.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:v},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:U(()=>[F(M,{style:{"font-size":"16px"},iconName:"app-extend",title:h.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:s},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:U(()=>[F(M,{style:{"font-size":"16px"},iconName:"app-beautify",title:h.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let Fs=null;function gS(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function _S(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const yh=40;let fm=40;function Hz(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var E,O;if(fm=yh,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,h=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(h):!0)||h.nodes.length===0&&h.edges.length===0)return Fs=null,!0;const _=h.nodes.filter(S=>S.type===ti.Start||S.type===ti.Base);if(_.length>0){da(((O=(E=_[0])==null?void 0:E.properties)==null?void 0:O.stepName)+nn("views.applicationWorkflow.tip.cannotCopy"));return}return Fs=h,Fs.nodes.forEach(S=>gS(S,yh)),Fs.edges.forEach(S=>_S(S,yh)),lp(nn("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;if(Fs&&(Fs.nodes||Fs.edges)){e.clearSelectElements();const v=e.addElements(Fs,fm);if(!v)return!0;v.nodes.forEach(h=>e.selectElementById(h.id,!0)),v.edges.forEach(h=>e.selectElementById(h.id,!0)),Fs.nodes.forEach(h=>gS(h,yh)),Fs.edges.forEach(h=>_S(h,yh)),fm=fm+yh}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(_=>e.deleteEdge(_.id));return}const h=v.nodes.filter(_=>["start-node","base-node"].includes(_.type));if(h.length>0){da(`${(g=h[0].properties)==null?void 0:g.stepName}${nn("views.applicationWorkflow.delete.deleteMessage")}`);return}return f1(nn("common.tip"),nn("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:nn("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;v.edges.forEach(_=>e.deleteEdge(_.id)),v.nodes.forEach(_=>e.deleteNode(_.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class Xz{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const Yz=e=>typeof e=="string",bS=Array.isArray,Bm=e=>typeof e=="number",f2=e=>e!==null&&typeof e=="object",Um=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Um(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Um(t[n])}),t}return e},mh=(e,t)=>{const n=e[t];return f2(n)?n.cell:n},wS=(e,t,n)=>{let a;return n?a=n:Bm(e)?a=()=>e:a=()=>t,a},qz=(e,t)=>{if(e!=="next"&&e!=="prev")return t},ES=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let Kz=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return ES(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&ES(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,qz)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var kh;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(kh||(kh={}));function OS(e,t){var n=e.get(t)||0;e.set(t,n+1)}function xS(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function d2(e,t,n,a){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+kh.EDGE_KEY_DELIM+s+kh.EDGE_KEY_DELIM+(a===void 0?kh.DEFAULT_EDGE_NAME:a)}function SS(e,t,n,a){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return a!==void 0&&(c.name=a),c}function h0(e,t){return d2(e,t.v,t.w,t.name)}function AS(e){return typeof e=="function"}var Zz=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),s={id:n,value:a,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},Jz=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},Qz=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Zz(t),edges:Jz(t),value:t.graph()};return n.value===void 0&&delete n.value,n},eH=function(t){var n=new Qh(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function TS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function MS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(n),!0).forEach(function(a){tH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function rH(e,t,n){return t&&PS(e.prototype,t),n&&PS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var oH={compound:!1,multigraph:!1,directed:!0},Qh=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nH(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=kh.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return AS(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var h=s===void 0?t.GRAPH_NODE:s,g=t.parent(h);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,h);var _=t.childrenMap.get(h);return _.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(h,_),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,h=new e({directed:s,multigraph:c,compound:v});if(h.setGraph(t.graph()),t.nodes().forEach(function(_){r(_)&&h.setNode(_,t.node(_))}),t.edges().forEach(function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdgeObj(_,t.edge(_))}),v){var g=function(E){for(var O=t.parent(E);O!==void 0&&!h.hasNode(O);)O=t.parent(O);return O};h.nodes().forEach(function(_){h.setParent(_,g(_))})}return h},this.setDefaultEdgeLabel=function(r){return AS(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(h0(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(h0(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return Qz(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=MS(MS({},oH),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return rH(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,h=this.childrenMap,g=this.inEdgesMap,_=this.outEdgesMap,E=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||s(n)),c()){var S;v==null||v.set(n,this.GRAPH_NODE),h==null||h.set(n,new Map),h!=null&&h.has(this.GRAPH_NODE)||h==null||h.set(this.GRAPH_NODE,new Map),h==null||(S=h.get(this.GRAPH_NODE))===null||S===void 0||S.set(n,!0)}return[g,_,E,O].forEach(function(k){return k.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(j){a.removeEdge(j.v,j.w,j.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,h=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var _,E,O;this.removeFromParentsChildList(n),(_=this.parentMap)===null||_===void 0||_.delete(n),(E=this.children(n))===null||E===void 0||E.forEach(function(M){return a.setParent(M)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var S=s.get(n),k=c.get(n);Array.from(S.values()).forEach(function(M){return r(M)}),Array.from(k.values()).forEach(function(M){return r(M)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),h.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,s){var c,v,h=SS(this.isDirected(),n,a,s),g=h0(this.isDirected(),h),_=h.v,E=h.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(E),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(_,E,s)),Object.freeze(h),this.edgesMap.set(g,h);var O=this.predecessorsMap.get(E),S=this.successorsMap.get(_);return OS(O,_),OS(S,E),(c=this.inEdgesMap.get(E))===null||c===void 0||c.set(g,h),(v=this.outEdgesMap.get(_))===null||v===void 0||v.set(g,h),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var s=d2(this.isDirected(),n,a,r),c=this.edgesMap.get(s);if(c){var v=SS(this.isDirected(),n,a,r),h=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var _=this.predecessorsMap.get(g),E=this.successorsMap.get(h);xS(_,h),xS(E,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(h).delete(s),this.edgeCountNum-=1}return this}}]),e}();Qh.fromJSON=eH;function kS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function iH(e,t,n){return t&&kS(e.prototype,t),n&&kS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p2=iH(function e(){var t=this;aH(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,s=t.keyIndice,c=[r[n],r[a]],v=c[0],h=c[1];r[n]=h,r[a]=v,s.set(v.key,a),s.set(h.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=a[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var a=t.arr,r=n<<1,s=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,s<a.length&&(c=a[s].priority<a[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),uH=function(t,n){var a=new Qh,r=new Map,s=new p2,c;function v(_){var E=_.v===c?_.w:_.v,O=s.priority(E);if(O!==void 0){var S=n(_);S<O&&(r.set(E,c),s.decrease(E,S))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(_){s.add(_,Number.POSITIVE_INFINITY),a.setNode(_)}),s.decrease(t.nodes()[0],0);for(var h=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(h)throw new Error("Input graph is not connected: "+t.graph());h=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return a},lH=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var h=v.pop();if(!n.has(h)){var g,_;n.add(h),c.push(h),(g=t.successors(h))===null||g===void 0||g.forEach(function(E){return v.push(E)}),(_=t.predecessors(h))===null||_===void 0||_.forEach(function(E){return v.push(E)})}}c.length&&a.push(c)}),a},sH=function e(t,n,a,r,s,c){r.includes(n)||(r.push(n),a||c.push(n),s(n).forEach(function(v){return e(t,v,a,r,s,c)}),a&&c.push(n))},X1=function(t,n,a){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(h){if(t.hasNode(h))sH(t,h,a==="post",v,s,c);else throw new Error("Graph does not have node: "+h)}),c};function cH(e,t){return hH(e)||pH(e,t)||dH(e,t)||fH()}function fH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dH(e,t){if(e){if(typeof e=="string")return NS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NS(e,t)}}function NS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function pH(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(h){s=!0,v=h}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return a}}function hH(e){if(Array.isArray(e))return e}var vH=function(){return 1},h2=function(t,n,a,r){return yH(t,n,a||vH,r||function(s){return t.outEdges(s)})},yH=function(t,n,a,r){var s=new Map,c=new p2,v,h,g=function(O){var S=O.v!==v?O.v:O.w,k=s.get(S),M=a(O),j=h.distance+M;if(M<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+M);j<k.distance&&(k.distance=j,k.predecessor=v,c.decrease(S,j))};for(t.nodes().forEach(function(E){var O=E===n?0:Number.POSITIVE_INFINITY;s.set(E,{distance:O}),c.add(E,O)});c.size()>0&&(v=c.removeMin(),h=s.get(v),!(h&&h.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var _={};return Array.from(s.entries()).forEach(function(E){var O=cH(E,2),S=O[0],k=O[1];return _[String(S)]=k,_}),_},mH=function(t,n,a){var r={};return t.nodes().forEach(function(s){return r[String(s)]=h2(t,s,n,a),r}),r},v2=function(t){var n=0,a=[],r=new Map,s=[];function c(v){var h,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,a.push(v),(h=t.successors(v))===null||h===void 0||h.forEach(function(S){var k;if(r.has(S)){if(!((k=r.get(S))===null||k===void 0)&&k.onStack){var j=r.get(S);g.lowlink=Math.min(g.lowlink,j.index)}}else{c(S);var M=r.get(S);g.lowlink=Math.min(g.lowlink,M.lowlink)}}),g.lowlink===g.index){var _=[],E;do{E=a.pop();var O=r.get(E);O.onStack=!1,_.push(E)}while(v!==E);s.push(_)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},gH=function(t){return v2(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function RS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _H(e,t,n){return t&&RS(e.prototype,t),n&&RS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uv(e,t)}function EH(e){var t=y2();return function(){var a=Gv(e),r;if(t){var s=Gv(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return OH(this,r)}}function OH(e,t){if(t&&(Y0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xH(e)}function xH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q0(e){var t=typeof Map=="function"?new Map:void 0;return q0=function(a){if(a===null||!SH(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return bm(a,arguments,Gv(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Uv(r,a)},q0(e)}function bm(e,t,n){return y2()?bm=Reflect.construct:bm=function(r,s,c){var v=[null];v.push.apply(v,s);var h=Function.bind.apply(r,v),g=new h;return c&&Uv(g,c.prototype),g},bm.apply(null,arguments)}function y2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function SH(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Uv(e,t){return Uv=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Uv(e,t)}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Gv(e)}var K0=function(e){wH(n,e);var t=EH(n);function n(){return bH(this,n),t.apply(this,arguments)}return _H(n)}(q0(Error));function m2(e){var t=new Set,n=new Set,a=[];function r(s){if(n.has(s))throw new K0;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),a.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new K0;return a}var AH=function(t){try{m2(t)}catch(n){if(n instanceof K0)return!1;throw n}return!0},TH=function(t,n){return X1(t,n,"post")},MH=function(t,n){return X1(t,n,"pre")},PH=function(){return 1};function kH(e,t,n){return NH(e,t||PH,n||function(a){return e.outEdges(a)})}function NH(e,t,n){var a={},r=e.nodes();return r.forEach(function(s){var c=String(s);a[c]={},a[c][c]={distance:0},r.forEach(function(v){s!==v&&(a[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var h=v.v===s?v.w:v.v,g=t(v);a[c][String(h)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=a[c];r.forEach(function(h){var g=String(h),_=a[g];r.forEach(function(E){var O=String(E),S=_[c],k=v[O],M=_[O],j=S.distance+k.distance;j<M.distance&&(M.distance=j,M.predecessor=k.predecessor)})})}),a}const RH=Object.freeze(Object.defineProperty({__proto__:null,components:lH,dfs:X1,dijkstra:h2,dijkstraAll:mH,findCycles:gH,floydWarshall:kH,isAcyclic:AH,postorder:TH,preorder:MH,prim:uH,tarjan:v2,topsort:m2},Symbol.toStringTag,{value:"Module"}));class jH extends Kz{}class CH extends Qh{}const DH=()=>1,IH=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=FH(e,t||DH);return(n=LH(a.graph,a.buckets,a.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},LH=(e,t,n)=>{let a=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)v0(e,t,n,c);for(;c=r.dequeue();)v0(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){a=a.concat(v0(e,t,n,c,!0));break}}}return a},v0=(e,t,n,a,r)=>{var s,c;const v=[];return(s=e.inEdges(a.v))===null||s===void 0||s.forEach(h=>{const g=e.edge(h),_=e.node(h.v);r&&v.push({v:h.v,w:h.w,in:0,out:0}),_.out===void 0&&(_.out=0),_.out-=g,Z0(t,n,_)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(h=>{const g=e.edge(h),_=h.w,E=e.node(_);E.in===void 0&&(E.in=0),E.in-=g,Z0(t,n,E)}),e.removeNode(a.v),r?v:void 0},FH=(e,t)=>{const n=new CH;let a=0,r=0;e.nodes().forEach(h=>{n.setNode(h,{v:h,in:0,out:0})}),e.edges().forEach(h=>{const g=n.edge(h)||0,_=(t==null?void 0:t(h))||1,E=g+_;n.setEdge(h.v,h.w,E),r=Math.max(r,n.node(h.v).out+=_),a=Math.max(a,n.node(h.w).in+=_)});const s=[],c=r+a+3;for(let h=0;h<c;h++)s.push(new jH);const v=a+1;return n.nodes().forEach(h=>{Z0(s,v,n.node(h))}),{buckets:s,zeroIdx:v,graph:n}},Z0=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},$H=e=>{const t=a=>r=>{var s;return((s=a.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?IH(e,t(e)):BH(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},BH=e=>{const t=[],n={},a={},r=s=>{var c;a[s]||(a[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},UH=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},jS={run:$H,undo:UH};class tf extends Qh{}const GH=(e,t)=>Number(e)-Number(t),ev=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},VH=e=>{const t=new tf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},g2=e=>{const t=new tf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},WH=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),CS=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-a;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let h,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),h=v*r/s,g=v):(r<0&&(c=-c),h=c,g=c*s/r),{x:n+h,y:a+g}},Vv=e=>{const t=[],n=_2(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,s)=>{var c,v;return GH((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},zH=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},HH=e=>{const t=e.nodes(),n=t.filter(v=>{var h;return((h=e.node(v))===null||h===void 0?void 0:h.rank)!==void 0}).map(v=>e.node(v).rank),a=Math.min(...n),r=[];t.forEach(v=>{var h;const g=(((h=e.node(v))===null||h===void 0?void 0:h.rank)||0)-a;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const h=r[v];h===void 0?v%c!==0&&(s-=1):s&&(h==null||h.forEach(g=>{const _=e.node(g);_&&(_.rank=_.rank||0,_.rank+=s)}))}},DS=(e,t,n,a)=>{const r={width:0,height:0};return Bm(n)&&Bm(a)&&(r.rank=n,r.order=a),ev(e,"border",r,t)},_2=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},XH=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},b2=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},w2=(e,t)=>t(),Y1=(e,t)=>e.reduce((n,a)=>{const r=t(n),s=t(a);return r>s?a:n}),YH=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>qH(e,t))},qH=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),h=v.labelRank;if(s===a+1)return;e.removeEdgeObj(t);const g=e.graph();let _,E,O;for(O=0,++a;a<s;++O,++a)v.points=[],E={edgeLabel:v,width:0,height:0,edgeObj:t,rank:a},_=ev(e,"edge",E,"_d"),a===h&&(E.width=v.width,E.height=v.height,E.dummy="edge-label",E.labelpos=v.labelpos),e.setEdge(n,_,{weight:v.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(_)),n=_;e.setEdge(n,r,{weight:v.weight},c)},KH=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let s;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=s,a=e.node(c)})},IS={run:YH,undo:KH},E2=e=>{var t;const n={},a=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(h=>{const g=a(h.w),_=e.edge(h).minlen,E=g-_;E&&(v===void 0||E<v)&&(v=E)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},ZH=e=>{var t;const n={};let a;const r=v=>{var h;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let _;return(h=e.outEdges(v))===null||h===void 0||h.forEach(E=>{const O=r(E.w),S=e.edge(E).minlen,k=O-S;k&&(_===void 0||k<_)&&(_=k)}),_||(_=0),(a===void 0||_<a)&&(a=_),g.rank=_,_};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),a===void 0&&(a=0);const s={},c=(v,h)=>{var g;const _=e.node(v),E=isNaN(_.layer)?h:_.layer;(_.rank===void 0||_.rank<E)&&(_.rank=E),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(O=>{c(O.w,E+e.edge(O).minlen)}))};e.nodes().forEach(v=>{const h=e.node(v);h&&(isNaN(h.layer)?h.rank-=a:c(v,h.layer))})},id=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,JH=e=>{const t=new tf({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,s;for(;QH(t,e)<a;)r=O2(t,e),s=t.hasNode(r.v)?id(e,r):-id(e,r),x2(t,e,s);return t},QH=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const s=r.v,c=a===s?r.w:s;!e.hasNode(c)&&!id(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},eX=e=>{const t=new tf({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;tX(t,e)<a;)r=O2(t,e),s=t.hasNode(r.v)?id(e,r):-id(e,r),x2(t,e,s);return t},tX=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(s=>{const c=s.v,v=a===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!id(t,s))&&(e.setNode(v,{}),e.setEdge(a,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},O2=(e,t)=>Y1(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?id(t,n):1/0),x2=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:nX,postorder:rX}=RH,oX=e=>{const t=VH(e);E2(t);const n=JH(t);A2(n),S2(n,t);let a,r;for(;a=uX(n);)r=lX(n,t,a),sX(n,t,a,r)},S2=(e,t)=>{let n=rX(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{iX(e,t,a)})},iX=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=aX(e,t,n)},aX=(e,t,n)=>{var a;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),h=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),h=v.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(g=>{const _=g.v===n,E=_?g.w:g.v;if(E!==s){const O=_===c,S=t.edge(g).weight;if(h+=O?S:-S,fX(e,n,E)){const k=e.edgeFromArgs(n,E).cutvalue;h+=O?-k:k}}}),h},A2=(e,t=e.nodes()[0])=>{T2(e,{},1,t)},T2=(e,t,n,a,r)=>{var s;const c=n;let v=n;const h=e.node(a);return t[a]=!0,(s=e.neighbors(a))===null||s===void 0||s.forEach(g=>{t[g]||(v=T2(e,t,v,g,a))}),h.low=c,h.lim=v++,r?h.parent=r:delete h.parent,v},uX=e=>e.edges().find(t=>e.edge(t).cutvalue<0),lX=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const s=e.node(a),c=e.node(r);let v=s,h=!1;s.lim>c.lim&&(v=c,h=!0);const g=t.edges().filter(_=>h===LS(e,e.node(_.v),v)&&h!==LS(e,e.node(_.w),v));return Y1(g,_=>id(t,_))},sX=(e,t,n,a)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(a.v,a.w,{}),A2(e),S2(e,t),cX(e,t)},cX=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let a=nX(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},fX=(e,t,n)=>e.hasEdge(t,n),LS=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,dX=e=>{switch(e.graph().ranker){case"network-simplex":hX(e);break;case"tight-tree":FS(e);break;case"longest-path":pX(e);break;default:FS(e)}},pX=E2,FS=e=>{ZH(e),eX(e)},hX=e=>{oX(e)},vX=e=>{var t;const n={};let a=0;const r=s=>{var c;const v=a;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},yX=(e,t,n,a)=>{const r=[],s=[],c=Math.min(t[n].low,t[a].low),v=Math.max(t[n].lim,t[a].lim);let h,g;h=n;do h=e.parent(h),r.push(h);while(h&&(t[h].low>c||v>t[h].lim));for(g=h,h=a;h&&h!==g;)s.push(h),h=e.parent(h);return{lca:g,path:r.concat(s.reverse())}},mX=e=>{var t;const n=vX(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,s;let c=a,v=e.node(c);const h=v.edgeObj;if(!h)return;const g=yX(e,n,h.v,h.w),_=g.path,E=g.lca;let O=0,S=_[O],k=!0;for(;c!==h.w;){if(v=e.node(c),k){for(;S!==E&&((r=e.node(S))===null||r===void 0?void 0:r.maxRank)<v.rank;)O++,S=_[O];S===E&&(k=!1)}if(!k){for(;O<_.length-1&&((s=e.node(_[O+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)O++;S=_[O]}e.setParent(c,S),c=e.successors(c)[0]}})},gX=e=>{var t;const n=ev(e,"root",{},"_root"),a=_X(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(h=>{e.edge(h).minlen*=c});const v=bX(e)+1;(t=e.children())===null||t===void 0||t.forEach(h=>{M2(e,n,c,v,s,a,h)}),e.graph().nodeRankFactor=c},M2=(e,t,n,a,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const h=DS(e,"_bt"),g=DS(e,"_bb"),_=e.node(c);e.setParent(h,c),_.borderTop=h,e.setParent(g,c),_.borderBottom=g,v==null||v.forEach(E=>{M2(e,t,n,a,r,s,E);const O=e.node(E),S=O.borderTop?O.borderTop:E,k=O.borderBottom?O.borderBottom:E,M=O.borderTop?a:2*a,j=S!==k?1:r-s[c]+1;e.setEdge(h,S,{minlen:j,weight:M,nestingEdge:!0}),e.setEdge(k,g,{minlen:j,weight:M,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,h,{weight:0,minlen:r+s[c]})},_X=e=>{var t;const n={},a=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>a(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},bX=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},wX=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},$S={run:gX,cleanup:wX},EX=e=>{var t;const n=a=>{const r=e.children(a),s=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)BS(e,"borderLeft","_bl",a,s,c),BS(e,"borderRight","_br",a,s,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},BS=(e,t,n,a,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],h=ev(e,"border",c,n);r[t][s]=h,e.setParent(h,a),v&&e.setEdge(v,h,{weight:1})},OX=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&P2(e)},xX=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&SX(e),(n==="lr"||n==="rl")&&(AX(e),P2(e))},P2=e=>{e.nodes().forEach(t=>{US(e.node(t))}),e.edges().forEach(t=>{US(e.edge(t))})},US=e=>{const t=e.width;e.width=e.height,e.height=t},SX=e=>{e.nodes().forEach(t=>{y0(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>y0(r)),a.hasOwnProperty("y")&&y0(a)})},y0=e=>{e!=null&&e.y&&(e.y=-e.y)},AX=e=>{e.nodes().forEach(t=>{m0(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>m0(r)),a.hasOwnProperty("x")&&m0(a)})},m0=e=>{const t=e.x;e.x=e.y,e.y=t},GS={adjust:OX,undo:xX};function TX(e){return Array.isArray(e)}function J0(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const VS=function(e){if(TX(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},WS=e=>{const t={},n=e.nodes().filter(_=>{var E;return!(!((E=e.children(_))===null||E===void 0)&&E.length)}),a=n.map(_=>e.node(_).rank),r=J0(a),s=[];for(let _=0;_<r+1;_++)s.push([]);const c=_=>{var E;if(t.hasOwnProperty(_))return;t[_]=!0;const O=e.node(_);isNaN(O.rank)||s[O.rank].push(_),(E=e.successors(_))===null||E===void 0||E.forEach(S=>c(S))},v=n.sort((_,E)=>e.node(_).rank-e.node(E).rank),g=v.filter(_=>e.node(_).fixorder!==void 0).sort((_,E)=>e.node(_).fixorder-e.node(E).fixorder);return g==null||g.forEach(_=>{isNaN(e.node(_).rank)||s[e.node(_).rank].push(_),t[_]=!0}),v==null||v.forEach(c),s},MX=(e,t,n)=>{const a=WH(n,n.map((_,E)=>E)),s=t.map(_=>{var E;const O=(E=e.outEdges(_))===null||E===void 0?void 0:E.map(S=>({pos:a[S.w]||0,weight:e.edge(S).weight}));return O==null?void 0:O.sort((S,k)=>S.pos-k.pos)}).flat().filter(_=>_!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const h=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(_=>{if(_){let E=_.pos+c;h[E]+=_.weight;let O=0;for(;E>0;)E%2&&(O+=h[E+1]),E=E-1>>1,h[E]+=_.weight;g+=_.weight*O}}),g},zS=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=MX(e,t[a-1],t[a]);return n},PX=(e,t,n)=>{const a=kX(e),r=new tf({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),h=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,h||a),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const _=g.v===s?g.w:g.v,E=r.edgeFromArgs(_,s),O=E!==void 0?E.weight:0;r.setEdge(_,s,{weight:e.edge(g).weight+O})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},kX=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},NX=(e,t,n)=>{const a={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,h;for(;c;){if(v=e.parent(c),v?(h=a[v],a[v]=c):(h=r,r=c),h&&h!==c){t.setEdge(h,c);return}c=v}})},RX=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),jX=(e,t)=>{var n,a,r;const s={};e==null||e.forEach((v,h)=>{s[v.v]={i:h,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const h=s[v.v],g=s[v.w];h!==void 0&&g!==void 0&&(g.indegree++,h.out.push(s[v.w]))});const c=(r=(a=Object.values(s)).filter)===null||r===void 0?void 0:r.call(a,v=>!v.indegree);return CX(c)},CX=e=>{var t,n;const a=[],r=h=>g=>{g.merged||(g.barycenter===void 0||h.barycenter===void 0||g.barycenter>=h.barycenter)&&DX(h,g)},s=h=>g=>{g.in.push(h),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const h=e.pop();a.push(h),(t=h.in.reverse())===null||t===void 0||t.forEach(g=>r(h)(g)),(n=h.out)===null||n===void 0||n.forEach(g=>s(h)(g))}const c=a.filter(h=>!h.merged),v=["vs","i","barycenter","weight"];return c.map(h=>{const g={};return v==null||v.forEach(_=>{h[_]!==void 0&&(g[_]=h[_])}),g})},DX=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},IX=(e,t,n,a)=>{const r=XH(e,O=>{const S=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return a?!S&&O.hasOwnProperty("barycenter"):S||O.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((O,S)=>-O.i- -S.i),v=[];let h=0,g=0,_=0;s==null||s.sort(LX(!!t,!!n)),_=HS(v,c,_),s==null||s.forEach(O=>{var S;_+=(S=O.vs)===null||S===void 0?void 0:S.length,v.push(O.vs),h+=O.barycenter*O.weight,g+=O.weight,_=HS(v,c,_)});const E={vs:v.flat()};return g&&(E.barycenter=h/g,E.weight=g),E},HS=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},LX=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},k2=(e,t,n,a,r,s)=>{var c,v,h,g;let _=e.children(t);const E=e.node(t),O=E?E.borderLeft:void 0,S=E?E.borderRight:void 0,k={};O&&(_=_==null?void 0:_.filter(N=>N!==O&&N!==S));const M=RX(e,_||[]);M==null||M.forEach(N=>{var B;if(!((B=e.children(N.v))===null||B===void 0)&&B.length){const q=k2(e,N.v,n,a,s);k[N.v]=q,q.hasOwnProperty("barycenter")&&$X(N,q)}});const j=jX(M,n);FX(j,k),(c=j.filter(N=>N.vs.length>0))===null||c===void 0||c.forEach(N=>{const B=e.node(N.vs[0]);B&&(N.fixorder=B.fixorder,N.order=B.order)});const I=IX(j,a,r,s);if(O&&(I.vs=[O,I.vs,S].flat(),!((v=e.predecessors(O))===null||v===void 0)&&v.length)){const N=e.node(((h=e.predecessors(O))===null||h===void 0?void 0:h[0])||""),B=e.node(((g=e.predecessors(S))===null||g===void 0?void 0:g[0])||"");I.hasOwnProperty("barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+N.order+B.order)/(I.weight+2),I.weight+=2}return I},FX=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},$X=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},BX=(e,t)=>{const n=_2(e),a=[],r=[];for(let _=1;_<n+1;_++)a.push(_);for(let _=n-1;_>-1;_--)r.push(_);const s=XS(e,a,"inEdges"),c=XS(e,r,"outEdges");let v=WS(e);g0(e,v);let h=Number.POSITIVE_INFINITY,g;for(let _=0,E=0;E<4;++_,++E){YS(_%2?s:c,_%4>=2,!1,t),v=Vv(e);const O=zS(e,v);O<h&&(E=0,g=Um(v),h=O)}v=WS(e),g0(e,v);for(let _=0,E=0;E<4;++_,++E){YS(_%2?s:c,_%4>=2,!0,t),v=Vv(e);const O=zS(e,v);O<h&&(E=0,g=Um(v),h=O)}g0(e,g)},XS=(e,t,n)=>t.map(a=>PX(e,a,n)),YS=(e,t,n,a)=>{const r=new tf;e==null||e.forEach(s=>{var c;const v=s.graph().root,h=k2(s,v,r,t,n,a);for(let g=0;g<((c=h.vs)===null||c===void 0?void 0:c.length);g++){const _=s.node(h.vs[g]);_&&(_.order=g)}NX(s,r,h.vs)})},g0=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class UX extends Qh{}const GX=(e,t)=>{const n={},a=(r,s)=>{let c=0,v=0;const h=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((_,E)=>{var O;const S=WX(e,_),k=S?e.node(S).order:h;(S||_===g)&&((O=s.slice(v,E+1))===null||O===void 0||O.forEach(M=>{var j;(j=e.predecessors(M))===null||j===void 0||j.forEach(I=>{var N;const B=e.node(I),q=B.order;(q<c||k<q)&&!(B.dummy&&(!((N=e.node(M))===null||N===void 0)&&N.dummy))&&N2(n,I,M)})}),v=E+1,c=k)}),s};return t!=null&&t.length&&t.reduce(a),n},VX=(e,t)=>{const n={};function a(v,h,g,_,E){var O,S;let k;for(let M=h;M<g;M++)k=v[M],!((O=e.node(k))===null||O===void 0)&&O.dummy&&((S=e.predecessors(k))===null||S===void 0||S.forEach(j=>{const I=e.node(j);I.dummy&&(I.order<_||I.order>E)&&N2(n,j,k)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,h){const g=r(v);h.get(g)||(a(...v),h.set(g,!0))}const c=(v,h)=>{let g=-1,_,E=0;const O=new Map;return h==null||h.forEach((S,k)=>{var M;if(((M=e.node(S))===null||M===void 0?void 0:M.dummy)==="border"){const j=e.predecessors(S)||[];j.length&&(_=e.node(j[0]).order,s([h,E,k,g,_],O),E=k,g=_)}s([h,E,h.length,_,v.length],O)}),h};return t!=null&&t.length&&t.reduce(c),n},WX=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},N2=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let s=e[a];s||(e[a]=s={}),s[r]=!0},zX=(e,t,n)=>{let a=t,r=n;if(a>r){const s=t;a=r,r=s}return!!e[a]},HX=(e,t,n,a)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((h,g)=>{r[h]=h,s[h]=h,c[h]=g})}),t==null||t.forEach(v=>{let h=-1;v==null||v.forEach(g=>{let _=a(g);if(_.length){_=_.sort((O,S)=>c[O]-c[S]);const E=(_.length-1)/2;for(let O=Math.floor(E),S=Math.ceil(E);O<=S;++O){const k=_[O];s[g]===g&&h<c[k]&&!zX(n,g,k)&&(s[k]=g,s[g]=r[g]=r[k],h=c[k])}}})}),{root:r,align:s}},XX=(e,t,n,a,r)=>{var s;const c={},v=YX(e,t,n,r),h=r?"borderLeft":"borderRight",g=(O,S)=>{let k=v.nodes(),M=k.pop();const j={};for(;M;)j[M]?O(M):(j[M]=!0,k.push(M),k=k.concat(S(M))),M=k.pop()},_=O=>{c[O]=(v.inEdges(O)||[]).reduce((S,k)=>Math.max(S,(c[k.v]||0)+v.edge(k)),0)},E=O=>{const S=(v.outEdges(O)||[]).reduce((M,j)=>Math.min(M,(c[j.w]||0)-v.edge(j)),Number.POSITIVE_INFINITY),k=e.node(O);S!==Number.POSITIVE_INFINITY&&k.borderType!==h&&(c[O]=Math.max(c[O],S))};return g(_,v.predecessors.bind(v)),g(E,v.successors.bind(v)),(s=Object.values(a))===null||s===void 0||s.forEach(O=>{c[O]=c[n[O]]}),c},YX=(e,t,n,a)=>{const r=new UX,s=e.graph(),c=JX(s.nodesep,s.edgesep,a);return t==null||t.forEach(v=>{let h;v==null||v.forEach(g=>{const _=n[g];if(r.setNode(_),h){const E=n[h],O=r.edgeFromArgs(E,_);r.setEdge(E,_,Math.max(c(e,g,h),O||0))}h=g})}),r},qX=(e,t)=>Y1(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const v=n[c],h=QX(e,c)/2;r=Math.max(v+h,r),s=Math.min(v-h,s)}),r-s});function KX(e,t){const n=Object.values(t),a=VS(n),r=J0(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,h=e[v];let g;if(h===t)return;const _=Object.values(h);g=c==="l"?a-VS(_):r-J0(_),g&&(e[v]={},Object.keys(h).forEach(E=>{e[v][E]=h[E]+g}))})})}const ZX=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(s=>s[a]);n[a]=(r[0]+r[1])/2}}),n},JX=(e,t,n)=>(a,r,s)=>{const c=a.node(r),v=a.node(s);let h=0,g;if(h+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(h+=n?g:-g),g=0,h+=(c.dummy?t:e)/2,h+=(v.dummy?t:e)/2,h+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(h+=n?g:-g),g=0,h},QX=(e,t)=>e.node(t).width||0,eY=e=>{const t=Vv(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=a+c/2}),a+=c+n})},tY=e=>{const t=Vv(e),n=Object.assign(GX(e,t),VX(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(E=>Object.values(E).reverse()));const h=(c==="u"?e.predecessors:e.successors).bind(e),g=HX(e,r,n,h),_=XX(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(_).forEach(E=>_[E]=-_[E]),a[c+v]=_})});const s=qX(e,a);return s&&KX(a,s),ZX(a,e.graph().align)},nY=e=>{var t;const n=g2(e);eY(n);const a=tY(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},rY=(e,t)=>{const a=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...a),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},oY=(e,t)=>{const n=t&&t.debugTiming?b2:w2;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{aY(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>hY(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{vY(a)});try{n("  runLayout",()=>{iY(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{uY(e,a)})})},iY=(e,t,n)=>{t("    removeSelfEdges",()=>{xY(e)}),t("    acyclic",()=>{jS.run(e)}),t("    nestingGraph.run",()=>{$S.run(e)}),t("    rank",()=>{dX(g2(e))}),t("    injectEdgeLabelProxies",()=>{yY(e)}),t("    removeEmptyRanks",()=>{HH(e)}),t("    nestingGraph.cleanup",()=>{$S.cleanup(e)}),t("    normalizeRanks",()=>{zH(e)}),t("    assignRankMinMax",()=>{mY(e)}),t("    removeEdgeLabelProxies",()=>{gY(e)}),t("    normalize.run",()=>{IS.run(e)}),t("    parentDummyChains",()=>{mX(e)}),t("    addBorderSegments",()=>{EX(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{rY(e,n.nodeOrder)}),t("    order",()=>{BX(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{SY(e)}),t("    adjustCoordinateSystem",()=>{GS.adjust(e)}),t("    position",()=>{nY(e)}),t("    positionSelfEdges",()=>{AY(e)}),t("    removeBorderNodes",()=>{OY(e)}),t("    normalize.undo",()=>{IS.undo(e)}),t("    fixupEdgeLabelCoords",()=>{wY(e)}),t("    undoCoordinateSystem",()=>{GS.undo(e)}),t("    translateGraph",()=>{_Y(e)}),t("    assignNodeIntersects",()=>{bY(e)}),t("    reversePoints",()=>{EY(e)}),t("    acyclic.undo",()=>{jS.undo(e)})},aY=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},uY=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},lY=["nodesep","edgesep","ranksep","marginx","marginy"],sY={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_0=["acyclicer","ranker","rankdir","align"],cY=["width","height","layer","fixorder"],fY={width:0,height:0},dY=["minlen","weight","width","height","labeloffset"],pY={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},b0=["labelpos"],hY=e=>{const t=new tf({multigraph:!0,compound:!0}),n=E0(e.graph()),a={};return _0==null||_0.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},sY,w0(n,lY),a)),e.nodes().forEach(r=>{const s=E0(e.node(r)),c=Object.assign(Object.assign({},fY),s),v=w0(c,cY);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=E0(e.edge(r)),c={};b0==null||b0.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},pY,w0(s,dY),c))}),t},vY=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},yY=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-a.rank)/2+a.rank};ev(e,"edge-proxy",s,"_ep")}})},mY=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const s=e.node(n);s.borderTop&&(s.minRank=(a=e.node(s.borderTop))===null||a===void 0?void 0:a.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},gY=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},_Y=e=>{let t,n=0,a,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,h=g=>{if(!g)return;const _=g.x,E=g.y,O=g.width,S=g.height;!isNaN(_)&&!isNaN(O)&&(t===void 0&&(t=_-O/2),t=Math.min(t,_-O/2),n=Math.max(n,_+O/2)),!isNaN(E)&&!isNaN(S)&&(a===void 0&&(a=E-S/2),a=Math.min(a,E-S/2),r=Math.max(r,E+S/2))};e.nodes().forEach(g=>{h(e.node(g))}),e.edges().forEach(g=>{const _=e.edge(g);_!=null&&_.hasOwnProperty("x")&&h(_)}),t-=c,a-=v,e.nodes().forEach(g=>{const _=e.node(g);_&&(_.x-=t,_.y-=a)}),e.edges().forEach(g=>{var _;const E=e.edge(g);(_=E.points)===null||_===void 0||_.forEach(O=>{O.x-=t,O.y-=a}),E.hasOwnProperty("x")&&(E.x-=t),E.hasOwnProperty("y")&&(E.y-=a)}),s.width=n-t+c,s.height=r-a+v},bY=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=a),n.points.unshift(CS(a,s)),n.points.push(CS(r,c))})},wY=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},EY=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},OY=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),h=e.node(s.borderLeft[((a=s.borderLeft)===null||a===void 0?void 0:a.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(h==null?void 0:h.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((h==null?void 0:h.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},xY=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},SY=e=>{const t=Vv(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+a,(c=v.selfEdges)===null||c===void 0||c.forEach(h=>{ev(e,"selfedge",{width:h.label.width,height:h.label.height,rank:v.rank,order:s+ ++a,e:h.e,label:h.label},"_se")}),delete v.selfEdges})})},AY=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,s=a.y,c=n.x-r,v=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},w0=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},E0=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},TY={layout:oY,util:{time:b2,notime:w2}};class MY extends Xz{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const s=this,{nodes:c,nodeSize:v,rankdir:h,combos:g,begin:_,radial:E,comboEdges:O=[],vedges:S=[]}=s;if(!c)return;const k=s.edges||[],M=new tf({multigraph:!0,compound:!0});s.nodeMap={};const j={};c.forEach(H=>{s.nodeMap[H.id]=H,H.comboId&&(j[H.comboId]=j[H.comboId]||[],j[H.comboId].push(H.id))});let I=[];const N={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(H=>{N[H]=!0,I.push(s.nodeMap[H])}),c.forEach(H=>{N[H.id]||I.push(H)})):I=c;let B;v?bS(v)?B=()=>v:B=()=>[v,v]:B=H=>H.size?bS(H.size)?H.size:f2(H.size)?[H.size.width||40,H.size.height||40]:[H.size,H.size]:[40,40];const q=wS(s.ranksep,50,s.ranksepFunc),ee=wS(s.nodesep,50,s.nodesepFunc);let Y=ee,Q=q;(h==="LR"||h==="RL")&&(Y=q,Q=ee),M.setDefaultEdgeLabel(()=>({})),M.setGraph(s);const z={};this.sortByCombo&&g&&g.forEach(H=>{if(z[H.id]=H,H.collapsed){const de=B(H),Ce=Q(H),Me=Y(H),He=de[0]+2*Me,$e=de[1]+2*Ce;M.setNode(H.id,{width:He,height:$e})}H.parentId&&(z[H.parentId]||M.setNode(H.parentId,{}),M.setParent(H.id,H.parentId))}),I.filter(H=>H.layout!==!1).forEach(H=>{const de=B(H),Ce=Q(H),Me=Y(H),He=de[0]+2*Me,$e=de[1]+2*Ce,ke=H.layer;Bm(ke)?M.setNode(H.id,{width:He,height:$e,layer:ke}):M.setNode(H.id,{width:He,height:$e}),this.sortByCombo&&H.comboId&&(z[H.comboId]||(z[H.comboId]={id:H.comboId},M.setNode(H.comboId,{})),M.setParent(H.id,H.comboId))}),k.forEach(H=>{const de=mh(H,"source"),Ce=mh(H,"target");this.layoutNode(de)&&this.layoutNode(Ce)&&M.setEdge(de,Ce,{weight:H.weight||1})}),(n=O==null?void 0:O.concat(S||[]))===null||n===void 0||n.forEach(H=>{var de,Ce;const{source:Me,target:He}=H,$e=!((de=z[Me])===null||de===void 0)&&de.collapsed?[Me]:j[Me]||[Me],ke=!((Ce=z[He])===null||Ce===void 0)&&Ce.collapsed?[He]:j[He]||[He];$e.forEach(le=>{ke.forEach(he=>{M.setEdge(le,he,{weight:H.weight||1})})})});let D;!((a=s.preset)===null||a===void 0)&&a.nodes&&(D=new tf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(H=>{D==null||D.setNode(H.id,H)})),TY.layout(M,{prevGraph:D,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const V=[0,0];if(_){let H=1/0,de=1/0;M.nodes().forEach(Ce=>{const Me=M.node(Ce);H>Me.x&&(H=Me.x),de>Me.y&&(de=Me.y)}),M.edges().forEach(Ce=>{var Me;(Me=M.edge(Ce).points)===null||Me===void 0||Me.forEach($e=>{H>$e.x&&(H=$e.x),de>$e.y&&(de=$e.y)})}),V[0]=_[0]-H,V[1]=_[1]-de}const X=h==="LR"||h==="RL";if(E){const{focusNode:H,ranksep:de,getRadialPos:Ce}=this,Me=Yz(H)?H:H==null?void 0:H.id,He=Me?(r=M.node(Me))===null||r===void 0?void 0:r._rank:0,$e=[],ke=X?"y":"x",le=X?"height":"width";let he=1/0,Se=-1/0;M.nodes().forEach(me=>{const xe=M.node(me);if(!s.nodeMap[me])return;const vt=ee(s.nodeMap[me]);if(He===0)$e[xe._rank]||($e[xe._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),$e[xe._rank].nodes.push(me),$e[xe._rank].totalWidth+=vt*2+xe[le],$e[xe._rank].maxSize<Math.max(xe.width,xe.height)&&($e[xe._rank].maxSize=Math.max(xe.width,xe.height));else{const rn=xe._rank-He;if(rn===0)$e[rn]||($e[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),$e[rn].nodes.push(me),$e[rn].totalWidth+=vt*2+xe[le],$e[rn].maxSize<Math.max(xe.width,xe.height)&&($e[rn].maxSize=Math.max(xe.width,xe.height));else{const vn=Math.abs(rn);$e[vn]||($e[vn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),$e[vn].totalWidth+=vt*2+xe[le],$e[vn].maxSize<Math.max(xe.width,xe.height)&&($e[vn].maxSize=Math.max(xe.width,xe.height)),rn<0?$e[vn].left.push(me):$e[vn].right.push(me)}}const Wt=xe[ke]-xe[le]/2-vt,Ot=xe[ke]+xe[le]/2+vt;Wt<he&&(he=Wt),Ot>Se&&(Se=Ot)});let Ke=de||50;const Ge={},et=(Se-he)/.9,gt=[(he+Se-et)*.5,(he+Se+et)*.5],dt=(me,xe,vt=-1/0,Wt=[0,1])=>{let Ot=vt;return me.forEach(rn=>{const vn=M.node(rn);Ge[rn]=xe;const{x:An,y:pn}=Ce(vn[ke],gt,et,xe,Wt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=An+V[0],s.nodeMap[rn].y=pn+V[1],s.nodeMap[rn]._order=vn._order;const ft=q(s.nodeMap[rn]);Ot<ft&&(Ot=ft)}),Ot};let zt=!0;const je=0;$e.forEach(me=>{var xe,vt,Wt,Ot,rn,vn,An;if(!(!((xe=me==null?void 0:me.nodes)===null||xe===void 0)&&xe.length)&&!(!((vt=me==null?void 0:me.left)===null||vt===void 0)&&vt.length)&&!(!((Wt=me==null?void 0:me.right)===null||Wt===void 0)&&Wt.length))return;if(zt&&me.nodes.length===1){const ft=me.nodes[0];if(!s.nodeMap[ft])return;s.nodeMap[ft].x=V[0],s.nodeMap[ft].y=V[1],Ge[me.nodes[0]]=0,Ke=q(s.nodeMap[ft]),zt=!1;return}Ke=Math.max(Ke,me.totalWidth/(2*Math.PI));let pn=-1/0;if(He===0||!((Ot=me.nodes)===null||Ot===void 0)&&Ot.length)pn=dt(me.nodes,Ke,pn,[0,1]);else{const ft=((rn=me.left)===null||rn===void 0?void 0:rn.length)/(((vn=me.left)===null||vn===void 0?void 0:vn.length)+((An=me.right)===null||An===void 0?void 0:An.length));pn=dt(me.left,Ke,pn,[0,ft]),pn=dt(me.right,Ke,pn,[ft+.05,1])}Ke+=pn,zt=!1,je-me.maxSize}),M.edges().forEach(me=>{var xe,vt,Wt;const Ot=M.edge(me),rn=k.findIndex(vn=>{const An=mh(vn,"source"),pn=mh(vn,"target");return An===me.v&&pn===me.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&k[rn].type!=="loop"){const vn=ke==="x"?"y":"x",An=(xe=Ot==null?void 0:Ot.points)===null||xe===void 0?void 0:xe.slice(1,Ot.points.length-1),pn=[],ft=(vt=M.node(me.v))===null||vt===void 0?void 0:vt[vn],En=ft-((Wt=M.node(me.w))===null||Wt===void 0?void 0:Wt[vn]),Le=Ge[me.v],yn=Le-Ge[me.w];An==null||An.forEach(qn=>{const ne=(qn[vn]-ft)/En*yn+Le,Fn=Ce(qn[ke],gt,et,ne);pn.push({x:Fn.x+V[0],y:Fn.y+V[1]})}),k[rn].controlPoints=pn}})}else{const H=new Set,Ce=h==="BT"||h==="RL"?(ke,le)=>le-ke:(ke,le)=>ke-le;M.nodes().forEach(ke=>{const le=M.node(ke);if(!le)return;let he=this.nodeMap[ke];he||(he=g==null?void 0:g.find(Se=>Se.id===ke)),he&&(he.x=le.x+V[0],he.y=le.y+V[1],he._order=le._order,H.add(X?he.x:he.y))});const Me=Array.from(H).sort(Ce),He=X?(ke,le)=>ke.x!==le.x:(ke,le)=>ke.y!==le.y,$e=X?(ke,le,he)=>{const Se=Math.max(le.y,he.y),Ke=Math.min(le.y,he.y);return ke.filter(Ge=>Ge.y<=Se&&Ge.y>=Ke)}:(ke,le,he)=>{const Se=Math.max(le.x,he.x),Ke=Math.min(le.x,he.x);return ke.filter(Ge=>Ge.x<=Se&&Ge.x>=Ke)};M.edges().forEach(ke=>{var le;const he=M.edge(ke),Se=k.findIndex(Ke=>{const Ge=mh(Ke,"source"),et=mh(Ke,"target");return Ge===ke.v&&et===ke.w});if(!(Se<=-1)&&s.edgeLabelSpace&&s.controlPoints&&k[Se].type!=="loop"){(le=he==null?void 0:he.points)===null||le===void 0||le.forEach(et=>{et.x+=V[0],et.y+=V[1]});const Ke=s.nodeMap[ke.v],Ge=s.nodeMap[ke.w];k[Se].controlPoints=PY(he==null?void 0:he.points,Ke,Ge,Me,X,He,$e)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:k}}getRadialPos(t,n,a,r,s=[0,1]){let c=(t-n[0])/a;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const PY=(e,t,n,a,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:h,y:g}=t,{x:_,y:E}=n;if(r&&(h=t.y,g=t.x,_=n.y,E=n.x),E!==g&&h!==_){const O=a.indexOf(g),S=a[O+1];if(S){const j=v[0],I=r?{x:(g+S)/2,y:(j==null?void 0:j.y)||_}:{x:(j==null?void 0:j.x)||_,y:(g+S)/2};(!j||s(j,I))&&v.unshift(I)}const k=a.indexOf(E),M=Math.abs(k-O);if(M===1)v=c(v,t,n),v.length||v.push(r?{x:(g+E)/2,y:h}:{x:h,y:(g+E)/2});else if(M>1){const j=a[k-1];if(j){const I=v[v.length-1],N=r?{x:(E+j)/2,y:(I==null?void 0:I.y)||_}:{x:(I==null?void 0:I.x)||h,y:(E+j)/2};(!I||s(I,N))&&v.push(N)}}}}return v};var qS,KS,ZS,JS;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(qS||(qS={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(KS||(KS={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(ZS||(ZS={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(JS||(JS={}));var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q1(e,t){return e(t={exports:{}},t.exports),t.exports}var kY=function(){this.__data__=[],this.size=0},tv=function(e,t){return e===t||e!=e&&t!=t},hg=function(e,t){for(var n=e.length;n--;)if(tv(e[n][0],t))return n;return-1},NY=Array.prototype.splice,RY=function(e){var t=this.__data__,n=hg(t,e);return!(n<0)&&(n==t.length-1?t.pop():NY.call(t,n,1),--this.size,!0)},jY=function(e){var t=this.__data__,n=hg(t,e);return n<0?void 0:t[n][1]},CY=function(e){return hg(this.__data__,e)>-1},DY=function(e,t){var n=this.__data__,a=hg(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function _h(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}_h.prototype.clear=kY,_h.prototype.delete=RY,_h.prototype.get=jY,_h.prototype.has=CY,_h.prototype.set=DY;var vg=_h,IY=function(){this.__data__=new vg,this.size=0},LY=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},FY=function(e){return this.__data__.get(e)},$Y=function(e){return this.__data__.has(e)},R2=typeof dm=="object"&&dm&&dm.Object===Object&&dm,BY=typeof self=="object"&&self&&self.Object===Object&&self,es=R2||BY||Function("return this")(),wl=es.Symbol,j2=Object.prototype,UY=j2.hasOwnProperty,GY=j2.toString,Tv=wl?wl.toStringTag:void 0,VY=function(e){var t=UY.call(e,Tv),n=e[Tv];try{e[Tv]=void 0;var a=!0}catch{}var r=GY.call(e);return a&&(t?e[Tv]=n:delete e[Tv]),r},WY=Object.prototype.toString,zY=function(e){return WY.call(e)},QS=wl?wl.toStringTag:void 0,cd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":QS&&QS in Object(e)?VY(e):zY(e)},vu=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},eA,ay=function(e){if(!vu(e))return!1;var t=cd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},O0=es["__core-js_shared__"],tA=(eA=/[^.]+$/.exec(O0&&O0.keys&&O0.keys.IE_PROTO||""))?"Symbol(src)_1."+eA:"",HY=function(e){return!!tA&&tA in e},XY=Function.prototype.toString,_p=function(e){if(e!=null){try{return XY.call(e)}catch{}try{return e+""}catch{}}return""},YY=/^\[object .+?Constructor\]$/,qY=Function.prototype,KY=Object.prototype,ZY=qY.toString,JY=KY.hasOwnProperty,QY=RegExp("^"+ZY.call(JY).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eq=function(e){return!(!vu(e)||HY(e))&&(ay(e)?QY:YY).test(_p(e))},tq=function(e,t){return e==null?void 0:e[t]},bp=function(e,t){var n=tq(e,t);return eq(n)?n:void 0},Wv=bp(es,"Map"),zv=bp(Object,"create"),nq=function(){this.__data__=zv?zv(null):{},this.size=0},rq=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},oq=Object.prototype.hasOwnProperty,iq=function(e){var t=this.__data__;if(zv){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return oq.call(t,e)?t[e]:void 0},aq=Object.prototype.hasOwnProperty,uq=function(e){var t=this.__data__;return zv?t[e]!==void 0:aq.call(t,e)},lq=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zv&&t===void 0?"__lodash_hash_undefined__":t,this};function bh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}bh.prototype.clear=nq,bh.prototype.delete=rq,bh.prototype.get=iq,bh.prototype.has=uq,bh.prototype.set=lq;var nA=bh,sq=function(){this.size=0,this.__data__={hash:new nA,map:new(Wv||vg),string:new nA}},cq=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},yg=function(e,t){var n=e.__data__;return cq(t)?n[typeof t=="string"?"string":"hash"]:n.map},fq=function(e){var t=yg(this,e).delete(e);return this.size-=t?1:0,t},dq=function(e){return yg(this,e).get(e)},pq=function(e){return yg(this,e).has(e)},hq=function(e,t){var n=yg(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function wh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}wh.prototype.clear=sq,wh.prototype.delete=fq,wh.prototype.get=dq,wh.prototype.has=pq,wh.prototype.set=hq;var mg=wh,vq=function(e,t){var n=this.__data__;if(n instanceof vg){var a=n.__data__;if(!Wv||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new mg(a)}return n.set(e,t),this.size=n.size,this};function Eh(e){var t=this.__data__=new vg(e);this.size=t.size}Eh.prototype.clear=IY,Eh.prototype.delete=LY,Eh.prototype.get=FY,Eh.prototype.has=$Y,Eh.prototype.set=vq;var Nh=Eh,K1=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},Gm=function(){try{var e=bp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),gg=function(e,t,n){t=="__proto__"&&Gm?Gm(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},yq=Object.prototype.hasOwnProperty,_g=function(e,t,n){var a=e[t];yq.call(e,t)&&tv(a,n)&&(n!==void 0||t in e)||gg(e,t,n)},uy=function(e,t,n,a){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],h=a?a(n[v],e[v],v,n,e):void 0;h===void 0&&(h=e[v]),r?gg(n,v,h):_g(n,v,h)}return n},mq=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Jl=function(e){return e!=null&&typeof e=="object"},rA=function(e){return Jl(e)&&cd(e)=="[object Arguments]"},C2=Object.prototype,gq=C2.hasOwnProperty,_q=C2.propertyIsEnumerable,Bh=rA(function(){return arguments}())?rA:function(e){return Jl(e)&&gq.call(e,"callee")&&!_q.call(e,"callee")},vi=Array.isArray,bq=function(){return!1},sp=q1(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?es.Buffer:void 0,s=(r?r.isBuffer:void 0)||bq;e.exports=s}),wq=/^(?:0|[1-9]\d*)$/,bg=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&wq.test(e))&&e>-1&&e%1==0&&e<t},Z1=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Yo={};Yo["[object Float32Array]"]=Yo["[object Float64Array]"]=Yo["[object Int8Array]"]=Yo["[object Int16Array]"]=Yo["[object Int32Array]"]=Yo["[object Uint8Array]"]=Yo["[object Uint8ClampedArray]"]=Yo["[object Uint16Array]"]=Yo["[object Uint32Array]"]=!0,Yo["[object Arguments]"]=Yo["[object Array]"]=Yo["[object ArrayBuffer]"]=Yo["[object Boolean]"]=Yo["[object DataView]"]=Yo["[object Date]"]=Yo["[object Error]"]=Yo["[object Function]"]=Yo["[object Map]"]=Yo["[object Number]"]=Yo["[object Object]"]=Yo["[object RegExp]"]=Yo["[object Set]"]=Yo["[object String]"]=Yo["[object WeakMap]"]=!1;var Eq=function(e){return Jl(e)&&Z1(e.length)&&!!Yo[cd(e)]},wg=function(e){return function(t){return e(t)}},Uh=q1(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&R2.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),oA=Uh&&Uh.isTypedArray,ly=oA?wg(oA):Eq,Oq=Object.prototype.hasOwnProperty,D2=function(e,t){var n=vi(e),a=!n&&Bh(e),r=!n&&!a&&sp(e),s=!n&&!a&&!r&&ly(e),c=n||a||r||s,v=c?mq(e.length,String):[],h=v.length;for(var g in e)!t&&!Oq.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||bg(g,h))||v.push(g);return v},xq=Object.prototype,Eg=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||xq)},I2=function(e,t){return function(n){return e(t(n))}},Sq=I2(Object.keys,Object),Aq=Object.prototype.hasOwnProperty,J1=function(e){if(!Eg(e))return Sq(e);var t=[];for(var n in Object(e))Aq.call(e,n)&&n!="constructor"&&t.push(n);return t},of=function(e){return e!=null&&Z1(e.length)&&!ay(e)},fd=function(e){return of(e)?D2(e):J1(e)},Tq=function(e,t){return e&&uy(t,fd(t),e)},Mq=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Pq=Object.prototype.hasOwnProperty,kq=function(e){if(!vu(e))return Mq(e);var t=Eg(e),n=[];for(var a in e)(a!="constructor"||!t&&Pq.call(e,a))&&n.push(a);return n},wp=function(e){return of(e)?D2(e,!0):kq(e)},Nq=function(e,t){return e&&uy(t,wp(t),e)},L2=q1(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?es.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var h=c.length,g=s?s(h):new c.constructor(h);return c.copy(g),g}}),F2=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},$2=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,s=[];++n<a;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},B2=function(){return[]},Rq=Object.prototype.propertyIsEnumerable,iA=Object.getOwnPropertySymbols,Q1=iA?function(e){return e==null?[]:(e=Object(e),$2(iA(e),function(t){return Rq.call(e,t)}))}:B2,jq=function(e,t){return uy(e,Q1(e),t)},ew=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},Og=I2(Object.getPrototypeOf,Object),U2=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ew(t,Q1(e)),e=Og(e);return t}:B2,Cq=function(e,t){return uy(e,U2(e),t)},G2=function(e,t,n){var a=t(e);return vi(e)?a:ew(a,n(e))},Q0=function(e){return G2(e,fd,Q1)},Dq=function(e){return G2(e,wp,U2)},e1=bp(es,"DataView"),t1=bp(es,"Promise"),Rh=bp(es,"Set"),n1=bp(es,"WeakMap"),Iq=_p(e1),Lq=_p(Wv),Fq=_p(t1),$q=_p(Rh),Bq=_p(n1),op=cd;(e1&&op(new e1(new ArrayBuffer(1)))!="[object DataView]"||Wv&&op(new Wv)!="[object Map]"||t1&&op(t1.resolve())!="[object Promise]"||Rh&&op(new Rh)!="[object Set]"||n1&&op(new n1)!="[object WeakMap]")&&(op=function(e){var t=cd(e),n=t=="[object Object]"?e.constructor:void 0,a=n?_p(n):"";if(a)switch(a){case Iq:return"[object DataView]";case Lq:return"[object Map]";case Fq:return"[object Promise]";case $q:return"[object Set]";case Bq:return"[object WeakMap]"}return t});var cp=op,Uq=Object.prototype.hasOwnProperty,Gq=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Uq.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Vm=es.Uint8Array,tw=function(e){var t=new e.constructor(e.byteLength);return new Vm(t).set(new Vm(e)),t},Vq=function(e,t){var n=t?tw(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Wq=/\w*$/,zq=function(e){var t=new e.constructor(e.source,Wq.exec(e));return t.lastIndex=e.lastIndex,t},aA=wl?wl.prototype:void 0,uA=aA?aA.valueOf:void 0,Hq=function(e){return uA?Object(uA.call(e)):{}},V2=function(e,t){var n=t?tw(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Xq=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return tw(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return Vq(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return V2(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return zq(e);case"[object Set]":return new a;case"[object Symbol]":return Hq(e)}},lA=Object.create,W2=function(){function e(){}return function(t){if(!vu(t))return{};if(lA)return lA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),z2=function(e){return typeof e.constructor!="function"||Eg(e)?{}:W2(Og(e))},Yq=function(e){return Jl(e)&&cp(e)=="[object Map]"},sA=Uh&&Uh.isMap,qq=sA?wg(sA):Yq,Kq=function(e){return Jl(e)&&cp(e)=="[object Set]"},cA=Uh&&Uh.isSet,Zq=cA?wg(cA):Kq,Fo={};Fo["[object Arguments]"]=Fo["[object Array]"]=Fo["[object ArrayBuffer]"]=Fo["[object DataView]"]=Fo["[object Boolean]"]=Fo["[object Date]"]=Fo["[object Float32Array]"]=Fo["[object Float64Array]"]=Fo["[object Int8Array]"]=Fo["[object Int16Array]"]=Fo["[object Int32Array]"]=Fo["[object Map]"]=Fo["[object Number]"]=Fo["[object Object]"]=Fo["[object RegExp]"]=Fo["[object Set]"]=Fo["[object String]"]=Fo["[object Symbol]"]=Fo["[object Uint8Array]"]=Fo["[object Uint8ClampedArray]"]=Fo["[object Uint16Array]"]=Fo["[object Uint32Array]"]=!0,Fo["[object Error]"]=Fo["[object Function]"]=Fo["[object WeakMap]"]=!1;var H2=function e(t,n,a,r,s,c){var v,h=1&n,g=2&n,_=4&n;if(a&&(v=s?a(t,r,s,c):a(t)),v!==void 0)return v;if(!vu(t))return t;var E=vi(t);if(E){if(v=Gq(t),!h)return F2(t,v)}else{var O=cp(t),S=O=="[object Function]"||O=="[object GeneratorFunction]";if(sp(t))return L2(t,h);if(O=="[object Object]"||O=="[object Arguments]"||S&&!s){if(v=g||S?{}:z2(t),!h)return g?Cq(t,Nq(v,t)):jq(t,Tq(v,t))}else{if(!Fo[O])return s?t:{};v=Xq(t,O,h)}}c||(c=new Nh);var k=c.get(t);if(k)return k;c.set(t,v),Zq(t)?t.forEach(function(j){v.add(e(j,n,a,j,t,c))}):qq(t)&&t.forEach(function(j,I){v.set(I,e(j,n,a,I,t,c))});var M=E?void 0:(_?g?Dq:Q0:g?wp:fd)(t);return K1(M||t,function(j,I){M&&(j=t[I=j]),_g(v,I,e(j,n,a,I,t,c))}),v},Jq=function(e){return H2(e,4)},nw=function(e){return function(){return e}},rw=function(e){return function(t,n,a){for(var r=-1,s=Object(t),c=a(t),v=c.length;v--;){var h=c[e?v:++r];if(n(s[h],h,s)===!1)break}return t}}(),ow=function(e,t){return e&&rw(e,t,fd)},xg=function(e,t){return function(n,a){if(n==null)return n;if(!of(n))return e(n,a);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&a(c[s],s,c)!==!1;);return n}}(ow),Ep=function(e){return e},X2=function(e){return typeof e=="function"?e:Ep},Y2=function(e,t){return(vi(e)?K1:xg)(e,X2(t))},q2=Y2,Qq=function(e,t){var n=[];return xg(e,function(a,r,s){t(a,r,s)&&n.push(a)}),n},eK=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},tK=function(e){return this.__data__.has(e)};function wm(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mg;++t<n;)this.add(e[t])}wm.prototype.add=wm.prototype.push=eK,wm.prototype.has=tK;var K2=wm,nK=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},Z2=function(e,t){return e.has(t)},J2=function(e,t,n,a,r,s){var c=1&n,v=e.length,h=t.length;if(v!=h&&!(c&&h>v))return!1;var g=s.get(e),_=s.get(t);if(g&&_)return g==t&&_==e;var E=-1,O=!0,S=2&n?new K2:void 0;for(s.set(e,t),s.set(t,e);++E<v;){var k=e[E],M=t[E];if(a)var j=c?a(M,k,E,t,e,s):a(k,M,E,e,t,s);if(j!==void 0){if(j)continue;O=!1;break}if(S){if(!nK(t,function(I,N){if(!Z2(S,N)&&(k===I||r(k,I,n,a,s)))return S.push(N)})){O=!1;break}}else if(k!==M&&!r(k,M,n,a,s)){O=!1;break}}return s.delete(e),s.delete(t),O},rK=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},iw=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},fA=wl?wl.prototype:void 0,x0=fA?fA.valueOf:void 0,oK=function(e,t,n,a,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Vm(e),new Vm(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return tv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=rK;case"[object Set]":var h=1&a;if(v||(v=iw),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;a|=2,c.set(e,t);var _=J2(v(e),v(t),a,r,s,c);return c.delete(e),_;case"[object Symbol]":if(x0)return x0.call(e)==x0.call(t)}return!1},iK=Object.prototype.hasOwnProperty,aK=function(e,t,n,a,r,s){var c=1&n,v=Q0(e),h=v.length;if(h!=Q0(t).length&&!c)return!1;for(var g=h;g--;){var _=v[g];if(!(c?_ in t:iK.call(t,_)))return!1}var E=s.get(e),O=s.get(t);if(E&&O)return E==t&&O==e;var S=!0;s.set(e,t),s.set(t,e);for(var k=c;++g<h;){var M=e[_=v[g]],j=t[_];if(a)var I=c?a(j,M,_,t,e,s):a(M,j,_,e,t,s);if(!(I===void 0?M===j||r(M,j,n,a,s):I)){S=!1;break}k||(k=_=="constructor")}if(S&&!k){var N=e.constructor,B=t.constructor;N==B||!("constructor"in e)||!("constructor"in t)||typeof N=="function"&&N instanceof N&&typeof B=="function"&&B instanceof B||(S=!1)}return s.delete(e),s.delete(t),S},dA=Object.prototype.hasOwnProperty,uK=function(e,t,n,a,r,s){var c=vi(e),v=vi(t),h=c?"[object Array]":cp(e),g=v?"[object Array]":cp(t),_=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",E=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=h==g;if(O&&sp(e)){if(!sp(t))return!1;c=!0,_=!1}if(O&&!_)return s||(s=new Nh),c||ly(e)?J2(e,t,n,a,r,s):oK(e,t,h,n,a,r,s);if(!(1&n)){var S=_&&dA.call(e,"__wrapped__"),k=E&&dA.call(t,"__wrapped__");if(S||k){var M=S?e.value():e,j=k?t.value():t;return s||(s=new Nh),r(M,j,n,a,s)}}return!!O&&(s||(s=new Nh),aK(e,t,n,a,r,s))},Q2=function e(t,n,a,r,s){return t===n||(t==null||n==null||!Jl(t)&&!Jl(n)?t!=t&&n!=n:uK(t,n,a,r,e,s))},lK=function(e,t,n,a){var r=n.length,s=r,c=!a;if(e==null)return!s;for(e=Object(e);r--;){var v=n[r];if(c&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++r<s;){var h=(v=n[r])[0],g=e[h],_=v[1];if(c&&v[2]){if(g===void 0&&!(h in e))return!1}else{var E=new Nh;if(a)var O=a(g,_,h,e,t,E);if(!(O===void 0?Q2(_,g,3,a,E):O))return!1}}return!0},eP=function(e){return e==e&&!vu(e)},sK=function(e){for(var t=fd(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,eP(r)]}return t},tP=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},cK=function(e){var t=sK(e);return t.length==1&&t[0][2]?tP(t[0][0],t[0][1]):function(n){return n===e||lK(n,e,t)}},fp=function(e){return typeof e=="symbol"||Jl(e)&&cd(e)=="[object Symbol]"},fK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dK=/^\w*$/,aw=function(e,t){if(vi(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!fp(e))||dK.test(e)||!fK.test(e)||t!=null&&e in Object(t)};function uw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,a);return n.cache=s.set(r,c)||s,c};return n.cache=new(uw.Cache||mg),n}uw.Cache=mg;var pK=uw,hK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vK=/\\(\\)?/g,yK=function(e){var t=pK(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hK,function(n,a,r,s){t.push(r?s.replace(vK,"$1"):a||n)}),t}),jh=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},pA=wl?wl.prototype:void 0,hA=pA?pA.toString:void 0,mK=function e(t){if(typeof t=="string")return t;if(vi(t))return jh(t,e)+"";if(fp(t))return hA?hA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},nP=function(e){return e==null?"":mK(e)},Sg=function(e,t){return vi(e)?e:aw(e,t)?[e]:yK(nP(e))},sy=function(e){if(typeof e=="string"||fp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Ag=function(e,t){for(var n=0,a=(t=Sg(t,e)).length;e!=null&&n<a;)e=e[sy(t[n++])];return n&&n==a?e:void 0},gK=function(e,t,n){var a=e==null?void 0:Ag(e,t);return a===void 0?n:a},_K=function(e,t){return e!=null&&t in Object(e)},rP=function(e,t,n){for(var a=-1,r=(t=Sg(t,e)).length,s=!1;++a<r;){var c=sy(t[a]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++a!=r?s:!!(r=e==null?0:e.length)&&Z1(r)&&bg(c,r)&&(vi(e)||Bh(e))},oP=function(e,t){return e!=null&&rP(e,t,_K)},bK=function(e,t){return aw(e)&&eP(t)?tP(sy(e),t):function(n){var a=gK(n,e);return a===void 0&&a===t?oP(n,e):Q2(t,a,3)}},iP=function(e){return function(t){return t==null?void 0:t[e]}},wK=function(e){return function(t){return Ag(t,e)}},EK=function(e){return aw(e)?iP(sy(e)):wK(e)},af=function(e){return typeof e=="function"?e:e==null?Ep:typeof e=="object"?vi(e)?bK(e[0],e[1]):cK(e):EK(e)},aP=function(e,t){return(vi(e)?$2:Qq)(e,af(t))},OK=Object.prototype.hasOwnProperty,xK=function(e,t){return e!=null&&OK.call(e,t)},uP=function(e,t){return e!=null&&rP(e,t,xK)},SK=Object.prototype.hasOwnProperty,AK=function(e){if(e==null)return!0;if(of(e)&&(vi(e)||typeof e=="string"||typeof e.splice=="function"||sp(e)||ly(e)||Bh(e)))return!e.length;var t=cp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Eg(e))return!J1(e).length;for(var n in e)if(SK.call(e,n))return!1;return!0},lP=function(e){return e===void 0},sP=function(e,t){var n=-1,a=of(e)?Array(e.length):[];return xg(e,function(r,s,c){a[++n]=t(r,s,c)}),a},cP=function(e,t){return(vi(e)?jh:sP)(e,af(t))},TK=function(e,t,n,a){var r=-1,s=e==null?0:e.length;for(a&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},MK=function(e,t,n,a,r){return r(e,function(s,c,v){n=a?(a=!1,s):t(n,s,c,v)}),n},fP=function(e,t,n){var a=vi(e)?TK:MK,r=arguments.length<3;return a(e,af(t),n,r,xg)},PK=function(e){return typeof e=="string"||!vi(e)&&Jl(e)&&cd(e)=="[object String]"},kK=iP("length"),NK=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),RK=function(e){return NK.test(e)},jK="[\\ud800-\\udfff]",r1="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o1="\\ud83c[\\udffb-\\udfff]",dP="[^\\ud800-\\udfff]",pP="(?:\\ud83c[\\udde6-\\uddff]){2}",hP="[\\ud800-\\udbff][\\udc00-\\udfff]",vA="(?:"+r1+"|"+o1+")?",CK="[\\ufe0e\\ufe0f]?"+vA+("(?:\\u200d(?:"+[dP,pP,hP].join("|")+")[\\ufe0e\\ufe0f]?"+vA+")*"),DK="(?:"+[dP+r1+"?",r1,pP,hP,jK].join("|")+")",yA=RegExp(o1+"(?="+o1+")|"+DK+CK,"g"),IK=function(e){for(var t=yA.lastIndex=0;yA.test(e);)++t;return t},LK=function(e){return RK(e)?IK(e):kK(e)},FK=function(e){if(e==null)return 0;if(of(e))return PK(e)?LK(e):e.length;var t=cp(e);return t=="[object Map]"||t=="[object Set]"?e.size:J1(e).length},$K=function(e,t,n){var a=vi(e),r=a||sp(e)||ly(e);if(t=af(t),n==null){var s=e&&e.constructor;n=r?a?new s:[]:vu(e)&&ay(s)?W2(Og(e)):{}}return(r?K1:ow)(e,function(c,v,h){return t(n,c,v,h)}),n},mA=wl?wl.isConcatSpreadable:void 0,BK=function(e){return vi(e)||Bh(e)||!!(mA&&e&&e[mA])},lw=function e(t,n,a,r,s){var c=-1,v=t.length;for(a||(a=BK),s||(s=[]);++c<v;){var h=t[c];n>0&&a(h)?n>1?e(h,n-1,a,r,s):ew(s,h):r||(s[s.length]=h)}return s},UK=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},gA=Math.max,vP=function(e,t,n){return t=gA(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,s=gA(a.length-t,0),c=Array(s);++r<s;)c[r]=a[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=a[r];return v[t]=n(c),UK(e,this,v)}},GK=Gm?function(e,t){return Gm(e,"toString",{configurable:!0,enumerable:!1,value:nw(t),writable:!0})}:Ep,VK=Date.now,yP=function(e){var t=0,n=0;return function(){var a=VK(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(GK),Tg=function(e,t){return yP(vP(e,t,Ep),e+"")},mP=function(e,t,n,a){for(var r=e.length,s=n+(a?1:-1);a?s--:++s<r;)if(t(e[s],s,e))return s;return-1},WK=function(e){return e!=e},zK=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},HK=function(e,t,n){return t==t?zK(e,t,n):mP(e,WK,n)},XK=function(e,t){return!!(e!=null&&e.length)&&HK(e,t,0)>-1},YK=function(e,t,n){for(var a=-1,r=e==null?0:e.length;++a<r;)if(n(t,e[a]))return!0;return!1},qK=function(){},KK=Rh&&1/iw(new Rh([,-0]))[1]==1/0?function(e){return new Rh(e)}:qK,ZK=function(e,t,n){var a=-1,r=XK,s=e.length,c=!0,v=[],h=v;if(n)c=!1,r=YK;else if(s>=200){var g=t?null:KK(e);if(g)return iw(g);c=!1,r=Z2,h=new K2}else h=t?[]:v;e:for(;++a<s;){var _=e[a],E=t?t(_):_;if(_=n||_!==0?_:0,c&&E==E){for(var O=h.length;O--;)if(h[O]===E)continue e;t&&h.push(E),v.push(_)}else r(h,E,n)||(h!==v&&h.push(E),v.push(_))}return v},gP=function(e){return Jl(e)&&of(e)},JK=Tg(function(e){return ZK(lw(e,1,gP,!0))}),QK=function(e,t){return jh(t,function(n){return e[n]})},Wm,_P=function(e){return e==null?[]:QK(e,fd(e))};try{Wm={clone:Jq,constant:nw,each:q2,filter:aP,has:uP,isArray:vi,isEmpty:AK,isFunction:ay,isUndefined:lP,keys:fd,map:cP,reduce:fP,size:FK,transform:$K,union:JK,values:_P}}catch{}Wm||(Wm=window._);var bn=Wm,sw=Ir;function Ir(e){this._isDirected=!bn.has(e,"directed")||e.directed,this._isMultigraph=!!bn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!bn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=bn.constant(void 0),this._defaultEdgeLabelFn=bn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function _A(e,t){e[t]?e[t]++:e[t]=1}function bA(e,t){--e[t]||delete e[t]}function Rv(e,t,n,a){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(bn.isUndefined(a)?"\0":a)}function eZ(e,t,n,a){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return a&&(v.name=a),v}function S0(e,t){return Rv(e,t.v,t.w,t.name)}Ir.prototype._nodeCount=0,Ir.prototype._edgeCount=0,Ir.prototype.isDirected=function(){return this._isDirected},Ir.prototype.isMultigraph=function(){return this._isMultigraph},Ir.prototype.isCompound=function(){return this._isCompound},Ir.prototype.setGraph=function(e){return this._label=e,this},Ir.prototype.graph=function(){return this._label},Ir.prototype.setDefaultNodeLabel=function(e){return bn.isFunction(e)||(e=bn.constant(e)),this._defaultNodeLabelFn=e,this},Ir.prototype.nodeCount=function(){return this._nodeCount},Ir.prototype.nodes=function(){return bn.keys(this._nodes)},Ir.prototype.sources=function(){var e=this;return bn.filter(this.nodes(),function(t){return bn.isEmpty(e._in[t])})},Ir.prototype.sinks=function(){var e=this;return bn.filter(this.nodes(),function(t){return bn.isEmpty(e._out[t])})},Ir.prototype.setNodes=function(e,t){var n=arguments,a=this;return bn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Ir.prototype.setNode=function(e,t){return bn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Ir.prototype.node=function(e){return this._nodes[e]},Ir.prototype.hasNode=function(e){return bn.has(this._nodes,e)},Ir.prototype.removeNode=function(e){var t=this;if(bn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],bn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),bn.each(bn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],bn.each(bn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Ir.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(bn.isUndefined(t))t="\0";else{for(var n=t+="";!bn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Ir.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Ir.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Ir.prototype.children=function(e){if(bn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return bn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Ir.prototype.predecessors=function(e){var t=this._preds[e];if(t)return bn.keys(t)},Ir.prototype.successors=function(e){var t=this._sucs[e];if(t)return bn.keys(t)},Ir.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return bn.union(t,this.successors(e))},Ir.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Ir.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;bn.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),bn.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var a={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(a[s]=c,c):c in a?a[c]:r(c)}return this._isCompound&&bn.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Ir.prototype.setDefaultEdgeLabel=function(e){return bn.isFunction(e)||(e=bn.constant(e)),this._defaultEdgeLabelFn=e,this},Ir.prototype.edgeCount=function(){return this._edgeCount},Ir.prototype.edges=function(){return bn.values(this._edgeObjs)},Ir.prototype.setPath=function(e,t){var n=this,a=arguments;return bn.reduce(e,function(r,s){return a.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Ir.prototype.setEdge=function(){var e,t,n,a,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,bn.isUndefined(n)||(n=""+n);var c=Rv(this._isDirected,e,t,n);if(bn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!bn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var v=eZ(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,_A(this._preds[t],e),_A(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Ir.prototype.edge=function(e,t,n){var a=arguments.length===1?S0(this._isDirected,arguments[0]):Rv(this._isDirected,e,t,n);return this._edgeLabels[a]},Ir.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?S0(this._isDirected,arguments[0]):Rv(this._isDirected,e,t,n);return bn.has(this._edgeLabels,a)},Ir.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?S0(this._isDirected,arguments[0]):Rv(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],bA(this._preds[t],e),bA(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Ir.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=bn.values(n);return t?bn.filter(a,function(r){return r.v===t}):a}},Ir.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=bn.values(n);return t?bn.filter(a,function(r){return r.w===t}):a}},Ir.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var wA={Graph:sw,version:"2.1.8"},tZ={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:nZ(e),edges:rZ(e)};return bn.isUndefined(e.graph())||(t.value=bn.clone(e.graph())),t},read:function(e){var t=new sw(e.options).setGraph(e.value);return bn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),bn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function nZ(e){return bn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return bn.isUndefined(n)||(r.value=n),bn.isUndefined(a)||(r.parent=a),r})}function rZ(e){return bn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return bn.isUndefined(t.name)||(a.name=t.name),bn.isUndefined(n)||(a.value=n),a})}var oZ=function(e){var t,n={},a=[];function r(s){bn.has(n,s)||(n[s]=!0,t.push(s),bn.each(e.successors(s),r),bn.each(e.predecessors(s),r))}return bn.each(e.nodes(),function(s){t=[],r(s),t.length&&a.push(t)}),a},bP=vl;function vl(){this._arr=[],this._keyIndices={}}vl.prototype.size=function(){return this._arr.length},vl.prototype.keys=function(){return this._arr.map(function(e){return e.key})},vl.prototype.has=function(e){return bn.has(this._keyIndices,e)},vl.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},vl.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},vl.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!bn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},vl.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},vl.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},vl.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},vl.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},vl.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,a[s.key]=e,a[r.key]=t};var wP=function(e,t,n,a){return function(r,s,c,v){var h,g,_={},E=new bP,O=function(S){var k=S.v!==h?S.v:S.w,M=_[k],j=c(S),I=g.distance+j;if(j<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+j);I<M.distance&&(M.distance=I,M.predecessor=h,E.decrease(k,I))};for(r.nodes().forEach(function(S){var k=S===s?0:Number.POSITIVE_INFINITY;_[S]={distance:k},E.add(S,k)});E.size()>0&&(h=E.removeMin(),(g=_[h]).distance!==Number.POSITIVE_INFINITY);)v(h).forEach(O);return _}(e,String(t),n||iZ,a||function(r){return e.outEdges(r)})},iZ=bn.constant(1),aZ=function(e,t,n){return bn.transform(e.nodes(),function(a,r){a[r]=wP(e,r,t,n)},{})},EP=function(e){var t=0,n=[],a={},r=[];function s(c){var v=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(_){bn.has(a,_)?a[_].onStack&&(v.lowlink=Math.min(v.lowlink,a[_].index)):(s(_),v.lowlink=Math.min(v.lowlink,a[_].lowlink))}),v.lowlink===v.index){var h,g=[];do h=n.pop(),a[h].onStack=!1,g.push(h);while(c!==h);r.push(g)}}return e.nodes().forEach(function(c){bn.has(a,c)||s(c)}),r},uZ=function(e){return bn.filter(EP(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},lZ=function(e,t,n){return function(a,r,s){var c={},v=a.nodes();return v.forEach(function(h){c[h]={},c[h][h]={distance:0},v.forEach(function(g){h!==g&&(c[h][g]={distance:Number.POSITIVE_INFINITY})}),s(h).forEach(function(g){var _=g.v===h?g.w:g.v,E=r(g);c[h][_]={distance:E,predecessor:h}})}),v.forEach(function(h){var g=c[h];v.forEach(function(_){var E=c[_];v.forEach(function(O){var S=E[h],k=g[O],M=E[O],j=S.distance+k.distance;j<M.distance&&(M.distance=j,M.predecessor=k.predecessor)})})}),c}(e,t||sZ,n||function(a){return e.outEdges(a)})},sZ=bn.constant(1),A0=OP;function OP(e){var t={},n={},a=[];if(bn.each(e.sinks(),function r(s){if(bn.has(n,s))throw new zm;bn.has(t,s)||(n[s]=!0,t[s]=!0,bn.each(e.predecessors(s),r),delete n[s],a.push(s))}),bn.size(t)!==e.nodeCount())throw new zm;return a}function zm(){}OP.CycleException=zm,zm.prototype=new Error;var EA=function(e,t,n){bn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return bn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);xP(e,c,n==="post",s,a,r)}),r};function xP(e,t,n,a,r,s){bn.has(a,t)||(a[t]=!0,n||s.push(t),bn.each(r(t),function(c){xP(e,c,n,a,r,s)}),n&&s.push(t))}var Hm,cZ={Graph:wA.Graph,json:tZ,alg:{components:oZ,dijkstra:wP,dijkstraAll:aZ,findCycles:uZ,floydWarshall:lZ,isAcyclic:function(e){try{A0(e)}catch(t){if(t instanceof A0.CycleException)return!1;throw t}return!0},postorder:function(e,t){return EA(e,t,"post")},preorder:function(e,t){return EA(e,t,"pre")},prim:function(e,t){var n,a=new sw,r={},s=new bP;function c(h){var g=h.v===n?h.w:h.v,_=s.priority(g);if(_!==void 0){var E=t(h);E<_&&(r[g]=n,s.decrease(g,E))}}if(e.nodeCount()===0)return a;bn.each(e.nodes(),function(h){s.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),bn.has(r,n))a.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:EP,topsort:A0},version:wA.version};try{Hm=cZ}catch{}Hm||(Hm=window.graphlib);var Hs=Hm,fZ=function(e){return H2(e,5)},Hv=function(e,t,n){if(!vu(n))return!1;var a=typeof t;return!!(a=="number"?of(n)&&bg(t,n.length):a=="string"&&t in n)&&tv(n[t],e)},SP=Object.prototype,dZ=SP.hasOwnProperty,pZ=Tg(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&Hv(t[0],t[1],r)&&(a=1);++n<a;)for(var s=t[n],c=wp(s),v=-1,h=c.length;++v<h;){var g=c[v],_=e[g];(_===void 0||tv(_,SP[g])&&!dZ.call(e,g))&&(e[g]=s[g])}return e}),hZ=function(e){return function(t,n,a){var r=Object(t);if(!of(t)){var s=af(n);t=fd(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,a);return c>-1?r[s?t[c]:c]:void 0}},vZ=/^\s+|\s+$/g,yZ=/^[-+]0x[0-9a-f]+$/i,mZ=/^0b[01]+$/i,gZ=/^0o[0-7]+$/i,_Z=parseInt,bZ=function(e){if(typeof e=="number")return e;if(fp(e))return NaN;if(vu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(vZ,"");var n=mZ.test(e);return n||gZ.test(e)?_Z(e.slice(2),n?2:8):yZ.test(e)?NaN:+e},Em=function(e){return e?(e=bZ(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},wZ=function(e){var t=Em(e),n=t%1;return t==t?n?t-n:t:0},EZ=Math.max,OZ=hZ(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:wZ(n);return r<0&&(r=EZ(a+r,0)),mP(e,af(t),r)}),AP=function(e){return e!=null&&e.length?lw(e,1):[]},xZ=function(e,t){return e==null?e:rw(e,X2(t),wp)},SZ=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},AZ=function(e,t){var n={};return t=af(t),ow(e,function(a,r,s){gg(n,r,t(a,r,s))}),n},cw=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var s=e[a],c=t(s);if(c!=null&&(v===void 0?c==c&&!fp(c):n(c,v)))var v=c,h=s}return h},TZ=function(e,t){return e>t},MZ=function(e){return e&&e.length?cw(e,Ep,TZ):void 0},i1=function(e,t,n){(n!==void 0&&!tv(e[t],n)||n===void 0&&!(t in e))&&gg(e,t,n)},PZ=Function.prototype,kZ=Object.prototype,TP=PZ.toString,NZ=kZ.hasOwnProperty,RZ=TP.call(Object),jZ=function(e){if(!Jl(e)||cd(e)!="[object Object]")return!1;var t=Og(e);if(t===null)return!0;var n=NZ.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&TP.call(n)==RZ},a1=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},CZ=function(e){return uy(e,wp(e))},DZ=function(e,t,n,a,r,s,c){var v=a1(e,n),h=a1(t,n),g=c.get(h);if(g)i1(e,n,g);else{var _=s?s(v,h,n+"",e,t,c):void 0,E=_===void 0;if(E){var O=vi(h),S=!O&&sp(h),k=!O&&!S&&ly(h);_=h,O||S||k?vi(v)?_=v:gP(v)?_=F2(v):S?(E=!1,_=L2(h,!0)):k?(E=!1,_=V2(h,!0)):_=[]:jZ(h)||Bh(h)?(_=v,Bh(v)?_=CZ(v):vu(v)&&!ay(v)||(_=z2(h))):E=!1}E&&(c.set(h,_),r(_,h,a,s,c),c.delete(h)),i1(e,n,_)}},IZ=function e(t,n,a,r,s){t!==n&&rw(n,function(c,v){if(s||(s=new Nh),vu(c))DZ(t,n,v,a,e,r,s);else{var h=r?r(a1(t,v),c,v+"",t,n,s):void 0;h===void 0&&(h=c),i1(t,v,h)}},wp)},LZ=function(e){return Tg(function(t,n){var a=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&Hv(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++a<r;){var v=n[a];v&&e(t,v,a,s)}return t})}(function(e,t,n){IZ(e,t,n)}),MP=function(e,t){return e<t},FZ=function(e){return e&&e.length?cw(e,Ep,MP):void 0},$Z=function(e,t){return e&&e.length?cw(e,af(t),MP):void 0},BZ=function(){return es.Date.now()},UZ=function(e,t,n,a){if(!vu(e))return e;for(var r=-1,s=(t=Sg(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var h=sy(t[r]),g=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(r!=c){var _=v[h];(g=a?a(_,h,v):void 0)===void 0&&(g=vu(_)?_:bg(t[r+1])?[]:{})}_g(v,h,g),v=v[h]}return e},GZ=function(e,t,n){for(var a=-1,r=t.length,s={};++a<r;){var c=t[a],v=Ag(e,c);n(v,c)&&UZ(s,Sg(c,e),v)}return s},VZ=function(e,t){return GZ(e,t,function(n,a){return oP(e,a)})},WZ=function(e){return yP(vP(e,void 0,AP),e+"")}(function(e,t){return e==null?{}:VZ(e,t)}),zZ=Math.ceil,HZ=Math.max,XZ=function(e,t,n,a){for(var r=-1,s=HZ(zZ((t-e)/(n||1)),0),c=Array(s);s--;)c[a?s:++r]=e,e+=n;return c},YZ=function(e){return function(t,n,a){return a&&typeof a!="number"&&Hv(t,n,a)&&(n=a=void 0),t=Em(t),n===void 0?(n=t,t=0):n=Em(n),a=a===void 0?t<n?1:-1:Em(a),XZ(t,n,a,e)}}(),qZ=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},KZ=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,s=fp(e),c=t!==void 0,v=t===null,h=t==t,g=fp(t);if(!v&&!g&&!s&&e>t||s&&c&&h&&!v&&!g||a&&c&&h||!n&&h||!r)return 1;if(!a&&!s&&!g&&e<t||g&&n&&r&&!a&&!s||v&&n&&r||!c&&r||!h)return-1}return 0},ZZ=function(e,t,n){for(var a=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++a<c;){var h=KZ(r[a],s[a]);if(h)return a>=v?h:h*(n[a]=="desc"?-1:1)}return e.index-t.index},JZ=function(e,t,n){t=t.length?jh(t,function(s){return vi(s)?function(c){return Ag(c,s.length===1?s[0]:s)}:s}):[Ep];var a=-1;t=jh(t,wg(af));var r=sP(e,function(s,c,v){return{criteria:jh(t,function(h){return h(s)}),index:++a,value:s}});return qZ(r,function(s,c){return ZZ(s,c,n)})},QZ=Tg(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Hv(e,t[0],t[1])?t=[]:n>2&&Hv(t[0],t[1],t[2])&&(t=[t[0]]),JZ(e,lw(t,1),[])}),eJ=0,tJ=function(e){var t=++eJ;return nP(e)+t},nJ=function(e,t,n){for(var a=-1,r=e.length,s=t.length,c={};++a<r;){var v=a<s?t[a]:void 0;n(c,e[a],v)}return c},Xm,rJ=function(e,t){return nJ(e||[],t||[],_g)};try{Xm={cloneDeep:fZ,constant:nw,defaults:pZ,each:q2,filter:aP,find:OZ,flatten:AP,forEach:Y2,forIn:xZ,has:uP,isUndefined:lP,last:SZ,map:cP,mapValues:AZ,max:MZ,merge:LZ,min:FZ,minBy:$Z,now:BZ,pick:WZ,range:YZ,reduce:fP,sortBy:QZ,uniqueId:tJ,values:_P,zipObject:rJ}}catch{}Xm||(Xm=window._);var oJ=Xm;Hs.Graph;oJ.constant(1);Hs.Graph;Hs.Graph;Hs.alg.preorder;Hs.alg.postorder;Hs.Graph;Hs.Graph;Hs.Graph;Hs.Graph;Hs.Graph;function Xv(e){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(e)}function iJ(e,t){if(Xv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Xv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aJ(e){var t=iJ(e,"string");return Xv(t)=="symbol"?t:t+""}function an(e,t,n){return(t=aJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uJ=typeof Nv=="object"&&Nv&&Nv.Object===Object&&Nv,PP=uJ,lJ=PP,sJ=typeof self=="object"&&self&&self.Object===Object&&self,cJ=lJ||sJ||Function("return this")(),fJ=cJ,dJ=fJ,pJ=dJ.Symbol,kP=pJ,OA=kP;OA&&OA.toStringTag;var xA=kP;xA&&xA.toStringTag;var Ym={exports:{}};Ym.exports;(function(e,t){var n=PP,a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===a,c=s&&n.process,v=function(){try{var h=r&&r.require&&r.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v})(Ym,Ym.exports);var hJ=Ym.exports,SA=hJ;SA&&SA.isTypedArray;var NP={exports:{}},RP={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(RP);var vJ=RP.exports;(function(e){var t=vJ.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var a,r={},s=Object.prototype,c=s.hasOwnProperty,v=Object.defineProperty||function(le,he,Se){le[he]=Se.value},h=typeof Symbol=="function"?Symbol:{},g=h.iterator||"@@iterator",_=h.asyncIterator||"@@asyncIterator",E=h.toStringTag||"@@toStringTag";function O(le,he,Se){return Object.defineProperty(le,he,{value:Se,enumerable:!0,configurable:!0,writable:!0}),le[he]}try{O({},"")}catch{O=function(Se,Ke,Ge){return Se[Ke]=Ge}}function S(le,he,Se,Ke){var Ge=he&&he.prototype instanceof q?he:q,et=Object.create(Ge.prototype),gt=new $e(Ke||[]);return v(et,"_invoke",{value:de(le,Se,gt)}),et}function k(le,he,Se){try{return{type:"normal",arg:le.call(he,Se)}}catch(Ke){return{type:"throw",arg:Ke}}}r.wrap=S;var M="suspendedStart",j="suspendedYield",I="executing",N="completed",B={};function q(){}function ee(){}function Y(){}var Q={};O(Q,g,function(){return this});var z=Object.getPrototypeOf,D=z&&z(z(ke([])));D&&D!==s&&c.call(D,g)&&(Q=D);var V=Y.prototype=q.prototype=Object.create(Q);function X(le){["next","throw","return"].forEach(function(he){O(le,he,function(Se){return this._invoke(he,Se)})})}function H(le,he){function Se(Ge,et,gt,dt){var zt=k(le[Ge],le,et);if(zt.type!=="throw"){var je=zt.arg,me=je.value;return me&&t(me)=="object"&&c.call(me,"__await")?he.resolve(me.__await).then(function(xe){Se("next",xe,gt,dt)},function(xe){Se("throw",xe,gt,dt)}):he.resolve(me).then(function(xe){je.value=xe,gt(je)},function(xe){return Se("throw",xe,gt,dt)})}dt(zt.arg)}var Ke;v(this,"_invoke",{value:function(et,gt){function dt(){return new he(function(zt,je){Se(et,gt,zt,je)})}return Ke=Ke?Ke.then(dt,dt):dt()}})}function de(le,he,Se){var Ke=M;return function(Ge,et){if(Ke===I)throw Error("Generator is already running");if(Ke===N){if(Ge==="throw")throw et;return{value:a,done:!0}}for(Se.method=Ge,Se.arg=et;;){var gt=Se.delegate;if(gt){var dt=Ce(gt,Se);if(dt){if(dt===B)continue;return dt}}if(Se.method==="next")Se.sent=Se._sent=Se.arg;else if(Se.method==="throw"){if(Ke===M)throw Ke=N,Se.arg;Se.dispatchException(Se.arg)}else Se.method==="return"&&Se.abrupt("return",Se.arg);Ke=I;var zt=k(le,he,Se);if(zt.type==="normal"){if(Ke=Se.done?N:j,zt.arg===B)continue;return{value:zt.arg,done:Se.done}}zt.type==="throw"&&(Ke=N,Se.method="throw",Se.arg=zt.arg)}}}function Ce(le,he){var Se=he.method,Ke=le.iterator[Se];if(Ke===a)return he.delegate=null,Se==="throw"&&le.iterator.return&&(he.method="return",he.arg=a,Ce(le,he),he.method==="throw")||Se!=="return"&&(he.method="throw",he.arg=new TypeError("The iterator does not provide a '"+Se+"' method")),B;var Ge=k(Ke,le.iterator,he.arg);if(Ge.type==="throw")return he.method="throw",he.arg=Ge.arg,he.delegate=null,B;var et=Ge.arg;return et?et.done?(he[le.resultName]=et.value,he.next=le.nextLoc,he.method!=="return"&&(he.method="next",he.arg=a),he.delegate=null,B):et:(he.method="throw",he.arg=new TypeError("iterator result is not an object"),he.delegate=null,B)}function Me(le){var he={tryLoc:le[0]};1 in le&&(he.catchLoc=le[1]),2 in le&&(he.finallyLoc=le[2],he.afterLoc=le[3]),this.tryEntries.push(he)}function He(le){var he=le.completion||{};he.type="normal",delete he.arg,le.completion=he}function $e(le){this.tryEntries=[{tryLoc:"root"}],le.forEach(Me,this),this.reset(!0)}function ke(le){if(le||le===""){var he=le[g];if(he)return he.call(le);if(typeof le.next=="function")return le;if(!isNaN(le.length)){var Se=-1,Ke=function Ge(){for(;++Se<le.length;)if(c.call(le,Se))return Ge.value=le[Se],Ge.done=!1,Ge;return Ge.value=a,Ge.done=!0,Ge};return Ke.next=Ke}}throw new TypeError(t(le)+" is not iterable")}return ee.prototype=Y,v(V,"constructor",{value:Y,configurable:!0}),v(Y,"constructor",{value:ee,configurable:!0}),ee.displayName=O(Y,E,"GeneratorFunction"),r.isGeneratorFunction=function(le){var he=typeof le=="function"&&le.constructor;return!!he&&(he===ee||(he.displayName||he.name)==="GeneratorFunction")},r.mark=function(le){return Object.setPrototypeOf?Object.setPrototypeOf(le,Y):(le.__proto__=Y,O(le,E,"GeneratorFunction")),le.prototype=Object.create(V),le},r.awrap=function(le){return{__await:le}},X(H.prototype),O(H.prototype,_,function(){return this}),r.AsyncIterator=H,r.async=function(le,he,Se,Ke,Ge){Ge===void 0&&(Ge=Promise);var et=new H(S(le,he,Se,Ke),Ge);return r.isGeneratorFunction(he)?et:et.next().then(function(gt){return gt.done?gt.value:et.next()})},X(V),O(V,E,"Generator"),O(V,g,function(){return this}),O(V,"toString",function(){return"[object Generator]"}),r.keys=function(le){var he=Object(le),Se=[];for(var Ke in he)Se.push(Ke);return Se.reverse(),function Ge(){for(;Se.length;){var et=Se.pop();if(et in he)return Ge.value=et,Ge.done=!1,Ge}return Ge.done=!0,Ge}},r.values=ke,$e.prototype={constructor:$e,reset:function(he){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(He),!he)for(var Se in this)Se.charAt(0)==="t"&&c.call(this,Se)&&!isNaN(+Se.slice(1))&&(this[Se]=a)},stop:function(){this.done=!0;var he=this.tryEntries[0].completion;if(he.type==="throw")throw he.arg;return this.rval},dispatchException:function(he){if(this.done)throw he;var Se=this;function Ke(je,me){return gt.type="throw",gt.arg=he,Se.next=je,me&&(Se.method="next",Se.arg=a),!!me}for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var et=this.tryEntries[Ge],gt=et.completion;if(et.tryLoc==="root")return Ke("end");if(et.tryLoc<=this.prev){var dt=c.call(et,"catchLoc"),zt=c.call(et,"finallyLoc");if(dt&&zt){if(this.prev<et.catchLoc)return Ke(et.catchLoc,!0);if(this.prev<et.finallyLoc)return Ke(et.finallyLoc)}else if(dt){if(this.prev<et.catchLoc)return Ke(et.catchLoc,!0)}else{if(!zt)throw Error("try statement without catch or finally");if(this.prev<et.finallyLoc)return Ke(et.finallyLoc)}}}},abrupt:function(he,Se){for(var Ke=this.tryEntries.length-1;Ke>=0;--Ke){var Ge=this.tryEntries[Ke];if(Ge.tryLoc<=this.prev&&c.call(Ge,"finallyLoc")&&this.prev<Ge.finallyLoc){var et=Ge;break}}et&&(he==="break"||he==="continue")&&et.tryLoc<=Se&&Se<=et.finallyLoc&&(et=null);var gt=et?et.completion:{};return gt.type=he,gt.arg=Se,et?(this.method="next",this.next=et.finallyLoc,B):this.complete(gt)},complete:function(he,Se){if(he.type==="throw")throw he.arg;return he.type==="break"||he.type==="continue"?this.next=he.arg:he.type==="return"?(this.rval=this.arg=he.arg,this.method="return",this.next="end"):he.type==="normal"&&Se&&(this.next=Se),B},finish:function(he){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Ke=this.tryEntries[Se];if(Ke.finallyLoc===he)return this.complete(Ke.completion,Ke.afterLoc),He(Ke),B}},catch:function(he){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Ke=this.tryEntries[Se];if(Ke.tryLoc===he){var Ge=Ke.completion;if(Ge.type==="throw"){var et=Ge.arg;He(Ke)}return et}}throw Error("illegal catch attempt")},delegateYield:function(he,Se,Ke){return this.delegate={iterator:ke(he),resultName:Se,nextLoc:Ke},this.method==="next"&&(this.arg=a),B}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(NP);var yJ=NP.exports,T0=yJ();try{regeneratorRuntime=T0}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=T0:Function("r","regeneratorRuntime = r")(T0)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var AA;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(AA||(AA={}));var TA;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(TA||(TA={}));var MA;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(MA||(MA={}));var PA;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(PA||(PA={}));var mJ={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Nv,function(){var n=function(L){return L instanceof Uint8Array||L instanceof Uint16Array||L instanceof Uint32Array||L instanceof Int8Array||L instanceof Int16Array||L instanceof Int32Array||L instanceof Float32Array||L instanceof Float64Array||L instanceof Uint8ClampedArray},a=function(L,oe){for(var _e=Object.keys(oe),tt=0;tt<_e.length;++tt)L[_e[tt]]=oe[_e[tt]];return L},r=`
`;function s(L){return typeof atob<"u"?atob(L):"base64:"+L}function c(L){var oe=new Error("(regl) "+L);throw console.error(oe),oe}function v(L,oe){L||c(oe)}function h(L){return L?": "+L:""}function g(L,oe,_e){L in oe||c("unknown parameter ("+L+")"+h(_e)+". possible values: "+Object.keys(oe).join())}function _(L,oe){n(L)||c("invalid parameter type"+h(oe)+". must be a typed array")}function E(L,oe){switch(oe){case"number":return typeof L=="number";case"object":return typeof L=="object";case"string":return typeof L=="string";case"boolean":return typeof L=="boolean";case"function":return typeof L=="function";case"undefined":return typeof L>"u";case"symbol":return typeof L=="symbol"}}function O(L,oe,_e){E(L,oe)||c("invalid parameter type"+h(_e)+". expected "+oe+", got "+typeof L)}function S(L,oe){L>=0&&(L|0)===L||c("invalid parameter type, ("+L+")"+h(oe)+". must be a nonnegative integer")}function k(L,oe,_e){oe.indexOf(L)<0&&c("invalid value"+h(_e)+". must be one of: "+oe)}var M=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function j(L){Object.keys(L).forEach(function(oe){M.indexOf(oe)<0&&c('invalid regl constructor argument "'+oe+'". must be one of '+M)})}function I(L,oe){for(L=L+"";L.length<oe;)L=" "+L;return L}function N(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B(L,oe){this.number=L,this.line=oe,this.errors=[]}function q(L,oe,_e){this.file=L,this.line=oe,this.message=_e}function ee(){var L=new Error,oe=(L.stack||L).toString(),_e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(oe);if(_e)return _e[1];var tt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(oe);return tt?tt[1]:"unknown"}function Y(){var L=new Error,oe=(L.stack||L).toString(),_e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(oe);if(_e)return _e[1];var tt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(oe);return tt?tt[1]:"unknown"}function Q(L,oe){var _e=L.split(`
`),tt=1,pt=0,Ze={unknown:new N,0:new N};Ze.unknown.name=Ze[0].name=oe||ee(),Ze.unknown.lines.push(new B(0,""));for(var st=0;st<_e.length;++st){var Pt=_e[st],Ct=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Pt);if(Ct)switch(Ct[1]){case"line":var Rt=/(\d+)(\s+\d+)?/.exec(Ct[2]);Rt&&(tt=Rt[1]|0,Rt[2]&&(pt=Rt[2]|0,pt in Ze||(Ze[pt]=new N)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ct[2]);ct&&(Ze[pt].name=ct[1]?s(ct[2]):ct[2]);break}Ze[pt].lines.push(new B(tt++,Pt))}return Object.keys(Ze).forEach(function(Gt){var Bt=Ze[Gt];Bt.lines.forEach(function(kt){Bt.index[kt.number]=kt})}),Ze}function z(L){var oe=[];return L.split(`
`).forEach(function(_e){if(!(_e.length<5)){var tt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(_e);tt?oe.push(new q(tt[1]|0,tt[2]|0,tt[3].trim())):_e.length>0&&oe.push(new q("unknown",0,_e))}}),oe}function D(L,oe){oe.forEach(function(_e){var tt=L[_e.file];if(tt){var pt=tt.index[_e.line];if(pt){pt.errors.push(_e),tt.hasErrors=!0;return}}L.unknown.hasErrors=!0,L.unknown.lines[0].errors.push(_e)})}function V(L,oe,_e,tt,pt){if(!L.getShaderParameter(oe,L.COMPILE_STATUS)){var Ze=L.getShaderInfoLog(oe),st=tt===L.FRAGMENT_SHADER?"fragment":"vertex";$e(_e,"string",st+" shader source must be a string",pt);var Pt=Q(_e,pt),Ct=z(Ze);D(Pt,Ct),Object.keys(Pt).forEach(function(Rt){var ct=Pt[Rt];if(!ct.hasErrors)return;var Gt=[""],Bt=[""];function kt(bt,We){Gt.push(bt),Bt.push(We||"")}kt("file number "+Rt+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(bt){if(bt.errors.length>0){kt(I(bt.number,4)+"|  ","background-color:yellow; font-weight:bold"),kt(bt.line+r,"color:red; background-color:yellow; font-weight:bold");var We=0;bt.errors.forEach(function(ut){var Lt=ut.message,Kt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lt);if(Kt){var xt=Kt[1];switch(Lt=Kt[2],xt){case"assign":xt="=";break}We=Math.max(bt.line.indexOf(xt,We),0)}else We=0;kt(I("| ",6)),kt(I("^^^",We+3)+r,"font-weight:bold"),kt(I("| ",6)),kt(Lt+r,"font-weight:bold")}),kt(I("| ",6)+r)}else kt(I(bt.number,4)+"|  "),kt(bt.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Bt[0]=Gt.join("%c"),console.log.apply(console,Bt)):console.log(Gt.join(""))}),v.raise("Error compiling "+st+" shader, "+Pt[0].name)}}function X(L,oe,_e,tt,pt){if(!L.getProgramParameter(oe,L.LINK_STATUS)){var Ze=L.getProgramInfoLog(oe),st=Q(_e,pt),Pt=Q(tt,pt),Ct='Error linking program with vertex shader, "'+Pt[0].name+'", and fragment shader "'+st[0].name+'"';typeof document<"u"?console.log("%c"+Ct+r+"%c"+Ze,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ct+r+Ze),v.raise(Ct)}}function H(L){L._commandRef=ee()}function de(L,oe,_e,tt){H(L);function pt(Ct){return Ct?tt.id(Ct):0}L._fragId=pt(L.static.frag),L._vertId=pt(L.static.vert);function Ze(Ct,Rt){Object.keys(Rt).forEach(function(ct){Ct[tt.id(ct)]=!0})}var st=L._uniformSet={};Ze(st,oe.static),Ze(st,oe.dynamic);var Pt=L._attributeSet={};Ze(Pt,_e.static),Ze(Pt,_e.dynamic),L._hasCount="count"in L.static||"count"in L.dynamic||"elements"in L.static||"elements"in L.dynamic}function Ce(L,oe){var _e=Y();c(L+" in command "+(oe||ee())+(_e==="unknown"?"":" called from "+_e))}function Me(L,oe,_e){L||Ce(oe,_e||ee())}function He(L,oe,_e,tt){L in oe||Ce("unknown parameter ("+L+")"+h(_e)+". possible values: "+Object.keys(oe).join(),tt||ee())}function $e(L,oe,_e,tt){E(L,oe)||Ce("invalid parameter type"+h(_e)+". expected "+oe+", got "+typeof L,tt||ee())}function ke(L){L()}function le(L,oe,_e){L.texture?k(L.texture._texture.internalformat,oe,"unsupported texture format for attachment"):k(L.renderbuffer._renderbuffer.format,_e,"unsupported renderbuffer format for attachment")}var he=33071,Se=9728,Ke=9984,Ge=9985,et=9986,gt=9987,dt=5120,zt=5121,je=5122,me=5123,xe=5124,vt=5125,Wt=5126,Ot=32819,rn=32820,vn=33635,An=34042,pn=36193,ft={};ft[dt]=ft[zt]=1,ft[je]=ft[me]=ft[pn]=ft[vn]=ft[Ot]=ft[rn]=2,ft[xe]=ft[vt]=ft[Wt]=ft[An]=4;function En(L,oe){return L===rn||L===Ot||L===vn?2:L===An?4:ft[L]*oe}function Le(L){return!(L&L-1)&&!!L}function yn(L,oe,_e){var tt,pt=oe.width,Ze=oe.height,st=oe.channels;v(pt>0&&pt<=_e.maxTextureSize&&Ze>0&&Ze<=_e.maxTextureSize,"invalid texture shape"),(L.wrapS!==he||L.wrapT!==he)&&v(Le(pt)&&Le(Ze),"incompatible wrap mode for texture, both width and height must be power of 2"),oe.mipmask===1?pt!==1&&Ze!==1&&v(L.minFilter!==Ke&&L.minFilter!==et&&L.minFilter!==Ge&&L.minFilter!==gt,"min filter requires mipmap"):(v(Le(pt)&&Le(Ze),"texture must be a square power of 2 to support mipmapping"),v(oe.mipmask===(pt<<1)-1,"missing or incomplete mipmap data")),oe.type===Wt&&(_e.extensions.indexOf("oes_texture_float_linear")<0&&v(L.minFilter===Se&&L.magFilter===Se,"filter not supported, must enable oes_texture_float_linear"),v(!L.genMipmaps,"mipmap generation not supported with float textures"));var Pt=oe.images;for(tt=0;tt<16;++tt)if(Pt[tt]){var Ct=pt>>tt,Rt=Ze>>tt;v(oe.mipmask&1<<tt,"missing mipmap data");var ct=Pt[tt];if(v(ct.width===Ct&&ct.height===Rt,"invalid shape for mip images"),v(ct.format===oe.format&&ct.internalformat===oe.internalformat&&ct.type===oe.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Gt=Math.ceil(En(ct.type,st)*Ct/ct.unpackAlignment)*ct.unpackAlignment;v(ct.data.byteLength===Gt*Rt,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else L.genMipmaps||v((oe.mipmask&1<<tt)===0,"extra mipmap data");oe.compressed&&v(!L.genMipmaps,"mipmap generation for compressed images not supported")}function qn(L,oe,_e,tt){var pt=L.width,Ze=L.height,st=L.channels;v(pt>0&&pt<=tt.maxTextureSize&&Ze>0&&Ze<=tt.maxTextureSize,"invalid texture shape"),v(pt===Ze,"cube map must be square"),v(oe.wrapS===he&&oe.wrapT===he,"wrap mode not supported by cube map");for(var Pt=0;Pt<_e.length;++Pt){var Ct=_e[Pt];v(Ct.width===pt&&Ct.height===Ze,"inconsistent cube map face shape"),oe.genMipmaps&&(v(!Ct.compressed,"can not generate mipmap for compressed textures"),v(Ct.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Rt=Ct.images,ct=0;ct<16;++ct){var Gt=Rt[ct];if(Gt){var Bt=pt>>ct,kt=Ze>>ct;v(Ct.mipmask&1<<ct,"missing mipmap data"),v(Gt.width===Bt&&Gt.height===kt,"invalid shape for mip images"),v(Gt.format===L.format&&Gt.internalformat===L.internalformat&&Gt.type===L.type,"incompatible type for mip image"),Gt.compressed||(Gt.data?v(Gt.data.byteLength===Bt*kt*Math.max(En(Gt.type,st),Gt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Gt.element||Gt.copy)}}}}var ne=a(v,{optional:ke,raise:c,commandRaise:Ce,command:Me,parameter:g,commandParameter:He,constructor:j,type:O,commandType:$e,isTypedArray:_,nni:S,oneOf:k,shaderError:V,linkError:X,callSite:Y,saveCommandRef:H,saveDrawInfo:de,framebufferFormat:le,guessCommand:ee,texture2D:yn,textureCube:qn}),Fn=0,wr=0,Lr=5,Kr=6;function jn(L,oe){this.id=Fn++,this.type=L,this.data=oe}function Ao(L){return L.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ee(L){if(L.length===0)return[];var oe=L.charAt(0),_e=L.charAt(L.length-1);if(L.length>1&&oe===_e&&(oe==='"'||oe==="'"))return['"'+Ao(L.substr(1,L.length-2))+'"'];var tt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(L);if(tt)return Ee(L.substr(0,tt.index)).concat(Ee(tt[1])).concat(Ee(L.substr(tt.index+tt[0].length)));var pt=L.split(".");if(pt.length===1)return['"'+Ao(L)+'"'];for(var Ze=[],st=0;st<pt.length;++st)Ze=Ze.concat(Ee(pt[st]));return Ze}function Xe(L){return"["+Ee(L).join("][")+"]"}function Re(L,oe){return new jn(L,Xe(oe+""))}function it(L){return typeof L=="function"&&!L._reglType||L instanceof jn}function Qt(L,oe){if(typeof L=="function")return new jn(wr,L);if(typeof L=="number"||typeof L=="boolean")return new jn(Lr,L);if(Array.isArray(L))return new jn(Kr,L.map((_e,tt)=>Qt(_e,oe+"["+tt+"]")));if(L instanceof jn)return L;ne(!1,"invalid option type in uniform "+oe)}var qt={DynamicVariable:jn,define:Re,isDynamic:it,unbox:Qt,accessor:Xe},Pn={next:typeof requestAnimationFrame=="function"?function(L){return requestAnimationFrame(L)}:function(L){return setTimeout(L,16)},cancel:typeof cancelAnimationFrame=="function"?function(L){return cancelAnimationFrame(L)}:clearTimeout},mr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function qo(){var L={"":0},oe=[""];return{id:function(_e){var tt=L[_e];return tt||(tt=L[_e]=oe.length,oe.push(_e),tt)},str:function(_e){return oe[_e]}}}function li(L,oe,_e){var tt=document.createElement("canvas");a(tt.style,{border:0,margin:0,padding:0,top:0,left:0}),L.appendChild(tt),L===document.body&&(tt.style.position="absolute",a(L.style,{margin:0,padding:0}));function pt(){var Pt=window.innerWidth,Ct=window.innerHeight;if(L!==document.body){var Rt=L.getBoundingClientRect();Pt=Rt.right-Rt.left,Ct=Rt.bottom-Rt.top}tt.width=_e*Pt,tt.height=_e*Ct,a(tt.style,{width:Pt+"px",height:Ct+"px"})}var Ze;L!==document.body&&typeof ResizeObserver=="function"?(Ze=new ResizeObserver(function(){setTimeout(pt)}),Ze.observe(L)):window.addEventListener("resize",pt,!1);function st(){Ze?Ze.disconnect():window.removeEventListener("resize",pt),L.removeChild(tt)}return pt(),{canvas:tt,onDestroy:st}}function Co(L,oe){function _e(tt){try{return L.getContext(tt,oe)}catch{return null}}return _e("webgl")||_e("experimental-webgl")||_e("webgl-experimental")}function Bo(L){return typeof L.nodeName=="string"&&typeof L.appendChild=="function"&&typeof L.getBoundingClientRect=="function"}function On(L){return typeof L.drawArrays=="function"||typeof L.drawElements=="function"}function $n(L){return typeof L=="string"?L.split():(ne(Array.isArray(L),"invalid extension array"),L)}function Hn(L){return typeof L=="string"?(ne(typeof document<"u","not supported outside of DOM"),document.querySelector(L)):L}function rr(L){var oe=L||{},_e,tt,pt,Ze,st={},Pt=[],Ct=[],Rt=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Gt=function(bt){bt&&ne.raise(bt)},Bt=function(){};if(typeof oe=="string"?(ne(typeof document<"u","selector queries only supported in DOM enviroments"),_e=document.querySelector(oe),ne(_e,"invalid query string for element")):typeof oe=="object"?Bo(oe)?_e=oe:On(oe)?(Ze=oe,pt=Ze.canvas):(ne.constructor(oe),"gl"in oe?Ze=oe.gl:"canvas"in oe?pt=Hn(oe.canvas):"container"in oe&&(tt=Hn(oe.container)),"attributes"in oe&&(st=oe.attributes,ne.type(st,"object","invalid context attributes")),"extensions"in oe&&(Pt=$n(oe.extensions)),"optionalExtensions"in oe&&(Ct=$n(oe.optionalExtensions)),"onDone"in oe&&(ne.type(oe.onDone,"function","invalid or missing onDone callback"),Gt=oe.onDone),"profile"in oe&&(ct=!!oe.profile),"pixelRatio"in oe&&(Rt=+oe.pixelRatio,ne(Rt>0,"invalid pixel ratio"))):ne.raise("invalid arguments to regl"),_e&&(_e.nodeName.toLowerCase()==="canvas"?pt=_e:tt=_e),!Ze){if(!pt){ne(typeof document<"u","must manually specify webgl context outside of DOM environments");var kt=li(tt||document.body,Gt,Rt);if(!kt)return null;pt=kt.canvas,Bt=kt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),Ze=Co(pt,st)}return Ze?{gl:Ze,canvas:pt,container:tt,extensions:Pt,optionalExtensions:Ct,pixelRatio:Rt,profile:ct,onDone:Gt,onDestroy:Bt}:(Bt(),Gt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function zr(L,oe){var _e={};function tt(st){ne.type(st,"string","extension name must be string");var Pt=st.toLowerCase(),Ct;try{Ct=_e[Pt]=L.getExtension(Pt)}catch{}return!!Ct}for(var pt=0;pt<oe.extensions.length;++pt){var Ze=oe.extensions[pt];if(!tt(Ze))return oe.onDestroy(),oe.onDone('"'+Ze+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return oe.optionalExtensions.forEach(tt),{extensions:_e,restore:function(){Object.keys(_e).forEach(function(st){if(_e[st]&&!tt(st))throw new Error("(regl): error restoring extension "+st)})}}}function Tr(L,oe){for(var _e=Array(L),tt=0;tt<L;++tt)_e[tt]=oe(tt);return _e}var Ka=5120,Ma=5121,Za=5122,Gu=5123,dd=5124,Xs=5125,ea=5126;function Sl(L){for(var oe=16;oe<=1<<28;oe*=16)if(L<=oe)return oe;return 0}function Mn(L){var oe,_e;return oe=(L>65535)<<4,L>>>=oe,_e=(L>255)<<3,L>>>=_e,oe|=_e,_e=(L>15)<<2,L>>>=_e,oe|=_e,_e=(L>3)<<1,L>>>=_e,oe|=_e,oe|L>>1}function uf(){var L=Tr(8,function(){return[]});function oe(Ze){var st=Sl(Ze),Pt=L[Mn(st)>>2];return Pt.length>0?Pt.pop():new ArrayBuffer(st)}function _e(Ze){L[Mn(Ze.byteLength)>>2].push(Ze)}function tt(Ze,st){var Pt=null;switch(Ze){case Ka:Pt=new Int8Array(oe(st),0,st);break;case Ma:Pt=new Uint8Array(oe(st),0,st);break;case Za:Pt=new Int16Array(oe(2*st),0,st);break;case Gu:Pt=new Uint16Array(oe(2*st),0,st);break;case dd:Pt=new Int32Array(oe(4*st),0,st);break;case Xs:Pt=new Uint32Array(oe(4*st),0,st);break;case ea:Pt=new Float32Array(oe(4*st),0,st);break;default:return null}return Pt.length!==st?Pt.subarray(0,st):Pt}function pt(Ze){_e(Ze.buffer)}return{alloc:oe,free:_e,allocType:tt,freeType:pt}}var uo=uf();uo.zero=uf();var Ys=3408,Ci=3410,Wi=3411,ts=3412,va=3413,ta=3414,ya=3415,qs=33901,Ks=33902,lf=3379,Al=3386,sf=34921,Zs=36347,pd=36348,mu=35661,cf=35660,Ja=34930,Js=36349,ns=34076,Qs=34024,ec=7936,hd=7937,ff=7938,Br=35724,Fr=34047,df=36063,Vu=34852,na=3553,rs=34067,pf=34069,To=33984,gu=6408,_u=5126,os=5121,Wu=36160,si=36053,tc=36064,hf=16384,nc=function(L,oe){var _e=1;oe.ext_texture_filter_anisotropic&&(_e=L.getParameter(Fr));var tt=1,pt=1;oe.webgl_draw_buffers&&(tt=L.getParameter(Vu),pt=L.getParameter(df));var Ze=!!oe.oes_texture_float;if(Ze){var st=L.createTexture();L.bindTexture(na,st),L.texImage2D(na,0,gu,1,1,0,gu,_u,null);var Pt=L.createFramebuffer();if(L.bindFramebuffer(Wu,Pt),L.framebufferTexture2D(Wu,tc,na,st,0),L.bindTexture(na,null),L.checkFramebufferStatus(Wu)!==si)Ze=!1;else{L.viewport(0,0,1,1),L.clearColor(1,0,0,1),L.clear(hf);var Ct=uo.allocType(_u,4);L.readPixels(0,0,1,1,gu,_u,Ct),L.getError()?Ze=!1:(L.deleteFramebuffer(Pt),L.deleteTexture(st),Ze=Ct[0]===1),uo.freeType(Ct)}}var Rt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Rt){var Gt=L.createTexture(),Bt=uo.allocType(os,36);L.activeTexture(To),L.bindTexture(rs,Gt),L.texImage2D(pf,0,gu,3,3,0,gu,os,Bt),uo.freeType(Bt),L.bindTexture(rs,null),L.deleteTexture(Gt),ct=!L.getError()}return{colorBits:[L.getParameter(Ci),L.getParameter(Wi),L.getParameter(ts),L.getParameter(va)],depthBits:L.getParameter(ta),stencilBits:L.getParameter(ya),subpixelBits:L.getParameter(Ys),extensions:Object.keys(oe).filter(function(kt){return!!oe[kt]}),maxAnisotropic:_e,maxDrawbuffers:tt,maxColorAttachments:pt,pointSizeDims:L.getParameter(qs),lineWidthDims:L.getParameter(Ks),maxViewportDims:L.getParameter(Al),maxCombinedTextureUnits:L.getParameter(mu),maxCubeMapSize:L.getParameter(ns),maxRenderbufferSize:L.getParameter(Qs),maxTextureUnits:L.getParameter(Ja),maxTextureSize:L.getParameter(lf),maxAttributes:L.getParameter(sf),maxVertexUniforms:L.getParameter(Zs),maxVertexTextureUnits:L.getParameter(cf),maxVaryingVectors:L.getParameter(pd),maxFragmentUniforms:L.getParameter(Js),glsl:L.getParameter(Br),renderer:L.getParameter(hd),vendor:L.getParameter(ec),version:L.getParameter(ff),readFloat:Ze,npotTextureCube:ct}};function Ei(L){return!!L&&typeof L=="object"&&Array.isArray(L.shape)&&Array.isArray(L.stride)&&typeof L.offset=="number"&&L.shape.length===L.stride.length&&(Array.isArray(L.data)||n(L.data))}var Ko=function(L){return Object.keys(L).map(function(oe){return L[oe]})},zi={shape:xi,flatten:yf};function Zr(L,oe,_e){for(var tt=0;tt<oe;++tt)_e[tt]=L[tt]}function vf(L,oe,_e,tt){for(var pt=0,Ze=0;Ze<oe;++Ze)for(var st=L[Ze],Pt=0;Pt<_e;++Pt)tt[pt++]=st[Pt]}function Oi(L,oe,_e,tt,pt,Ze){for(var st=Ze,Pt=0;Pt<oe;++Pt)for(var Ct=L[Pt],Rt=0;Rt<_e;++Rt)for(var ct=Ct[Rt],Gt=0;Gt<tt;++Gt)pt[st++]=ct[Gt]}function rc(L,oe,_e,tt,pt){for(var Ze=1,st=_e+1;st<oe.length;++st)Ze*=oe[st];var Pt=oe[_e];if(oe.length-_e===4){var Ct=oe[_e+1],Rt=oe[_e+2],ct=oe[_e+3];for(st=0;st<Pt;++st)Oi(L[st],Ct,Rt,ct,tt,pt),pt+=Ze}else for(st=0;st<Pt;++st)rc(L[st],oe,_e+1,tt,pt),pt+=Ze}function yf(L,oe,_e,tt){var pt=1;if(oe.length)for(var Ze=0;Ze<oe.length;++Ze)pt*=oe[Ze];else pt=0;var st=tt||uo.allocType(_e,pt);switch(oe.length){case 0:break;case 1:Zr(L,oe[0],st);break;case 2:vf(L,oe[0],oe[1],st);break;case 3:Oi(L,oe[0],oe[1],oe[2],st,0);break;default:rc(L,oe,0,st,0)}return st}function xi(L){for(var oe=[],_e=L;_e.length;_e=_e[0])oe.push(_e.length);return oe}var mi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},oc=5120,Rr=5122,Zo=5124,is=5121,mf=5123,ic=5125,as=5126,Pa=5126,Si={int8:oc,int16:Rr,int32:Zo,uint8:is,uint16:mf,uint32:ic,float:as,float32:Pa},zu=35048,Di=35040,ra={dynamic:zu,stream:Di,static:35044},Or=zi.flatten,Ai=zi.shape,ma=35044,oi=35040,Hu=5121,bu=5126,ga=[];ga[5120]=1,ga[5122]=2,ga[5124]=4,ga[5121]=1,ga[5123]=2,ga[5125]=4,ga[5126]=4;function ro(L){return mi[Object.prototype.toString.call(L)]|0}function Tl(L,oe){for(var _e=0;_e<oe.length;++_e)L[_e]=oe[_e]}function ka(L,oe,_e,tt,pt,Ze,st){for(var Pt=0,Ct=0;Ct<_e;++Ct)for(var Rt=0;Rt<tt;++Rt)L[Pt++]=oe[pt*Ct+Ze*Rt+st]}function oa(L,oe,_e,tt){var pt=0,Ze={};function st(We){this.id=pt++,this.buffer=L.createBuffer(),this.type=We,this.usage=ma,this.byteLength=0,this.dimension=1,this.dtype=Hu,this.persistentData=null,_e.profile&&(this.stats={size:0})}st.prototype.bind=function(){L.bindBuffer(this.type,this.buffer)},st.prototype.destroy=function(){Bt(this)};var Pt=[];function Ct(We,ut){var Lt=Pt.pop();return Lt||(Lt=new st(We)),Lt.bind(),Gt(Lt,ut,oi,0,1,!1),Lt}function Rt(We){Pt.push(We)}function ct(We,ut,Lt){We.byteLength=ut.byteLength,L.bufferData(We.type,ut,Lt)}function Gt(We,ut,Lt,Kt,xt,Zt){var At;if(We.usage=Lt,Array.isArray(ut)){if(We.dtype=Kt||bu,ut.length>0){var Vt;if(Array.isArray(ut[0])){At=Ai(ut);for(var wt=1,Xt=1;Xt<At.length;++Xt)wt*=At[Xt];We.dimension=wt,Vt=Or(ut,At,We.dtype),ct(We,Vt,Lt),Zt?We.persistentData=Vt:uo.freeType(Vt)}else if(typeof ut[0]=="number"){We.dimension=xt;var Tn=uo.allocType(We.dtype,ut.length);Tl(Tn,ut),ct(We,Tn,Lt),Zt?We.persistentData=Tn:uo.freeType(Tn)}else n(ut[0])?(We.dimension=ut[0].length,We.dtype=Kt||ro(ut[0])||bu,Vt=Or(ut,[ut.length,ut[0].length],We.dtype),ct(We,Vt,Lt),Zt?We.persistentData=Vt:uo.freeType(Vt)):ne.raise("invalid buffer data")}}else if(n(ut))We.dtype=Kt||ro(ut),We.dimension=xt,ct(We,ut,Lt),Zt&&(We.persistentData=new Uint8Array(new Uint8Array(ut.buffer)));else if(Ei(ut)){At=ut.shape;var Vn=ut.stride,Dt=ut.offset,Tt=0,Et=0,Rn=0,er=0;At.length===1?(Tt=At[0],Et=1,Rn=Vn[0],er=0):At.length===2?(Tt=At[0],Et=At[1],Rn=Vn[0],er=Vn[1]):ne.raise("invalid shape"),We.dtype=Kt||ro(ut.data)||bu,We.dimension=Et;var ln=uo.allocType(We.dtype,Tt*Et);ka(ln,ut.data,Tt,Et,Rn,er,Dt),ct(We,ln,Lt),Zt?We.persistentData=ln:uo.freeType(ln)}else ut instanceof ArrayBuffer?(We.dtype=Hu,We.dimension=xt,ct(We,ut,Lt),Zt&&(We.persistentData=new Uint8Array(new Uint8Array(ut)))):ne.raise("invalid buffer data")}function Bt(We){oe.bufferCount--,tt(We);var ut=We.buffer;ne(ut,"buffer must not be deleted already"),L.deleteBuffer(ut),We.buffer=null,delete Ze[We.id]}function kt(We,ut,Lt,Kt){oe.bufferCount++;var xt=new st(ut);Ze[xt.id]=xt;function Zt(wt){var Xt=ma,Tn=null,Vn=0,Dt=0,Tt=1;return Array.isArray(wt)||n(wt)||Ei(wt)||wt instanceof ArrayBuffer?Tn=wt:typeof wt=="number"?Vn=wt|0:wt&&(ne.type(wt,"object","buffer arguments must be an object, a number or an array"),"data"in wt&&(ne(Tn===null||Array.isArray(Tn)||n(Tn)||Ei(Tn),"invalid data for buffer"),Tn=wt.data),"usage"in wt&&(ne.parameter(wt.usage,ra,"invalid buffer usage"),Xt=ra[wt.usage]),"type"in wt&&(ne.parameter(wt.type,Si,"invalid buffer type"),Dt=Si[wt.type]),"dimension"in wt&&(ne.type(wt.dimension,"number","invalid dimension"),Tt=wt.dimension|0),"length"in wt&&(ne.nni(Vn,"buffer length must be a nonnegative integer"),Vn=wt.length|0)),xt.bind(),Tn?Gt(xt,Tn,Xt,Dt,Tt,Kt):(Vn&&L.bufferData(xt.type,Vn,Xt),xt.dtype=Dt||Hu,xt.usage=Xt,xt.dimension=Tt,xt.byteLength=Vn),_e.profile&&(xt.stats.size=xt.byteLength*ga[xt.dtype]),Zt}function At(wt,Xt){ne(Xt+wt.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+wt.byteLength+" starting from offset "+Xt+" to a buffer of size "+xt.byteLength),L.bufferSubData(xt.type,Xt,wt)}function Vt(wt,Xt){var Tn=(Xt||0)|0,Vn;if(xt.bind(),n(wt)||wt instanceof ArrayBuffer)At(wt,Tn);else if(Array.isArray(wt)){if(wt.length>0)if(typeof wt[0]=="number"){var Dt=uo.allocType(xt.dtype,wt.length);Tl(Dt,wt),At(Dt,Tn),uo.freeType(Dt)}else if(Array.isArray(wt[0])||n(wt[0])){Vn=Ai(wt);var Tt=Or(wt,Vn,xt.dtype);At(Tt,Tn),uo.freeType(Tt)}else ne.raise("invalid buffer data")}else if(Ei(wt)){Vn=wt.shape;var Et=wt.stride,Rn=0,er=0,ln=0,Jn=0;Vn.length===1?(Rn=Vn[0],er=1,ln=Et[0],Jn=0):Vn.length===2?(Rn=Vn[0],er=Vn[1],ln=Et[0],Jn=Et[1]):ne.raise("invalid shape");var Gn=Array.isArray(wt.data)?xt.dtype:ro(wt.data),tr=uo.allocType(Gn,Rn*er);ka(tr,wt.data,Rn,er,ln,Jn,wt.offset),At(tr,Tn),uo.freeType(tr)}else ne.raise("invalid data for buffer subdata");return Zt}return Lt||Zt(We),Zt._reglType="buffer",Zt._buffer=xt,Zt.subdata=Vt,_e.profile&&(Zt.stats=xt.stats),Zt.destroy=function(){Bt(xt)},Zt}function bt(){Ko(Ze).forEach(function(We){We.buffer=L.createBuffer(),L.bindBuffer(We.type,We.buffer),L.bufferData(We.type,We.persistentData||We.byteLength,We.usage)})}return _e.profile&&(oe.getTotalBufferSize=function(){var We=0;return Object.keys(Ze).forEach(function(ut){We+=Ze[ut].stats.size}),We}),{create:kt,createStream:Ct,destroyStream:Rt,clear:function(){Ko(Ze).forEach(Bt),Pt.forEach(Bt)},getBuffer:function(We){return We&&We._buffer instanceof st?We._buffer:null},restore:bt,_initBuffer:Gt}}var ac=0,vd=0,uc=1,Do=1,wu=4,Na=4,Uo={points:ac,point:vd,lines:uc,line:Do,triangles:wu,triangle:Na,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},lc=0,Hi=1,ia=4,us=5120,Ti=5121,Ii=5122,Jo=5123,Xi=5124,gi=5125,lt=34963,jt=35040,Ft=35044;function fn(L,oe,_e,tt){var pt={},Ze=0,st={uint8:Ti,uint16:Jo};oe.oes_element_index_uint&&(st.uint32=gi);function Pt(bt){this.id=Ze++,pt[this.id]=this,this.buffer=bt,this.primType=ia,this.vertCount=0,this.type=0}Pt.prototype.bind=function(){this.buffer.bind()};var Ct=[];function Rt(bt){var We=Ct.pop();return We||(We=new Pt(_e.create(null,lt,!0,!1)._buffer)),Gt(We,bt,jt,-1,-1,0,0),We}function ct(bt){Ct.push(bt)}function Gt(bt,We,ut,Lt,Kt,xt,Zt){bt.buffer.bind();var At;if(We){var Vt=Zt;!Zt&&(!n(We)||Ei(We)&&!n(We.data))&&(Vt=oe.oes_element_index_uint?gi:Jo),_e._initBuffer(bt.buffer,We,ut,Vt,3)}else L.bufferData(lt,xt,ut),bt.buffer.dtype=At||Ti,bt.buffer.usage=ut,bt.buffer.dimension=3,bt.buffer.byteLength=xt;if(At=Zt,!Zt){switch(bt.buffer.dtype){case Ti:case us:At=Ti;break;case Jo:case Ii:At=Jo;break;case gi:case Xi:At=gi;break;default:ne.raise("unsupported type for element array")}bt.buffer.dtype=At}bt.type=At,ne(At!==gi||!!oe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var wt=Kt;wt<0&&(wt=bt.buffer.byteLength,At===Jo?wt>>=1:At===gi&&(wt>>=2)),bt.vertCount=wt;var Xt=Lt;if(Lt<0){Xt=ia;var Tn=bt.buffer.dimension;Tn===1&&(Xt=lc),Tn===2&&(Xt=Hi),Tn===3&&(Xt=ia)}bt.primType=Xt}function Bt(bt){tt.elementsCount--,ne(bt.buffer!==null,"must not double destroy elements"),delete pt[bt.id],bt.buffer.destroy(),bt.buffer=null}function kt(bt,We){var ut=_e.create(null,lt,!0),Lt=new Pt(ut._buffer);tt.elementsCount++;function Kt(xt){if(!xt)ut(),Lt.primType=ia,Lt.vertCount=0,Lt.type=Ti;else if(typeof xt=="number")ut(xt),Lt.primType=ia,Lt.vertCount=xt|0,Lt.type=Ti;else{var Zt=null,At=Ft,Vt=-1,wt=-1,Xt=0,Tn=0;Array.isArray(xt)||n(xt)||Ei(xt)?Zt=xt:(ne.type(xt,"object","invalid arguments for elements"),"data"in xt&&(Zt=xt.data,ne(Array.isArray(Zt)||n(Zt)||Ei(Zt),"invalid data for element buffer")),"usage"in xt&&(ne.parameter(xt.usage,ra,"invalid element buffer usage"),At=ra[xt.usage]),"primitive"in xt&&(ne.parameter(xt.primitive,Uo,"invalid element buffer primitive"),Vt=Uo[xt.primitive]),"count"in xt&&(ne(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),wt=xt.count|0),"type"in xt&&(ne.parameter(xt.type,st,"invalid buffer type"),Tn=st[xt.type]),"length"in xt?Xt=xt.length|0:(Xt=wt,Tn===Jo||Tn===Ii?Xt*=2:(Tn===gi||Tn===Xi)&&(Xt*=4))),Gt(Lt,Zt,At,Vt,wt,Xt,Tn)}return Kt}return Kt(bt),Kt._reglType="elements",Kt._elements=Lt,Kt.subdata=function(xt,Zt){return ut.subdata(xt,Zt),Kt},Kt.destroy=function(){Bt(Lt)},Kt}return{create:kt,createStream:Rt,destroyStream:ct,getElements:function(bt){return typeof bt=="function"&&bt._elements instanceof Pt?bt._elements:null},clear:function(){Ko(pt).forEach(Bt)}}}var ar=new Float32Array(1),xr=new Uint32Array(ar.buffer),oo=5123;function A(L){for(var oe=uo.allocType(oo,L.length),_e=0;_e<L.length;++_e)if(isNaN(L[_e]))oe[_e]=65535;else if(L[_e]===1/0)oe[_e]=31744;else if(L[_e]===-1/0)oe[_e]=64512;else{ar[0]=L[_e];var tt=xr[0],pt=tt>>>31<<15,Ze=(tt<<1>>>24)-127,st=tt>>13&1024-1;if(Ze<-24)oe[_e]=pt;else if(Ze<-14){var Pt=-14-Ze;oe[_e]=pt+(st+1024>>Pt)}else Ze>15?oe[_e]=pt+31744:oe[_e]=pt+(Ze+15<<10)+st}return oe}function T(L){return Array.isArray(L)||n(L)}var $=function(L){return!(L&L-1)&&!!L},te=34467,ye=3553,Ue=34067,yt=34069,Ht=6408,gn=6406,hr=6407,un=6409,$r=6410,dr=32854,Pr=32855,Yi=36194,fo=32819,Li=32820,Qa=33635,eu=34042,Eu=6402,Xu=34041,Ra=35904,Yu=35906,Go=36193,Ou=33776,tu=33777,ja=33778,Ca=33779,Ml=35986,Op=35987,xp=34798,yd=35840,sc=35841,Pl=35842,gf=35843,Sp=36196,kl=5121,cc=5123,_f=5125,Mo=5126,Mi=10242,bf=10243,wf=10497,ls=33071,nv=33648,ss=10240,nu=10241,fc=9728,Nl=9729,qu=9984,cs=9985,dc=9986,Ku=9987,rv=33170,pc=4352,ov=4353,iv=4354,Ap=34046,Ef=3317,_i=37440,Tp=37441,re=37443,Rl=37444,xu=33984,_a=[qu,dc,cs,Ku],Sr=[0,un,$r,hr,Ht],ci={};ci[un]=ci[gn]=ci[Eu]=1,ci[Xu]=ci[$r]=2,ci[hr]=ci[Ra]=3,ci[Ht]=ci[Yu]=4;function jr(L){return"[object "+L+"]"}var Da=jr("HTMLCanvasElement"),Su=jr("OffscreenCanvas"),aa=jr("CanvasRenderingContext2D"),Of=jr("ImageBitmap"),xf=jr("HTMLImageElement"),md=jr("HTMLVideoElement"),Mp=Object.keys(mi).concat([Da,Su,aa,Of,xf,md]),Au=[];Au[kl]=1,Au[Mo]=4,Au[Go]=2,Au[cc]=2,Au[_f]=4;var Po=[];Po[dr]=2,Po[Pr]=2,Po[Yi]=2,Po[Xu]=4,Po[Ou]=.5,Po[tu]=.5,Po[ja]=1,Po[Ca]=1,Po[Ml]=.5,Po[Op]=1,Po[xp]=1,Po[yd]=.5,Po[sc]=.25,Po[Pl]=.5,Po[gf]=.25,Po[Sp]=.5;function fs(L){return Array.isArray(L)&&(L.length===0||typeof L[0]=="number")}function gd(L){if(!Array.isArray(L))return!1;var oe=L.length;return!(oe===0||!T(L[0]))}function Tu(L){return Object.prototype.toString.call(L)}function Ia(L){return Tu(L)===Da}function hc(L){return Tu(L)===Su}function Zu(L){return Tu(L)===aa}function ua(L){return Tu(L)===Of}function _d(L){return Tu(L)===xf}function bd(L){return Tu(L)===md}function La(L){if(!L)return!1;var oe=Tu(L);return Mp.indexOf(oe)>=0?!0:fs(L)||gd(L)||Ei(L)}function lo(L){return mi[Object.prototype.toString.call(L)]|0}function Pp(L,oe){var _e=oe.length;switch(L.type){case kl:case cc:case _f:case Mo:var tt=uo.allocType(L.type,_e);tt.set(oe),L.data=tt;break;case Go:L.data=A(oe);break;default:ne.raise("unsupported texture type, must specify a typed array")}}function wd(L,oe){return uo.allocType(L.type===Go?Mo:L.type,oe)}function ko(L,oe){L.type===Go?(L.data=A(oe),uo.freeType(oe)):L.data=oe}function Ur(L,oe,_e,tt,pt,Ze){for(var st=L.width,Pt=L.height,Ct=L.channels,Rt=st*Pt*Ct,ct=wd(L,Rt),Gt=0,Bt=0;Bt<Pt;++Bt)for(var kt=0;kt<st;++kt)for(var bt=0;bt<Ct;++bt)ct[Gt++]=oe[_e*kt+tt*Bt+pt*bt+Ze];ko(L,ct)}function Vo(L,oe,_e,tt,pt,Ze){var st;if(typeof Po[L]<"u"?st=Po[L]:st=ci[L]*Au[oe],Ze&&(st*=6),pt){for(var Pt=0,Ct=_e;Ct>=1;)Pt+=st*Ct*Ct,Ct/=2;return Pt}else return st*_e*tt}function _r(L,oe,_e,tt,pt,Ze,st){var Pt={"don't care":pc,"dont care":pc,nice:iv,fast:ov},Ct={repeat:wf,clamp:ls,mirror:nv},Rt={nearest:fc,linear:Nl},ct=a({mipmap:Ku,"nearest mipmap nearest":qu,"linear mipmap nearest":cs,"nearest mipmap linear":dc,"linear mipmap linear":Ku},Rt),Gt={none:0,browser:Rl},Bt={uint8:kl,rgba4:fo,rgb565:Qa,"rgb5 a1":Li},kt={alpha:gn,luminance:un,"luminance alpha":$r,rgb:hr,rgba:Ht,rgba4:dr,"rgb5 a1":Pr,rgb565:Yi},bt={};oe.ext_srgb&&(kt.srgb=Ra,kt.srgba=Yu),oe.oes_texture_float&&(Bt.float32=Bt.float=Mo),oe.oes_texture_half_float&&(Bt.float16=Bt["half float"]=Go),oe.webgl_depth_texture&&(a(kt,{depth:Eu,"depth stencil":Xu}),a(Bt,{uint16:cc,uint32:_f,"depth stencil":eu})),oe.webgl_compressed_texture_s3tc&&a(bt,{"rgb s3tc dxt1":Ou,"rgba s3tc dxt1":tu,"rgba s3tc dxt3":ja,"rgba s3tc dxt5":Ca}),oe.webgl_compressed_texture_atc&&a(bt,{"rgb atc":Ml,"rgba atc explicit alpha":Op,"rgba atc interpolated alpha":xp}),oe.webgl_compressed_texture_pvrtc&&a(bt,{"rgb pvrtc 4bppv1":yd,"rgb pvrtc 2bppv1":sc,"rgba pvrtc 4bppv1":Pl,"rgba pvrtc 2bppv1":gf}),oe.webgl_compressed_texture_etc1&&(bt["rgb etc1"]=Sp);var We=Array.prototype.slice.call(L.getParameter(te));Object.keys(bt).forEach(function(ve){var nt=bt[ve];We.indexOf(nt)>=0&&(kt[ve]=nt)});var ut=Object.keys(kt);_e.textureFormats=ut;var Lt=[];Object.keys(kt).forEach(function(ve){var nt=kt[ve];Lt[nt]=ve});var Kt=[];Object.keys(Bt).forEach(function(ve){var nt=Bt[ve];Kt[nt]=ve});var xt=[];Object.keys(Rt).forEach(function(ve){var nt=Rt[ve];xt[nt]=ve});var Zt=[];Object.keys(ct).forEach(function(ve){var nt=ct[ve];Zt[nt]=ve});var At=[];Object.keys(Ct).forEach(function(ve){var nt=Ct[ve];At[nt]=ve});var Vt=ut.reduce(function(ve,nt){var qe=kt[nt];return qe===un||qe===gn||qe===un||qe===$r||qe===Eu||qe===Xu||oe.ext_srgb&&(qe===Ra||qe===Yu)?ve[qe]=qe:qe===Pr||nt.indexOf("rgba")>=0?ve[qe]=Ht:ve[qe]=hr,ve},{});function wt(){this.internalformat=Ht,this.format=Ht,this.type=kl,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Rl,this.width=0,this.height=0,this.channels=0}function Xt(ve,nt){ve.internalformat=nt.internalformat,ve.format=nt.format,ve.type=nt.type,ve.compressed=nt.compressed,ve.premultiplyAlpha=nt.premultiplyAlpha,ve.flipY=nt.flipY,ve.unpackAlignment=nt.unpackAlignment,ve.colorSpace=nt.colorSpace,ve.width=nt.width,ve.height=nt.height,ve.channels=nt.channels}function Tn(ve,nt){if(!(typeof nt!="object"||!nt)){if("premultiplyAlpha"in nt&&(ne.type(nt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ve.premultiplyAlpha=nt.premultiplyAlpha),"flipY"in nt&&(ne.type(nt.flipY,"boolean","invalid texture flip"),ve.flipY=nt.flipY),"alignment"in nt&&(ne.oneOf(nt.alignment,[1,2,4,8],"invalid texture unpack alignment"),ve.unpackAlignment=nt.alignment),"colorSpace"in nt&&(ne.parameter(nt.colorSpace,Gt,"invalid colorSpace"),ve.colorSpace=Gt[nt.colorSpace]),"type"in nt){var qe=nt.type;ne(oe.oes_texture_float||!(qe==="float"||qe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ne(oe.oes_texture_half_float||!(qe==="half float"||qe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ne(oe.webgl_depth_texture||!(qe==="uint16"||qe==="uint32"||qe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(qe,Bt,"invalid texture type"),ve.type=Bt[qe]}var en=ve.width,pr=ve.height,ae=ve.channels,J=!1;"shape"in nt?(ne(Array.isArray(nt.shape)&&nt.shape.length>=2,"shape must be an array"),en=nt.shape[0],pr=nt.shape[1],nt.shape.length===3&&(ae=nt.shape[2],ne(ae>0&&ae<=4,"invalid number of channels"),J=!0),ne(en>=0&&en<=_e.maxTextureSize,"invalid width"),ne(pr>=0&&pr<=_e.maxTextureSize,"invalid height")):("radius"in nt&&(en=pr=nt.radius,ne(en>=0&&en<=_e.maxTextureSize,"invalid radius")),"width"in nt&&(en=nt.width,ne(en>=0&&en<=_e.maxTextureSize,"invalid width")),"height"in nt&&(pr=nt.height,ne(pr>=0&&pr<=_e.maxTextureSize,"invalid height")),"channels"in nt&&(ae=nt.channels,ne(ae>0&&ae<=4,"invalid number of channels"),J=!0)),ve.width=en|0,ve.height=pr|0,ve.channels=ae|0;var Ae=!1;if("format"in nt){var Be=nt.format;ne(oe.webgl_depth_texture||!(Be==="depth"||Be==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(Be,kt,"invalid texture format");var ze=ve.internalformat=kt[Be];ve.format=Vt[ze],Be in Bt&&("type"in nt||(ve.type=Bt[Be])),Be in bt&&(ve.compressed=!0),Ae=!0}!J&&Ae?ve.channels=ci[ve.format]:J&&!Ae?ve.channels!==Sr[ve.format]&&(ve.format=ve.internalformat=Sr[ve.channels]):Ae&&J&&ne(ve.channels===ci[ve.format],"number of channels inconsistent with specified format")}}function Vn(ve){L.pixelStorei(_i,ve.flipY),L.pixelStorei(Tp,ve.premultiplyAlpha),L.pixelStorei(re,ve.colorSpace),L.pixelStorei(Ef,ve.unpackAlignment)}function Dt(){wt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Tt(ve,nt){var qe=null;if(La(nt)?qe=nt:nt&&(ne.type(nt,"object","invalid pixel data type"),Tn(ve,nt),"x"in nt&&(ve.xOffset=nt.x|0),"y"in nt&&(ve.yOffset=nt.y|0),La(nt.data)&&(qe=nt.data)),ne(!ve.compressed||qe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),nt.copy){ne(!qe,"can not specify copy and data field for the same texture");var en=pt.viewportWidth,pr=pt.viewportHeight;ve.width=ve.width||en-ve.xOffset,ve.height=ve.height||pr-ve.yOffset,ve.needsCopy=!0,ne(ve.xOffset>=0&&ve.xOffset<en&&ve.yOffset>=0&&ve.yOffset<pr&&ve.width>0&&ve.width<=en&&ve.height>0&&ve.height<=pr,"copy texture read out of bounds")}else if(!qe)ve.width=ve.width||1,ve.height=ve.height||1,ve.channels=ve.channels||4;else if(n(qe))ve.channels=ve.channels||4,ve.data=qe,!("type"in nt)&&ve.type===kl&&(ve.type=lo(qe));else if(fs(qe))ve.channels=ve.channels||4,Pp(ve,qe),ve.alignment=1,ve.needsFree=!0;else if(Ei(qe)){var ae=qe.data;!Array.isArray(ae)&&ve.type===kl&&(ve.type=lo(ae));var J=qe.shape,Ae=qe.stride,Be,ze,Pe,Te,De,ce;J.length===3?(Pe=J[2],ce=Ae[2]):(ne(J.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Pe=1,ce=1),Be=J[0],ze=J[1],Te=Ae[0],De=Ae[1],ve.alignment=1,ve.width=Be,ve.height=ze,ve.channels=Pe,ve.format=ve.internalformat=Sr[Pe],ve.needsFree=!0,Ur(ve,ae,Te,De,ce,qe.offset)}else if(Ia(qe)||hc(qe)||Zu(qe))Ia(qe)||hc(qe)?ve.element=qe:ve.element=qe.canvas,ve.width=ve.element.width,ve.height=ve.element.height,ve.channels=4;else if(ua(qe))ve.element=qe,ve.width=qe.width,ve.height=qe.height,ve.channels=4;else if(_d(qe))ve.element=qe,ve.width=qe.naturalWidth,ve.height=qe.naturalHeight,ve.channels=4;else if(bd(qe))ve.element=qe,ve.width=qe.videoWidth,ve.height=qe.videoHeight,ve.channels=4;else if(gd(qe)){var we=ve.width||qe[0].length,se=ve.height||qe.length,Fe=ve.channels;T(qe[0][0])?Fe=Fe||qe[0][0].length:Fe=Fe||1;for(var Ye=zi.shape(qe),d=1,m=0;m<Ye.length;++m)d*=Ye[m];var w=wd(ve,d);zi.flatten(qe,Ye,"",w),ko(ve,w),ve.alignment=1,ve.width=we,ve.height=se,ve.channels=Fe,ve.format=ve.internalformat=Sr[Fe],ve.needsFree=!0}ve.type===Mo?ne(_e.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ve.type===Go&&ne(_e.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Et(ve,nt,qe){var en=ve.element,pr=ve.data,ae=ve.internalformat,J=ve.format,Ae=ve.type,Be=ve.width,ze=ve.height;Vn(ve),en?L.texImage2D(nt,qe,J,J,Ae,en):ve.compressed?L.compressedTexImage2D(nt,qe,ae,Be,ze,0,pr):ve.needsCopy?(tt(),L.copyTexImage2D(nt,qe,J,ve.xOffset,ve.yOffset,Be,ze,0)):L.texImage2D(nt,qe,J,Be,ze,0,J,Ae,pr||null)}function Rn(ve,nt,qe,en,pr){var ae=ve.element,J=ve.data,Ae=ve.internalformat,Be=ve.format,ze=ve.type,Pe=ve.width,Te=ve.height;Vn(ve),ae?L.texSubImage2D(nt,pr,qe,en,Be,ze,ae):ve.compressed?L.compressedTexSubImage2D(nt,pr,qe,en,Ae,Pe,Te,J):ve.needsCopy?(tt(),L.copyTexSubImage2D(nt,pr,qe,en,ve.xOffset,ve.yOffset,Pe,Te)):L.texSubImage2D(nt,pr,qe,en,Pe,Te,Be,ze,J)}var er=[];function ln(){return er.pop()||new Dt}function Jn(ve){ve.needsFree&&uo.freeType(ve.data),Dt.call(ve),er.push(ve)}function Gn(){wt.call(this),this.genMipmaps=!1,this.mipmapHint=pc,this.mipmask=0,this.images=Array(16)}function tr(ve,nt,qe){var en=ve.images[0]=ln();ve.mipmask=1,en.width=ve.width=nt,en.height=ve.height=qe,en.channels=ve.channels=4}function yr(ve,nt){var qe=null;if(La(nt))qe=ve.images[0]=ln(),Xt(qe,ve),Tt(qe,nt),ve.mipmask=1;else if(Tn(ve,nt),Array.isArray(nt.mipmap))for(var en=nt.mipmap,pr=0;pr<en.length;++pr)qe=ve.images[pr]=ln(),Xt(qe,ve),qe.width>>=pr,qe.height>>=pr,Tt(qe,en[pr]),ve.mipmask|=1<<pr;else qe=ve.images[0]=ln(),Xt(qe,ve),Tt(qe,nt),ve.mipmask=1;Xt(ve,ve.images[0]),ve.compressed&&(ve.internalformat===Ou||ve.internalformat===tu||ve.internalformat===ja||ve.internalformat===Ca)&&ne(ve.width%4===0&&ve.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function wo(ve,nt){for(var qe=ve.images,en=0;en<qe.length;++en){if(!qe[en])return;Et(qe[en],nt,en)}}var Ro=[];function lr(){var ve=Ro.pop()||new Gn;wt.call(ve),ve.mipmask=0;for(var nt=0;nt<16;++nt)ve.images[nt]=null;return ve}function Io(ve){for(var nt=ve.images,qe=0;qe<nt.length;++qe)nt[qe]&&Jn(nt[qe]),nt[qe]=null;Ro.push(ve)}function qr(){this.minFilter=fc,this.magFilter=fc,this.wrapS=ls,this.wrapT=ls,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=pc}function Eo(ve,nt){if("min"in nt){var qe=nt.min;ne.parameter(qe,ct),ve.minFilter=ct[qe],_a.indexOf(ve.minFilter)>=0&&!("faces"in nt)&&(ve.genMipmaps=!0)}if("mag"in nt){var en=nt.mag;ne.parameter(en,Rt),ve.magFilter=Rt[en]}var pr=ve.wrapS,ae=ve.wrapT;if("wrap"in nt){var J=nt.wrap;typeof J=="string"?(ne.parameter(J,Ct),pr=ae=Ct[J]):Array.isArray(J)&&(ne.parameter(J[0],Ct),ne.parameter(J[1],Ct),pr=Ct[J[0]],ae=Ct[J[1]])}else{if("wrapS"in nt){var Ae=nt.wrapS;ne.parameter(Ae,Ct),pr=Ct[Ae]}if("wrapT"in nt){var Be=nt.wrapT;ne.parameter(Be,Ct),ae=Ct[Be]}}if(ve.wrapS=pr,ve.wrapT=ae,"anisotropic"in nt){var ze=nt.anisotropic;ne(typeof ze=="number"&&ze>=1&&ze<=_e.maxAnisotropic,"aniso samples must be between 1 and "),ve.anisotropic=nt.anisotropic}if("mipmap"in nt){var Pe=!1;switch(typeof nt.mipmap){case"string":ne.parameter(nt.mipmap,Pt,"invalid mipmap hint"),ve.mipmapHint=Pt[nt.mipmap],ve.genMipmaps=!0,Pe=!0;break;case"boolean":Pe=ve.genMipmaps=nt.mipmap;break;case"object":ne(Array.isArray(nt.mipmap),"invalid mipmap type"),ve.genMipmaps=!1,Pe=!0;break;default:ne.raise("invalid mipmap type")}Pe&&!("min"in nt)&&(ve.minFilter=qu)}}function jo(ve,nt){L.texParameteri(nt,nu,ve.minFilter),L.texParameteri(nt,ss,ve.magFilter),L.texParameteri(nt,Mi,ve.wrapS),L.texParameteri(nt,bf,ve.wrapT),oe.ext_texture_filter_anisotropic&&L.texParameteri(nt,Ap,ve.anisotropic),ve.genMipmaps&&(L.hint(rv,ve.mipmapHint),L.generateMipmap(nt))}var vo=0,so={},Xo=_e.maxTextureUnits,yo=Array(Xo).map(function(){return null});function Kn(ve){wt.call(this),this.mipmask=0,this.internalformat=Ht,this.id=vo++,this.refCount=1,this.target=ve,this.texture=L.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qr,st.profile&&(this.stats={size:0})}function Qo(ve){L.activeTexture(xu),L.bindTexture(ve.target,ve.texture)}function Ar(){var ve=yo[0];ve?L.bindTexture(ve.target,ve.texture):L.bindTexture(ye,null)}function Nn(ve){var nt=ve.texture;ne(nt,"must not double destroy texture");var qe=ve.unit,en=ve.target;qe>=0&&(L.activeTexture(xu+qe),L.bindTexture(en,null),yo[qe]=null),L.deleteTexture(nt),ve.texture=null,ve.params=null,ve.pixels=null,ve.refCount=0,delete so[ve.id],Ze.textureCount--}a(Kn.prototype,{bind:function(){var ve=this;ve.bindCount+=1;var nt=ve.unit;if(nt<0){for(var qe=0;qe<Xo;++qe){var en=yo[qe];if(en){if(en.bindCount>0)continue;en.unit=-1}yo[qe]=ve,nt=qe;break}nt>=Xo&&ne.raise("insufficient number of texture units"),st.profile&&Ze.maxTextureUnits<nt+1&&(Ze.maxTextureUnits=nt+1),ve.unit=nt,L.activeTexture(xu+nt),L.bindTexture(ve.target,ve.texture)}return nt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Nn(this)}});function sr(ve,nt){var qe=new Kn(ye);so[qe.id]=qe,Ze.textureCount++;function en(J,Ae){var Be=qe.texInfo;qr.call(Be);var ze=lr();return typeof J=="number"?typeof Ae=="number"?tr(ze,J|0,Ae|0):tr(ze,J|0,J|0):J?(ne.type(J,"object","invalid arguments to regl.texture"),Eo(Be,J),yr(ze,J)):tr(ze,1,1),Be.genMipmaps&&(ze.mipmask=(ze.width<<1)-1),qe.mipmask=ze.mipmask,Xt(qe,ze),ne.texture2D(Be,ze,_e),qe.internalformat=ze.internalformat,en.width=ze.width,en.height=ze.height,Qo(qe),wo(ze,ye),jo(Be,ye),Ar(),Io(ze),st.profile&&(qe.stats.size=Vo(qe.internalformat,qe.type,ze.width,ze.height,Be.genMipmaps,!1)),en.format=Lt[qe.internalformat],en.type=Kt[qe.type],en.mag=xt[Be.magFilter],en.min=Zt[Be.minFilter],en.wrapS=At[Be.wrapS],en.wrapT=At[Be.wrapT],en}function pr(J,Ae,Be,ze){ne(!!J,"must specify image data");var Pe=Ae|0,Te=Be|0,De=ze|0,ce=ln();return Xt(ce,qe),ce.width=0,ce.height=0,Tt(ce,J),ce.width=ce.width||(qe.width>>De)-Pe,ce.height=ce.height||(qe.height>>De)-Te,ne(qe.type===ce.type&&qe.format===ce.format&&qe.internalformat===ce.internalformat,"incompatible format for texture.subimage"),ne(Pe>=0&&Te>=0&&Pe+ce.width<=qe.width&&Te+ce.height<=qe.height,"texture.subimage write out of bounds"),ne(qe.mipmask&1<<De,"missing mipmap data"),ne(ce.data||ce.element||ce.needsCopy,"missing image data"),Qo(qe),Rn(ce,ye,Pe,Te,De),Ar(),Jn(ce),en}function ae(J,Ae){var Be=J|0,ze=Ae|0||Be;if(Be===qe.width&&ze===qe.height)return en;en.width=qe.width=Be,en.height=qe.height=ze,Qo(qe);for(var Pe=0;qe.mipmask>>Pe;++Pe){var Te=Be>>Pe,De=ze>>Pe;if(!Te||!De)break;L.texImage2D(ye,Pe,qe.format,Te,De,0,qe.format,qe.type,null)}return Ar(),st.profile&&(qe.stats.size=Vo(qe.internalformat,qe.type,Be,ze,!1,!1)),en}return en(ve,nt),en.subimage=pr,en.resize=ae,en._reglType="texture2d",en._texture=qe,st.profile&&(en.stats=qe.stats),en.destroy=function(){qe.decRef()},en}function Wn(ve,nt,qe,en,pr,ae){var J=new Kn(Ue);so[J.id]=J,Ze.cubeCount++;var Ae=new Array(6);function Be(Te,De,ce,we,se,Fe){var Ye,d=J.texInfo;for(qr.call(d),Ye=0;Ye<6;++Ye)Ae[Ye]=lr();if(typeof Te=="number"||!Te){var m=Te|0||1;for(Ye=0;Ye<6;++Ye)tr(Ae[Ye],m,m)}else if(typeof Te=="object")if(De)yr(Ae[0],Te),yr(Ae[1],De),yr(Ae[2],ce),yr(Ae[3],we),yr(Ae[4],se),yr(Ae[5],Fe);else if(Eo(d,Te),Tn(J,Te),"faces"in Te){var w=Te.faces;for(ne(Array.isArray(w)&&w.length===6,"cube faces must be a length 6 array"),Ye=0;Ye<6;++Ye)ne(typeof w[Ye]=="object"&&!!w[Ye],"invalid input for cube map face"),Xt(Ae[Ye],J),yr(Ae[Ye],w[Ye])}else for(Ye=0;Ye<6;++Ye)yr(Ae[Ye],Te);else ne.raise("invalid arguments to cube map");for(Xt(J,Ae[0]),_e.npotTextureCube||ne($(J.width)&&$(J.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?J.mipmask=(Ae[0].width<<1)-1:J.mipmask=Ae[0].mipmask,ne.textureCube(J,d,Ae,_e),J.internalformat=Ae[0].internalformat,Be.width=Ae[0].width,Be.height=Ae[0].height,Qo(J),Ye=0;Ye<6;++Ye)wo(Ae[Ye],yt+Ye);for(jo(d,Ue),Ar(),st.profile&&(J.stats.size=Vo(J.internalformat,J.type,Be.width,Be.height,d.genMipmaps,!0)),Be.format=Lt[J.internalformat],Be.type=Kt[J.type],Be.mag=xt[d.magFilter],Be.min=Zt[d.minFilter],Be.wrapS=At[d.wrapS],Be.wrapT=At[d.wrapT],Ye=0;Ye<6;++Ye)Io(Ae[Ye]);return Be}function ze(Te,De,ce,we,se){ne(!!De,"must specify image data"),ne(typeof Te=="number"&&Te===(Te|0)&&Te>=0&&Te<6,"invalid face");var Fe=ce|0,Ye=we|0,d=se|0,m=ln();return Xt(m,J),m.width=0,m.height=0,Tt(m,De),m.width=m.width||(J.width>>d)-Fe,m.height=m.height||(J.height>>d)-Ye,ne(J.type===m.type&&J.format===m.format&&J.internalformat===m.internalformat,"incompatible format for texture.subimage"),ne(Fe>=0&&Ye>=0&&Fe+m.width<=J.width&&Ye+m.height<=J.height,"texture.subimage write out of bounds"),ne(J.mipmask&1<<d,"missing mipmap data"),ne(m.data||m.element||m.needsCopy,"missing image data"),Qo(J),Rn(m,yt+Te,Fe,Ye,d),Ar(),Jn(m),Be}function Pe(Te){var De=Te|0;if(De!==J.width){Be.width=J.width=De,Be.height=J.height=De,Qo(J);for(var ce=0;ce<6;++ce)for(var we=0;J.mipmask>>we;++we)L.texImage2D(yt+ce,we,J.format,De>>we,De>>we,0,J.format,J.type,null);return Ar(),st.profile&&(J.stats.size=Vo(J.internalformat,J.type,Be.width,Be.height,!1,!0)),Be}}return Be(ve,nt,qe,en,pr,ae),Be.subimage=ze,Be.resize=Pe,Be._reglType="textureCube",Be._texture=J,st.profile&&(Be.stats=J.stats),Be.destroy=function(){J.decRef()},Be}function no(){for(var ve=0;ve<Xo;++ve)L.activeTexture(xu+ve),L.bindTexture(ye,null),yo[ve]=null;Ko(so).forEach(Nn),Ze.cubeCount=0,Ze.textureCount=0}st.profile&&(Ze.getTotalTextureSize=function(){var ve=0;return Object.keys(so).forEach(function(nt){ve+=so[nt].stats.size}),ve});function Aa(){for(var ve=0;ve<Xo;++ve){var nt=yo[ve];nt&&(nt.bindCount=0,nt.unit=-1,yo[ve]=null)}Ko(so).forEach(function(qe){qe.texture=L.createTexture(),L.bindTexture(qe.target,qe.texture);for(var en=0;en<32;++en)if(qe.mipmask&1<<en)if(qe.target===ye)L.texImage2D(ye,en,qe.internalformat,qe.width>>en,qe.height>>en,0,qe.internalformat,qe.type,null);else for(var pr=0;pr<6;++pr)L.texImage2D(yt+pr,en,qe.internalformat,qe.width>>en,qe.height>>en,0,qe.internalformat,qe.type,null);jo(qe.texInfo,qe.target)})}function Iu(){for(var ve=0;ve<Xo;++ve){var nt=yo[ve];nt&&(nt.bindCount=0,nt.unit=-1,yo[ve]=null),L.activeTexture(xu+ve),L.bindTexture(ye,null),L.bindTexture(Ue,null)}}return{create2D:sr,createCube:Wn,clear:no,getTexture:function(ve){return null},restore:Aa,refresh:Iu}}var eo=36161,kn=32854,to=32855,vc=36194,ru=33189,Sf=36168,po=34041,mo=35907,Ed=34836,Od=34842,yc=34843,Pi=[];Pi[kn]=2,Pi[to]=2,Pi[vc]=2,Pi[ru]=2,Pi[Sf]=1,Pi[po]=4,Pi[mo]=4,Pi[Ed]=16,Pi[Od]=8,Pi[yc]=6;function Af(L,oe,_e){return Pi[L]*oe*_e}var ds=function(L,oe,_e,tt,pt){var Ze={rgba4:kn,rgb565:vc,"rgb5 a1":to,depth:ru,stencil:Sf,"depth stencil":po};oe.ext_srgb&&(Ze.srgba=mo),oe.ext_color_buffer_half_float&&(Ze.rgba16f=Od,Ze.rgb16f=yc),oe.webgl_color_buffer_float&&(Ze.rgba32f=Ed);var st=[];Object.keys(Ze).forEach(function(kt){var bt=Ze[kt];st[bt]=kt});var Pt=0,Ct={};function Rt(kt){this.id=Pt++,this.refCount=1,this.renderbuffer=kt,this.format=kn,this.width=0,this.height=0,pt.profile&&(this.stats={size:0})}Rt.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(kt){var bt=kt.renderbuffer;ne(bt,"must not double destroy renderbuffer"),L.bindRenderbuffer(eo,null),L.deleteRenderbuffer(bt),kt.renderbuffer=null,kt.refCount=0,delete Ct[kt.id],tt.renderbufferCount--}function Gt(kt,bt){var We=new Rt(L.createRenderbuffer());Ct[We.id]=We,tt.renderbufferCount++;function ut(Kt,xt){var Zt=0,At=0,Vt=kn;if(typeof Kt=="object"&&Kt){var wt=Kt;if("shape"in wt){var Xt=wt.shape;ne(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Zt=Xt[0]|0,At=Xt[1]|0}else"radius"in wt&&(Zt=At=wt.radius|0),"width"in wt&&(Zt=wt.width|0),"height"in wt&&(At=wt.height|0);"format"in wt&&(ne.parameter(wt.format,Ze,"invalid renderbuffer format"),Vt=Ze[wt.format])}else typeof Kt=="number"?(Zt=Kt|0,typeof xt=="number"?At=xt|0:At=Zt):Kt?ne.raise("invalid arguments to renderbuffer constructor"):Zt=At=1;if(ne(Zt>0&&At>0&&Zt<=_e.maxRenderbufferSize&&At<=_e.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===We.width&&At===We.height&&Vt===We.format))return ut.width=We.width=Zt,ut.height=We.height=At,We.format=Vt,L.bindRenderbuffer(eo,We.renderbuffer),L.renderbufferStorage(eo,Vt,Zt,At),ne(L.getError()===0,"invalid render buffer format"),pt.profile&&(We.stats.size=Af(We.format,We.width,We.height)),ut.format=st[We.format],ut}function Lt(Kt,xt){var Zt=Kt|0,At=xt|0||Zt;return Zt===We.width&&At===We.height||(ne(Zt>0&&At>0&&Zt<=_e.maxRenderbufferSize&&At<=_e.maxRenderbufferSize,"invalid renderbuffer size"),ut.width=We.width=Zt,ut.height=We.height=At,L.bindRenderbuffer(eo,We.renderbuffer),L.renderbufferStorage(eo,We.format,Zt,At),ne(L.getError()===0,"invalid render buffer format"),pt.profile&&(We.stats.size=Af(We.format,We.width,We.height))),ut}return ut(kt,bt),ut.resize=Lt,ut._reglType="renderbuffer",ut._renderbuffer=We,pt.profile&&(ut.stats=We.stats),ut.destroy=function(){We.decRef()},ut}pt.profile&&(tt.getTotalRenderbufferSize=function(){var kt=0;return Object.keys(Ct).forEach(function(bt){kt+=Ct[bt].stats.size}),kt});function Bt(){Ko(Ct).forEach(function(kt){kt.renderbuffer=L.createRenderbuffer(),L.bindRenderbuffer(eo,kt.renderbuffer),L.renderbufferStorage(eo,kt.format,kt.width,kt.height)}),L.bindRenderbuffer(eo,null)}return{create:Gt,clear:function(){Ko(Ct).forEach(ct)},restore:Bt}},ba=36160,Ju=36161,Mu=3553,wa=34069,kp=36064,ou=36096,la=36128,xd=33306,Sd=36053,Tf=36054,Np=36055,Rp=36057,jp=36061,Ad=36193,ps=5121,Td=5126,mc=6407,br=6408,av=6402,Md=[mc,br],Qu=[];Qu[br]=4,Qu[mc]=3;var gc=[];gc[ps]=1,gc[Td]=4,gc[Ad]=2;var uv=32854,lv=32855,Ea=36194,Pd=33189,Mf=36168,Pf=34041,Cp=35907,kd=34836,qi=34842,el=34843,kf=[uv,lv,Ea,Cp,qi,el,kd],jl={};jl[Sd]="complete",jl[Tf]="incomplete attachment",jl[Rp]="incomplete dimensions",jl[Np]="incomplete, missing attachment",jl[jp]="unsupported";function _c(L,oe,_e,tt,pt,Ze){var st={cur:null,next:null,dirty:!1,setFBO:null},Pt=["rgba"],Ct=["rgba4","rgb565","rgb5 a1"];oe.ext_srgb&&Ct.push("srgba"),oe.ext_color_buffer_half_float&&Ct.push("rgba16f","rgb16f"),oe.webgl_color_buffer_float&&Ct.push("rgba32f");var Rt=["uint8"];oe.oes_texture_half_float&&Rt.push("half float","float16"),oe.oes_texture_float&&Rt.push("float","float32");function ct(Dt,Tt,Et){this.target=Dt,this.texture=Tt,this.renderbuffer=Et;var Rn=0,er=0;Tt?(Rn=Tt.width,er=Tt.height):Et&&(Rn=Et.width,er=Et.height),this.width=Rn,this.height=er}function Gt(Dt){Dt&&(Dt.texture&&Dt.texture._texture.decRef(),Dt.renderbuffer&&Dt.renderbuffer._renderbuffer.decRef())}function Bt(Dt,Tt,Et){if(Dt)if(Dt.texture){var Rn=Dt.texture._texture,er=Math.max(1,Rn.width),ln=Math.max(1,Rn.height);ne(er===Tt&&ln===Et,"inconsistent width/height for supplied texture"),Rn.refCount+=1}else{var Jn=Dt.renderbuffer._renderbuffer;ne(Jn.width===Tt&&Jn.height===Et,"inconsistent width/height for renderbuffer"),Jn.refCount+=1}}function kt(Dt,Tt){Tt&&(Tt.texture?L.framebufferTexture2D(ba,Dt,Tt.target,Tt.texture._texture.texture,0):L.framebufferRenderbuffer(ba,Dt,Ju,Tt.renderbuffer._renderbuffer.renderbuffer))}function bt(Dt){var Tt=Mu,Et=null,Rn=null,er=Dt;typeof Dt=="object"&&(er=Dt.data,"target"in Dt&&(Tt=Dt.target|0)),ne.type(er,"function","invalid attachment data");var ln=er._reglType;return ln==="texture2d"?(Et=er,ne(Tt===Mu)):ln==="textureCube"?(Et=er,ne(Tt>=wa&&Tt<wa+6,"invalid cube map target")):ln==="renderbuffer"?(Rn=er,Tt=Ju):ne.raise("invalid regl object for attachment"),new ct(Tt,Et,Rn)}function We(Dt,Tt,Et,Rn,er){if(Et){var ln=tt.create2D({width:Dt,height:Tt,format:Rn,type:er});return ln._texture.refCount=0,new ct(Mu,ln,null)}else{var Jn=pt.create({width:Dt,height:Tt,format:Rn});return Jn._renderbuffer.refCount=0,new ct(Ju,null,Jn)}}function ut(Dt){return Dt&&(Dt.texture||Dt.renderbuffer)}function Lt(Dt,Tt,Et){Dt&&(Dt.texture?Dt.texture.resize(Tt,Et):Dt.renderbuffer&&Dt.renderbuffer.resize(Tt,Et),Dt.width=Tt,Dt.height=Et)}var Kt=0,xt={};function Zt(){this.id=Kt++,xt[this.id]=this,this.framebuffer=L.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function At(Dt){Dt.colorAttachments.forEach(Gt),Gt(Dt.depthAttachment),Gt(Dt.stencilAttachment),Gt(Dt.depthStencilAttachment)}function Vt(Dt){var Tt=Dt.framebuffer;ne(Tt,"must not double destroy framebuffer"),L.deleteFramebuffer(Tt),Dt.framebuffer=null,Ze.framebufferCount--,delete xt[Dt.id]}function wt(Dt){var Tt;L.bindFramebuffer(ba,Dt.framebuffer);var Et=Dt.colorAttachments;for(Tt=0;Tt<Et.length;++Tt)kt(kp+Tt,Et[Tt]);for(Tt=Et.length;Tt<_e.maxColorAttachments;++Tt)L.framebufferTexture2D(ba,kp+Tt,Mu,null,0);L.framebufferTexture2D(ba,xd,Mu,null,0),L.framebufferTexture2D(ba,ou,Mu,null,0),L.framebufferTexture2D(ba,la,Mu,null,0),kt(ou,Dt.depthAttachment),kt(la,Dt.stencilAttachment),kt(xd,Dt.depthStencilAttachment);var Rn=L.checkFramebufferStatus(ba);!L.isContextLost()&&Rn!==Sd&&ne.raise("framebuffer configuration not supported, status = "+jl[Rn]),L.bindFramebuffer(ba,st.next?st.next.framebuffer:null),st.cur=st.next,L.getError()}function Xt(Dt,Tt){var Et=new Zt;Ze.framebufferCount++;function Rn(ln,Jn){var Gn;ne(st.next!==Et,"can not update framebuffer which is currently in use");var tr=0,yr=0,wo=!0,Ro=!0,lr=null,Io=!0,qr="rgba",Eo="uint8",jo=1,vo=null,so=null,Xo=null,yo=!1;if(typeof ln=="number")tr=ln|0,yr=Jn|0||tr;else if(!ln)tr=yr=1;else{ne.type(ln,"object","invalid arguments for framebuffer");var Kn=ln;if("shape"in Kn){var Qo=Kn.shape;ne(Array.isArray(Qo)&&Qo.length>=2,"invalid shape for framebuffer"),tr=Qo[0],yr=Qo[1]}else"radius"in Kn&&(tr=yr=Kn.radius),"width"in Kn&&(tr=Kn.width),"height"in Kn&&(yr=Kn.height);("color"in Kn||"colors"in Kn)&&(lr=Kn.color||Kn.colors,Array.isArray(lr)&&ne(lr.length===1||oe.webgl_draw_buffers,"multiple render targets not supported")),lr||("colorCount"in Kn&&(jo=Kn.colorCount|0,ne(jo>0,"invalid color buffer count")),"colorTexture"in Kn&&(Io=!!Kn.colorTexture,qr="rgba4"),"colorType"in Kn&&(Eo=Kn.colorType,Io?(ne(oe.oes_texture_float||!(Eo==="float"||Eo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ne(oe.oes_texture_half_float||!(Eo==="half float"||Eo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Eo==="half float"||Eo==="float16"?(ne(oe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),qr="rgba16f"):(Eo==="float"||Eo==="float32")&&(ne(oe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),qr="rgba32f"),ne.oneOf(Eo,Rt,"invalid color type")),"colorFormat"in Kn&&(qr=Kn.colorFormat,Pt.indexOf(qr)>=0?Io=!0:Ct.indexOf(qr)>=0?Io=!1:Io?ne.oneOf(Kn.colorFormat,Pt,"invalid color format for texture"):ne.oneOf(Kn.colorFormat,Ct,"invalid color format for renderbuffer"))),("depthTexture"in Kn||"depthStencilTexture"in Kn)&&(yo=!!(Kn.depthTexture||Kn.depthStencilTexture),ne(!yo||oe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Kn&&(typeof Kn.depth=="boolean"?wo=Kn.depth:(vo=Kn.depth,Ro=!1)),"stencil"in Kn&&(typeof Kn.stencil=="boolean"?Ro=Kn.stencil:(so=Kn.stencil,wo=!1)),"depthStencil"in Kn&&(typeof Kn.depthStencil=="boolean"?wo=Ro=Kn.depthStencil:(Xo=Kn.depthStencil,wo=!1,Ro=!1))}var Ar=null,Nn=null,sr=null,Wn=null;if(Array.isArray(lr))Ar=lr.map(bt);else if(lr)Ar=[bt(lr)];else for(Ar=new Array(jo),Gn=0;Gn<jo;++Gn)Ar[Gn]=We(tr,yr,Io,qr,Eo);ne(oe.webgl_draw_buffers||Ar.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ne(Ar.length<=_e.maxColorAttachments,"too many color attachments, not supported"),tr=tr||Ar[0].width,yr=yr||Ar[0].height,vo?Nn=bt(vo):wo&&!Ro&&(Nn=We(tr,yr,yo,"depth","uint32")),so?sr=bt(so):Ro&&!wo&&(sr=We(tr,yr,!1,"stencil","uint8")),Xo?Wn=bt(Xo):!vo&&!so&&Ro&&wo&&(Wn=We(tr,yr,yo,"depth stencil","depth stencil")),ne(!!vo+!!so+!!Xo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var no=null;for(Gn=0;Gn<Ar.length;++Gn)if(Bt(Ar[Gn],tr,yr),ne(!Ar[Gn]||Ar[Gn].texture&&Md.indexOf(Ar[Gn].texture._texture.format)>=0||Ar[Gn].renderbuffer&&kf.indexOf(Ar[Gn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Gn+" is invalid"),Ar[Gn]&&Ar[Gn].texture){var Aa=Qu[Ar[Gn].texture._texture.format]*gc[Ar[Gn].texture._texture.type];no===null?no=Aa:ne(no===Aa,"all color attachments much have the same number of bits per pixel.")}return Bt(Nn,tr,yr),ne(!Nn||Nn.texture&&Nn.texture._texture.format===av||Nn.renderbuffer&&Nn.renderbuffer._renderbuffer.format===Pd,"invalid depth attachment for framebuffer object"),Bt(sr,tr,yr),ne(!sr||sr.renderbuffer&&sr.renderbuffer._renderbuffer.format===Mf,"invalid stencil attachment for framebuffer object"),Bt(Wn,tr,yr),ne(!Wn||Wn.texture&&Wn.texture._texture.format===Pf||Wn.renderbuffer&&Wn.renderbuffer._renderbuffer.format===Pf,"invalid depth-stencil attachment for framebuffer object"),At(Et),Et.width=tr,Et.height=yr,Et.colorAttachments=Ar,Et.depthAttachment=Nn,Et.stencilAttachment=sr,Et.depthStencilAttachment=Wn,Rn.color=Ar.map(ut),Rn.depth=ut(Nn),Rn.stencil=ut(sr),Rn.depthStencil=ut(Wn),Rn.width=Et.width,Rn.height=Et.height,wt(Et),Rn}function er(ln,Jn){ne(st.next!==Et,"can not resize a framebuffer which is currently in use");var Gn=Math.max(ln|0,1),tr=Math.max(Jn|0||Gn,1);if(Gn===Et.width&&tr===Et.height)return Rn;for(var yr=Et.colorAttachments,wo=0;wo<yr.length;++wo)Lt(yr[wo],Gn,tr);return Lt(Et.depthAttachment,Gn,tr),Lt(Et.stencilAttachment,Gn,tr),Lt(Et.depthStencilAttachment,Gn,tr),Et.width=Rn.width=Gn,Et.height=Rn.height=tr,wt(Et),Rn}return Rn(Dt,Tt),a(Rn,{resize:er,_reglType:"framebuffer",_framebuffer:Et,destroy:function(){Vt(Et),At(Et)},use:function(ln){st.setFBO({framebuffer:Rn},ln)}})}function Tn(Dt){var Tt=Array(6);function Et(er){var ln;ne(Tt.indexOf(st.next)<0,"can not update framebuffer which is currently in use");var Jn={color:null},Gn=0,tr=null,yr="rgba",wo="uint8",Ro=1;if(typeof er=="number")Gn=er|0;else if(!er)Gn=1;else{ne.type(er,"object","invalid arguments for framebuffer");var lr=er;if("shape"in lr){var Io=lr.shape;ne(Array.isArray(Io)&&Io.length>=2,"invalid shape for framebuffer"),ne(Io[0]===Io[1],"cube framebuffer must be square"),Gn=Io[0]}else"radius"in lr&&(Gn=lr.radius|0),"width"in lr?(Gn=lr.width|0,"height"in lr&&ne(lr.height===Gn,"must be square")):"height"in lr&&(Gn=lr.height|0);("color"in lr||"colors"in lr)&&(tr=lr.color||lr.colors,Array.isArray(tr)&&ne(tr.length===1||oe.webgl_draw_buffers,"multiple render targets not supported")),tr||("colorCount"in lr&&(Ro=lr.colorCount|0,ne(Ro>0,"invalid color buffer count")),"colorType"in lr&&(ne.oneOf(lr.colorType,Rt,"invalid color type"),wo=lr.colorType),"colorFormat"in lr&&(yr=lr.colorFormat,ne.oneOf(lr.colorFormat,Pt,"invalid color format for texture"))),"depth"in lr&&(Jn.depth=lr.depth),"stencil"in lr&&(Jn.stencil=lr.stencil),"depthStencil"in lr&&(Jn.depthStencil=lr.depthStencil)}var qr;if(tr)if(Array.isArray(tr))for(qr=[],ln=0;ln<tr.length;++ln)qr[ln]=tr[ln];else qr=[tr];else{qr=Array(Ro);var Eo={radius:Gn,format:yr,type:wo};for(ln=0;ln<Ro;++ln)qr[ln]=tt.createCube(Eo)}for(Jn.color=Array(qr.length),ln=0;ln<qr.length;++ln){var jo=qr[ln];ne(typeof jo=="function"&&jo._reglType==="textureCube","invalid cube map"),Gn=Gn||jo.width,ne(jo.width===Gn&&jo.height===Gn,"invalid cube map shape"),Jn.color[ln]={target:wa,data:qr[ln]}}for(ln=0;ln<6;++ln){for(var vo=0;vo<qr.length;++vo)Jn.color[vo].target=wa+ln;ln>0&&(Jn.depth=Tt[0].depth,Jn.stencil=Tt[0].stencil,Jn.depthStencil=Tt[0].depthStencil),Tt[ln]?Tt[ln](Jn):Tt[ln]=Xt(Jn)}return a(Et,{width:Gn,height:Gn,color:qr})}function Rn(er){var ln,Jn=er|0;if(ne(Jn>0&&Jn<=_e.maxCubeMapSize,"invalid radius for cube fbo"),Jn===Et.width)return Et;var Gn=Et.color;for(ln=0;ln<Gn.length;++ln)Gn[ln].resize(Jn);for(ln=0;ln<6;++ln)Tt[ln].resize(Jn);return Et.width=Et.height=Jn,Et}return Et(Dt),a(Et,{faces:Tt,resize:Rn,_reglType:"framebufferCube",destroy:function(){Tt.forEach(function(er){er.destroy()})}})}function Vn(){st.cur=null,st.next=null,st.dirty=!0,Ko(xt).forEach(function(Dt){Dt.framebuffer=L.createFramebuffer(),wt(Dt)})}return a(st,{getFramebuffer:function(Dt){if(typeof Dt=="function"&&Dt._reglType==="framebuffer"){var Tt=Dt._framebuffer;if(Tt instanceof Zt)return Tt}return null},create:Xt,createCube:Tn,clear:function(){Ko(xt).forEach(Vt)},restore:Vn})}var Dp=5126,bc=34962;function Nf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Dp,this.offset=0,this.stride=0,this.divisor=0}function Rf(L,oe,_e,tt,pt){for(var Ze=_e.maxAttributes,st=new Array(Ze),Pt=0;Pt<Ze;++Pt)st[Pt]=new Nf;var Ct=0,Rt={},ct={Record:Nf,scope:{},state:st,currentVAO:null,targetVAO:null,restore:Bt()?xt:function(){},createVAO:Zt,getVAO:bt,destroyBuffer:Gt,setVAO:Bt()?We:ut,clear:Bt()?Lt:function(){}};function Gt(At){for(var Vt=0;Vt<st.length;++Vt){var wt=st[Vt];wt.buffer===At&&(L.disableVertexAttribArray(Vt),wt.buffer=null)}}function Bt(){return oe.oes_vertex_array_object}function kt(){return oe.angle_instanced_arrays}function bt(At){return typeof At=="function"&&At._vao?At._vao:null}function We(At){if(At!==ct.currentVAO){var Vt=Bt();At?Vt.bindVertexArrayOES(At.vao):Vt.bindVertexArrayOES(null),ct.currentVAO=At}}function ut(At){if(At!==ct.currentVAO){if(At)At.bindAttrs();else for(var Vt=kt(),wt=0;wt<st.length;++wt){var Xt=st[wt];Xt.buffer?(L.enableVertexAttribArray(wt),L.vertexAttribPointer(wt,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Vt&&Xt.divisor&&Vt.vertexAttribDivisorANGLE(wt,Xt.divisor)):(L.disableVertexAttribArray(wt),L.vertexAttrib4f(wt,Xt.x,Xt.y,Xt.z,Xt.w))}ct.currentVAO=At}}function Lt(){Ko(Rt).forEach(function(At){At.destroy()})}function Kt(){this.id=++Ct,this.attributes=[];var At=Bt();At?this.vao=At.createVertexArrayOES():this.vao=null,Rt[this.id]=this,this.buffers=[]}Kt.prototype.bindAttrs=function(){for(var At=kt(),Vt=this.attributes,wt=0;wt<Vt.length;++wt){var Xt=Vt[wt];Xt.buffer?(L.enableVertexAttribArray(wt),L.bindBuffer(bc,Xt.buffer.buffer),L.vertexAttribPointer(wt,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),At&&Xt.divisor&&At.vertexAttribDivisorANGLE(wt,Xt.divisor)):(L.disableVertexAttribArray(wt),L.vertexAttrib4f(wt,Xt.x,Xt.y,Xt.z,Xt.w))}for(var Tn=Vt.length;Tn<Ze;++Tn)L.disableVertexAttribArray(Tn)},Kt.prototype.refresh=function(){var At=Bt();At&&(At.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},Kt.prototype.destroy=function(){if(this.vao){var At=Bt();this===ct.currentVAO&&(ct.currentVAO=null,At.bindVertexArrayOES(null)),At.deleteVertexArrayOES(this.vao),this.vao=null}Rt[this.id]&&(delete Rt[this.id],tt.vaoCount-=1)};function xt(){var At=Bt();At&&Ko(Rt).forEach(function(Vt){Vt.refresh()})}function Zt(At){var Vt=new Kt;tt.vaoCount+=1;function wt(Xt){ne(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),ne(Xt.length<Ze,"too many attributes"),ne(Xt.length>0,"must specify at least one attribute");var Tn={},Vn=Vt.attributes;Vn.length=Xt.length;for(var Dt=0;Dt<Xt.length;++Dt){var Tt=Xt[Dt],Et=Vn[Dt]=new Nf,Rn=Tt.data||Tt;if(Array.isArray(Rn)||n(Rn)||Ei(Rn)){var er;Vt.buffers[Dt]&&(er=Vt.buffers[Dt],n(Rn)&&er._buffer.byteLength>=Rn.byteLength?er.subdata(Rn):(er.destroy(),Vt.buffers[Dt]=null)),Vt.buffers[Dt]||(er=Vt.buffers[Dt]=pt.create(Tt,bc,!1,!0)),Et.buffer=pt.getBuffer(er),Et.size=Et.buffer.dimension|0,Et.normalized=!1,Et.type=Et.buffer.dtype,Et.offset=0,Et.stride=0,Et.divisor=0,Et.state=1,Tn[Dt]=1}else pt.getBuffer(Tt)?(Et.buffer=pt.getBuffer(Tt),Et.size=Et.buffer.dimension|0,Et.normalized=!1,Et.type=Et.buffer.dtype,Et.offset=0,Et.stride=0,Et.divisor=0,Et.state=1):pt.getBuffer(Tt.buffer)?(Et.buffer=pt.getBuffer(Tt.buffer),Et.size=(+Tt.size||Et.buffer.dimension)|0,Et.normalized=!!Tt.normalized||!1,"type"in Tt?(ne.parameter(Tt.type,Si,"invalid buffer type"),Et.type=Si[Tt.type]):Et.type=Et.buffer.dtype,Et.offset=(Tt.offset||0)|0,Et.stride=(Tt.stride||0)|0,Et.divisor=(Tt.divisor||0)|0,Et.state=1,ne(Et.size>=1&&Et.size<=4,"size must be between 1 and 4"),ne(Et.offset>=0,"invalid offset"),ne(Et.stride>=0&&Et.stride<=255,"stride must be between 0 and 255"),ne(Et.divisor>=0,"divisor must be positive"),ne(!Et.divisor||!!oe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Tt?(ne(Dt>0,"first attribute must not be a constant"),Et.x=+Tt.x||0,Et.y=+Tt.y||0,Et.z=+Tt.z||0,Et.w=+Tt.w||0,Et.state=2):ne(!1,"invalid attribute spec for location "+Dt)}for(var ln=0;ln<Vt.buffers.length;++ln)!Tn[ln]&&Vt.buffers[ln]&&(Vt.buffers[ln].destroy(),Vt.buffers[ln]=null);return Vt.refresh(),wt}return wt.destroy=function(){for(var Xt=0;Xt<Vt.buffers.length;++Xt)Vt.buffers[Xt]&&Vt.buffers[Xt].destroy();Vt.buffers.length=0,Vt.destroy()},wt._vao=Vt,wt._reglType="vao",wt(At)}return ct}var jf=35632,tl=35633,Ip=35718,nl=35721;function Nd(L,oe,_e,tt){var pt={},Ze={};function st(We,ut,Lt,Kt){this.name=We,this.id=ut,this.location=Lt,this.info=Kt}function Pt(We,ut){for(var Lt=0;Lt<We.length;++Lt)if(We[Lt].id===ut.id){We[Lt].location=ut.location;return}We.push(ut)}function Ct(We,ut,Lt){var Kt=We===jf?pt:Ze,xt=Kt[ut];if(!xt){var Zt=oe.str(ut);xt=L.createShader(We),L.shaderSource(xt,Zt),L.compileShader(xt),ne.shaderError(L,xt,Zt,We,Lt),Kt[ut]=xt}return xt}var Rt={},ct=[],Gt=0;function Bt(We,ut){this.id=Gt++,this.fragId=We,this.vertId=ut,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,tt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kt(We,ut,Lt){var Kt,xt,Zt=Ct(jf,We.fragId),At=Ct(tl,We.vertId),Vt=We.program=L.createProgram();if(L.attachShader(Vt,Zt),L.attachShader(Vt,At),Lt)for(Kt=0;Kt<Lt.length;++Kt){var wt=Lt[Kt];L.bindAttribLocation(Vt,wt[0],wt[1])}L.linkProgram(Vt),ne.linkError(L,Vt,oe.str(We.fragId),oe.str(We.vertId),ut);var Xt=L.getProgramParameter(Vt,Ip);tt.profile&&(We.stats.uniformsCount=Xt);var Tn=We.uniforms;for(Kt=0;Kt<Xt;++Kt)if(xt=L.getActiveUniform(Vt,Kt),xt)if(xt.size>1)for(var Vn=0;Vn<xt.size;++Vn){var Dt=xt.name.replace("[0]","["+Vn+"]");Pt(Tn,new st(Dt,oe.id(Dt),L.getUniformLocation(Vt,Dt),xt))}else Pt(Tn,new st(xt.name,oe.id(xt.name),L.getUniformLocation(Vt,xt.name),xt));var Tt=L.getProgramParameter(Vt,nl);tt.profile&&(We.stats.attributesCount=Tt);var Et=We.attributes;for(Kt=0;Kt<Tt;++Kt)xt=L.getActiveAttrib(Vt,Kt),xt&&Pt(Et,new st(xt.name,oe.id(xt.name),L.getAttribLocation(Vt,xt.name),xt))}tt.profile&&(_e.getMaxUniformsCount=function(){var We=0;return ct.forEach(function(ut){ut.stats.uniformsCount>We&&(We=ut.stats.uniformsCount)}),We},_e.getMaxAttributesCount=function(){var We=0;return ct.forEach(function(ut){ut.stats.attributesCount>We&&(We=ut.stats.attributesCount)}),We});function bt(){pt={},Ze={};for(var We=0;We<ct.length;++We)kt(ct[We],null,ct[We].attributes.map(function(ut){return[ut.location,ut.name]}))}return{clear:function(){var We=L.deleteShader.bind(L);Ko(pt).forEach(We),pt={},Ko(Ze).forEach(We),Ze={},ct.forEach(function(ut){L.deleteProgram(ut.program)}),ct.length=0,Rt={},_e.shaderCount=0},program:function(We,ut,Lt,Kt){ne.command(We>=0,"missing vertex shader",Lt),ne.command(ut>=0,"missing fragment shader",Lt);var xt=Rt[ut];xt||(xt=Rt[ut]={});var Zt=xt[We];if(Zt&&(Zt.refCount++,!Kt))return Zt;var At=new Bt(ut,We);return _e.shaderCount++,kt(At,Lt,Kt),Zt||(xt[We]=At),ct.push(At),a(At,{destroy:function(){if(At.refCount--,At.refCount<=0){L.deleteProgram(At.program);var Vt=ct.indexOf(At);ct.splice(Vt,1),_e.shaderCount--}xt[At.vertId].refCount<=0&&(L.deleteShader(Ze[At.vertId]),delete Ze[At.vertId],delete Rt[At.fragId][At.vertId]),Object.keys(Rt[At.fragId]).length||(L.deleteShader(pt[At.fragId]),delete pt[At.fragId],delete Rt[At.fragId])}})},restore:bt,shader:Ct,frag:-1,vert:-1}}var Rd=6408,Cl=5121,io=3333,wc=5126;function ho(L,oe,_e,tt,pt,Ze,st){function Pt(ct){var Gt;oe.next===null?(ne(pt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Gt=Cl):(ne(oe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Gt=oe.next.colorAttachments[0].texture._texture.type,Ze.oes_texture_float?(ne(Gt===Cl||Gt===wc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Gt===wc&&ne(st.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ne(Gt===Cl,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Bt=0,kt=0,bt=tt.framebufferWidth,We=tt.framebufferHeight,ut=null;n(ct)?ut=ct:ct&&(ne.type(ct,"object","invalid arguments to regl.read()"),Bt=ct.x|0,kt=ct.y|0,ne(Bt>=0&&Bt<tt.framebufferWidth,"invalid x offset for regl.read"),ne(kt>=0&&kt<tt.framebufferHeight,"invalid y offset for regl.read"),bt=(ct.width||tt.framebufferWidth-Bt)|0,We=(ct.height||tt.framebufferHeight-kt)|0,ut=ct.data||null),ut&&(Gt===Cl?ne(ut instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Gt===wc&&ne(ut instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ne(bt>0&&bt+Bt<=tt.framebufferWidth,"invalid width for read pixels"),ne(We>0&&We+kt<=tt.framebufferHeight,"invalid height for read pixels"),_e();var Lt=bt*We*4;return ut||(Gt===Cl?ut=new Uint8Array(Lt):Gt===wc&&(ut=ut||new Float32Array(Lt))),ne.isTypedArray(ut,"data buffer for regl.read() must be a typedarray"),ne(ut.byteLength>=Lt,"data buffer for regl.read() too small"),L.pixelStorei(io,4),L.readPixels(Bt,kt,bt,We,Rd,Gt,ut),ut}function Ct(ct){var Gt;return oe.setFBO({framebuffer:ct.framebuffer},function(){Gt=Pt(ct)}),Gt}function Rt(ct){return!ct||!("framebuffer"in ct)?Pt(ct):Ct(ct)}return Rt}function Pu(L){return Array.prototype.slice.call(L)}function ii(L){return Pu(L).join("")}function iu(){var L=0,oe=[],_e=[];function tt(Gt){for(var Bt=0;Bt<_e.length;++Bt)if(_e[Bt]===Gt)return oe[Bt];var kt="g"+L++;return oe.push(kt),_e.push(Gt),kt}function pt(){var Gt=[];function Bt(){Gt.push.apply(Gt,Pu(arguments))}var kt=[];function bt(){var We="v"+L++;return kt.push(We),arguments.length>0&&(Gt.push(We,"="),Gt.push.apply(Gt,Pu(arguments)),Gt.push(";")),We}return a(Bt,{def:bt,toString:function(){return ii([kt.length>0?"var "+kt.join(",")+";":"",ii(Gt)])}})}function Ze(){var Gt=pt(),Bt=pt(),kt=Gt.toString,bt=Bt.toString;function We(ut,Lt){Bt(ut,Lt,"=",Gt.def(ut,Lt),";")}return a(function(){Gt.apply(Gt,Pu(arguments))},{def:Gt.def,entry:Gt,exit:Bt,save:We,set:function(ut,Lt,Kt){We(ut,Lt),Gt(ut,Lt,"=",Kt,";")},toString:function(){return kt()+bt()}})}function st(){var Gt=ii(arguments),Bt=Ze(),kt=Ze(),bt=Bt.toString,We=kt.toString;return a(Bt,{then:function(){return Bt.apply(Bt,Pu(arguments)),this},else:function(){return kt.apply(kt,Pu(arguments)),this},toString:function(){var ut=We();return ut&&(ut="else{"+ut+"}"),ii(["if(",Gt,"){",bt(),"}",ut])}})}var Pt=pt(),Ct={};function Rt(Gt,Bt){var kt=[];function bt(){var xt="a"+kt.length;return kt.push(xt),xt}Bt=Bt||0;for(var We=0;We<Bt;++We)bt();var ut=Ze(),Lt=ut.toString,Kt=Ct[Gt]=a(ut,{arg:bt,toString:function(){return ii(["function(",kt.join(),"){",Lt(),"}"])}});return Kt}function ct(){var Gt=['"use strict";',Pt,"return {"];Object.keys(Ct).forEach(function(bt){Gt.push('"',bt,'":',Ct[bt].toString(),",")}),Gt.push("}");var Bt=ii(Gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),kt=Function.apply(null,oe.concat(Bt));return kt.apply(null,_e)}return{global:Pt,link:tt,block:pt,proc:Rt,scope:Ze,cond:st,compile:ct}}var ku="xyzw".split(""),rl=5121,Dl=1,Cf=2,Df=0,au=1,Il=2,If=3,Ec=4,ol=5,jd=6,hs="dither",Lf="blend.enable",Oc="blend.color",uu="blend.equation",vs="blend.func",xc="depth.enable",Sc="depth.func",Ff="depth.range",$f="depth.mask",Fa="colorMask",Cd="cull.enable",Dd="cull.face",Id="frontFace",Bf="lineWidth",lu="polygonOffset.enable",Ac="polygonOffset.offset",Uf="sample.alpha",Gf="sample.enable",ys="sample.coverage",Nu="stencil.enable",Zn="stencil.mask",ms="stencil.func",Tc="stencil.opFront",$a="stencil.opBack",gs="scissor.enable",_s="scissor.box",go="viewport",bs="profile",il="framebuffer",Mc="vert",Jr="frag",No="elements",Ru="primitive",Ba="count",Ua="offset",al="instances",su="vao",ws="Width",Pc="Height",ul=il+ws,Es=il+Pc,Nt=go+ws,Ld=go+Pc,Ll="drawingBuffer",kc=Ll+ws,Vf=Ll+Pc,Fd=[vs,uu,ms,Tc,$a,ys,go,_s,Ac],cu=34962,$d=34963,Ga=35632,ll=35633,Wf=3553,Lp=34067,Fp=2884,$p=3042,Bd=3024,Ud=2960,Gd=2929,Vd=3089,Bp=32823,Up=32926,Gp=32928,ki=5126,Fl=35664,Nc=35665,Ki=35666,Oa=5124,zf=35667,Ni=35668,Rc=35669,$l=35670,Os=35671,jc=35672,Cc=35673,xs=35674,Ss=35675,Bl=35676,ju=35678,Wo=35680,Dc=4,Ic=1028,Cu=1029,Wd=2304,Ri=2305,zo=32775,Vp=32776,xa=519,Ln=7680,Hf=0,Ul=1,Xf=32774,Wp=513,As=36160,zp=36064,Va={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ts=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Gl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Wa={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Hp={frag:Ga,vert:ll},zd={cw:Wd,ccw:Ri};function sl(L){return Array.isArray(L)||n(L)||Ei(L)}function fu(L){return L.sort(function(oe,_e){return oe===go?-1:_e===go?1:oe<_e?-1:1})}function ji(L,oe,_e,tt){this.thisDep=L,this.contextDep=oe,this.propDep=_e,this.append=tt}function Un(L){return L&&!(L.thisDep||L.contextDep||L.propDep)}function _o(L){return new ji(!1,!1,!1,L)}function bi(L,oe){var _e=L.type;if(_e===Df){var tt=L.data.length;return new ji(!0,tt>=1,tt>=2,oe)}else if(_e===Ec){var pt=L.data;return new ji(pt.thisDep,pt.contextDep,pt.propDep,oe)}else{if(_e===ol)return new ji(!1,!1,!1,oe);if(_e===jd){for(var Ze=!1,st=!1,Pt=!1,Ct=0;Ct<L.data.length;++Ct){var Rt=L.data[Ct];if(Rt.type===au)Pt=!0;else if(Rt.type===Il)st=!0;else if(Rt.type===If)Ze=!0;else if(Rt.type===Df){Ze=!0;var ct=Rt.data;ct>=1&&(st=!0),ct>=2&&(Pt=!0)}else Rt.type===Ec&&(Ze=Ze||Rt.data.thisDep,st=st||Rt.data.contextDep,Pt=Pt||Rt.data.propDep)}return new ji(Ze,st,Pt,oe)}else return new ji(_e===If,_e===Il,_e===au,oe)}}var Zi=new ji(!1,!1,!1,function(){});function sv(L,oe,_e,tt,pt,Ze,st,Pt,Ct,Rt,ct,Gt,Bt,kt,bt){var We=Rt.Record,ut={add:32774,subtract:32778,"reverse subtract":32779};_e.ext_blend_minmax&&(ut.min=zo,ut.max=Vp);var Lt=_e.angle_instanced_arrays,Kt=_e.webgl_draw_buffers,xt={dirty:!0,profile:bt.profile},Zt={},At=[],Vt={},wt={};function Xt(ae){return ae.replace(".","_")}function Tn(ae,J,Ae){var Be=Xt(ae);At.push(ae),Zt[Be]=xt[Be]=!!Ae,Vt[Be]=J}function Vn(ae,J,Ae){var Be=Xt(ae);At.push(ae),Array.isArray(Ae)?(xt[Be]=Ae.slice(),Zt[Be]=Ae.slice()):xt[Be]=Zt[Be]=Ae,wt[Be]=J}Tn(hs,Bd),Tn(Lf,$p),Vn(Oc,"blendColor",[0,0,0,0]),Vn(uu,"blendEquationSeparate",[Xf,Xf]),Vn(vs,"blendFuncSeparate",[Ul,Hf,Ul,Hf]),Tn(xc,Gd,!0),Vn(Sc,"depthFunc",Wp),Vn(Ff,"depthRange",[0,1]),Vn($f,"depthMask",!0),Vn(Fa,Fa,[!0,!0,!0,!0]),Tn(Cd,Fp),Vn(Dd,"cullFace",Cu),Vn(Id,Id,Ri),Vn(Bf,Bf,1),Tn(lu,Bp),Vn(Ac,"polygonOffset",[0,0]),Tn(Uf,Up),Tn(Gf,Gp),Vn(ys,"sampleCoverage",[1,!1]),Tn(Nu,Ud),Vn(Zn,"stencilMask",-1),Vn(ms,"stencilFunc",[xa,0,-1]),Vn(Tc,"stencilOpSeparate",[Ic,Ln,Ln,Ln]),Vn($a,"stencilOpSeparate",[Cu,Ln,Ln,Ln]),Tn(gs,Vd),Vn(_s,"scissor",[0,0,L.drawingBufferWidth,L.drawingBufferHeight]),Vn(go,go,[0,0,L.drawingBufferWidth,L.drawingBufferHeight]);var Dt={gl:L,context:Bt,strings:oe,next:Zt,current:xt,draw:Gt,elements:Ze,buffer:pt,shader:ct,attributes:Rt.state,vao:Rt,uniforms:Ct,framebuffer:Pt,extensions:_e,timer:kt,isBufferArgs:sl},Tt={primTypes:Uo,compareFuncs:Gl,blendFuncs:Va,blendEquations:ut,stencilOps:Wa,glTypes:Si,orientationType:zd};ne.optional(function(){Dt.isArrayLike=T}),Kt&&(Tt.backBuffer=[Cu],Tt.drawBuffer=Tr(tt.maxDrawbuffers,function(ae){return ae===0?[0]:Tr(ae,function(J){return zp+J})}));var Et=0;function Rn(){var ae=iu(),J=ae.link,Ae=ae.global;ae.id=Et++,ae.batchId="0";var Be=J(Dt),ze=ae.shared={props:"a0"};Object.keys(Dt).forEach(function(we){ze[we]=Ae.def(Be,".",we)}),ne.optional(function(){ae.CHECK=J(ne),ae.commandStr=ne.guessCommand(),ae.command=J(ae.commandStr),ae.assert=function(we,se,Fe){we("if(!(",se,"))",this.CHECK,".commandRaise(",J(Fe),",",this.command,");")},Tt.invalidBlendCombinations=Ts});var Pe=ae.next={},Te=ae.current={};Object.keys(wt).forEach(function(we){Array.isArray(xt[we])&&(Pe[we]=Ae.def(ze.next,".",we),Te[we]=Ae.def(ze.current,".",we))});var De=ae.constants={};Object.keys(Tt).forEach(function(we){De[we]=Ae.def(JSON.stringify(Tt[we]))}),ae.invoke=function(we,se){switch(se.type){case Df:var Fe=["this",ze.context,ze.props,ae.batchId];return we.def(J(se.data),".call(",Fe.slice(0,Math.max(se.data.length+1,4)),")");case au:return we.def(ze.props,se.data);case Il:return we.def(ze.context,se.data);case If:return we.def("this",se.data);case Ec:return se.data.append(ae,we),se.data.ref;case ol:return se.data.toString();case jd:return se.data.map(function(Ye){return ae.invoke(we,Ye)})}},ae.attribCache={};var ce={};return ae.scopeAttrib=function(we){var se=oe.id(we);if(se in ce)return ce[se];var Fe=Rt.scope[se];Fe||(Fe=Rt.scope[se]=new We);var Ye=ce[se]=J(Fe);return Ye},ae}function er(ae){var J=ae.static,Ae=ae.dynamic,Be;if(bs in J){var ze=!!J[bs];Be=_o(function(Te,De){return ze}),Be.enable=ze}else if(bs in Ae){var Pe=Ae[bs];Be=bi(Pe,function(Te,De){return Te.invoke(De,Pe)})}return Be}function ln(ae,J){var Ae=ae.static,Be=ae.dynamic;if(il in Ae){var ze=Ae[il];return ze?(ze=Pt.getFramebuffer(ze),ne.command(ze,"invalid framebuffer object"),_o(function(Te,De){var ce=Te.link(ze),we=Te.shared;De.set(we.framebuffer,".next",ce);var se=we.context;return De.set(se,"."+ul,ce+".width"),De.set(se,"."+Es,ce+".height"),ce})):_o(function(Te,De){var ce=Te.shared;De.set(ce.framebuffer,".next","null");var we=ce.context;return De.set(we,"."+ul,we+"."+kc),De.set(we,"."+Es,we+"."+Vf),"null"})}else if(il in Be){var Pe=Be[il];return bi(Pe,function(Te,De){var ce=Te.invoke(De,Pe),we=Te.shared,se=we.framebuffer,Fe=De.def(se,".getFramebuffer(",ce,")");ne.optional(function(){Te.assert(De,"!"+ce+"||"+Fe,"invalid framebuffer object")}),De.set(se,".next",Fe);var Ye=we.context;return De.set(Ye,"."+ul,Fe+"?"+Fe+".width:"+Ye+"."+kc),De.set(Ye,"."+Es,Fe+"?"+Fe+".height:"+Ye+"."+Vf),Fe})}else return null}function Jn(ae,J,Ae){var Be=ae.static,ze=ae.dynamic;function Pe(ce){if(ce in Be){var we=Be[ce];ne.commandType(we,"object","invalid "+ce,Ae.commandStr);var se=!0,Fe=we.x|0,Ye=we.y|0,d,m;return"width"in we?(d=we.width|0,ne.command(d>=0,"invalid "+ce,Ae.commandStr)):se=!1,"height"in we?(m=we.height|0,ne.command(m>=0,"invalid "+ce,Ae.commandStr)):se=!1,new ji(!se&&J&&J.thisDep,!se&&J&&J.contextDep,!se&&J&&J.propDep,function(G,Z){var fe=G.shared.context,be=d;"width"in we||(be=Z.def(fe,".",ul,"-",Fe));var Ie=m;return"height"in we||(Ie=Z.def(fe,".",Es,"-",Ye)),[Fe,Ye,be,Ie]})}else if(ce in ze){var w=ze[ce],R=bi(w,function(G,Z){var fe=G.invoke(Z,w);ne.optional(function(){G.assert(Z,fe+"&&typeof "+fe+'==="object"',"invalid "+ce)});var be=G.shared.context,Ie=Z.def(fe,".x|0"),ht=Z.def(fe,".y|0"),_t=Z.def('"width" in ',fe,"?",fe,".width|0:","(",be,".",ul,"-",Ie,")"),Ut=Z.def('"height" in ',fe,"?",fe,".height|0:","(",be,".",Es,"-",ht,")");return ne.optional(function(){G.assert(Z,_t+">=0&&"+Ut+">=0","invalid "+ce)}),[Ie,ht,_t,Ut]});return J&&(R.thisDep=R.thisDep||J.thisDep,R.contextDep=R.contextDep||J.contextDep,R.propDep=R.propDep||J.propDep),R}else return J?new ji(J.thisDep,J.contextDep,J.propDep,function(G,Z){var fe=G.shared.context;return[0,0,Z.def(fe,".",ul),Z.def(fe,".",Es)]}):null}var Te=Pe(go);if(Te){var De=Te;Te=new ji(Te.thisDep,Te.contextDep,Te.propDep,function(ce,we){var se=De.append(ce,we),Fe=ce.shared.context;return we.set(Fe,"."+Nt,se[2]),we.set(Fe,"."+Ld,se[3]),se})}return{viewport:Te,scissor_box:Pe(_s)}}function Gn(ae,J){var Ae=ae.static,Be=typeof Ae[Jr]=="string"&&typeof Ae[Mc]=="string";if(Be){if(Object.keys(J.dynamic).length>0)return null;var ze=J.static,Pe=Object.keys(ze);if(Pe.length>0&&typeof ze[Pe[0]]=="number"){for(var Te=[],De=0;De<Pe.length;++De)ne(typeof ze[Pe[De]]=="number","must specify all vertex attribute locations when using vaos"),Te.push([ze[Pe[De]]|0,Pe[De]]);return Te}}return null}function tr(ae,J,Ae){var Be=ae.static,ze=ae.dynamic;function Pe(se){if(se in Be){var Fe=oe.id(Be[se]);ne.optional(function(){ct.shader(Hp[se],Fe,ne.guessCommand())});var Ye=_o(function(){return Fe});return Ye.id=Fe,Ye}else if(se in ze){var d=ze[se];return bi(d,function(m,w){var R=m.invoke(w,d),G=w.def(m.shared.strings,".id(",R,")");return ne.optional(function(){w(m.shared.shader,".shader(",Hp[se],",",G,",",m.command,");")}),G})}return null}var Te=Pe(Jr),De=Pe(Mc),ce=null,we;return Un(Te)&&Un(De)?(ce=ct.program(De.id,Te.id,null,Ae),we=_o(function(se,Fe){return se.link(ce)})):we=new ji(Te&&Te.thisDep||De&&De.thisDep,Te&&Te.contextDep||De&&De.contextDep,Te&&Te.propDep||De&&De.propDep,function(se,Fe){var Ye=se.shared.shader,d;Te?d=Te.append(se,Fe):d=Fe.def(Ye,".",Jr);var m;De?m=De.append(se,Fe):m=Fe.def(Ye,".",Mc);var w=Ye+".program("+m+","+d;return ne.optional(function(){w+=","+se.command}),Fe.def(w+")")}),{frag:Te,vert:De,progVar:we,program:ce}}function yr(ae,J){var Ae=ae.static,Be=ae.dynamic;function ze(){if(No in Ae){var se=Ae[No];sl(se)?se=Ze.getElements(Ze.create(se,!0)):se&&(se=Ze.getElements(se),ne.command(se,"invalid elements",J.commandStr));var Fe=_o(function(d,m){if(se){var w=d.link(se);return d.ELEMENTS=w,w}return d.ELEMENTS=null,null});return Fe.value=se,Fe}else if(No in Be){var Ye=Be[No];return bi(Ye,function(d,m){var w=d.shared,R=w.isBufferArgs,G=w.elements,Z=d.invoke(m,Ye),fe=m.def("null"),be=m.def(R,"(",Z,")"),Ie=d.cond(be).then(fe,"=",G,".createStream(",Z,");").else(fe,"=",G,".getElements(",Z,");");return ne.optional(function(){d.assert(Ie.else,"!"+Z+"||"+fe,"invalid elements")}),m.entry(Ie),m.exit(d.cond(be).then(G,".destroyStream(",fe,");")),d.ELEMENTS=fe,fe})}return null}var Pe=ze();function Te(){if(Ru in Ae){var se=Ae[Ru];return ne.commandParameter(se,Uo,"invalid primitve",J.commandStr),_o(function(Ye,d){return Uo[se]})}else if(Ru in Be){var Fe=Be[Ru];return bi(Fe,function(Ye,d){var m=Ye.constants.primTypes,w=Ye.invoke(d,Fe);return ne.optional(function(){Ye.assert(d,w+" in "+m,"invalid primitive, must be one of "+Object.keys(Uo))}),d.def(m,"[",w,"]")})}else if(Pe)return Un(Pe)?Pe.value?_o(function(Ye,d){return d.def(Ye.ELEMENTS,".primType")}):_o(function(){return Dc}):new ji(Pe.thisDep,Pe.contextDep,Pe.propDep,function(Ye,d){var m=Ye.ELEMENTS;return d.def(m,"?",m,".primType:",Dc)});return null}function De(se,Fe){if(se in Ae){var Ye=Ae[se]|0;return ne.command(!Fe||Ye>=0,"invalid "+se,J.commandStr),_o(function(m,w){return Fe&&(m.OFFSET=Ye),Ye})}else if(se in Be){var d=Be[se];return bi(d,function(m,w){var R=m.invoke(w,d);return Fe&&(m.OFFSET=R,ne.optional(function(){m.assert(w,R+">=0","invalid "+se)})),R})}else if(Fe&&Pe)return _o(function(m,w){return m.OFFSET="0",0});return null}var ce=De(Ua,!0);function we(){if(Ba in Ae){var se=Ae[Ba]|0;return ne.command(typeof se=="number"&&se>=0,"invalid vertex count",J.commandStr),_o(function(){return se})}else if(Ba in Be){var Fe=Be[Ba];return bi(Fe,function(m,w){var R=m.invoke(w,Fe);return ne.optional(function(){m.assert(w,"typeof "+R+'==="number"&&'+R+">=0&&"+R+"===("+R+"|0)","invalid vertex count")}),R})}else if(Pe)if(Un(Pe)){if(Pe)return ce?new ji(ce.thisDep,ce.contextDep,ce.propDep,function(m,w){var R=w.def(m.ELEMENTS,".vertCount-",m.OFFSET);return ne.optional(function(){m.assert(w,R+">=0","invalid vertex offset/element buffer too small")}),R}):_o(function(m,w){return w.def(m.ELEMENTS,".vertCount")});var Ye=_o(function(){return-1});return ne.optional(function(){Ye.MISSING=!0}),Ye}else{var d=new ji(Pe.thisDep||ce.thisDep,Pe.contextDep||ce.contextDep,Pe.propDep||ce.propDep,function(m,w){var R=m.ELEMENTS;return m.OFFSET?w.def(R,"?",R,".vertCount-",m.OFFSET,":-1"):w.def(R,"?",R,".vertCount:-1")});return ne.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:Pe,primitive:Te(),count:we(),instances:De(al,!1),offset:ce}}function wo(ae,J){var Ae=ae.static,Be=ae.dynamic,ze={};return At.forEach(function(Pe){var Te=Xt(Pe);function De(ce,we){if(Pe in Ae){var se=ce(Ae[Pe]);ze[Te]=_o(function(){return se})}else if(Pe in Be){var Fe=Be[Pe];ze[Te]=bi(Fe,function(Ye,d){return we(Ye,d,Ye.invoke(d,Fe))})}}switch(Pe){case Cd:case Lf:case hs:case Nu:case xc:case gs:case lu:case Uf:case Gf:case $f:return De(function(ce){return ne.commandType(ce,"boolean",Pe,J.commandStr),ce},function(ce,we,se){return ne.optional(function(){ce.assert(we,"typeof "+se+'==="boolean"',"invalid flag "+Pe,ce.commandStr)}),se});case Sc:return De(function(ce){return ne.commandParameter(ce,Gl,"invalid "+Pe,J.commandStr),Gl[ce]},function(ce,we,se){var Fe=ce.constants.compareFuncs;return ne.optional(function(){ce.assert(we,se+" in "+Fe,"invalid "+Pe+", must be one of "+Object.keys(Gl))}),we.def(Fe,"[",se,"]")});case Ff:return De(function(ce){return ne.command(T(ce)&&ce.length===2&&typeof ce[0]=="number"&&typeof ce[1]=="number"&&ce[0]<=ce[1],"depth range is 2d array",J.commandStr),ce},function(ce,we,se){ne.optional(function(){ce.assert(we,ce.shared.isArrayLike+"("+se+")&&"+se+".length===2&&typeof "+se+'[0]==="number"&&typeof '+se+'[1]==="number"&&'+se+"[0]<="+se+"[1]","depth range must be a 2d array")});var Fe=we.def("+",se,"[0]"),Ye=we.def("+",se,"[1]");return[Fe,Ye]});case vs:return De(function(ce){ne.commandType(ce,"object","blend.func",J.commandStr);var we="srcRGB"in ce?ce.srcRGB:ce.src,se="srcAlpha"in ce?ce.srcAlpha:ce.src,Fe="dstRGB"in ce?ce.dstRGB:ce.dst,Ye="dstAlpha"in ce?ce.dstAlpha:ce.dst;return ne.commandParameter(we,Va,Te+".srcRGB",J.commandStr),ne.commandParameter(se,Va,Te+".srcAlpha",J.commandStr),ne.commandParameter(Fe,Va,Te+".dstRGB",J.commandStr),ne.commandParameter(Ye,Va,Te+".dstAlpha",J.commandStr),ne.command(Ts.indexOf(we+", "+Fe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+we+", "+Fe+")",J.commandStr),[Va[we],Va[Fe],Va[se],Va[Ye]]},function(ce,we,se){var Fe=ce.constants.blendFuncs;ne.optional(function(){ce.assert(we,se+"&&typeof "+se+'==="object"',"invalid blend func, must be an object")});function Ye(fe,be){var Ie=we.def('"',fe,be,'" in ',se,"?",se,".",fe,be,":",se,".",fe);return ne.optional(function(){ce.assert(we,Ie+" in "+Fe,"invalid "+Pe+"."+fe+be+", must be one of "+Object.keys(Va))}),Ie}var d=Ye("src","RGB"),m=Ye("dst","RGB");ne.optional(function(){var fe=ce.constants.invalidBlendCombinations;ce.assert(we,fe+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var w=we.def(Fe,"[",d,"]"),R=we.def(Fe,"[",Ye("src","Alpha"),"]"),G=we.def(Fe,"[",m,"]"),Z=we.def(Fe,"[",Ye("dst","Alpha"),"]");return[w,G,R,Z]});case uu:return De(function(ce){if(typeof ce=="string")return ne.commandParameter(ce,ut,"invalid "+Pe,J.commandStr),[ut[ce],ut[ce]];if(typeof ce=="object")return ne.commandParameter(ce.rgb,ut,Pe+".rgb",J.commandStr),ne.commandParameter(ce.alpha,ut,Pe+".alpha",J.commandStr),[ut[ce.rgb],ut[ce.alpha]];ne.commandRaise("invalid blend.equation",J.commandStr)},function(ce,we,se){var Fe=ce.constants.blendEquations,Ye=we.def(),d=we.def(),m=ce.cond("typeof ",se,'==="string"');return ne.optional(function(){function w(R,G,Z){ce.assert(R,Z+" in "+Fe,"invalid "+G+", must be one of "+Object.keys(ut))}w(m.then,Pe,se),ce.assert(m.else,se+"&&typeof "+se+'==="object"',"invalid "+Pe),w(m.else,Pe+".rgb",se+".rgb"),w(m.else,Pe+".alpha",se+".alpha")}),m.then(Ye,"=",d,"=",Fe,"[",se,"];"),m.else(Ye,"=",Fe,"[",se,".rgb];",d,"=",Fe,"[",se,".alpha];"),we(m),[Ye,d]});case Oc:return De(function(ce){return ne.command(T(ce)&&ce.length===4,"blend.color must be a 4d array",J.commandStr),Tr(4,function(we){return+ce[we]})},function(ce,we,se){return ne.optional(function(){ce.assert(we,ce.shared.isArrayLike+"("+se+")&&"+se+".length===4","blend.color must be a 4d array")}),Tr(4,function(Fe){return we.def("+",se,"[",Fe,"]")})});case Zn:return De(function(ce){return ne.commandType(ce,"number",Te,J.commandStr),ce|0},function(ce,we,se){return ne.optional(function(){ce.assert(we,"typeof "+se+'==="number"',"invalid stencil.mask")}),we.def(se,"|0")});case ms:return De(function(ce){ne.commandType(ce,"object",Te,J.commandStr);var we=ce.cmp||"keep",se=ce.ref||0,Fe="mask"in ce?ce.mask:-1;return ne.commandParameter(we,Gl,Pe+".cmp",J.commandStr),ne.commandType(se,"number",Pe+".ref",J.commandStr),ne.commandType(Fe,"number",Pe+".mask",J.commandStr),[Gl[we],se,Fe]},function(ce,we,se){var Fe=ce.constants.compareFuncs;ne.optional(function(){function w(){ce.assert(we,Array.prototype.join.call(arguments,""),"invalid stencil.func")}w(se+"&&typeof ",se,'==="object"'),w('!("cmp" in ',se,")||(",se,".cmp in ",Fe,")")});var Ye=we.def('"cmp" in ',se,"?",Fe,"[",se,".cmp]",":",Ln),d=we.def(se,".ref|0"),m=we.def('"mask" in ',se,"?",se,".mask|0:-1");return[Ye,d,m]});case Tc:case $a:return De(function(ce){ne.commandType(ce,"object",Te,J.commandStr);var we=ce.fail||"keep",se=ce.zfail||"keep",Fe=ce.zpass||"keep";return ne.commandParameter(we,Wa,Pe+".fail",J.commandStr),ne.commandParameter(se,Wa,Pe+".zfail",J.commandStr),ne.commandParameter(Fe,Wa,Pe+".zpass",J.commandStr),[Pe===$a?Cu:Ic,Wa[we],Wa[se],Wa[Fe]]},function(ce,we,se){var Fe=ce.constants.stencilOps;ne.optional(function(){ce.assert(we,se+"&&typeof "+se+'==="object"',"invalid "+Pe)});function Ye(d){return ne.optional(function(){ce.assert(we,'!("'+d+'" in '+se+")||("+se+"."+d+" in "+Fe+")","invalid "+Pe+"."+d+", must be one of "+Object.keys(Wa))}),we.def('"',d,'" in ',se,"?",Fe,"[",se,".",d,"]:",Ln)}return[Pe===$a?Cu:Ic,Ye("fail"),Ye("zfail"),Ye("zpass")]});case Ac:return De(function(ce){ne.commandType(ce,"object",Te,J.commandStr);var we=ce.factor|0,se=ce.units|0;return ne.commandType(we,"number",Te+".factor",J.commandStr),ne.commandType(se,"number",Te+".units",J.commandStr),[we,se]},function(ce,we,se){ne.optional(function(){ce.assert(we,se+"&&typeof "+se+'==="object"',"invalid "+Pe)});var Fe=we.def(se,".factor|0"),Ye=we.def(se,".units|0");return[Fe,Ye]});case Dd:return De(function(ce){var we=0;return ce==="front"?we=Ic:ce==="back"&&(we=Cu),ne.command(!!we,Te,J.commandStr),we},function(ce,we,se){return ne.optional(function(){ce.assert(we,se+'==="front"||'+se+'==="back"',"invalid cull.face")}),we.def(se,'==="front"?',Ic,":",Cu)});case Bf:return De(function(ce){return ne.command(typeof ce=="number"&&ce>=tt.lineWidthDims[0]&&ce<=tt.lineWidthDims[1],"invalid line width, must be a positive number between "+tt.lineWidthDims[0]+" and "+tt.lineWidthDims[1],J.commandStr),ce},function(ce,we,se){return ne.optional(function(){ce.assert(we,"typeof "+se+'==="number"&&'+se+">="+tt.lineWidthDims[0]+"&&"+se+"<="+tt.lineWidthDims[1],"invalid line width")}),se});case Id:return De(function(ce){return ne.commandParameter(ce,zd,Te,J.commandStr),zd[ce]},function(ce,we,se){return ne.optional(function(){ce.assert(we,se+'==="cw"||'+se+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),we.def(se+'==="cw"?'+Wd+":"+Ri)});case Fa:return De(function(ce){return ne.command(T(ce)&&ce.length===4,"color.mask must be length 4 array",J.commandStr),ce.map(function(we){return!!we})},function(ce,we,se){return ne.optional(function(){ce.assert(we,ce.shared.isArrayLike+"("+se+")&&"+se+".length===4","invalid color.mask")}),Tr(4,function(Fe){return"!!"+se+"["+Fe+"]"})});case ys:return De(function(ce){ne.command(typeof ce=="object"&&ce,Te,J.commandStr);var we="value"in ce?ce.value:1,se=!!ce.invert;return ne.command(typeof we=="number"&&we>=0&&we<=1,"sample.coverage.value must be a number between 0 and 1",J.commandStr),[we,se]},function(ce,we,se){ne.optional(function(){ce.assert(we,se+"&&typeof "+se+'==="object"',"invalid sample.coverage")});var Fe=we.def('"value" in ',se,"?+",se,".value:1"),Ye=we.def("!!",se,".invert");return[Fe,Ye]})}}),ze}function Ro(ae,J){var Ae=ae.static,Be=ae.dynamic,ze={};return Object.keys(Ae).forEach(function(Pe){var Te=Ae[Pe],De;if(typeof Te=="number"||typeof Te=="boolean")De=_o(function(){return Te});else if(typeof Te=="function"){var ce=Te._reglType;ce==="texture2d"||ce==="textureCube"?De=_o(function(we){return we.link(Te)}):ce==="framebuffer"||ce==="framebufferCube"?(ne.command(Te.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Pe+'"',J.commandStr),De=_o(function(we){return we.link(Te.color[0])})):ne.commandRaise('invalid data for uniform "'+Pe+'"',J.commandStr)}else T(Te)?De=_o(function(we){var se=we.global.def("[",Tr(Te.length,function(Fe){return ne.command(typeof Te[Fe]=="number"||typeof Te[Fe]=="boolean","invalid uniform "+Pe,we.commandStr),Te[Fe]}),"]");return se}):ne.commandRaise('invalid or missing data for uniform "'+Pe+'"',J.commandStr);De.value=Te,ze[Pe]=De}),Object.keys(Be).forEach(function(Pe){var Te=Be[Pe];ze[Pe]=bi(Te,function(De,ce){return De.invoke(ce,Te)})}),ze}function lr(ae,J){var Ae=ae.static,Be=ae.dynamic,ze={};return Object.keys(Ae).forEach(function(Pe){var Te=Ae[Pe],De=oe.id(Pe),ce=new We;if(sl(Te))ce.state=Dl,ce.buffer=pt.getBuffer(pt.create(Te,cu,!1,!0)),ce.type=0;else{var we=pt.getBuffer(Te);if(we)ce.state=Dl,ce.buffer=we,ce.type=0;else if(ne.command(typeof Te=="object"&&Te,"invalid data for attribute "+Pe,J.commandStr),"constant"in Te){var se=Te.constant;ce.buffer="null",ce.state=Cf,typeof se=="number"?ce.x=se:(ne.command(T(se)&&se.length>0&&se.length<=4,"invalid constant for attribute "+Pe,J.commandStr),ku.forEach(function(G,Z){Z<se.length&&(ce[G]=se[Z])}))}else{sl(Te.buffer)?we=pt.getBuffer(pt.create(Te.buffer,cu,!1,!0)):we=pt.getBuffer(Te.buffer),ne.command(!!we,'missing buffer for attribute "'+Pe+'"',J.commandStr);var Fe=Te.offset|0;ne.command(Fe>=0,'invalid offset for attribute "'+Pe+'"',J.commandStr);var Ye=Te.stride|0;ne.command(Ye>=0&&Ye<256,'invalid stride for attribute "'+Pe+'", must be integer betweeen [0, 255]',J.commandStr);var d=Te.size|0;ne.command(!("size"in Te)||d>0&&d<=4,'invalid size for attribute "'+Pe+'", must be 1,2,3,4',J.commandStr);var m=!!Te.normalized,w=0;"type"in Te&&(ne.commandParameter(Te.type,Si,"invalid type for attribute "+Pe,J.commandStr),w=Si[Te.type]);var R=Te.divisor|0;"divisor"in Te&&(ne.command(R===0||Lt,'cannot specify divisor for attribute "'+Pe+'", instancing not supported',J.commandStr),ne.command(R>=0,'invalid divisor for attribute "'+Pe+'"',J.commandStr)),ne.optional(function(){var G=J.commandStr,Z=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Te).forEach(function(fe){ne.command(Z.indexOf(fe)>=0,'unknown parameter "'+fe+'" for attribute pointer "'+Pe+'" (valid parameters are '+Z+")",G)})}),ce.buffer=we,ce.state=Dl,ce.size=d,ce.normalized=m,ce.type=w||we.dtype,ce.offset=Fe,ce.stride=Ye,ce.divisor=R}}ze[Pe]=_o(function(G,Z){var fe=G.attribCache;if(De in fe)return fe[De];var be={isStream:!1};return Object.keys(ce).forEach(function(Ie){be[Ie]=ce[Ie]}),ce.buffer&&(be.buffer=G.link(ce.buffer),be.type=be.type||be.buffer+".dtype"),fe[De]=be,be})}),Object.keys(Be).forEach(function(Pe){var Te=Be[Pe];function De(ce,we){var se=ce.invoke(we,Te),Fe=ce.shared,Ye=ce.constants,d=Fe.isBufferArgs,m=Fe.buffer;ne.optional(function(){ce.assert(we,se+"&&(typeof "+se+'==="object"||typeof '+se+'==="function")&&('+d+"("+se+")||"+m+".getBuffer("+se+")||"+m+".getBuffer("+se+".buffer)||"+d+"("+se+'.buffer)||("constant" in '+se+"&&(typeof "+se+'.constant==="number"||'+Fe.isArrayLike+"("+se+".constant))))",'invalid dynamic attribute "'+Pe+'"')});var w={isStream:we.def(!1)},R=new We;R.state=Dl,Object.keys(R).forEach(function(be){w[be]=we.def(""+R[be])});var G=w.buffer,Z=w.type;we("if(",d,"(",se,")){",w.isStream,"=true;",G,"=",m,".createStream(",cu,",",se,");",Z,"=",G,".dtype;","}else{",G,"=",m,".getBuffer(",se,");","if(",G,"){",Z,"=",G,".dtype;",'}else if("constant" in ',se,"){",w.state,"=",Cf,";","if(typeof "+se+'.constant === "number"){',w[ku[0]],"=",se,".constant;",ku.slice(1).map(function(be){return w[be]}).join("="),"=0;","}else{",ku.map(function(be,Ie){return w[be]+"="+se+".constant.length>"+Ie+"?"+se+".constant["+Ie+"]:0;"}).join(""),"}}else{","if(",d,"(",se,".buffer)){",G,"=",m,".createStream(",cu,",",se,".buffer);","}else{",G,"=",m,".getBuffer(",se,".buffer);","}",Z,'="type" in ',se,"?",Ye.glTypes,"[",se,".type]:",G,".dtype;",w.normalized,"=!!",se,".normalized;");function fe(be){we(w[be],"=",se,".",be,"|0;")}return fe("size"),fe("offset"),fe("stride"),fe("divisor"),we("}}"),we.exit("if(",w.isStream,"){",m,".destroyStream(",G,");","}"),w}ze[Pe]=bi(Te,De)}),ze}function Io(ae,J){var Ae=ae.static,Be=ae.dynamic;if(su in Ae){var ze=Ae[su];return ze!==null&&Rt.getVAO(ze)===null&&(ze=Rt.createVAO(ze)),_o(function(Te){return Te.link(Rt.getVAO(ze))})}else if(su in Be){var Pe=Be[su];return bi(Pe,function(Te,De){var ce=Te.invoke(De,Pe);return De.def(Te.shared.vao+".getVAO("+ce+")")})}return null}function qr(ae){var J=ae.static,Ae=ae.dynamic,Be={};return Object.keys(J).forEach(function(ze){var Pe=J[ze];Be[ze]=_o(function(Te,De){return typeof Pe=="number"||typeof Pe=="boolean"?""+Pe:Te.link(Pe)})}),Object.keys(Ae).forEach(function(ze){var Pe=Ae[ze];Be[ze]=bi(Pe,function(Te,De){return Te.invoke(De,Pe)})}),Be}function Eo(ae,J,Ae,Be,ze){var Pe=ae.static,Te=ae.dynamic;ne.optional(function(){var fe=[il,Mc,Jr,No,Ru,Ua,Ba,al,bs,su].concat(At);function be(Ie){Object.keys(Ie).forEach(function(ht){ne.command(fe.indexOf(ht)>=0,'unknown parameter "'+ht+'"',ze.commandStr)})}be(Pe),be(Te)});var De=Gn(ae,J),ce=ln(ae),we=Jn(ae,ce,ze),se=yr(ae,ze),Fe=wo(ae,ze),Ye=tr(ae,ze,De);function d(fe){var be=we[fe];be&&(Fe[fe]=be)}d(go),d(Xt(_s));var m=Object.keys(Fe).length>0,w={framebuffer:ce,draw:se,shader:Ye,state:Fe,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(w.profile=er(ae),w.uniforms=Ro(Ae,ze),w.drawVAO=w.scopeVAO=Io(ae),!w.drawVAO&&Ye.program&&!De&&_e.angle_instanced_arrays){var R=!0,G=Ye.program.attributes.map(function(fe){var be=J.static[fe];return R=R&&!!be,be});if(R&&G.length>0){var Z=Rt.getVAO(Rt.createVAO(G));w.drawVAO=new ji(null,null,null,function(fe,be){return fe.link(Z)}),w.useVAO=!0}}return De?w.useVAO=!0:w.attributes=lr(J,ze),w.context=qr(Be),w}function jo(ae,J,Ae){var Be=ae.shared,ze=Be.context,Pe=ae.scope();Object.keys(Ae).forEach(function(Te){J.save(ze,"."+Te);var De=Ae[Te],ce=De.append(ae,J);Array.isArray(ce)?Pe(ze,".",Te,"=[",ce.join(),"];"):Pe(ze,".",Te,"=",ce,";")}),J(Pe)}function vo(ae,J,Ae,Be){var ze=ae.shared,Pe=ze.gl,Te=ze.framebuffer,De;Kt&&(De=J.def(ze.extensions,".webgl_draw_buffers"));var ce=ae.constants,we=ce.drawBuffer,se=ce.backBuffer,Fe;Ae?Fe=Ae.append(ae,J):Fe=J.def(Te,".next"),Be||J("if(",Fe,"!==",Te,".cur){"),J("if(",Fe,"){",Pe,".bindFramebuffer(",As,",",Fe,".framebuffer);"),Kt&&J(De,".drawBuffersWEBGL(",we,"[",Fe,".colorAttachments.length]);"),J("}else{",Pe,".bindFramebuffer(",As,",null);"),Kt&&J(De,".drawBuffersWEBGL(",se,");"),J("}",Te,".cur=",Fe,";"),Be||J("}")}function so(ae,J,Ae){var Be=ae.shared,ze=Be.gl,Pe=ae.current,Te=ae.next,De=Be.current,ce=Be.next,we=ae.cond(De,".dirty");At.forEach(function(se){var Fe=Xt(se);if(!(Fe in Ae.state)){var Ye,d;if(Fe in Te){Ye=Te[Fe],d=Pe[Fe];var m=Tr(xt[Fe].length,function(R){return we.def(Ye,"[",R,"]")});we(ae.cond(m.map(function(R,G){return R+"!=="+d+"["+G+"]"}).join("||")).then(ze,".",wt[Fe],"(",m,");",m.map(function(R,G){return d+"["+G+"]="+R}).join(";"),";"))}else{Ye=we.def(ce,".",Fe);var w=ae.cond(Ye,"!==",De,".",Fe);we(w),Fe in Vt?w(ae.cond(Ye).then(ze,".enable(",Vt[Fe],");").else(ze,".disable(",Vt[Fe],");"),De,".",Fe,"=",Ye,";"):w(ze,".",wt[Fe],"(",Ye,");",De,".",Fe,"=",Ye,";")}}}),Object.keys(Ae.state).length===0&&we(De,".dirty=false;"),J(we)}function Xo(ae,J,Ae,Be){var ze=ae.shared,Pe=ae.current,Te=ze.current,De=ze.gl;fu(Object.keys(Ae)).forEach(function(ce){var we=Ae[ce];if(!(Be&&!Be(we))){var se=we.append(ae,J);if(Vt[ce]){var Fe=Vt[ce];Un(we)?se?J(De,".enable(",Fe,");"):J(De,".disable(",Fe,");"):J(ae.cond(se).then(De,".enable(",Fe,");").else(De,".disable(",Fe,");")),J(Te,".",ce,"=",se,";")}else if(T(se)){var Ye=Pe[ce];J(De,".",wt[ce],"(",se,");",se.map(function(d,m){return Ye+"["+m+"]="+d}).join(";"),";")}else J(De,".",wt[ce],"(",se,");",Te,".",ce,"=",se,";")}})}function yo(ae,J){Lt&&(ae.instancing=J.def(ae.shared.extensions,".angle_instanced_arrays"))}function Kn(ae,J,Ae,Be,ze){var Pe=ae.shared,Te=ae.stats,De=Pe.current,ce=Pe.timer,we=Ae.profile;function se(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Fe,Ye;function d(fe){Fe=J.def(),fe(Fe,"=",se(),";"),typeof ze=="string"?fe(Te,".count+=",ze,";"):fe(Te,".count++;"),kt&&(Be?(Ye=J.def(),fe(Ye,"=",ce,".getNumPendingQueries();")):fe(ce,".beginQuery(",Te,");"))}function m(fe){fe(Te,".cpuTime+=",se(),"-",Fe,";"),kt&&(Be?fe(ce,".pushScopeStats(",Ye,",",ce,".getNumPendingQueries(),",Te,");"):fe(ce,".endQuery();"))}function w(fe){var be=J.def(De,".profile");J(De,".profile=",fe,";"),J.exit(De,".profile=",be,";")}var R;if(we){if(Un(we)){we.enable?(d(J),m(J.exit),w("true")):w("false");return}R=we.append(ae,J),w(R)}else R=J.def(De,".profile");var G=ae.block();d(G),J("if(",R,"){",G,"}");var Z=ae.block();m(Z),J.exit("if(",R,"){",Z,"}")}function Qo(ae,J,Ae,Be,ze){var Pe=ae.shared;function Te(ce){switch(ce){case Fl:case zf:case Os:return 2;case Nc:case Ni:case jc:return 3;case Ki:case Rc:case Cc:return 4;default:return 1}}function De(ce,we,se){var Fe=Pe.gl,Ye=J.def(ce,".location"),d=J.def(Pe.attributes,"[",Ye,"]"),m=se.state,w=se.buffer,R=[se.x,se.y,se.z,se.w],G=["buffer","normalized","offset","stride"];function Z(){J("if(!",d,".buffer){",Fe,".enableVertexAttribArray(",Ye,");}");var be=se.type,Ie;if(se.size?Ie=J.def(se.size,"||",we):Ie=we,J("if(",d,".type!==",be,"||",d,".size!==",Ie,"||",G.map(function(_t){return d+"."+_t+"!=="+se[_t]}).join("||"),"){",Fe,".bindBuffer(",cu,",",w,".buffer);",Fe,".vertexAttribPointer(",[Ye,Ie,be,se.normalized,se.stride,se.offset],");",d,".type=",be,";",d,".size=",Ie,";",G.map(function(_t){return d+"."+_t+"="+se[_t]+";"}).join(""),"}"),Lt){var ht=se.divisor;J("if(",d,".divisor!==",ht,"){",ae.instancing,".vertexAttribDivisorANGLE(",[Ye,ht],");",d,".divisor=",ht,";}")}}function fe(){J("if(",d,".buffer){",Fe,".disableVertexAttribArray(",Ye,");",d,".buffer=null;","}if(",ku.map(function(be,Ie){return d+"."+be+"!=="+R[Ie]}).join("||"),"){",Fe,".vertexAttrib4f(",Ye,",",R,");",ku.map(function(be,Ie){return d+"."+be+"="+R[Ie]+";"}).join(""),"}")}m===Dl?Z():m===Cf?fe():(J("if(",m,"===",Dl,"){"),Z(),J("}else{"),fe(),J("}"))}Be.forEach(function(ce){var we=ce.name,se=Ae.attributes[we],Fe;if(se){if(!ze(se))return;Fe=se.append(ae,J)}else{if(!ze(Zi))return;var Ye=ae.scopeAttrib(we);ne.optional(function(){ae.assert(J,Ye+".state","missing attribute "+we)}),Fe={},Object.keys(new We).forEach(function(d){Fe[d]=J.def(Ye,".",d)})}De(ae.link(ce),Te(ce.info.type),Fe)})}function Ar(ae,J,Ae,Be,ze){for(var Pe=ae.shared,Te=Pe.gl,De,ce=0;ce<Be.length;++ce){var we=Be[ce],se=we.name,Fe=we.info.type,Ye=Ae.uniforms[se],d=ae.link(we),m=d+".location",w;if(Ye){if(!ze(Ye))continue;if(Un(Ye)){var R=Ye.value;if(ne.command(R!==null&&typeof R<"u",'missing uniform "'+se+'"',ae.commandStr),Fe===ju||Fe===Wo){ne.command(typeof R=="function"&&(Fe===ju&&(R._reglType==="texture2d"||R._reglType==="framebuffer")||Fe===Wo&&(R._reglType==="textureCube"||R._reglType==="framebufferCube")),"invalid texture for uniform "+se,ae.commandStr);var G=ae.link(R._texture||R.color[0]._texture);J(Te,".uniform1i(",m,",",G+".bind());"),J.exit(G,".unbind();")}else if(Fe===xs||Fe===Ss||Fe===Bl){ne.optional(function(){ne.command(T(R),"invalid matrix for uniform "+se,ae.commandStr),ne.command(Fe===xs&&R.length===4||Fe===Ss&&R.length===9||Fe===Bl&&R.length===16,"invalid length for matrix uniform "+se,ae.commandStr)});var Z=ae.global.def("new Float32Array(["+Array.prototype.slice.call(R)+"])"),fe=2;Fe===Ss?fe=3:Fe===Bl&&(fe=4),J(Te,".uniformMatrix",fe,"fv(",m,",false,",Z,");")}else{switch(Fe){case ki:ne.commandType(R,"number","uniform "+se,ae.commandStr),De="1f";break;case Fl:ne.command(T(R)&&R.length===2,"uniform "+se,ae.commandStr),De="2f";break;case Nc:ne.command(T(R)&&R.length===3,"uniform "+se,ae.commandStr),De="3f";break;case Ki:ne.command(T(R)&&R.length===4,"uniform "+se,ae.commandStr),De="4f";break;case $l:ne.commandType(R,"boolean","uniform "+se,ae.commandStr),De="1i";break;case Oa:ne.commandType(R,"number","uniform "+se,ae.commandStr),De="1i";break;case Os:ne.command(T(R)&&R.length===2,"uniform "+se,ae.commandStr),De="2i";break;case zf:ne.command(T(R)&&R.length===2,"uniform "+se,ae.commandStr),De="2i";break;case jc:ne.command(T(R)&&R.length===3,"uniform "+se,ae.commandStr),De="3i";break;case Ni:ne.command(T(R)&&R.length===3,"uniform "+se,ae.commandStr),De="3i";break;case Cc:ne.command(T(R)&&R.length===4,"uniform "+se,ae.commandStr),De="4i";break;case Rc:ne.command(T(R)&&R.length===4,"uniform "+se,ae.commandStr),De="4i";break}J(Te,".uniform",De,"(",m,",",T(R)?Array.prototype.slice.call(R):R,");")}continue}else w=Ye.append(ae,J)}else{if(!ze(Zi))continue;w=J.def(Pe.uniforms,"[",oe.id(se),"]")}Fe===ju?(ne(!Array.isArray(w),"must specify a scalar prop for textures"),J("if(",w,"&&",w,'._reglType==="framebuffer"){',w,"=",w,".color[0];","}")):Fe===Wo&&(ne(!Array.isArray(w),"must specify a scalar prop for cube maps"),J("if(",w,"&&",w,'._reglType==="framebufferCube"){',w,"=",w,".color[0];","}")),ne.optional(function(){function Ut(Mt,Jt){ae.assert(J,Mt,'bad data or missing for uniform "'+se+'".  '+Jt)}function Sn(Mt){ne(!Array.isArray(w),"must not specify an array type for uniform"),Ut("typeof "+w+'==="'+Mt+'"',"invalid type, expected "+Mt)}function wn(Mt,Jt){Array.isArray(w)?ne(w.length===Mt,"must have length "+Mt):Ut(Pe.isArrayLike+"("+w+")&&"+w+".length==="+Mt,"invalid vector, should have length "+Mt,ae.commandStr)}function Xn(Mt){ne(!Array.isArray(w),"must not specify a value type"),Ut("typeof "+w+'==="function"&&'+w+'._reglType==="texture'+(Mt===Wf?"2d":"Cube")+'"',"invalid texture type",ae.commandStr)}switch(Fe){case Oa:Sn("number");break;case zf:wn(2);break;case Ni:wn(3);break;case Rc:wn(4);break;case ki:Sn("number");break;case Fl:wn(2);break;case Nc:wn(3);break;case Ki:wn(4);break;case $l:Sn("boolean");break;case Os:wn(2);break;case jc:wn(3);break;case Cc:wn(4);break;case xs:wn(4);break;case Ss:wn(9);break;case Bl:wn(16);break;case ju:Xn(Wf);break;case Wo:Xn(Lp);break}});var be=1;switch(Fe){case ju:case Wo:var Ie=J.def(w,"._texture");J(Te,".uniform1i(",m,",",Ie,".bind());"),J.exit(Ie,".unbind();");continue;case Oa:case $l:De="1i";break;case zf:case Os:De="2i",be=2;break;case Ni:case jc:De="3i",be=3;break;case Rc:case Cc:De="4i",be=4;break;case ki:De="1f";break;case Fl:De="2f",be=2;break;case Nc:De="3f",be=3;break;case Ki:De="4f",be=4;break;case xs:De="Matrix2fv";break;case Ss:De="Matrix3fv";break;case Bl:De="Matrix4fv";break}if(J(Te,".uniform",De,"(",m,","),De.charAt(0)==="M"){var ht=Math.pow(Fe-xs+2,2),_t=ae.global.def("new Float32Array(",ht,")");Array.isArray(w)?J("false,(",Tr(ht,function(Ut){return _t+"["+Ut+"]="+w[Ut]}),",",_t,")"):J("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",Tr(ht,function(Ut){return _t+"["+Ut+"]="+w+"["+Ut+"]"}),",",_t,")")}else be>1?J(Tr(be,function(Ut){return Array.isArray(w)?w[Ut]:w+"["+Ut+"]"})):(ne(!Array.isArray(w),"uniform value must not be an array"),J(w));J(");")}}function Nn(ae,J,Ae,Be){var ze=ae.shared,Pe=ze.gl,Te=ze.draw,De=Be.draw;function ce(){var Ie=De.elements,ht,_t=J;return Ie?((Ie.contextDep&&Be.contextDynamic||Ie.propDep)&&(_t=Ae),ht=Ie.append(ae,_t)):ht=_t.def(Te,".",No),ht&&_t("if("+ht+")"+Pe+".bindBuffer("+$d+","+ht+".buffer.buffer);"),ht}function we(){var Ie=De.count,ht,_t=J;return Ie?((Ie.contextDep&&Be.contextDynamic||Ie.propDep)&&(_t=Ae),ht=Ie.append(ae,_t),ne.optional(function(){Ie.MISSING&&ae.assert(J,"false","missing vertex count"),Ie.DYNAMIC&&ae.assert(_t,ht+">=0","missing vertex count")})):(ht=_t.def(Te,".",Ba),ne.optional(function(){ae.assert(_t,ht+">=0","missing vertex count")})),ht}var se=ce();function Fe(Ie){var ht=De[Ie];return ht?ht.contextDep&&Be.contextDynamic||ht.propDep?ht.append(ae,Ae):ht.append(ae,J):J.def(Te,".",Ie)}var Ye=Fe(Ru),d=Fe(Ua),m=we();if(typeof m=="number"){if(m===0)return}else Ae("if(",m,"){"),Ae.exit("}");var w,R;Lt&&(w=Fe(al),R=ae.instancing);var G=se+".type",Z=De.elements&&Un(De.elements);function fe(){function Ie(){Ae(R,".drawElementsInstancedANGLE(",[Ye,m,G,d+"<<(("+G+"-"+rl+")>>1)",w],");")}function ht(){Ae(R,".drawArraysInstancedANGLE(",[Ye,d,m,w],");")}se?Z?Ie():(Ae("if(",se,"){"),Ie(),Ae("}else{"),ht(),Ae("}")):ht()}function be(){function Ie(){Ae(Pe+".drawElements("+[Ye,m,G,d+"<<(("+G+"-"+rl+")>>1)"]+");")}function ht(){Ae(Pe+".drawArrays("+[Ye,d,m]+");")}se?Z?Ie():(Ae("if(",se,"){"),Ie(),Ae("}else{"),ht(),Ae("}")):ht()}Lt&&(typeof w!="number"||w>=0)?typeof w=="string"?(Ae("if(",w,">0){"),fe(),Ae("}else if(",w,"<0){"),be(),Ae("}")):fe():be()}function sr(ae,J,Ae,Be,ze){var Pe=Rn(),Te=Pe.proc("body",ze);return ne.optional(function(){Pe.commandStr=J.commandStr,Pe.command=Pe.link(J.commandStr)}),Lt&&(Pe.instancing=Te.def(Pe.shared.extensions,".angle_instanced_arrays")),ae(Pe,Te,Ae,Be),Pe.compile().body}function Wn(ae,J,Ae,Be){yo(ae,J),Ae.useVAO?Ae.drawVAO?J(ae.shared.vao,".setVAO(",Ae.drawVAO.append(ae,J),");"):J(ae.shared.vao,".setVAO(",ae.shared.vao,".targetVAO);"):(J(ae.shared.vao,".setVAO(null);"),Qo(ae,J,Ae,Be.attributes,function(){return!0})),Ar(ae,J,Ae,Be.uniforms,function(){return!0}),Nn(ae,J,J,Ae)}function no(ae,J){var Ae=ae.proc("draw",1);yo(ae,Ae),jo(ae,Ae,J.context),vo(ae,Ae,J.framebuffer),so(ae,Ae,J),Xo(ae,Ae,J.state),Kn(ae,Ae,J,!1,!0);var Be=J.shader.progVar.append(ae,Ae);if(Ae(ae.shared.gl,".useProgram(",Be,".program);"),J.shader.program)Wn(ae,Ae,J,J.shader.program);else{Ae(ae.shared.vao,".setVAO(null);");var ze=ae.global.def("{}"),Pe=Ae.def(Be,".id"),Te=Ae.def(ze,"[",Pe,"]");Ae(ae.cond(Te).then(Te,".call(this,a0);").else(Te,"=",ze,"[",Pe,"]=",ae.link(function(De){return sr(Wn,ae,J,De,1)}),"(",Be,");",Te,".call(this,a0);"))}Object.keys(J.state).length>0&&Ae(ae.shared.current,".dirty=true;")}function Aa(ae,J,Ae,Be){ae.batchId="a1",yo(ae,J);function ze(){return!0}Qo(ae,J,Ae,Be.attributes,ze),Ar(ae,J,Ae,Be.uniforms,ze),Nn(ae,J,J,Ae)}function Iu(ae,J,Ae,Be){yo(ae,J);var ze=Ae.contextDep,Pe=J.def(),Te="a0",De="a1",ce=J.def();ae.shared.props=ce,ae.batchId=Pe;var we=ae.scope(),se=ae.scope();J(we.entry,"for(",Pe,"=0;",Pe,"<",De,";++",Pe,"){",ce,"=",Te,"[",Pe,"];",se,"}",we.exit);function Fe(G){return G.contextDep&&ze||G.propDep}function Ye(G){return!Fe(G)}if(Ae.needsContext&&jo(ae,se,Ae.context),Ae.needsFramebuffer&&vo(ae,se,Ae.framebuffer),Xo(ae,se,Ae.state,Fe),Ae.profile&&Fe(Ae.profile)&&Kn(ae,se,Ae,!1,!0),Be)Ae.useVAO?Ae.drawVAO?Fe(Ae.drawVAO)?se(ae.shared.vao,".setVAO(",Ae.drawVAO.append(ae,se),");"):we(ae.shared.vao,".setVAO(",Ae.drawVAO.append(ae,we),");"):we(ae.shared.vao,".setVAO(",ae.shared.vao,".targetVAO);"):(we(ae.shared.vao,".setVAO(null);"),Qo(ae,we,Ae,Be.attributes,Ye),Qo(ae,se,Ae,Be.attributes,Fe)),Ar(ae,we,Ae,Be.uniforms,Ye),Ar(ae,se,Ae,Be.uniforms,Fe),Nn(ae,we,se,Ae);else{var d=ae.global.def("{}"),m=Ae.shader.progVar.append(ae,se),w=se.def(m,".id"),R=se.def(d,"[",w,"]");se(ae.shared.gl,".useProgram(",m,".program);","if(!",R,"){",R,"=",d,"[",w,"]=",ae.link(function(G){return sr(Aa,ae,Ae,G,2)}),"(",m,");}",R,".call(this,a0[",Pe,"],",Pe,");")}}function ve(ae,J){var Ae=ae.proc("batch",2);ae.batchId="0",yo(ae,Ae);var Be=!1,ze=!0;Object.keys(J.context).forEach(function(d){Be=Be||J.context[d].propDep}),Be||(jo(ae,Ae,J.context),ze=!1);var Pe=J.framebuffer,Te=!1;Pe?(Pe.propDep?Be=Te=!0:Pe.contextDep&&Be&&(Te=!0),Te||vo(ae,Ae,Pe)):vo(ae,Ae,null),J.state.viewport&&J.state.viewport.propDep&&(Be=!0);function De(d){return d.contextDep&&Be||d.propDep}so(ae,Ae,J),Xo(ae,Ae,J.state,function(d){return!De(d)}),(!J.profile||!De(J.profile))&&Kn(ae,Ae,J,!1,"a1"),J.contextDep=Be,J.needsContext=ze,J.needsFramebuffer=Te;var ce=J.shader.progVar;if(ce.contextDep&&Be||ce.propDep)Iu(ae,Ae,J,null);else{var we=ce.append(ae,Ae);if(Ae(ae.shared.gl,".useProgram(",we,".program);"),J.shader.program)Iu(ae,Ae,J,J.shader.program);else{Ae(ae.shared.vao,".setVAO(null);");var se=ae.global.def("{}"),Fe=Ae.def(we,".id"),Ye=Ae.def(se,"[",Fe,"]");Ae(ae.cond(Ye).then(Ye,".call(this,a0,a1);").else(Ye,"=",se,"[",Fe,"]=",ae.link(function(d){return sr(Iu,ae,J,d,2)}),"(",we,");",Ye,".call(this,a0,a1);"))}}Object.keys(J.state).length>0&&Ae(ae.shared.current,".dirty=true;")}function nt(ae,J){var Ae=ae.proc("scope",3);ae.batchId="a2";var Be=ae.shared,ze=Be.current;jo(ae,Ae,J.context),J.framebuffer&&J.framebuffer.append(ae,Ae),fu(Object.keys(J.state)).forEach(function(Te){var De=J.state[Te],ce=De.append(ae,Ae);T(ce)?ce.forEach(function(we,se){Ae.set(ae.next[Te],"["+se+"]",we)}):Ae.set(Be.next,"."+Te,ce)}),Kn(ae,Ae,J,!0,!0),[No,Ua,Ba,al,Ru].forEach(function(Te){var De=J.draw[Te];De&&Ae.set(Be.draw,"."+Te,""+De.append(ae,Ae))}),Object.keys(J.uniforms).forEach(function(Te){var De=J.uniforms[Te].append(ae,Ae);Array.isArray(De)&&(De="["+De.join()+"]"),Ae.set(Be.uniforms,"["+oe.id(Te)+"]",De)}),Object.keys(J.attributes).forEach(function(Te){var De=J.attributes[Te].append(ae,Ae),ce=ae.scopeAttrib(Te);Object.keys(new We).forEach(function(we){Ae.set(ce,"."+we,De[we])})}),J.scopeVAO&&Ae.set(Be.vao,".targetVAO",J.scopeVAO.append(ae,Ae));function Pe(Te){var De=J.shader[Te];De&&Ae.set(Be.shader,"."+Te,De.append(ae,Ae))}Pe(Mc),Pe(Jr),Object.keys(J.state).length>0&&(Ae(ze,".dirty=true;"),Ae.exit(ze,".dirty=true;")),Ae("a1(",ae.shared.context,",a0,",ae.batchId,");")}function qe(ae){if(!(typeof ae!="object"||T(ae))){for(var J=Object.keys(ae),Ae=0;Ae<J.length;++Ae)if(qt.isDynamic(ae[J[Ae]]))return!0;return!1}}function en(ae,J,Ae){var Be=J.static[Ae];if(!Be||!qe(Be))return;var ze=ae.global,Pe=Object.keys(Be),Te=!1,De=!1,ce=!1,we=ae.global.def("{}");Pe.forEach(function(Fe){var Ye=Be[Fe];if(qt.isDynamic(Ye)){typeof Ye=="function"&&(Ye=Be[Fe]=qt.unbox(Ye));var d=bi(Ye,null);Te=Te||d.thisDep,ce=ce||d.propDep,De=De||d.contextDep}else{switch(ze(we,".",Fe,"="),typeof Ye){case"number":ze(Ye);break;case"string":ze('"',Ye,'"');break;case"object":Array.isArray(Ye)&&ze("[",Ye.join(),"]");break;default:ze(ae.link(Ye));break}ze(";")}});function se(Fe,Ye){Pe.forEach(function(d){var m=Be[d];if(qt.isDynamic(m)){var w=Fe.invoke(Ye,m);Ye(we,".",d,"=",w,";")}})}J.dynamic[Ae]=new qt.DynamicVariable(Ec,{thisDep:Te,contextDep:De,propDep:ce,ref:we,append:se}),delete J.static[Ae]}function pr(ae,J,Ae,Be,ze){var Pe=Rn();Pe.stats=Pe.link(ze),Object.keys(J.static).forEach(function(De){en(Pe,J,De)}),Fd.forEach(function(De){en(Pe,ae,De)});var Te=Eo(ae,J,Ae,Be,Pe);return no(Pe,Te),nt(Pe,Te),ve(Pe,Te),a(Pe.compile(),{destroy:function(){Te.shader.program.destroy()}})}return{next:Zt,current:xt,procs:function(){var ae=Rn(),J=ae.proc("poll"),Ae=ae.proc("refresh"),Be=ae.block();J(Be),Ae(Be);var ze=ae.shared,Pe=ze.gl,Te=ze.next,De=ze.current;Be(De,".dirty=false;"),vo(ae,J),vo(ae,Ae,null,!0);var ce;Lt&&(ce=ae.link(Lt)),_e.oes_vertex_array_object&&Ae(ae.link(_e.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var we=0;we<tt.maxAttributes;++we){var se=Ae.def(ze.attributes,"[",we,"]"),Fe=ae.cond(se,".buffer");Fe.then(Pe,".enableVertexAttribArray(",we,");",Pe,".bindBuffer(",cu,",",se,".buffer.buffer);",Pe,".vertexAttribPointer(",we,",",se,".size,",se,".type,",se,".normalized,",se,".stride,",se,".offset);").else(Pe,".disableVertexAttribArray(",we,");",Pe,".vertexAttrib4f(",we,",",se,".x,",se,".y,",se,".z,",se,".w);",se,".buffer=null;"),Ae(Fe),Lt&&Ae(ce,".vertexAttribDivisorANGLE(",we,",",se,".divisor);")}return Ae(ae.shared.vao,".currentVAO=null;",ae.shared.vao,".setVAO(",ae.shared.vao,".targetVAO);"),Object.keys(Vt).forEach(function(Ye){var d=Vt[Ye],m=Be.def(Te,".",Ye),w=ae.block();w("if(",m,"){",Pe,".enable(",d,")}else{",Pe,".disable(",d,")}",De,".",Ye,"=",m,";"),Ae(w),J("if(",m,"!==",De,".",Ye,"){",w,"}")}),Object.keys(wt).forEach(function(Ye){var d=wt[Ye],m=xt[Ye],w,R,G=ae.block();if(G(Pe,".",d,"("),T(m)){var Z=m.length;w=ae.global.def(Te,".",Ye),R=ae.global.def(De,".",Ye),G(Tr(Z,function(fe){return w+"["+fe+"]"}),");",Tr(Z,function(fe){return R+"["+fe+"]="+w+"["+fe+"];"}).join("")),J("if(",Tr(Z,function(fe){return w+"["+fe+"]!=="+R+"["+fe+"]"}).join("||"),"){",G,"}")}else w=Be.def(Te,".",Ye),R=Be.def(De,".",Ye),G(w,");",De,".",Ye,"=",w,";"),J("if(",w,"!==",R,"){",G,"}");Ae(G)}),ae.compile()}(),compile:pr}}function Xp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var cl=34918,vr=34919,Yp=35007,Ji=function(L,oe){if(!oe.ext_disjoint_timer_query)return null;var _e=[];function tt(){return _e.pop()||oe.ext_disjoint_timer_query.createQueryEXT()}function pt(Lt){_e.push(Lt)}var Ze=[];function st(Lt){var Kt=tt();oe.ext_disjoint_timer_query.beginQueryEXT(Yp,Kt),Ze.push(Kt),kt(Ze.length-1,Ze.length,Lt)}function Pt(){oe.ext_disjoint_timer_query.endQueryEXT(Yp)}function Ct(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Rt=[];function ct(){return Rt.pop()||new Ct}function Gt(Lt){Rt.push(Lt)}var Bt=[];function kt(Lt,Kt,xt){var Zt=ct();Zt.startQueryIndex=Lt,Zt.endQueryIndex=Kt,Zt.sum=0,Zt.stats=xt,Bt.push(Zt)}var bt=[],We=[];function ut(){var Lt,Kt,xt=Ze.length;if(xt!==0){We.length=Math.max(We.length,xt+1),bt.length=Math.max(bt.length,xt+1),bt[0]=0,We[0]=0;var Zt=0;for(Lt=0,Kt=0;Kt<Ze.length;++Kt){var At=Ze[Kt];oe.ext_disjoint_timer_query.getQueryObjectEXT(At,vr)?(Zt+=oe.ext_disjoint_timer_query.getQueryObjectEXT(At,cl),pt(At)):Ze[Lt++]=At,bt[Kt+1]=Zt,We[Kt+1]=Lt}for(Ze.length=Lt,Lt=0,Kt=0;Kt<Bt.length;++Kt){var Vt=Bt[Kt],wt=Vt.startQueryIndex,Xt=Vt.endQueryIndex;Vt.sum+=bt[Xt]-bt[wt];var Tn=We[wt],Vn=We[Xt];Vn===Tn?(Vt.stats.gpuTime+=Vt.sum/1e6,Gt(Vt)):(Vt.startQueryIndex=Tn,Vt.endQueryIndex=Vn,Bt[Lt++]=Vt)}Bt.length=Lt}}return{beginQuery:st,endQuery:Pt,pushScopeStats:kt,update:ut,getNumPendingQueries:function(){return Ze.length},clear:function(){_e.push.apply(_e,Ze);for(var Lt=0;Lt<_e.length;Lt++)oe.ext_disjoint_timer_query.deleteQueryEXT(_e[Lt]);Ze.length=0,_e.length=0},restore:function(){Ze.length=0,_e.length=0}}},Ho=16384,Sa=256,cv=1024,Lc=34962,du="webglcontextlost",Hd="webglcontextrestored",Du=1,Yr=2,bo=3;function fi(L,oe){for(var _e=0;_e<L.length;++_e)if(L[_e]===oe)return _e;return-1}function Fc(L){var oe=rr(L);if(!oe)return null;var _e=oe.gl,tt=_e.getContextAttributes(),pt=_e.isContextLost(),Ze=zr(_e,oe);if(!Ze)return null;var st=qo(),Pt=Xp(),Ct=Ze.extensions,Rt=Ji(_e,Ct),ct=mr(),Gt=_e.drawingBufferWidth,Bt=_e.drawingBufferHeight,kt={tick:0,time:0,viewportWidth:Gt,viewportHeight:Bt,framebufferWidth:Gt,framebufferHeight:Bt,drawingBufferWidth:Gt,drawingBufferHeight:Bt,pixelRatio:oe.pixelRatio},bt={},We={elements:null,primitive:4,count:-1,offset:0,instances:-1},ut=nc(_e,Ct),Lt=oa(_e,Pt,oe,xt),Kt=Rf(_e,Ct,ut,Pt,Lt);function xt(Nn){return Kt.destroyBuffer(Nn)}var Zt=fn(_e,Ct,Lt,Pt),At=Nd(_e,st,Pt,oe),Vt=_r(_e,Ct,ut,function(){Tn.procs.poll()},kt,Pt,oe),wt=ds(_e,Ct,ut,Pt,oe),Xt=_c(_e,Ct,ut,Vt,wt,Pt),Tn=sv(_e,st,Ct,ut,Lt,Zt,Vt,Xt,bt,Kt,At,We,kt,Rt,oe),Vn=ho(_e,Xt,Tn.procs.poll,kt,tt,Ct,ut),Dt=Tn.next,Tt=_e.canvas,Et=[],Rn=[],er=[],ln=[oe.onDestroy],Jn=null;function Gn(){if(Et.length===0){Rt&&Rt.update(),Jn=null;return}Jn=Pn.next(Gn),Xo();for(var Nn=Et.length-1;Nn>=0;--Nn){var sr=Et[Nn];sr&&sr(kt,null,0)}_e.flush(),Rt&&Rt.update()}function tr(){!Jn&&Et.length>0&&(Jn=Pn.next(Gn))}function yr(){Jn&&(Pn.cancel(Gn),Jn=null)}function wo(Nn){Nn.preventDefault(),pt=!0,yr(),Rn.forEach(function(sr){sr()})}function Ro(Nn){_e.getError(),pt=!1,Ze.restore(),At.restore(),Lt.restore(),Vt.restore(),wt.restore(),Xt.restore(),Kt.restore(),Rt&&Rt.restore(),Tn.procs.refresh(),tr(),er.forEach(function(sr){sr()})}Tt&&(Tt.addEventListener(du,wo,!1),Tt.addEventListener(Hd,Ro,!1));function lr(){Et.length=0,yr(),Tt&&(Tt.removeEventListener(du,wo),Tt.removeEventListener(Hd,Ro)),At.clear(),Xt.clear(),wt.clear(),Vt.clear(),Zt.clear(),Lt.clear(),Kt.clear(),Rt&&Rt.clear(),ln.forEach(function(Nn){Nn()})}function Io(Nn){ne(!!Nn,"invalid args to regl({...})"),ne.type(Nn,"object","invalid args to regl({...})");function sr(ze){var Pe=a({},ze);delete Pe.uniforms,delete Pe.attributes,delete Pe.context,delete Pe.vao,"stencil"in Pe&&Pe.stencil.op&&(Pe.stencil.opBack=Pe.stencil.opFront=Pe.stencil.op,delete Pe.stencil.op);function Te(De){if(De in Pe){var ce=Pe[De];delete Pe[De],Object.keys(ce).forEach(function(we){Pe[De+"."+we]=ce[we]})}}return Te("blend"),Te("depth"),Te("cull"),Te("stencil"),Te("polygonOffset"),Te("scissor"),Te("sample"),"vao"in ze&&(Pe.vao=ze.vao),Pe}function Wn(ze,Pe){var Te={},De={};return Object.keys(ze).forEach(function(ce){var we=ze[ce];if(qt.isDynamic(we)){De[ce]=qt.unbox(we,ce);return}else if(Pe&&Array.isArray(we)){for(var se=0;se<we.length;++se)if(qt.isDynamic(we[se])){De[ce]=qt.unbox(we,ce);return}}Te[ce]=we}),{dynamic:De,static:Te}}var no=Wn(Nn.context||{},!0),Aa=Wn(Nn.uniforms||{},!0),Iu=Wn(Nn.attributes||{},!1),ve=Wn(sr(Nn),!1),nt={gpuTime:0,cpuTime:0,count:0},qe=Tn.compile(ve,Iu,Aa,no,nt),en=qe.draw,pr=qe.batch,ae=qe.scope,J=[];function Ae(ze){for(;J.length<ze;)J.push(null);return J}function Be(ze,Pe){var Te;if(pt&&ne.raise("context lost"),typeof ze=="function")return ae.call(this,null,ze,0);if(typeof Pe=="function")if(typeof ze=="number")for(Te=0;Te<ze;++Te)ae.call(this,null,Pe,Te);else if(Array.isArray(ze))for(Te=0;Te<ze.length;++Te)ae.call(this,ze[Te],Pe,Te);else return ae.call(this,ze,Pe,0);else if(typeof ze=="number"){if(ze>0)return pr.call(this,Ae(ze|0),ze|0)}else if(Array.isArray(ze)){if(ze.length)return pr.call(this,ze,ze.length)}else return en.call(this,ze)}return a(Be,{stats:nt,destroy:function(){qe.destroy()}})}var qr=Xt.setFBO=Io({framebuffer:qt.define.call(null,Du,"framebuffer")});function Eo(Nn,sr){var Wn=0;Tn.procs.poll();var no=sr.color;no&&(_e.clearColor(+no[0]||0,+no[1]||0,+no[2]||0,+no[3]||0),Wn|=Ho),"depth"in sr&&(_e.clearDepth(+sr.depth),Wn|=Sa),"stencil"in sr&&(_e.clearStencil(sr.stencil|0),Wn|=cv),ne(!!Wn,"called regl.clear with no buffer specified"),_e.clear(Wn)}function jo(Nn){if(ne(typeof Nn=="object"&&Nn,"regl.clear() takes an object as input"),"framebuffer"in Nn)if(Nn.framebuffer&&Nn.framebuffer_reglType==="framebufferCube")for(var sr=0;sr<6;++sr)qr(a({framebuffer:Nn.framebuffer.faces[sr]},Nn),Eo);else qr(Nn,Eo);else Eo(null,Nn)}function vo(Nn){ne.type(Nn,"function","regl.frame() callback must be a function"),Et.push(Nn);function sr(){var Wn=fi(Et,Nn);ne(Wn>=0,"cannot cancel a frame twice");function no(){var Aa=fi(Et,no);Et[Aa]=Et[Et.length-1],Et.length-=1,Et.length<=0&&yr()}Et[Wn]=no}return tr(),{cancel:sr}}function so(){var Nn=Dt.viewport,sr=Dt.scissor_box;Nn[0]=Nn[1]=sr[0]=sr[1]=0,kt.viewportWidth=kt.framebufferWidth=kt.drawingBufferWidth=Nn[2]=sr[2]=_e.drawingBufferWidth,kt.viewportHeight=kt.framebufferHeight=kt.drawingBufferHeight=Nn[3]=sr[3]=_e.drawingBufferHeight}function Xo(){kt.tick+=1,kt.time=Kn(),so(),Tn.procs.poll()}function yo(){Vt.refresh(),so(),Tn.procs.refresh(),Rt&&Rt.update()}function Kn(){return(mr()-ct)/1e3}yo();function Qo(Nn,sr){ne.type(sr,"function","listener callback must be a function");var Wn;switch(Nn){case"frame":return vo(sr);case"lost":Wn=Rn;break;case"restore":Wn=er;break;case"destroy":Wn=ln;break;default:ne.raise("invalid event, must be one of frame,lost,restore,destroy")}return Wn.push(sr),{cancel:function(){for(var no=0;no<Wn.length;++no)if(Wn[no]===sr){Wn[no]=Wn[Wn.length-1],Wn.pop();return}}}}var Ar=a(Io,{clear:jo,prop:qt.define.bind(null,Du),context:qt.define.bind(null,Yr),this:qt.define.bind(null,bo),draw:Io({}),buffer:function(Nn){return Lt.create(Nn,Lc,!1,!1)},elements:function(Nn){return Zt.create(Nn,!1)},texture:Vt.create2D,cube:Vt.createCube,renderbuffer:wt.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:Kt.createVAO,attributes:tt,frame:vo,on:Qo,limits:ut,hasExtension:function(Nn){return ut.extensions.indexOf(Nn.toLowerCase())>=0},read:Vn,destroy:lr,_gl:_e,_refresh:yo,poll:function(){Xo(),Rt&&Rt.update()},now:Kn,stats:Pt});return oe.onDone(null,Ar),Ar}return Fc})})(mJ);var qc,Mv,Kc,hl,Pv,nd,kv,pm,$s,rp,fa,Bs,Us,hm;qc={},an(qc,on.POINTS,"points"),an(qc,on.LINES,"lines"),an(qc,on.LINE_LOOP,"line loop"),an(qc,on.LINE_STRIP,"line strip"),an(qc,on.TRIANGLES,"triangles"),an(qc,on.TRIANGLE_FAN,"triangle fan"),an(qc,on.TRIANGLE_STRIP,"triangle strip");Mv={},an(Mv,on.STATIC_DRAW,"static"),an(Mv,on.DYNAMIC_DRAW,"dynamic"),an(Mv,on.STREAM_DRAW,"stream");Kc={},an(Kc,on.BYTE,"int8"),an(Kc,on.UNSIGNED_INT,"int16"),an(Kc,on.INT,"int32"),an(Kc,on.UNSIGNED_BYTE,"uint8"),an(Kc,on.UNSIGNED_SHORT,"uint16"),an(Kc,on.UNSIGNED_INT,"uint32"),an(Kc,on.FLOAT,"float");hl={},an(hl,on.ALPHA,"alpha"),an(hl,on.LUMINANCE,"luminance"),an(hl,on.LUMINANCE_ALPHA,"luminance alpha"),an(hl,on.RGB,"rgb"),an(hl,on.RGBA,"rgba"),an(hl,on.RGBA4,"rgba4"),an(hl,on.RGB5_A1,"rgb5 a1"),an(hl,on.RGB565,"rgb565"),an(hl,on.DEPTH_COMPONENT,"depth"),an(hl,on.DEPTH_STENCIL,"depth stencil");Pv={},an(Pv,on.DONT_CARE,"dont care"),an(Pv,on.NICEST,"nice"),an(Pv,on.FASTEST,"fast");nd={},an(nd,on.NEAREST,"nearest"),an(nd,on.LINEAR,"linear"),an(nd,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(nd,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(nd,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(nd,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");kv={},an(kv,on.REPEAT,"repeat"),an(kv,on.CLAMP_TO_EDGE,"clamp"),an(kv,on.MIRRORED_REPEAT,"mirror");pm={},an(pm,on.NONE,"none"),an(pm,on.BROWSER_DEFAULT_WEBGL,"browser");$s={},an($s,on.NEVER,"never"),an($s,on.ALWAYS,"always"),an($s,on.LESS,"less"),an($s,on.LEQUAL,"lequal"),an($s,on.GREATER,"greater"),an($s,on.GEQUAL,"gequal"),an($s,on.EQUAL,"equal"),an($s,on.NOTEQUAL,"notequal");rp={},an(rp,on.FUNC_ADD,"add"),an(rp,on.MIN_EXT,"min"),an(rp,on.MAX_EXT,"max"),an(rp,on.FUNC_SUBTRACT,"subtract"),an(rp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");fa={},an(fa,on.ZERO,"zero"),an(fa,on.ONE,"one"),an(fa,on.SRC_COLOR,"src color"),an(fa,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(fa,on.SRC_ALPHA,"src alpha"),an(fa,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(fa,on.DST_COLOR,"dst color"),an(fa,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(fa,on.DST_ALPHA,"dst alpha"),an(fa,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(fa,on.CONSTANT_COLOR,"constant color"),an(fa,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(fa,on.CONSTANT_ALPHA,"constant alpha"),an(fa,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(fa,on.SRC_ALPHA_SATURATE,"src alpha saturate");Bs={},an(Bs,on.NEVER,"never"),an(Bs,on.ALWAYS,"always"),an(Bs,on.LESS,"less"),an(Bs,on.LEQUAL,"lequal"),an(Bs,on.GREATER,"greater"),an(Bs,on.GEQUAL,"gequal"),an(Bs,on.EQUAL,"equal"),an(Bs,on.NOTEQUAL,"notequal");Us={},an(Us,on.ZERO,"zero"),an(Us,on.KEEP,"keep"),an(Us,on.REPLACE,"replace"),an(Us,on.INVERT,"invert"),an(Us,on.INCR,"increment"),an(Us,on.DECR,"decrement"),an(Us,on.INCR_WRAP,"increment wrap"),an(Us,on.DECR_WRAP,"decrement wrap");hm={},an(hm,on.FRONT,"front"),an(hm,on.BACK,"back");var gJ=Function.prototype,_J=gJ.toString;_J.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class jP{constructor(){ca(this,"lf");ca(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new MY(this.option).layout({nodes:n.map(_=>({id:_.id,size:{width:_.width,height:_.height},model:_})),edges:a.map(_=>({source:_.sourceNodeId,target:_.targetNodeId,model:_}))}).nodes)==null||g.forEach(_=>{const{model:E}=_;E.set_position({x:_.x,y:_.y})}),this.lf.fitView()}}ca(jP,"pluginName","dagre");const bJ=Dr({name:"WorkFlow"}),wJ=Dr({...bJ,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":w7,"./nodes/application-node/index.ts":M7,"./nodes/base-node/index.ts":x9,"./nodes/condition-node/index.ts":j9,"./nodes/document-extract-node/index.ts":F9,"./nodes/form-node/index.ts":oV,"./nodes/function-lib-node/index.ts":mV,"./nodes/function-node/index.ts":jV,"./nodes/image-generate/index.ts":zV,"./nodes/image-understand/index.ts":nW,"./nodes/mcp-node/index.ts":gW,"./nodes/question-node/index.ts":MW,"./nodes/reply-node/index.ts":DW,"./nodes/reranker-node/index.ts":KW,"./nodes/search-dataset-node/index.ts":uz,"./nodes/speech-to-text-node/index.ts":yz,"./nodes/start-node/index.ts":wz,"./nodes/text-to-speech-node/index.ts":kz,"./nodes/variable-assign-node/index.ts":Fz}),a=g7(),r=St(""),s=e,c={nodes:[...KC]};Oo({get:()=>s.data?s.data:c,set:M=>M});const v=St();$o(()=>{g()});const h=M=>{v.value.render(M)},g=M=>{const j=document.querySelector("#container");j&&(v.value=new iG({plugins:[jP],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:j}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),Hz(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(I=>n[I].default),Wz]),v.value.setDefaultEdgeType("app-edge"),v.value.render(M||{}),v.value.graphModel.eventCenter.on("delete_edge",I=>{I.forEach(N=>{v.value.deleteEdge(N)})}),v.value.graphModel.eventCenter.on("anchor:drop",I=>{I.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var I;(I=v.value)==null||I.fitView()},500))};return t({onmousedown:M=>{M.type&&v.value.dnd.startDrag({type:M.type,properties:{...M.properties}}),M.callback&&M.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(M=>{var j;return(j=M==null?void 0:M.validate)==null?void 0:j.call(M)})),getGraphData:()=>v.value.getGraphData(),addNode:M=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:j,virtualRectCenterPositionY:I}=v.value.graphModel.getVirtualRectSize(),N=v.value.graphModel.addNode({type:M.type,properties:M.properties,x:j,y:I-v.value.graphModel.height/2});N.isSelected=!0,N.isHovered=!0,v.value.toFront(N.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:h}),(M,j)=>(rt(),Dn(ni,null,[j[0]||(j[0]=ge("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(rt(),Yt(zz,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):fr("",!0),F(Hr(a),{"flow-id":r.value},null,8,["flow-id"])],64))}});const EJ={class:"workflow-publish-history border-l"},OJ={class:"border-b p-16-24"},xJ={class:"list-height pt-0"},SJ={class:"p-8 pt-0"},AJ={class:"flex-between"},TJ={style:{"max-width":"80%"}},MJ={class:"text-center"},PJ=Dr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=tT(),{params:{id:a}}=n,r=t,s=St(!1),c=St([]),v=St("");function h(M){v.value=M.id}function g(M){r("click",M)}function _(M){r("refreshVersion",M)}function E(M){M.writeStatus=!0}function O(M){M.writeStatus=!1}function S(M,j){if(M){const I={name:M};ha.putWorkFlowVersion(a,j.id,I,s).then(()=>{lp(nn("common.modifySuccess")),j.writeStatus=!1,k()})}else da(nn("views.applicationWorkflow.tip.nameMessage"))}function k(){ha.getWorkFlowVersion(a,s).then(M=>{c.value=M.data})}return $o(()=>{k()}),(M,j)=>{const I=ue("ReadWrite"),N=ue("el-tag"),B=ue("UserFilled"),q=ue("el-icon"),ee=ue("AppAvatar"),Y=ue("el-text"),Q=ue("MoreFilled"),z=ue("el-button"),D=ue("EditPen"),V=ue("el-dropdown-item"),X=ue("RefreshLeft"),H=ue("el-dropdown-menu"),de=ue("el-dropdown"),Ce=ue("common-list"),Me=ue("el-scrollbar"),He=Lh("loading");return rt(),Dn("div",EJ,[ge("h4",OJ,Ve(M.$t("views.applicationWorkflow.setting.releaseHistory")),1),ge("div",xJ,[F(Me,null,{default:U(()=>[ge("div",SJ,[hu((rt(),Yt(Ce,{data:c.value,class:"mt-8",onClick:g,onMouseenter:h,onMouseleave:j[1]||(j[1]=$e=>v.value="")},{default:U(({row:$e,index:ke})=>[ge("div",AJ,[ge("div",TJ,[ge("h5",{class:rd([ke===0?"primary":"","flex"])},[F(I,{onChange:le=>S(le,$e),data:$e.name||Hr(k0)($e.update_time),trigger:"manual",write:$e.writeStatus,onClose:le=>O($e)},null,8,["onChange","data","write","onClose"]),ke===0?(rt(),Yt(N,{key:0,class:"default-tag ml-4"},{default:U(()=>[It(Ve(M.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):fr("",!0)],2),F(Y,{type:"info",class:"color-secondary flex mt-8"},{default:U(()=>[F(ee,{size:20,class:"avatar-grey mr-4"},{default:U(()=>[F(q,null,{default:U(()=>[F(B)]),_:1})]),_:1}),It(" "+Ve($e.publish_user_name),1)]),_:2},1024)]),hu(ge("div",{onClick:j[0]||(j[0]=xn(()=>{},["stop"]))},[F(de,{trigger:"click",teleported:!1},{dropdown:U(()=>[F(H,null,{default:U(()=>[F(V,{onClick:xn(le=>E($e),["stop"])},{default:U(()=>[F(q,null,{default:U(()=>[F(D)]),_:1}),It(" "+Ve(M.$t("common.edit")),1)]),_:2},1032,["onClick"]),F(V,{onClick:le=>_($e)},{default:U(()=>[F(q,null,{default:U(()=>[F(X)]),_:1}),It(" "+Ve(M.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:U(()=>[F(z,{text:""},{default:U(()=>[F(q,null,{default:U(()=>[F(Q)]),_:1})]),_:1})]),_:2},1024)],512),[[Ih,v.value===$e.id]])])]),empty:U(()=>[ge("div",MJ,[F(Y,{type:"info"},{default:U(()=>[It(Ve(M.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[He,s.value]])])]),_:1})])])}}});const kJ=ty(PJ,[["__scopeId","data-v-ff153f59"]]),kA=[ti.AiChat,ti.Reply,ti.FunctionLib,ti.FunctionLibCustom,ti.ImageUnderstandNode,ti.Application,ti.SpeechToTextNode,ti.TextToSpeechNode,ti.ImageGenerateNode];class NA{constructor(t){ca(this,"nodes");ca(this,"edges");ca(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===ti.Start);if(t.length==0)throw nn("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw nn("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===ti.Base);if(t.length==0)throw nn("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw nn("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===ti.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===ti.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==ti.Start&&n.id!==ti.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${nn("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(a.length==0&&!kA.includes(t.type))throw nn("views.applicationWorkflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==ti.Base&&t.type!==ti.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${nn("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${nn("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===ti.Condition){const n=t.properties.node_data.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${nn("views.applicationWorkflow.validate.needConnect1")}${a.type}${nn("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(a=>a.sourceNodeId==t.id).length==0&&!kA.includes(t.type))throw`${t.properties.stepName} ${nn("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${nn("views.applicationWorkflow.validate.nodeUnavailable")}`}}const NJ={class:"application-workflow"},RJ={class:"header border-b flex-between p-12-24"},jJ={class:"flex align-center"},CJ={key:0},DJ={key:0},IJ={key:1},LJ={class:"ml-4"},FJ={class:"flex-between"},$J={class:"flex align-center"},BJ={class:"mr-12 ml-24 flex"},UJ=["src"],GJ={class:"mr-16"},VJ={class:"scrollbar-height"},tQ=Dr({__name:"index",setup(e){const{user:t,application:n}=nf(),a=ZC(),r=tT(),s=Oo(()=>t.isDefaultTheme()),{params:{id:c}}=r;let v;const h=St(),g=St(),_=St(!1),E=St(null),O=St(!1),S=St(!1),k=St(!1),M=St(""),j=St(!1),I=St(!1),N=St(!1),B=St({}),q=St(null);function ee(){JSON.stringify(q.value)!==JSON.stringify(ke())?f1(nn("common.tip"),nn("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:nn("views.applicationWorkflow.setting.exitSave"),cancelButtonText:nn("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{he(!0,!0)}).catch(Ge=>{Ge==="cancel"&&a.push({path:`/application/${c}/WORK_FLOW/overview`})}):a.push({path:`/application/${c}/WORK_FLOW/overview`})}function Y(){N.value||(I.value=!1,N.value=!1)}function Q(Ge){Ge&&D(Ge),a0(`APPLICATION:MANAGE:${c}`,"AND")&&j.value&&Se(),I.value=!1,N.value=!1}function z(Ge){N.value=!0,B.value=Ge,D(Ge),Ke()}function D(Ge){var et;Ge.work_flow.nodes.map(gt=>{gt.properties.noRender=!0}),E.value.work_flow=Ge.work_flow,M.value=Ge==null?void 0:Ge.update_time,(et=h.value)==null||et.clearGraphData(),P0(()=>{var gt;(gt=h.value)==null||gt.render(Ge.work_flow)})}function V(){le(),a0(`APPLICATION:MANAGE:${c}`,"AND")&&j.value&&Se(),I.value=!1,N.value=!1}function X(){I.value=!0}function H(Ge){Ge?Se():Ke(),localStorage.setItem("workflowAutoSave",Ge.toString())}function de(Ge){O.value=!1}function Ce(Ge){O.value=!1}function Me(){O.value=!1}async function He(){var Ge;(Ge=h.value)==null||Ge.validate().then(async()=>{const et={work_flow:ke()};await n.asyncPutApplication(c,et);const gt=new NA(et.work_flow);try{gt.is_valid()}catch(dt){da(dt.toString());return}ha.putPublishApplication(c,et,_).then(()=>{lp(nn("views.applicationWorkflow.tip.publicSuccess"))})}).catch(et=>{var zt,je,me,xe;const gt=et.node,dt=et.errMessage;if(typeof dt=="string")da(((zt=et.node.properties)==null?void 0:zt.stepName)+` ${nn("views.applicationWorkflow.node").toLowerCase()} `+dt.toLowerCase());else{const vt=Object.keys(dt);da(((je=gt.properties)==null?void 0:je.stepName)+` ${nn("views.applicationWorkflow.node").toLowerCase()} `+((xe=(me=dt[vt[0]])==null?void 0:me[0])==null?void 0:xe.message.toLowerCase()))}})}const $e=()=>{var Ge;(Ge=h.value)==null||Ge.validate().then(()=>{var dt;const et=ke(),gt=new NA(et);try{gt.is_valid(),E.value={...E.value,type:"WORK_FLOW",...(dt=gt.get_base_node())==null?void 0:dt.properties.node_data,work_flow:ke()},S.value=!0}catch(zt){da(zt.toString())}}).catch(et=>{var zt,je,me,xe;const gt=et.node,dt=et.errMessage;if(typeof dt=="string")da(((zt=et.node.properties)==null?void 0:zt.stepName)+` ${nn("views.applicationWorkflow.node")}，`+dt);else{const vt=Object.keys(dt);da(((je=gt.properties)==null?void 0:je.stepName)+` ${nn("views.applicationWorkflow.node")}，`+((xe=(me=dt[vt[0]])==null?void 0:me[0])==null?void 0:xe.message))}})};function ke(){var Ge;return(Ge=h.value)==null?void 0:Ge.getGraphData()}function le(){n.asyncGetApplicationDetail(c).then(Ge=>{var et,gt,dt;(et=Ge.data)==null||et.work_flow.nodes.map(zt=>{zt.properties.noRender=!0}),E.value=Ge.data,E.value.stt_model_id=Ge.data.stt_model,E.value.tts_model_id=Ge.data.tts_model,E.value.tts_type=Ge.data.tts_type,M.value=(gt=Ge.data)==null?void 0:gt.update_time,n.asyncGetAccessToken(c,_).then(zt=>{E.value={...E.value,...zt.data}}),(dt=h.value)==null||dt.clearGraphData(),P0(()=>{var zt;(zt=h.value)==null||zt.render(E.value.work_flow),q.value=ke()})})}function he(Ge,et){const gt={work_flow:ke()};_.value=et||!1,n.asyncPutApplication(c,gt).then(dt=>{M.value=new Date,Ge&&(q.value=ke(),lp(nn("common.saveSuccess")),et&&a.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{_.value=!1})}const Se=()=>{v=setInterval(()=>{he()},6e4)},Ke=()=>{v&&clearInterval(v)};return $o(()=>{le();const Ge=localStorage.getItem("workflowAutoSave");j.value=Ge==="true",a0(`APPLICATION:MANAGE:${c}`,"AND")&&j.value&&Se()}),JC(()=>{var Ge;Ke(),(Ge=h.value)==null||Ge.clearGraphData()}),(Ge,et)=>{var qn,ne;const gt=ue("back-button"),dt=ue("el-text"),zt=ue("el-button"),je=ue("el-divider"),me=ue("Close"),xe=ue("el-icon"),vt=ue("AppIcon"),Wt=ue("MoreFilled"),Ot=ue("el-dropdown-item"),rn=ue("el-switch"),vn=ue("el-dropdown-menu"),An=ue("el-dropdown"),pn=ue("el-collapse-transition"),ft=ue("AppAvatar"),En=ue("AiChat"),Le=Lh("click-outside"),yn=Lh("loading");return hu((rt(),Dn("div",NJ,[ge("div",RJ,[ge("div",jJ,[F(gt,{onClick:ee}),ge("h4",null,Ve((qn=E.value)==null?void 0:qn.name),1),I.value&&N.value?(rt(),Dn("div",CJ,[F(dt,{type:"info",class:"ml-16 color-secondary"},{default:U(()=>[It(Ve(Ge.$t("views.applicationWorkflow.info.previewVersion"))+" "+Ve(B.value.name||Hr(k0)(B.value.update_time)),1)]),_:1})])):M.value?(rt(),Yt(dt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:U(()=>[It(Ve(Ge.$t("views.applicationWorkflow.info.saveTime"))+Ve(Hr(k0)(M.value)),1)]),_:1})):fr("",!0)]),I.value&&N.value?(rt(),Dn("div",DJ,[F(zt,{type:"primary",class:"mr-8",onClick:et[0]||(et[0]=Fn=>Q())},{default:U(()=>[It(Ve(Ge.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),F(je,{direction:"vertical"}),F(zt,{text:"",onClick:V},{default:U(()=>[F(xe,null,{default:U(()=>[F(me)]),_:1})]),_:1})])):(rt(),Dn("div",IJ,[F(zt,{icon:"Plus",onClick:et[1]||(et[1]=Fn=>O.value=!O.value)},{default:U(()=>[It(Ve(Ge.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),F(zt,{onClick:$e,disabled:S.value},{default:U(()=>[F(vt,{iconName:"app-play-outlined",class:"mr-4"}),It(" "+Ve(Ge.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),F(zt,{onClick:et[2]||(et[2]=Fn=>he(!0))},{default:U(()=>[F(vt,{iconName:"app-save-outlined",class:"mr-4"}),It(" "+Ve(Ge.$t("common.save")),1)]),_:1}),F(zt,{type:"primary",onClick:He},{default:U(()=>[It(Ve(Ge.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),F(An,{trigger:"click"},{dropdown:U(()=>[F(vn,null,{default:U(()=>[F(Ot,{onClick:X},{default:U(()=>[F(vt,{iconName:"app-history-outlined"}),It(" "+Ve(Ge.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),F(Ot,null,{default:U(()=>[F(vt,{iconName:"app-save-outlined"}),It(" "+Ve(Ge.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),ge("div",LJ,[F(rn,{size:"small",modelValue:j.value,"onUpdate:modelValue":et[4]||(et[4]=Fn=>j.value=Fn),onChange:H},null,8,["modelValue"])])]),_:1})]),_:1})]),default:U(()=>[F(zt,{text:"",onClick:et[3]||(et[3]=xn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:U(()=>[F(xe,{class:"rotate-90"},{default:U(()=>[F(Wt)]),_:1})]),_:1})]),_:1})]))]),F(pn,null,{default:U(()=>[hu(F(NM,{show:O.value,id:Hr(c),onClickNodes:de,onOnmousedown:Ce,workflowRef:h.value},null,8,["show","id","workflowRef"]),[[Le,Me]])]),_:1}),ge("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[E.value?(rt(),Yt(wJ,{key:0,ref_key:"workflowRef",ref:h,data:(ne=E.value)==null?void 0:ne.work_flow},null,8,["data"])):fr("",!0)],512),F(pn,null,{default:U(()=>{var Fn,wr,Lr,Kr;return[S.value?(rt(),Dn("div",{key:0,class:rd(["workflow-debug-container",k.value?"enlarge":""])},[ge("div",{class:rd(["workflow-debug-header",s.value?"":"custom-header"])},[ge("div",FJ,[ge("div",$J,[ge("div",BJ,[Hr(QC)((Fn=E.value)==null?void 0:Fn.icon)?(rt(),Yt(ft,{key:0,shape:"square",size:32,style:{background:"none"}},{default:U(()=>{var jn;return[ge("img",{src:(jn=E.value)==null?void 0:jn.icon,alt:""},null,8,UJ)]}),_:1})):(wr=E.value)!=null&&wr.name?(rt(),Yt(ft,{key:1,name:(Lr=E.value)==null?void 0:Lr.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):fr("",!0)]),ge("h4",null,Ve(((Kr=E.value)==null?void 0:Kr.name)||Ge.$t("views.application.applicationForm.form.appName.label")),1)]),ge("div",GJ,[F(zt,{link:"",onClick:et[5]||(et[5]=jn=>k.value=!k.value)},{default:U(()=>[F(vt,{iconName:k.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),F(zt,{link:"",onClick:et[6]||(et[6]=jn=>S.value=!1)},{default:U(()=>[F(xe,{size:20,class:"color-secondary"},{default:U(()=>[F(me)]),_:1})]),_:1})])])],2),ge("div",VJ,[F(En,{"application-details":E.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):fr("",!0)]}),_:1}),I.value?hu((rt(),Yt(kJ,{key:0,onClick:z,onRefreshVersion:Q},null,512)),[[Le,Y]]):fr("",!0)])),[[yn,_.value]])}}});export{tQ as default};
